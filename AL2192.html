<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"
	http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>monoliitti 2192</title>
<style>@font-face { font-family:'profont'; 			src:url('diodi/profontwindows-webfont.woff2')format('woff2'),
		url('diodi/profontwindows-webfont.woff') 	format('woff');	font-weight:normal; font-style:normal; }
	@font-face { font-family: 'de_valenciaregular'; src: url('diodi/de_valencia_beta-webfont.woff2') format('woff2'),
        url('de_valencia_beta-webfont.woff') 		format('woff'); font-weight: normal;font-style: normal;}
    @font-face { font-family: 'strike_fighter';    	src:url('diodi/strikefighter-webfont.woff2')format('woff2'),
    	url('diodi/strikefighter-webfont.woff') 	format('woff'); font-weight: normal; font-style: normal;}
    @font-face { font-family: 'VGA'; 				src: url('diodi/PerfectDOSVGA437.woff2') format('woff2'),
        url('diodi/PerfectDOSVGA437.woff') 			format('woff'); font-weight: normal; font-style: normal;}
        /*, url('diodi/PerfectDOSVGA437.svg#PerfectDOSVGA437') format('svg')*/
	html{height:100%;padding:0px;margin:0px;font-family:profont;font-size:13px;background-color:black;color:white;}
	body{height:100%;padding:0px;margin:0px;background-color:transparent;}
</style><!-- src="diodi/di0016.js"></script><!-aldiod--> <!-- src="diodi/dB0000.js"></script><!-devBar-->
<script src="diodi/jquery-2.js"></script><script>
window.addEventListener("resize", draw, true);
function draw(){ calcInterface( AL); predraw( AL); postinit( AL); }
function clearScreen(){var e=Array.from(document.querySelectorAll('svg')); e.forEach( function(e){ e.remove()})}
var AL={
	demo: 	{act:false,
		dummy: { first:"Demo", second:"Ferdinand", surname: "Figu", full:"Demo Ferdinand Figu", name:"Demo Figu"},
		puppet:{ white:-1, male:true, child:-1, legend:0}},
	defUser:false,
	dev: 	true,
	fe: 	"mosaic",
	fes: 	["dharma","money","mosaic","yozen","sygnal"],
	pages: 	["initUser"],
	pR: 	["MOQ","SOC","TMP","REL"],
	sG: [{fe:"dharma",sTs:["hello"],
			dis: 	 { mono:"", u:"sGN", d:"sGS", l:"sGW", r:"sGE", uL:"sGNW",	uR:"sGNE", 	dL:"sGSW", 	dR:"sGSE"}}],
	pN: [{fe:"mosaic",sTs:["hello","world"], 
			dis: 	 { mono:"", u:"mCAHo",d:"mCAHe",l:"mCCHo",r:"mCCHe",uL:"qRuLS",uR:"qRuRS",dL:"qRdLS",dR:"qRdRS"},
			override:{ mono:false,u:false,d:false,l:false,r:false}}],
	qU: [{fe:"sygnal",sTs:["hello"],
		 	dis: 	 { mono:"",	u:"", d:"", l:"prompt",r:"",	uL:"", 		uR:"mCSelf",dL:"", 		dR:"mCOther"},
			override:{ mono:false,u:false,d:false,l:true, r:false}}],
	qD: [{hnd:"prompt"  }],
	mC: [{hnd:"mCSelf"  },{hnd:"mCOther" },{hnd:"mCAHo" 	},{hnd:"mCAHe" 	},{hnd:"mCCHo" 	},{hnd:"mCCHe" 	}],
	qR: [{hnd:"qRuLS" 	},{hnd:"qRuRS" 	},{hnd:"qRdLS" 	},{hnd:"qRdRS" 	}],	kK: [{hnd:"..." }],
	reso: 	5,	fesLen: 0, 	sTs: []}
var sV =document.createElementNS( "http://www.w3.org/2000/svg","svg"); var nS =sV.namespaceURI;
function predraw( al){
	function mkM( x,y,w,h,c) 	{ var r=document.createElementNS( nS,'rect');
		r.setAttribute( 'x',x); r.setAttribute( 'y',y);r.setAttribute( 'width',w);
		r.setAttribute( 'height',h); r.setAttribute( 'fill',c);
		if(typeof cl!='undefined'){ r.setAttribute( 'class',cl) }return r}
	sV.setAttribute( 'height',window.innerHeight); sV.setAttribute( 'width',window.innerWidth);
    var g =mkM(266,25,25,66,'#00ff00'); var h =mkM(366,25,25,66,'h','#00ff00');	sV.appendChild( g);	sV.appendChild( h);
	for(var j=0; j < al.fesLen; j++){
		if( al.ui.features[j].nim ==al.fe){
			//console.log( al.ui.features[j]); console.log("j"); console.log( al.ui.features[j].dev.sB.sV);

			for(var i=0; i < al.ui.features[j].dev.sB.sV.dELen; i++){ sV.appendChild( al.ui.features[j].dev.sB.sV.dE[i])}
			if( al.ui.features[j].act.sT){ sV.appendChild( al.ui.features[j].dev.sT.sV)};
			if( al.ui.features[j].act.eX){ sV.appendChild( al.ui.features[j].dev.eX.sV)};
			if( al.ui.features[j].act.sQ){ sV.appendChild( al.ui.features[j].dev.sQ.sV)};
			if( al.ui.features[j].act.gR){ sV.appendChild( al.ui.features[j].dev.gR.sV)};
			if( al.ui.features[j].act.dB){ sV.appendChild( al.ui.features[j].dev.dB.sV)};

			if( al.ui.features[j].act.aM){ sV.appendChild( al.ui.features[j].dev.aM.sV)};
			if( al.ui.features[j].act.sH){ sV.appendChild( al.ui.features[j].dev.sH.sV)};
			if( al.ui.features[j].act.cA){ sV.appendChild( al.ui.features[j].dev.cA.sV)};
			//if( al.ui.features[j].act.mE){ sV.appendChild( al.ui.features[j].dev.mE.sV)};

			if( al.ui.features[j].act.sG){ sV.appendChild( al.ui.features[j].dev.sG.sV)};	
			if( al.ui.features[j].act.pN){ sV.appendChild( al.ui.features[j].dev.pN.sV)};
			//if( al.ui.features[j].act.qU){ sV.appendChild( al.ui.features[j].dev.qU.sV)};
			if( al.ui.features[j].act.mC){ sV.appendChild( al.ui.features[j].dev.mC.sV)};
			if( al.ui.features[j].act.kK){ sV.appendChild( al.ui.features[j].dev.kK.sV)};

			if( al.ui.features[j].act.pM){ sV.appendChild( al.ui.features[j].dev.pM.sV)};
			if( al.ui.features[j].act.yO){ sV.appendChild( al.ui.features[j].dev.yO.sV)};
			//if( al.ui.features[j].act.tT){ sV.appendChild( al.ui.features[j].dev.tT.sV)};
				}}}
$(document).ready( function(){ postinit( AL)})
function postinit( al){ askForUser( al.ui, al.demo, al.user)}

function mkDiffSpace( se){ }
function DiffractionPlane( nim,o1,f1,o2,f2,o3,f3,o4,f4){ this.nim=nim;
	this.c={ o1:o1,f1:f1,o2:o2,f2:f2,o3:o3,f3:f3,o4:o4,f4:f4}}
function precalcDiffSpace( t){var ys={ seed:null, c:null}; 
									ys.seed =new DiffractionPlane( "M",		false,false,
																			false,true, 
																			true, false,
																			true, true);
	ys.c =mkDiffSpace( ys.seed);return ys}
function mkType2( t){ t.c.x3= !t.c.x1; t.c.y3= !t.c.x1; t.c.x4 = t.c.x1; t.c.y4= !t.c.x1; return t}

//

AL.PP={ seed: ["PP00","PP01","PP10","PP11"]}
AL.LP={ seed: ["LP00","LP01","LP10","LP11"]}
AL.MD={ seed: ["Ke","Ki","Se","Si","Le","Li","Je","Ji"]}
AL.GD={ seed: ["M","F"]}
AL.AD={ seed: ["A","C"]}
AL.VD={ seed: ["I","E"]}
AL.ED={ seed: ["K","S","L","J"]}
AL.ID={ seed: ["Ri","Re","Fi","Fe","Ti","Te","Ni","Ne"]}


AL.Dice={ seed:["des","asc","rea","fro","sta","por","Bpx","Gpx","Bfx","Gfx","Bxn",
				"Gxn","Bxy","Gxy","Bpn","Gpn","Bpy","Gpy","Bfn","Gfn","Bfy","Gfy"],
	Di:function( n, ni, hoe, hot, hog){ var o={ n:n, ni:ni, hoe:hoe, hot:hot, hog:hog}; return o}}
function des( n, ds, chi, hom){ var o=AL.Dice.Di(n,"des",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function asc( n, ds, chi, hom){ var o=AL.Dice.Di(n,"asc",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function rea( n, ds, chi, hom){ var o=AL.Dice.Di(n,"rea",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function fro( n, ds, chi, hom){ var o=AL.Dice.Di(n,"fro",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function sta( n, ds, chi, hom){ var o=AL.Dice.Di(n,"sta",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function por( n, ds, chi, hom){ var o=AL.Dice.Di(n,"por",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpx( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bpx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpx( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gpx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfx( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bfx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfx( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gfx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bxn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bxn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gxn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gxn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bxy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bxy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gxy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gxy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bpn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gpn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bpy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gpy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bfn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfn( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gfn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Bfy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfy( n, ds, chi, hom){ var o=AL.Dice.Di(n,"Gry",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}

AL.Type={ seed: ["RIT","RET","RIF","REF","TIN","TEN","TIR","TER","FIN","FEN","FIR","FER","NIT","NET","NIF","NEF"],
	f1:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f2:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f3:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f4:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f5:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f6:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f7:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f8:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	a:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	b:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	c:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	d:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	e:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	f:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	g:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	h:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	i:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	j:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	k:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	l:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	Qp:function(p){var o={ anc:p};
		p.x? p.y? p.z?/*Ne*/o.nim="abc" :/*Ni*/o.nim="bca" : p.z?/*Fe*/o.nim="bac" :/*Fi*/o.nim="acb" :
			 p.y? p.z?/*Te*/o.nim="bac" :/*Ti*/o.nim="acb" : p.z?/*Re*/o.nim="bca" :/*Ri*/o.nim="cab";return o},
	TmSentPoli:function( ni){ switch( ni){ 	
	case "RIT":return "beta-AR"; case "RET":return "delta-AR";case "RIF":return "ABR-gamma";case "REF":return "ABR-alpha";
	case "TIN":return "ON-alpha";case "TEN":return "BN-gamma";case "TIR":return "BR-beta";	case "TER":return "OR-delta";
	case "FIN":return "ON-delta";case "FEN":return "BN-beta"; case "FIR":return "BR-gamma";	case "FER":return "OR-alpha";
	case "NIT":return"ABN-alpha";case "NET":return"ABN-gamma";case "NIF":return "AN-delta";	case "NEF":return "AN-beta"}},
	TmSentSent:function( ni){ switch( ni){ 	
		case "RIT":return "AUT"; 	case "RET":return "ARL"; 	case "RIF":return "ABV"; 	case "REF":return "DAR";
		case "TIN":return "DTH"; 	case "TEN":return "AAN"; 	case "TIR":return "DUT";	case "TER":return "DRL";
		case "FIN":return "ATT" ;	case "FEN":return "ASO"; 	case "FIR":return "DBV";	case "FER":return "AAR";
		case "NIT":return "ATH"; 	case "NET":return "DAN"; 	case "NIF":return "DTT";	case "NEF":return "DSO"}},
	TmSent:function( ni){ var sty ={ sent:"", poli:""}; sty.sent =this.TmSentSent( ni);
														sty.poli =this.TmSentPoli( ni);
														sty.engZodiacF =this.TmEngZodiacF( ni);
														sty.engZodiacM =this.TmEngZodiacM( ni);
														sty.finZodiacF =this.TmFinZodiacF( ni);
														sty.finZodiacM =this.TmFinZodiacM( ni);return sty},
	TmEngZodiacF:function( ni){ switch( ni){
	case"TEN":return"Mehiläinen"; 	case"NET":return"Ahma"; 	case"FEN":return"Kala"; 	case"NEF":return"Kissa";
	case"TIN":return"Panda"; 		case"NIT":return"Pöllö"; 	case"FIN":return"Norppa"; 	case"NIF":return"Mustekala";
	case"RET":return"Majava"; 		case"TER":return"Susi"; 	case"REF":return"Kilpikonna";case"FER":return"Lammas";
	case"RIT":return"Käärme"; 		case"TIR":return"Hämähäkki";case"RIF":return"Hauki"; 	case"FIR":return"Vesilintu"}},
	TmFinZodiacF:function( ni){ switch( ni){
	case"TEN":return"Bee"; 			case"NET":return"Wolverine";case"FEN":return"Fish"; 	case"NEF":return"Cat";
	case"TIN":return"Panda"; 		case"NIT":return"Owl"; 		case"FIN":return"Seal"; 	case"NIF":return"Octopus";
	case"RET":return"Beaver"; 		case"TER":return"Wolf"; 	case"REF":return"Turtle"; 	case"FER":return"Sheep";
	case"RIT":return"Snake"; 		case"TIR":return"Spider"; 	case"RIF":return"Pike"; 	case"FIR":return"Waterfowl"}},
	TmEngZodiacM:function( ni){ switch( ni){
	case"FIR":return"Driver"; 		case"RIF":return"Machine"; 	case"TIR":return"Cobbler"; 	case"RIT":return"Eagle";
	case"FER":return"Chief"; 		case"REF":return"Ringer"; 	case"TER":return"Blacksmith";case"RET":return"Mason";
	case"NIF":return"Meteor"; 		case"FIN":return"Sun"; 		case"NIT":return"Pilot"; 	case"TIN":return"Elf";
	case"NEF":return"Planet"; 		case"FEN":return"Star"; 	case"NET":return"Troll"; 	case"TEN":return"Leader"}},
	TmFinZodiacM:function( ni){ switch( ni){
	case"FIR":return"Lautturi"; 	case"RIF":return"Kone"; 	case"TIR":return"Suutari"; 	case"RIT":return"Kotka";
	case"FER":return"Päällikkö"; 	case"REF":return"Maestro"; 	case"TER":return"Seppä"; 	case"RET":return"Muurari";
	case"NIF":return"Meteoriitti"; 	case"FIN":return"Aurinko"; 	case"NIT":return"Lentäjä"; 	case"TIN":return"Haltia";
	case"NEF":return"Planeetta"; 	case"FEN":return"Tähti"; 	case"NET":return"Peikko"; 	case"TEN":return"Johtaja"}},
	Tm:function( n,z,x,y,X,Y,ni){
		var o={	n:n, ni:ni, z:z, y:y, x:x, sent:"", mili:"",
			x1:x, 		x2:X, 		x3:false, 	x4:false,	y1:y, 		y2:Y, 		y3:false, 	y4:false,
			x5:false, 	x6:false, 	x7:false, 	x8:false,	y5:false, 	y6:false, 	y7:false, 	y8:false};
		o.x3= !o.x; 	o.x5= !o.x; 		o.y3= !o.x2; 	o.y5= !o.y2; 
		o.x4= !o.x2; 	o.x6= !o.x2; 		o.y4= !o.y; 	o.y6= !o.y;
		o.x7=  o.x;  						o.y7=  o.x;
		o.x8=  o.x2; 						o.y8=  o.y2;
		o.f1=new this.f1(1, o.x3, o.y3, !o.z); o.f2=new this.f2(2, o.x4, o.y4, !o.z);
		o.f3=new this.f3(2, o.x1, o.y1, !o.z); o.f4=new this.f4(4, o.x2, o.y2, !o.z);
		o.f5=new this.f5(5, o.x3, o.y3, !o.z); o.f6=new this.f6(6, o.x4, o.y4, !o.z);
		o.f7=new this.f7(7, o.x1, o.y1, !o.z); o.f8=new this.f8(8, o.x2, o.y2, !o.z);
		o.a=new this.a( 1,  o.z,  o.x1, o.y1, o.x2, o.y2);
		o.b=new this.b( 2,  o.z,  o.x3, o.y3, o.x4, o.y4);
		o.c=new this.c( 3, !o.z,  o.x7, o.y7, o.x8, o.y8);
		o.d=new this.d( 4, !o.z,  o.x5, o.y5, o.x6, o.y6);
		o.e=new this.e( 5,  o.x1, o.y1, o.z, !o.z); 
		o.f=new this.f( 6,  o.x4, o.y4,!o.z,  o.z);
		o.g=new this.g( 7,  o.x3, o.y3,!o.z,  o.z);
		o.h=new this.h( 8,  o.x3, o.y3, o.z, !o.z);
		o.i=new this.i( 9,  o.z,  o.x4, o.y4, o.x1, o.y1);
		o.j=new this.j( 10,!o.z,  o.x7, o.y7, o.x6, o.y6);
		o.k=new this.k( 11,!o.z,  o.x8, o.y8, o.x5, o.y5);
		o.l=new this.l( 12, o.z,  o.x3, o.y3, o.x2, o.y2);
		o.sent =this.TmSent( ni);  	o.qp =this.Qp( o);	return o}}
function RIT( n,z,x,y,X,Y){var o=AL.Type.Tm( n,z,x,y,X,Y,"RIT");this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;
this.x1=o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function RET( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"RET"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function RIF( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"RIF"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function REF( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"REF"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function TIN( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"TIN"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function TEN( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"TEN"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function TIR( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"TIR"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function TER( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"TER"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function FIN( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"FIN"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function FEN( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"FEN"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function FIR( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"FIR"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function FER( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"FER"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function NIT( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"NIT"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function NET( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"NET"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function NIF( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"NIF"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}
function NEF( n,z,x,y,X,Y){ var o=AL.Type.Tm( n,z,x,y,X,Y,"NEF"); this.a=o.a;this.d=o.d;this.g=o.g;this.j=o.j;this.b=o.b;
this.e=o.e;this.h=o.h;this.k=o.k;this.c=o.c;this.f=o.f;this.i=o.i;this.l=o.l;this.f1=o.f1;this.f3=o.f3;this.f5=o.f5;this.f7
=o.f7;this.f2=o.f2;this.f4=o.f4;this.f6=o.f6;this.f8=o.f8;this.n=o.n;this.ni=o.ni;this.ve=o.ve;this.sent=o.sent;this.x=o.x;
this.y=o.y;this.z=o.z;this.x1=o.x1;this.x2=o.x2;this.x3=o.x3;this.x4=o.x4;this.x5=o.x5;this.x1=o.x5;this.x1=o.x5;this.x1=
o.x5;this.y1=o.y1;this.y2=o.y2;this.y3=o.y3;this.y4=o.y4;this.y5=o.y5;this.y1=o.y5;this.y1=o.y5;this.y1=o.y5;}

AL.Spirit={ seed: ["IM","OM","Im","Om","If","IF","Of","OF"],
	SpSent:function( ni){ switch(ni){
		case"IM": return "Adam"; 	case"OM": return "Man"; 	case"Im": return "Cain"; 	case"Om": return "Boy";
		case"If": return "Fatima"; 	case"IF": return "Eve"; 	case"Of": return "Girl"; 	case"OF": return "Woman";}},
	Qf:function( o){ switch(o.ni){
		case "IM": case "OM": o.val= this.Qp( "abc"); o.bad= this.Qp( "acb");return o;
		case "Im": case "Om": o.val= this.Qp( "abc"); o.bad= this.Qp( "cab");return o;
		case "If": case "Of": o.val= this.Qp( "bac"); o.bad= this.Qp( "acb");return o;
		case "IF": case "OF": o.val= this.Qp( "cba"); o.bad= this.Qp( "acb");return o}},
	Qp:function( nim){ switch( nim){
		case "abc": var r=new Quanta( "a","b","c"); return r;
		case "acb": var r=new Quanta( "a","c","b"); return r;
		case "bac": var r=new Quanta( "b","a","c"); return r;
		case "cba": var r=new Quanta( "c","b","a"); return r;
		case "bca": var r=new Quanta( "b","c","a"); return r;
		case "cab": var r=new Quanta( "c","a","b"); return r;}},
	Sp:function( n,ni,c,v,g){ var o={ n:n, ni:ni, chi:c, ver:v, mas:g,
		uR:"", 	uL:"", 	dR:"", 	dL:"", u:"", r:"", l:"", d:"" };
		if( g){if( v){ o.uR="S"; o.uL="O"; o.dR="C"; o.dL="L"; u="F"; r="R"; l="T"; d="N"}
				else { o.uR="L"; o.uL="C"; o.dR="O"; o.dL="S"; u="T"; r="N"; l="F"; d="R"}}
		else { if( v){ o.uR="L"; o.uL="O"; o.dR="C"; o.dL="S"; u="N"; r="T"; l="R"; d="F"}
				else { o.uR="S"; o.uL="C"; o.dR="O"; o.dL="L"; u="R"; r="F"; l="N"; d="T"}}
		o= this.Qf( o); o.sent= this.SpSent( ni); return o}}
function Quanta( l,s,d){ this.low=l; this.str=s; this.dia=d; var spi=quanType( l,s,d); this.spi=spi;}
function quanType( l,s,d){}
function IM( n,c,v,g){ var o=AL.Spirit.Sp(n,"IM",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function OM( n,c,v,g){ var o=AL.Spirit.Sp(n,"OM",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Im( n,c,v,g){ var o=AL.Spirit.Sp(n,"Im",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Om( n,c,v,g){ var o=AL.Spirit.Sp(n,"Om",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function If( n,c,v,g){ var o=AL.Spirit.Sp(n,"If",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function IF( n,c,v,g){ var o=AL.Spirit.Sp(n,"IF",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Of( n,c,v,g){ var o=AL.Spirit.Sp(n,"Of",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function OF( n,c,v,g){ var o=AL.Spirit.Sp(n,"OF",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}

AL.Context={ seed: ["L","C","O","S"], // l=logic d=dialectic
	Co:function( n,ni,l,d){	var o={ n:n, ni:ni, log:l, dia:d}; return o},
	Being:function( l,d){ var o={ log:l, dia:d}; return o}}
function L( n,l,d){ var o=AL.Context.Co(n,"L",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function C( n,l,d){ var o=AL.Context.Co(n,"C",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function O( n,l,d){ var o=AL.Context.Co(n,"O",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function S( n,l,d){ var o=AL.Context.Co(n,"S",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
/*                                                                                                              | /
                                                                                                               TÿE
                                                                                                              OÿŸÿNOB     ƒ
                                                                                                               ÿÿÿ
                                                                                                                Tÿÿ
                                                                                                                 Hÿÿ
                                                                                                                  Eÿÿ
                                                                                                                   ÿÿÿ
                                                                                              ÿ      ÿÿÿÿÿ¢        Wÿÿ
                                                                                               ÿÿÿ ÿÿÿÿÿÿÿÿÿÿ$     Hÿÿ
                                                                                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ€ TIÿÿÿ
                                                                                             ÿÿÿÿÿÿÿcamelÿcaseÿsEÿÿÿÿ
                                                                                              ÿÿÿÿÿÿlastÿseasonÿÿÿÿ
                                                                                                 ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ
                                                                                                   ÿÿ¥ÿÿÿÿÿÿ
                                                                                                    ÿ   ÿÿ 
                                                                                                    ÿÿ_   ÿÿÿ_  
                                                                               ..:::::''"""""""""""""''"''""¨¨¨¨¨¨¨*/
function mkDice(id){ var di=null; switch( id) { case "des":di=new des(  1, false,null, null ); return di;
	/* link to ordinal time here? */			case "asc":di=new asc(  2, true, null, null ); return di;
												case "Bpx":di=new Bpx(  3, false,false,null ); return di;
												case "Gpx":di=new Gpx(  4, true, false,null ); return di;
												case "Bfx":di=new Bfx(  5, false,true, null ); return di;
												case "Gfx":di=new Gfx(  6, true, true, null ); return di;
												case "Bxn":di=new Bxn(  7, false,null, false); return di;
												case "Gxn":di=new Gxn(  8, true, null, false); return di;
												case "Bxy":di=new Bxy(  9, false,null, true ); return di;
												case "Gxy":di=new Gxy( 10, true, null, true ); return di;				
												case "Bpn":di=new Bpn( 11, false,false,false); return di;
												case "Gpn":di=new Gpn( 12, true, false,false); return di;
												case "Bpy":di=new Bpy( 13, false,false,true ); return di;
												case "Gpy":di=new Gpy( 14, true, false,true ); return di;
												case "Bfn":di=new Bfn( 15, false,true, false); return di;
												case "Gfn":di=new Gfn( 16, true, true, false); return di;
												case "Bfy":di=new Bfy( 17, false,true, true ); return di;
												case "Gfy":di=new Gfy( 18, true, true, true ); return di;
												case "rea":di=new rea( 19, null, false,false); return di;
												case "fro":di=new fro( 20, null, false,true ); return di;
												case "sta":di=new sta( 21, null, true, false); return di;
												case "por":di=new por( 22, null, true, true );return di}}
function mkType(id){ var ty=null; switch( id){ 	case "RIT":ty=new RIT( 1, false, 	false,false,false,true ); return ty;
												case "RET":ty=new RET( 2, true , 	false,false,false,true ); return ty;
												case "RIF":ty=new RIF( 3, false, 	false,false,true, false); return ty;
												case "REF":ty=new REF( 4, true , 	false,false,true, false); return ty;
												case "TIN":ty=new TIN( 5, false, 	false,true, true, true ); return ty;
												case "TEN":ty=new TEN( 6, true , 	false,true, true, true ); return ty;
												case "TIR":ty=new TIR( 7, false, 	false,true, false,false); return ty;
												case "TER":ty=new TER( 8, true , 	false,true, false,false); return ty;
												case "FIN":ty=new FIN( 9, false, 	true, false,true, true ); return ty;
												case "FEN":ty=new FEN( 10,true , 	true, false,true, true ); return ty;
												case "FIR":ty=new FIR( 11,false, 	true, false,false,false); return ty;
												case "FER":ty=new FER( 12,true , 	true, false,false,false); return ty;
												case "NIT":ty=new NIT( 13,false, 	true, true, false,true ); return ty;
												case "NET":ty=new NET( 14,true , 	true, true, false,true ); return ty;
												case "NIF":ty=new NIF( 15,false, 	true, true, false,false); return ty;
												case "NEF":ty=new NEF( 16,true , 	true, true, false,false);return ty}}
function mkSpirit(id){ var sp=null; switch( id){case "IF":sp =new IF( 1, false,false,false); return sp;
												case "IM":sp =new IM( 2, false,false,true ); return sp;
												case "OF":sp =new OF( 3, false,true, false); return sp;
												case "OM":sp =new OM( 4, false,true, true ); return sp;
												case "If":sp =new If( 5, true ,false,false); return sp;
												case "Im":sp =new Im( 6, true ,false,true ); return sp;
												case "Of":sp =new Of( 7, true ,true, false); return sp;
												case "Om":sp =new Om( 8, true ,true, true );return sp}}
function mkContext(id){ var co=null;switch( id){case "O":co =new O( 1, false,false); return co;
												case "S":co =new S( 2, false,true ); return co;
												case "L":co =new L( 3, true, false); return co;
												case "C":co =new C( 4, true, true ); return co}}
function precalcDice( di) { var dis=[];var bu=null; for(var n=0; n < 22 ;n++){ bu=mkDice( di[n]); dis.push(bu)} return dis}
function precalcTypes( ty){ var tys=[];var bu=null; for(var n=0; n < 16 ;n++){ bu=mkType( ty[n]); tys.push(bu)} return tys}
function precalcSpirits(sp){var sps=[];var bu=null; for(var n=0; n < 8  ;n++){bu=mkSpirit(sp[n]); sps.push(bu)} return sps}
function precalcContexts(c){var cos=[];var bu=null; for(var n=0; n < 4  ;n++){bu=mkContext(c[n]); cos.push(bu)} return cos}
function precalcForest( al){ al.fL={};	al.fL.co = precalcContexts( al.Context.seed);
										al.fL.sp = precalcSpirits( 	al.Spirit.seed);
										al.fL.es = precalcTypes( 	al.Type.seed);
										al.fL.di = precalcDice( 	al.Dice.seed);}
function precalc() {
	precalcForest(AL); 		console.log( AL.fL);
	precalcInterface(AL);
}

function calcInterface(al){ 	var ui 					= precalcUserInterfaceTemplates( false,		al.reso,
																						 0, 		0,
																						 al.sG,	 	al.qU,
																						 al.qD,	 	al.pN,
																						 al.mC,	 	al.qR,
																						 al.kK, 	al.pR,
																						 al.pages);
								ui 						= measureWindow( ui);

								ui.pages 				= precalcUserInterfacePages( al,ui);
								
								ui.templates 			= precalcUserInterfaceTemplates( ui,		al.reso,
																						 ui.winWid, ui.winHei);
								//
								ui.templates.features 	= precalcFeatureTemplates( ui.templates, al.fes);
								//
								ui						= precalcFeatures( ui, ui.templates.features, al.fesLen);

								al.ui =ui;

}
function precalcInterface(al){
								AL.user = { curPa:'initUser', curFe:false, curFo:null,
											selChi:false, chi:false,
											//selWhi:true, whi:true,
											selMas:false,mas:true,
											selTy: false,tyN: "NET"}; calcInterface(al)}
								
								
					//if(al.dev){ predraw( ui)}
								//ui.templates.features 	= precalcToolsForFeatures( ui.templates.features,al.fes,al.fesLen);
								//ui.designs 				= precalcUserInterfaceTemplates( al.reso, ui.winWid, ui.winHei);
								//ui.designs.features 	= precalcFeatures( ui.designs, al.fes);
								//ui.templates.devices 	= precalcDevices( ui);
								//confUI( ui, sT);
								//calcUI( ui, sT);
								/*makeUI( ui, sT);*/

// Gram -> Plot?
// divert/convert in logic quadrant to forget/learn? divert/teach?
// ri manouvreability decide PP10 init of SEG?
//AL.user.ty = AL.fL.es.filter(function(o){return o.ni==AL.user.tyN})[0];
								 

function setUserAgeClick(id){AL.user.selChi=true;AL.user.chi= id.split("-").pop(); 	refreshUser( AL.ui,AL.demo,AL.user);}
function setUserAgeHilight(id){if(!AL.user.curFo==id){ AL.user.curFo= id;/*toho xxx */refreshUser( AL.ui,AL.demo,AL.user)}}
function setUserGenderClick(id){AL.user.selMas =true;AL.user.mas= id.split("-").pop();refreshUser( AL.ui,AL.demo,AL.user);}
function setUserGenderHilight(id){AL.user.curFo= id.split("-").pop(); 				refreshUser( AL.ui,AL.demo,AL.user)}





	//e.forEach( function(e){ e.addEventListener("mouseleave",function(){ c( AL.user.curFo =false)})})
	//e.forEach( function(e){ e.addEventListener("mousemove", function(){ c( "mousemove",	e.id,e.class)})});
	//e.forEach( function(e){ e.addEventListener("mouseout", function(){ c( "mouseout",	e.id,e.class)})});
	//e.forEach( function(e){ e.addEventListener("mouseout",  function(){ c( "mouseout",	e.id)})});
/* 	bindMany( '.pAIU_get', function(ev,id) 	{ switch(ev){ 	case "click" 	: setUserGenderClick( id); 	break;
															case "mouseover": setUserGenderHilight( id);break; }});
	bindMany( '.pAIU_agt', function(ev,id) 	{ switch(ev){ 	case "click" 	: setUserAgeClick( id); 	break;
															case "mouseover": setUserAgeHilight( id); 	break; }});*/
//function setUserTypeClick( e){ 	AL.user.tyN= e.id.split("-").pop(); 				AL.user.selTy =true; 			
//	AL.user.ty = AL.fL.es.find(o => o.ni === AL.user.tyN);							refreshUser( AL.ui,AL.demo,AL.user,e)
// e setattribute 

function uiFocusUserType( e){ 	hiliteUserType( AL.ui,AL.demo,AL.user,e)}
function uiChooseUserType( e){ 	chooseUserType( AL.ui,AL.demo,AL.user,e)}
function setUserTypeListener( e){ console.log("xyz");}
function bindMany( sel,c){ var e=Array.from(document.querySelectorAll( sel));
	e.forEach( function(e){ e.addEventListener("mouseover", function(){ c( "mouseover",	e)})});
	e.forEach( function(e){ e.addEventListener("mousedown", function(){ c( "mousedown", e)})});}
function listenForUser(){
	bindMany( '.pAIU_tBt', function(ev,e) 	{ switch(ev){ 	case "mousedown": uiChooseUserType( e); 	break;
															case "mouseover": uiFocusUserType( e); 	break; }}); }

function showPage( p){ for(var i=0; i < p.l; i++){sV.appendChild( p.e[i]); } document.body.appendChild( sV)}
function askForUser( ui,demo,usr){ console.log(usr);
	var p =AL.ui.pages.find(o => o.nim =='initUser');
  	if( demo.act){ demo.dummy =dbFullName( demo.puppet.finnish, demo.puppet.male, demo.puppet.child, demo.puppet.legend )}
	showPage( p); listenForUser()}
function clearPage(){
	var e=Array.from(document.querySelectorAll('.pAWrap')); console.log(e); e.forEach( function(e){ e.remove()})}
function hiliteUserType(ui,demo,usr,e){ if(!usr.selTy){hilitex( e,usr,ui.sty.pageIU)}}
function hilitex(e,usr,s){
	if(usr.curFo!=null){ if(usr.curFo!=e){ colTex( e,s.selBtT); colTex( usr.curFo,s.btT); usr.curFo =e}}
	else{ usr.curFo =e; colTex( usr.curFo,s.selBtT); }}
function colTex( e,c){ var r=e.id.split("-").pop(); var l=e.id.split("_").shift(); r=l+"_tBT-"+r;
	l =document.getElementById( r);	l.setAttribute('fill',c)}
function chooseUserType(ui,demo,usr,e){ var id = e.id.split("-").pop();
	if( usr.selTy &&(usr.ty.ni ==id)){ resetTy( id,usr,ui.sty.pageIU)}
	else{ resetEx( usr,ui.sty.pageIU); chooseT( e,usr,ui.sty.pageIU,id); }}
function resetTy( id,usr,s){ var
 	Id="#pAIU_tBt-"+usr.ty.ni; var e=document.querySelector(Id); e.setAttribute('fill',s.btB); usr.curFo=null;
	Id="#pAIU_tBT-"+usr.ty.ni; var e=document.querySelector(Id); e.setAttribute('fill',s.btT); usr.selTy=false;}
function resetEx( usr,s){ if(usr.selTy){ var
	id="#pAIU_tBt-"+usr.ty.ni; var e=document.querySelector(id); e.setAttribute('fill',s.btB);
	id="#pAIU_tBT-"+usr.ty.ni; var e=document.querySelector(id); e.setAttribute('fill',s.btT);}}
function chooseT(e,usr,s,id){
	if(usr.curFo!=null && usr.curFo!=e){ colTex(usr.curFo,s.btT)}
	e.setAttribute('fill',s.selBtB); colTex(e,s.selBtT);
	usr.ty = AL.fL.es.find(o => o.ni === id);	usr.selTy=true;}

function mkFeature( ui,t){ 
	if(t.act.sV){ t.sV =mkFeatureSVG( ui,t)}
	/*if(t.act.DOM){ t.dev.DOM =mkFeatureDOM( ui,t); if(t.act.sV){ t.dev.DOM.appendChild( t.dev.sV)}}*/ return t}
function mkFeatureDOM( ui,t){ var f =mkD( 0,0,ui.winWid,ui.winHei,t.nim,'transparent',t.nim ); return f}
function mkFeatureSVG( ui,t){ var f =mkL( 0,0,ui.winWid,ui.winHei,t.nim,ui.sty.b,t.nim,'' ); return f}

function precalcFeature( ui,template){ var fe =mkFeature( ui,template); ui.features.push( fe); }
function precalcFeatures( ui,templates,fesLen) {
	for(var i=0; i < fesLen; i++) { precalcFeature( ui,templates[i])} /*ui.fesLen =fesLen;*/ return ui}
function rePage( al,nim){ var e=mkL(10,10,25,25,"test","#ffffff","tester",false);
	sV.appendChild(e);
	for(var i=0; i<al.pagLen; i++){ if(al.ui.pages[i].nim==nim){
	console.log(al.ui.pages[i]);
	al.ui.pages[i]=mkPage( nim,al.ui); console.log(al.ui.pages[i]); showPage( al.ui.pages[i])}}}
function mkPage( nim,ui,usr){ var b; switch(nim) {
	case "initUser" : b =mkPageForInitUser( nim, ui.winWid, ui.winHei, ui.sty.pageIU, usr)} return b}
function precalcUserInterfacePages( al,ui){ var re=[]; var b;
	for(var i=0; i < ui.pagLen;i++){ b =mkPage(al.pages[i],ui,al.user); re.push( b)} return re}
function whatPageForInitUser( p){

	for(var i=0; i < p.L; i++){ console.log(p.E[i])}

	console.log('futoni');
	p.b=mkL(10,10,25,25,"test","#ffffff","tester",false); sV.appendChild( p.b); document.body.appendChild( sV);
	return p
}
function mkPageForInitUser( nim,winWid,winHei,s,usr){
	function usAt(t){ if(usr.selChi &&(usr.chi ==t)){ p.c.c= s.selBtB }else{ p.c.c= s.btB} return p.c}
	function usAT(t){ if(usr.selChi &&(usr.chi ==t)){ p.c.c= s.selBtT}
		else if( 	!usr.selChi && p.curFo==t){ p.c.c= s.selBtT}
		else{ p.c.c= s.btT} return p.c}
	function usGt(t){ if(usr.selMas &&(usr.mas ==t)){ p.c.c= s.selBtB }else{ p.c.c= s.btB} return p.c}
	function usGT(t){ if(usr.selMas &&(usr.mas ==t)){ p.c.c= s.selBtT}else if( 	!usr.selMas && p.curFo==t){ p.c.c= s.selBtT}else{ p.c.c= s.btT} return p.c}
	function usTt(t){ if(usr.selTy &&(usr.ty.ni==t)){ p.c.c= s.selBtB }else{ p.c.c= s.btB} return p.c}
	function usTT(t){ if(usr.selTy &&(usr.ty.ni==t)){ p.c.c= s.selBtT; 	p.c.x= b.x+b.h }
				else if(!usr.selTy && p.curFo==t ){ p.c.c= s.selBtT; 	p.c.x= b.x+s.bPD}
														else{ p.c.c= s.btT; 	p.c.x= b.x+s.bPD} return p.c}
	var b ={ w:s.btnWid, h:s.btnHei,	x:s.fraWid, xi:s.btnGrX,  	y:s.fraHei, yi:s.btnGrY };
	var p ={ nim:nim, e:[], l:0, E:[], L:0, c:{c:""}, curFo:""};
	if(usr.curFo){p.curFo=usr.curFo.id.split("-").pop()}
	
	b.e=mkLT(s.lP,s.tP,winWid-s.lP-s.rP,winHei-s.tP-s.bP,"pAIU","#123456","pAWrap",0.66); 				p.e.push( b.e);

	b.e=mkT(b.x,b.y-s.bPD,	"pAIU_txt-tx1",s.t,		"pAIU_txt",s.fonSiz,"USER AGE :"); 	p.e.push( b.e);b.x+=s.lV;
p.c=usAt("C");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_btn-C",p.c.c,"pAIU_agt",s.selBtB, s.btnBrd);p.e.push( b.e);
p.c=usAT("C");b.e=mkT(b.x+1,b.y-s.bPD,"pAIU_btT-C",p.c.c,"pAIU_agT",s.fonSiz,"CHILD");	p.e.push( b.e);b.x+=s.btnGrX;
p.c=usAt("A");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_btn-A",p.c.c,"pAIU_agt",s.selBtB, s.btnBrd);p.e.push( b.e);
p.c=usAT("A");b.e=mkT(b.x+1,b.y-s.bPD,"pAIU_btT-A",p.c.c,"pAIU_agT",s.fonSiz,"ADULT"); 	p.e.push( b.e);
	b.x=s.fraWid; b.y+=b.yi;
//'.class1, .class2'
/*	b.e=mkT(b.x,b.y-s.bPD,	"pAIU_txt-tx2",s.t, 	"pAIU_txt",s.fonSiz,"USER WHITE:"); p.e.push( b.e);b.x+=s.lV;
	b.e=mkL(b.x,b.y,b.h,b.h,"pAIU_btn-whn",s.btB,	"pAIU_btn",s.selBtB, s.btnBrd);		p.e.push( b.e);
	b.e=mkT(b.x+5,b.y-s.bPD,"pAIU_btT-whn",s.btT, 	"pAIU_btT",s.fonSiz,"N");p.e.push( b.e);b.x+=s.fonSiz*1.618;
	b.e=mkL(b.x,b.y,b.h,b.h,"pAIU_btn-why",s.btB,	"pAIU_btn",s.selBtB, s.btnBrd);		p.e.push( b.e);
	b.e=mkT(b.x+5,b.y-s.bPD,"pAIU_btT-why",s.btT, 	"pAIU_btT",s.fonSiz,"Y"); 	p.e.push( b.e);b.x+=s.btnGrX;
	b.e=mkL(b.x,b.y,b.h,b.h,"pAIU_btn-whc",s.btB,	"pAIU_btn",s.selBtB, s.btnBrd);		p.e.push( b.e);
	b.e=mkT(b.x+5,b.y-s.bPD,"pAIU_btT-whc",s.btT, 	"pAIU_btT",s.fonSiz,"C"); 	p.e.push( b.e);	b.x=s.fraWid; b.y+=b.yi;*/

	b.e=mkT(b.x,b.y-s.bPD,	"pAIU_txt-tx3",s.t, 	"pAIU_txt",s.fonSiz,"USER SEX :");p.e.push( b.e);b.x+=s.lV;
p.c=usGt("F");b.e=mkL(b.x,b.y,b.h,b.h,"pAIU_btn-F",p.c.c,"pAIU_get",s.selBtB, s.btnBrd);p.e.push( b.e);
p.c=usGT("F");b.e=mkT(b.x+5,b.y-s.bPD,"pAIU_btT-F",p.c.c,"pAIU_geT",s.fonSiz,"F"); 	p.e.push( b.e);b.x+=s.fonSiz*1.618;
p.c=usGt("M");b.e=mkL(b.x,b.y,b.h,b.h,"pAIU_btn-M",p.c.c,"pAIU_get",s.selBtB,s.btnBrd);	p.e.push( b.e);
p.c=usGT("M");b.e=mkT(b.x+5,b.y-s.bPD,"pAIU_btT-M",p.c.c,"pAIU_geT",s.fonSiz,"M"); 		p.e.push( b.e);
	b.x=s.fraWid; b.y+=b.yi;

	b.e=mkT(b.x,b.y-s.bPD, 	"pAIU_txt-tx4",s.t, 	"pAIU_txt",s.fonSiz,"USER TYPE:");	p.e.push( b.e);b.x+=s.lV;

	p.c=usTt("FIN");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-FIN",p.c.c,"pAIU_tBt",s.selBtB,s.btnBrd);p.e.push( b.e);
	p.c=usTT("FIN");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-FIN",p.c.c,"pAIU_tBT",s.fonSiz,"FIN");
	p.e.push(b.e);b.x+=b.xi;
	p.c=usTt("FIR");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-FIR",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("FIR");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-FIR",p.c.c,"pAIU_tBT",s.fonSiz,"FIR");p.e.push(b.e);b.x+=b.xi;
	p.c=usTt("FEN");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-FEN",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("FEN");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-FEN",p.c.c,"pAIU_tBT",s.fonSiz,"FEN"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("FER");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-FER",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("FER");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-FER",p.c.c,"pAIU_tBT",s.fonSiz,"FER"); p.e.push( b.e);
	b.x=s.fraWid+s.lV;b.y+=b.yi;
	p.c=usTt("NIF");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-NIF",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("NIF");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-NIF",p.c.c,"pAIU_tBT",s.fonSiz,"NIF"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("NIT");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-NIT",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("NIT");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-NIT",p.c.c,"pAIU_tBT",s.fonSiz,"NIT"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("NEF");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-NEF",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("NEF");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-NEF",p.c.c,"pAIU_tBT",s.fonSiz,"NEF"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("NET");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-NET",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("NET");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-NET",p.c.c,"pAIU_tBT",s.fonSiz,"NET"); p.e.push( b.e);
	b.x=s.fraWid+s.lV;b.y+=b.yi;
	p.c=usTt("RIF");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-RIF",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("RIF");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-RIF",p.c.c,"pAIU_tBT",s.fonSiz,"RIF"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("RIT");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-RIT",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("RIT");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-RIT",p.c.c,"pAIU_tBT",s.fonSiz,"RIT"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("REF");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-REF",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("REF");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-REF",p.c.c,"pAIU_tBT",s.fonSiz,"REF"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("RET");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-RET",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("RET");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-RET",p.c.c,"pAIU_tBT",s.fonSiz,"RET"); p.e.push( b.e);
	b.x=s.fraWid+s.lV;b.y+=b.yi;
	p.c=usTt("TIN");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-TIN",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("TIN");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-TIN",p.c.c,"pAIU_tBT",s.fonSiz,"TIN"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("TIR");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-TIR",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("TIR");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-TIR",p.c.c,"pAIU_tBT",s.fonSiz,"TIR"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("TEN");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-TEN",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("TEN");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-TEN",p.c.c,"pAIU_tBT",s.fonSiz,"TEN"); p.e.push( b.e);b.x+=b.xi;
	p.c=usTt("TER");b.e=mkL(b.x,b.y,b.w,b.h,"pAIU_tBt-TER",p.c.c,"pAIU_tBt",s.selBtB, s.btnBrd);p.e.push( b.e);
	p.c=usTT("TER");b.e=mkT(p.c.x,b.y-s.bPD,"pAIU_tBT-TER",p.c.c,"pAIU_tBT",s.fonSiz,"TER"); p.e.push( b.e);

	b.x=s.fraWid+s.mV+s.lV; b.y=s.fraHei+s.fraHei;
	p.e=mkC( p.e,b.x,b.y,s.cE,s.cE,"cUIU","#336688","cUIU",false,true,4,0.7);
	p.e=mkW( p.e,b.x,b.y,s.cE,s.cE,"#ddff66",1,4,0.38,"#99bbff","#ff88aa");
	//p.e=mkP( p.e,b.x,b.y,s.cE,s.cE,4);

	//p =whatPageForInitUser(p);
	b.e=mkL(10,10,25,25,"test","#ffffff","tester",false); hpE(b.e,p);

	p.L =p.E.length; p.l =p.e.length;

	shE( p.E,p.L);

	return p}
function hpE(e,p){ e.setAttribute('visibility','hidden'); p.e.push(e)}
function shE(a,l){ for(var i=0; i < l; i++){ a[i].setAttribute( 'visibility','visible')} /*console.log(a);*/}
function precalcUserInterfaceTemplates( src, reso, winWid, winHei, sG,qU,qD,pN,mC,qR,kK,pR,pages) {
	var s={ sBs:0, qUs:0, qDs:0, pNs:0, mCs:0, qRs:0, kKs:0, pRs:0, pL:0};
	if(src){s.sGs =src.sGs; 	s.qUs =src.qUs; 	s.qDs =src.qDs; 	s.pNs =src.pNs;
			s.mCs =src.mCs; 	s.qRs =src.qRs; 	s.kKs =src.kKs; 	s.pRs =src.pRs;		s.pL =src.pagLen; }
	else{ 	s.sGs =sG.length; 	s.qUs =qU.length; 	s.qDs =qD.length; 	s.pNs =pN.length;//length checks in caller already?
			s.mCs =src.mCs; 	s.qRs =qR.length; 	s.kKs =kK.length; 	s.pRs =pR.length; 	s.pL =pages.length; }
	var ui ={ sty : { b:"#000000",d:"#222222",	ledSVG:"#dddd00",ledDOM:"ff0000",ledGlo:"#00ff00",ledGloRad:6,
				pageIU : { b:"#123456", t:"#ff6600", btB:"#345678", btT:"#89abcd", selBtB:"#6789ab", selBtT:"#deefde", 
	lV:173, mV:452,bPL:10, bPD:7, cE:280, 		fraWid:66, 	fraHei:66, 	 
	rP:66, tP:25, lP:40, bP:19, 				btnWid:66, 	btnHei:25, 	btnGrX:88, 	btnGrY:40, 	fonSiz:25, 	btnBrd:2 }},
				 sV:null,DOM:null,state:null, 	winWid:0, 	winHei:0, overflow:false,
				 								features:[], fesLen:0,  pages:[], 	pagLen:s.pL,
		devices:{DOM:null,
/*SIDEBAR */sB:{ sV:null,DOM:null,state:null,	disWid:66, 	disHei:0, 	disHrz:0, 	disVrt:0,
												rowHei:39,	fesHei:0,	btnBrd:4, 	btnTOX:6, 	btnTOY:12 },
/*PROJECTr*/pR:{ sV:null,DOM:null,state:null, 	cloWid:0, 	cloHei:0, 	cloHrz:0, 	cloVrt:0,rowHei:19,
												opeWid:0, 	opeHei:0, 	opeHrz:0, 	opeVrt:0,pRs: s.pRs },
/*SEQUENCr*/sQ:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,rowHei:0,rowNum:5,rowOff:0 },
/*SUPERTAB*/sT:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,tabHei:0,tabWid:0},
/*SHOTGUN*/ sH:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*CANNON*/ 	cA:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,disCal:0},
/*AMMO*/ 	aM:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*EXPLORER*/eX:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*GRAM    */gR:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*DEVBAR  */dB:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0,	disHrz:0, 	disVrt:0},
/*DIALOG  */dG:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0,	disHrz:0, 	disVrt:0},
/*SYSGRID */sGs: s.sGs,
			sG:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0,  	disHrz:0, 	disVrt:0,
												fldWid:0,	fldHei:0,	furHei:0,
												qdrWid:0,	qdrHei:0,	fraThi:15,
				dis:{  		mono:null, uL:null, uR:null, dL:null, dR:null, 	u:null,  d:null,  l:null,  r:null}},
/*QUAD    */qUs: s.qUs, qDs: s.qDs,
			qU:{ sV:null,DOM:null,state:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,
												cntHrz:0, 	cntVrt:0,	halWid:0, 	halHei:0,
dis:{
	mono:{scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
	uR: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},	uL:{ scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
	dL: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},	dR:{ scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
	u : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},	l :{ scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
	d : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},	r :{ scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0}},
override:{mono:false, u:false, d:false, l:false, r:false}},
/*PANDA   */pNs: s.pNs,
			pN:{ sV:null,DOM:null,state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, cntHrz:0, cntVrt:0,
												prjSca:5, 	prjLen:3, 	prjHAp:2, 			  edgHrz:0, edgVrt:0,
												laReso:reso,loReso:reso,elReso:reso,
dis: { fro:null, rea:null, sta:null, por:null, asc:null, des:null, uL:null, uR:null, dL:null, dR:null}},
/*MOSAIC  */mCs: s.mCs,
			mC:{ sV:null, 		   state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, cntHrz:0, cntVrt:0,
												froWid:0, 	froHei:0, 	froTiW:0, 	froTiH:0, froHrz:0, froVrt:0,
												latWid:0, 	latHei:0, 	latTiW:0, 	latTiH:0, porHrz:0, porVrt:0,
																							  staHrz:0, staVrt:0,
												eleWid:0, 	eleHei:0, 	eleTiW:0, 	eleTiH:0, ascHrz:0, ascVrt:0,
																							  desHrz:0, desVrt:0,
												reaWid:0, 	reaHei:0, 	reaTiW:0, 	reaTiH:0, reaHrz:0, reaVrt:0,
												xReso:reso, yReso:reso, zReso:reso,
												prjSca:5, 	prjLen:2, 	prjApe:3,
												modHrz:0, 	modVrt:0},
/*TOWER   */qRs: s.qRs,
			qR:{ sV:null, 		   state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, tilWid:0, tilHei:0},
/*KAKARA  */kKs: s.kKs,
			kK:{ sV:null, 		   state:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0 },
/*GRIDLOCK*/gL:{ 								disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,
												scrWid:0, 	scrHei:0, 	scrHrz:0, 	scrVrt:0,
												lVX:40,	mVX:173, tHY:40, THY:25, mHY:106, bHY:75, dBH:19 },
/*YOZEN   */yO:{ sV:null, 		   state:null, disWid:0, disHei:0, disHrz:0, disVrt:0, lVX:0, mVX:0, tHY:0, mHY:0 }}};
	if( winWid > 0){ ui.winWid =winWid; ui.winHei =winHei} return ui}
function precalcDevicesForFeature( ui,feNim,act,qU){
	var dev={ 	DOM:null,sB:null, pR:null, tT:null, gL:null,
				sQ:null, aM:null, sH:null, cA:null, mE:null,
				sT:null, eX:null, gR:null, dB:null, dG:null, pM:null,
				sG:null, qU:null, pN:null, mC:null, kK:null, yO:null };
	if(act.sB){ dev.sB = mkSidebar( 	ui, feNim,				act.sV);
				dev.pR = mkProjector( 	ui, feNim, 				act.sV);
				/*dev.tT = mkToolTips( 	ui, feNim, 				act.sV)*/}
	if(act.gL){ dev.gL = mkGridlock( 	ui, feNim)}
	if(act.sQ){ dev.sQ = mkSequencer( 	ui, feNim,	act.DOM,	act.sV)}
	if(act.sT){ dev.sT = mkSuperTabs( 	ui, feNim,	act.DOM,	act.sV)}

	if(act.aM){ dev.aM = mkAmmo( 		ui, feNim, 	act.DOM, 	act.sV, 	dev.gL)}
	if(act.sH){ dev.sH = mkShotgun( 	ui, feNim, 	act.DOM, 	act.sV, 	dev.aM)}
	if(act.cA){ dev.cA = mkCannon( 		ui, feNim, 	act.DOM, 	act.sV, 	dev.aM)}
	if(act.eX){ dev.eX = mkExplorer( 	ui, feNim,	act.DOM,	act.sV)}
	if(act.gR){ dev.gR = mkGram( 		ui, feNim,	act.DOM,	act.sV)}
	if(act.dB){ dev.dB = mkDevBar( 		ui, feNim,	act.DOM,	act.sV)}
	if(act.dG){ dev.dG = mkDialog( 		ui, feNim,	act.DOM,	act.sV, 	dev.gL)}

	if(act.sG){ dev.sG = mkSystemGrid( 	ui, feNim, 	act.DOM)}
	if(act.qU){ dev.qU = mkQuad( 		ui, feNim, 				act.sV, 				qU); 
				dev = mkQuad2( 			ui,	feNim, 							dev, 		qU)}
	if(act.pN){ dev.pN = mkPanda( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.mC){ dev.mC = mkMosaic( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.kK){ dev.kK = mkLakara( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.yO){ dev.yO = mkYozen( 		ui, feNim, 				act.sV, 	dev.gL)}
	return dev; }
function qDFind( qU,id){ /*cC( "*** qDFind ***");cC(qU);cC(id);*/ if( qU.mono==id){ return "mono"}
		 if( qU.uR==id){ return "uR"}else if( qU.uL==id){ return "uL"}
	else if( qU.dL==id){ return "dL"}else if( qU.dR==id){ return "dR"}
	else if( qU.d ==id){ return "d" }else if( qU.r ==id){ return "r" }
	else if( qU.u ==id){ return "u" }else if( qU.l ==id){ return "l" }else{ return ""}}
function qdFind2( qD,qU){ switch( qD){ case "mono": return qU.disDim.mono;
	case "uR": return qU.disDim.uR; 	case "uL": return qU.disDim.uL;
	case "dR": return qU.disDim.dR; 	case "dL": return qU.disDim.dL;
	case "u" : return qU.disDim.u; 		case "d" : return qU.disDim.d;
	case "r" : return qU.disDim.r; 		case "l" : return qU.disDim.l;}}
function mkQuad5( ui,dev,feNim,parent,dim){ switch( hnd){ 					 case 'mCSelf':
	ui.act.mC =true; parent = mkMosaic( ui, id, true, 	parent); return dev; case 'mCOther':
	ui.act.mC =true; parent = mkMosaic( ui, id, true, 	parent); return dev; case 'kakara':
	ui.act.kK =true; parent = mkLakara( ui, id, true, 	parent); return dev; case 'prompt':
	ui.act.pM =true; parent = mkPrompt( ui, id, true, 	parent); return dev}}
function mkQuad4( ui,dev,id,qU,dim) { if( qU.mono!=""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.mono,dim)}
									if( qU.uR != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.uR, 	dim)}
									if( qU.uL != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.uL, 	dim)}
									if( qU.dR != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.dR, 	dim)}
									if( qU.dL != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.dL, 	dim)}
									if( qU.u != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.u, 	dim)}
									if( qU.d != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.d, 	dim)}
									if( qU.r != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.r, 	dim)}
									if( qU.l != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.l, 	dim)}}
function cC(n,v){ console.log(n);console.log(v)}
function mkQuad3( ui,feNim,dev,qU,id){ /*cC( "*** mkQuad3 ***"); cC(ui);cC(feNim);cC(dev);cC(qU);cC(id);*/
	var qD =qDFind( qU,id); if( qD==""){ return dev} else{
	qD = qdFind2( qD,dev.qU); dev =mkQuad4( ui,dev,id,qU,qD)} return dev}
function mkQuad2( ui,feNim,dev,qU){ /*cC("*** mkQuad2 ***");cC.log( ui);cC.log( feNim);cC.log( dev);cC.log( qU);*/
	dev = mkQuad3( ui,feNim,dev,qU,'mCSelf');
	dev = mkQuad3( ui,feNim,dev,qU,'mCOther');
	dev = mkQuad3( ui,feNim,dev,qU,'kakara');
	dev = mkQuad3( ui,feNim,dev,qU,'prompt'); /*cC(dev);*/ return dev}
function mkSidebar( ui,feNim,sV){ 		var re=new Sidebar( ui,feNim,sV); 			re =mkSidebarElements( re);return re}
function mkProjector( ui,feNim,sV){ 	var re=new Projector( ui,feNim,sV); 		re =mkProjectorElems( ui,re);return re}
function mkToolTips( ui,fe,sV) { 		var re=new ToolTips( ui,fe,sV); 			re =mkToolTipsElements( re);return re}
function mkGridlock( ui,feNim) 		{ 	var re=new Gridlock( ui,feNim);return re}
function mkSuperTabs( ui,feNim,DOM,sV){ var re=new SuperTabs( ui,feNim,DOM,sV); 	re =mkSuperTabsElements( re);return re}
function mkSequencer( ui,feNim,DOM,sV){ var re=new Sequencer( ui,feNim,DOM,sV); 	re =mkSequencerElements( re);return re}
function mkAmmo(ui,fe,sV,DOM,parent) {  var re=new Ammo( ui,fe,DOM,sV,parent); 		re =mkAmmoElements(re);return re}
function mkShotgun( ui,fe,DOM,sV,par){  var re=new Shotgun( ui,fe,DOM,sV,par); 		re =mkShotgunElements( re);return re}
function mkCannon( ui,fe,DOM,sV,par){   var re=new Cannon( ui,fe,DOM,sV,par); 		re =mkCannonElements( re);return re}
function mkExplorer( ui,feNim,DOM,sV){	var re=new Explorer( ui,feNim,DOM,sV); 		re =mkExplorerElements( re);return re}
function mkGram( ui,feNim,DOM,sV){ 		var re=new Gram( ui,feNim,DOM,sV);	 		re =mkGramElements( re);return re}
function mkDevBar( ui,feNim,DOM,sV){ 	var re=new DevBar( ui,feNim,DOM,sV); 		re =mkDevBarElements( re);return re}
function mkSystemGrid( ui,feNim,DOM){ 	var re=new SystemGrid( ui,feNim,DOM); 		re =mkSystemGridElements(re);return re}
function mkQuad( ui,hnd,sV,qU){ 		var re=new Quad( ui,hnd,sV,qU); 			re =caQuad( re,qU);return re}
function mkPanda( ui,hnd,sV,par){ 		var re=new Panda( ui,hnd,sV,par);return re}
function mkTower( ui,hnd,sV,par){ 		var re=new Tower( ui,hnd,sV,par); 			re =mkTowerElements( re);return re}
function mkDialog( ui,feNim,DOM,sV,p){  var re=new Dialog( ui,feNim,DOM,sV,p); 		re =mkDialogElements( re);return re}
function mkMosaic( ui,feNim,sV,parent){ var re=new Mosaic( ui,feNim,sV,parent); 	re =mkMosaicElements( re); return re}
function mkMeter( ui,feNim,sV,parent){  var re=new Meter( ui,feNim,sV,parent); 		re =mkMeterElements( re); return re}
function mkKakara( ui,feNim,sV,parent){ var re=new Kakara( ui,feNim,sV,parent); 	re =mkLakaraElements( re);return re}
function mkYozen( ui,feNim,sV,parent){  var re=new Yozen( ui,feNim,sV,parent); 		re =mkYozenElements( re);return re}
function Sidebar( ui,feNim,SVG){ this.ui =ui;  this.actSVG =SVG; this.sV =null; this.feNim=feNim;
	this.disWid =ui.devices.sB.disWid; 				this.disHei =ui.winWid;
	this.disHrz =ui.winWid -ui.devices.sB.disWid; 	this.disVrt=ui.devices.sB.disVrt;
	this.rowHei=ui.devices.sB.rowHei; 				this.btnBrd=ui.devices.sB.btnBrd;
	this.btnTOX=ui.devices.sB.btnTOX; 				this.btnTOY=ui.devices.sB.btnTOY;
	this.fesHei =ui.fesLen * ui.devices.sB.rowHei;
	var sty={ fnt:15, brd:3, d:AL.coGrid,
		btnTxt:"#cccccc",	btnU:"#444444",		btnR:"#111111",		btnD:"#080808",		btnL:"#333333", 	sel:"#111111",
		selTxt:"#ffffff",	selU:"#000000",		selR:"#444444",		selD:"#777777",		selL:"#080808", 	btn:"#333333",
		bG:"#222222"};
	this.sty =sty; }
function Projector( ui,feNim,SVG){this.ui=ui; this.feNim=feNim; this.actSVG=true;
	this.cloWid=ui.devices.sB.disWid;  							this.opeWid=ui.devices.sB.disWid; 
	this.cloHei=ui.devices.pR.rowHei; 							this.opeHei=(ui.pagLen + 1) * ui.devices.pR.rowHei;
	this.cloVrt=ui.devices.sB.fesHei; 							this.opeVrt=ui.devices.sB.fesHei;
	this.cloHrz=ui.devices.sB.disHrz; 							this.opeHrz=ui.devices.sB.disHrz;
	this.sV=null; var sty={ bG:"#444444"}; this.sty =sty;}
function ToolTips( ui,feNim,SVG){ this.ui=ui; this.feNim=feNim; this.disWid=ui.devices.sB.disWid; 
	this.actSVG =SVG; this.sV =null; this.disVrt =ui.winWid -ui.devices.sB.disWid; this.toolArr =[];
	var sty={ bG:"#888888"};
	this.sty =sty; }
function Gridlock( ui,feNim){ this.ui =ui; this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid;
	this.disHei =ui.winHei; this.disHrz =ui.devices.gL.disHrz; this.disVrt =ui.devices.gL.disVrt;
	this.lVX =ui.devices.gL.lVX; this.mVX =ui.devices.gL.mVX; this.tHY =ui.devices.gL.tHY; this.THY =ui.devices.gL.THY;
	this.mHY =ui.devices.gL.mHY; this.bHY =ui.devices.gL.bHY; this.scrHrz =ui.devices.gL.mVX +ui.devices.gL.lVX;
	this.scrVrt =ui.devices.gL.tHY;	this.scrWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY;
	/*switch( feNim){ case "dharma" : this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY; break;
					case "mosaic" : this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY; break}*/}
function Sequencer( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.devices.gL.lVX; this.disHei =ui.winWid;
	this.disHrz =ui.devices.sQ.disHrz; this.disVrt =ui.devices.sQ.disVrt;
	this.rowHei =Math.floor((ui.devices.gL.bHY / ui.devices.sQ.rowNum) - (ui.devices.sQ.rowOff / ui.devices.sQ.rowNum));
	var sty = {
		bG:"#000000",		btnTxt:"#888888",	sel:"#555555",		selTxt:"#cccccc"};
	this.sty =sty; }
function SuperTabs( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX; this.disHei =ui.devices.gL.tHY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.sT.disVrt;
	this.tabHei =ui.devices.gL.THY; this.tabWid =ui.devices.gL.mVX;
	var sty = { rad:6,
		bG:"#000000",		d:AL.coGrid, 		brd:"#555555", 		txt:"#888888", 		sel:"#ffffff"};
	this.sty =sty;}
function Ammo( ui,feNim,DOM,SVG,parent){ this.ui =ui;this.actDOM=DOM;this.DOM=null;this.actSVG=SVG;this.sV=null;
	this.feNim=feNim; 	
						this.disWid =parent.scrWid; this.disHei =parent.scrHei;
						this.scrWid =parent.scrWid; this.scrHei =parent.scrHei;
						this.disVrt =parent.scrVrt; this.disHrz =parent.scrHrz;
						this.scrVrt =parent.scrVrt; this.scrHrz =parent.scrHrz;
	var sty = {
		bG:"#000000", 	bel:"#cccc88",
		ori:"#ffffff", 	oriTxt:"#000000", dup:"#cccccc", dupTxt:"#888888", tra:"#220000", traTxt:"#cc0000"};
	this.sty = sty; }
function Shotgun( ui,feNim,DOM,SVG,ammo){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.ammo =ammo; this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.bHY +ui.devices.gL.mHY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY +ui.devices.gL.bHY +ui.devices.gL.mHY;
	var sty = {
		bG:"#cccc88", 	brd:"#ffffff", txt:"#ffffff", dup:"#cccccc", not:"#8888cc"};
	this.sty =sty;}
function Cannon( ui,feNim,DOM,SVG,ammo){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.ammo =ammo; this.feNim=feNim; this.disWid =ammo.disWid;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY;// -ui.devices.gL.bHY;// -ui.devices.gL.dBH;
	this.disHrz =ui.devices.gL.lVX;	this.disVrt =ui.devices.gL.tHY; this.disCal =ui.devices.cA.disCal;
	var sty = {
		bG:"#cccc88", 	brd:"#ffffff", txt:"#ffffff", dup:"#cccccc", not:"#8888cc"};
	this.sty =sty; }
function Explorer( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.devices.gL.mVX; this.disHei =ui.winHei -ui.devices.gL.THY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.gL.THY;
	var sty = { 
		bG:AL.coGrid, 		disL:"#ffffff", 	disD:"#cccccc", 	brd:"#999999", 		disCvr:"#555555"};
	this.sty =sty;}
function Gram( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX; this.disHei =ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.dBH;
	var sty = { brdWid:3,
		bG:AL.coGrid,	d:"#000000"};
	this.sty =sty;}
function DevBar( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.dBH;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.winHei -ui.devices.gL.dBH;
	var sty = { pad:3, 
		bG:"#000000",  txt:"#00ff00"};
	this.sty =sty;}
function Dialog( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.mHY; this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX;
	this.disVrt =ui.winHei -ui.devices.gL.mHY -ui.devices.gL.tHY;
	var sty = { pad:5,
		bG:AL.coGrid, 	d:"#ffffff", 		brd:"#cccccc"};
	this.sty =sty;}
function Quad( ui,feNim,SVG,templates){
	this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.qDs =ui.devices.qU.qDs;
	this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY;
	this.cntHrz =(ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX)/2;
	this.cntVrt =(ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY)/2;
	this.halWid =Math.floor((ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX)/2);
	this.halHei =Math.floor((ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY)/2);
	this.dis =ui.devices.qU.dis;
	var sty={
		bG:"#220033"};
	this.sty =sty}
function caQuad( qU,qD){
	qU.dis.uR.scrWid=qU.halWid;
	qU.dis.uR.scrHei=qU.halHei; qU.dis.uL.scrWid=qU.halWid; qU.dis.uL.scrHei=qU.halHei;
	qU.dis.dL.scrWid=qU.halWid; qU.dis.dR.scrHei=qU.halHei; qU.dis.dR.scrWid=qU.halWid; qU.dis.dR.scrHei=qU.halHei;
	qU.dis.u.scrWid =qU.disWid; qU.dis.u.scrHei =qU.halHei; qU.dis.l.scrWid =qU.halWid; qU.dis.l.scrHei =qU.disHei;
	qU.dis.d.scrWid =qU.disWid; qU.dis.u.scrHei =qU.halHei; qU.dis.r.scrWid =qU.halWid; qU.dis.r.scrHei =qU.disHei;
	qU.dis.uR.scrHrz=Math.ceil(qU.cntHrz); 	qU.dis.uR.scrVrt=qU.disVrt;
	qU.dis.uL.scrHrz=qU.disHrz; 			qU.dis.uL.scrVrt=qU.disVrt;
	qU.dis.dR.scrHrz=Math.ceil(qU.cntHrz); 	qU.dis.dR.scrVrt=Math.ceil(qU.cntVrt);
	qU.dis.dL.scrHrz=qU.disHrz; 			qU.dis.dL.scrVrt=Math.ceil(qU.cntVrt);
	qU.dis.u.scrHrz =qU.disHrz; 			qU.dis.u.scrVrt =qU.disVrt;
	qU.dis.l.scrHrz =qU.disHrz; 			qU.dis.l.scrVrt =qU.disVrt;
	qU.dis.d.scrHrz =qU.disHrz; 			qU.dis.d.scrVrt =Math.ceil(qU.cntVrt);
	qU.dis.r.scrHrz =Math.ceil(qU.cntHrz); 	qU.dis.r.scrVrt =Math.ceil(qU.cntVrt);
	qU.dis.mono.scrHrz =qU.disHrz; 			qU.dis.mono.scrVrt =qU.disVrt;
	qU.dis.mono.scrWid =qU.disWid; 			qU.dis.mono.scrHei =qU.disHei;return qU}
function SystemGrid( ui,feNim,DOM){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.feNim=feNim;
	this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY;
	var sty={
		bG:"#448844",	arm:"#888844",		brd:"#ffff88",		leg:"#222244"};
	this.sty =sty;}
function Panda( ui,fe,SVG,parent){ this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=fe; this.parent=parent;
	this.disWid =parent.scrWid; this.disHei =parent.scrHei; this.disHrz =parent.scrHrz; this.disVrt =parent.scrVrt;
	this.cntHrz =parent.scrWid / 2; 	this.cntVrt =parent.scrHei / 2;
	this.prjSca =ui.devices.pN.prjSca; 	this.prjLen =ui.devices.pN.prjLen; 	this.prjHAp =ui.devices.pN.prjHAp;
	this.edgHrz =(parent.scrWid / 2) * (ui.devices.pN.prjLen / ui.devices.pN.prjSca);
	this.edgVrt =(parent.scrHei / 2) * (ui.devices.pN.prjLen / ui.devices.pN.prjSca);
	this.laReso =ui.devices.pN.laReso; 	this.loReso =ui.devices.pN.loReso; 	this.elReso =ui.devices.pN.elReso;
	this.dis = ui.devices.pN.dis;
	var sty ={
		bG:"#220000"}
	this.sty =sty}
function Mosaic( ui,feNim,SVG,parent){ this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.scrWid; this.disHei =parent.scrHei; this.disHrz =parent.scrHrz; this.disVrt =parent.scrVrt;
	this.cntHrz =Math.floor( parent.scrWid / 2); 	//laterthis.modHrz =(parent.disWid/2) -Math.floor(parent.disWid/2);
	this.cntVrt =Math.floor( parent.scrHei / 2); 	//this.modVrt =(parent.disWid/2) -Math.floor(parent.disWid/2);
	this.froTiW =Math.floor((parent.scrWid * (ui.devices.mC.prjApe / ui.devices.mC.prjSca)) / ui.devices.mC.xReso);
	this.froTiH =Math.floor((parent.scrHei * (ui.devices.mC.prjApe / ui.devices.mC.prjSca)) / ui.devices.mC.yReso);
	this.latTiW =Math.floor((parent.scrWid * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)) / ui.devices.mC.zReso);
	this.latTiH =Math.floor((parent.scrHei - (parent.scrHei * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.yReso);
	this.eleTiW =Math.floor((parent.scrWid - (parent.scrWid * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.xReso);
	this.eleTiH =Math.floor((parent.scrHei - (parent.scrHei * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.zReso);
	this.reaTiW =Math.floor( parent.scrWid / ui.devices.mC.xReso);
	this.reaTiH =Math.floor( parent.scrHei / ui.devices.mC.yReso);
	var sty={
		bG:"#000022"};
	this.sty=sty; }
function Tower( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG=SVG; this.sV=null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#000022"}
	this.sty=sty}
function Kakara( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#ee00aa"};
	this.sty=sty; }
function Yozen( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG =SVG; this.sV=null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#eeeeaa"};
	this.sty=sty; }


function mkT(x,y,id,co,cl,fonSiz,txt,fonFam){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
			if(fonSiz!=false){ 	t.setAttribute( 'font-size',fonSiz)}
				if( id!=false){ t.setAttribute( 'id', 	id) }
				if( co!=false){ t.setAttribute( 'fill', co) }
				if( cl!=false){ t.setAttribute( 'class',cl) }
								t.setAttribute( 'pointer-events', 'none');
								t.textContent =txt; return t}
function mkTFun(x,y,id,co,cl,fonSiz,txt,fonFam,op){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
			if(fonSiz!=false){ 	t.setAttribute( 'font-size',fonSiz)}
			if(fonFam!=false){ 	t.setAttribute( 'font-family',fonFam)}
				if(op!=false){ 	t.setAttribute( 'opacity',op)}
				if( id!=false){ t.setAttribute( 'id', 	id) }
				if( co!=false){ t.setAttribute( 'fill', co) }
				if( cl!=false){ t.setAttribute( 'class',cl) }
								t.textContent =txt; return t}
//b.e=mkTFun(b.x,b.y,"cUIUFun-1","#662525","cUIUFun",66,"1","strike_fighter",0.5);
function mkC(c,x,y,w,h,id,co,cl,xA,yA,d,op){ var e=null; var v="";
	if(!xA){ if(!yA){ 	e =mkK(x+(w/d),y+(h/d),w,h,id+"-btm",co,cl+"-btm",op); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x-(w/d),	y-(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e)}
				else{
						v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-hrz",op);c.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-top",op);c.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-btm",op/1.618);c.push(e);
						v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+
							(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
							(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+
							(x + (w/2)-(w/d)+","+(y+h+(h/d)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-vrt",op);c.push(e);

						e =mkK(x+(w/d),	y-(h/d),w,h,id+"-btm",co,cl+"-btm",op); 		c.push(e);
						e =mkK(x, 		y, 		w,h,id+"-mid",co,cl+"-mid",op/1.618);	c.push(e);
						e =mkK(x-(w/d),	y+(h/d),w,h,id+"-top",co,cl+"-top",op);			c.push(e);

	e=mkTFun(x+11, 				y-9,		"cUIUFun-1","#662525","cUIUFun",66,"5","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w+8,				y-9,		"cUIUFun-2","#662525","cUIUFun",66,"8","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w+21,			y+(h/2)-9,	"cUIUFun-3","#662525","cUIUFun",66,"1","strike_fighter",0.5); c.push(e);
	e=mkTFun(x + 11, 			y+(h/2)-9,	"cUIUFun-4","#662525","cUIUFun",66,"4","strike_fighter",0.5); c.push(e);

	e=mkTFun(x+w-(w/d)+10, 		y+h-(h/d)-9,"cUIUFun-5","#252566","cUIUFun",66,"2","strike_fighter",0.5); c.push(e);
	e=mkTFun(x-(w/d)+11,		y+h-(h/d)-9,"cUIUFun-6","#252566","cUIUFun",66,"3","strike_fighter",0.5); c.push(e);
	e=mkTFun(x-(w/d)+8,			y+(h/d)-9,	"cUIUFun-7","#252566","cUIUFun",66,"6","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w-(w/d)+7, 		y+(h/d)-9,	"cUIUFun-8","#252566","cUIUFun",66,"7","strike_fighter",0.5); c.push(e);

					}}else{if(!yA){
						e =mkL(x-(w/d),	y+(h/d),w,h,id+"-btm",co,cl+"-btm"); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x+(w/d),	y-(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e)}else{
						e =mkL(x-(w/d),	y-(h/d),w,h,id+"-btm",co,cl+"-btm"); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x+(w/d),	y+(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e);
					}}return c}
function mkW(c,x,y,w,h,co,st,d,op,Co,cO){  var
	e=mkI(	x-((w/d)/2),	y+((h/d)/2),	x+((w/d)/2)+(w-(w/d)), 			y+((h/d)/2),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+((h/d)/2)+h,	x+((w/d)/2)+(w-(w/d)), 			y+((h/d)/2)+h,	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2),	x+((w/d)/2)+(w-(w/d))+(w/d),	y-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2)+h,	x+((w/d)/2)+(w-(w/d))+(w/d),	y-((h/d)/2)+h,	"cHUI",co,st,op); c.push(e);

	e=mkI(	x+((w/d)/2),	y-((h/d)/2),	x+((w/d)/2),	y+((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2)+h,	x+((w/d)/2),	y+(2.5*(h/d)),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y+((h/d)/2),	x+((w/d)/2),	y+(2.5*(h/d)),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x+((w/d)/2)+w,	y-((h/d)/2),	x+((w/d)/2)+w,	y+((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2)+w,	y-((h/d)/2)+h,	x+((w/d)/2)+w,	y+(2.5*(h/d)),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2)+w,	y+((h/d)/2),	x+((w/d)/2)+w,	y+(2.5*(h/d)),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2),	y+((h/d)/2),	x-((w/d)/2),	y+(1.5*(h/d)),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+(1.5*(h/d)),	x-((w/d)/2),	y+h-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+h-((h/d)/2),	x-((w/d)/2),	y+h+((h/d)/2),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2)+w,	y+((h/d)/2),	x-((w/d)/2)+w,	y+(1.5*(h/d)),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(1.5*(h/d)),	x-((w/d)/2)+w,	y+h-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+h-((h/d)/2),	x-((w/d)/2)+w,	y+h+((h/d)/2),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2),	y+(h/d)+(h/8),		x+((w/d)/2),	y+((h/d)/2),	"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+(h/d)+(h/8)+(h/2),x+((w/d)/2),	y+h-(1.5*(h/d)),"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(h/d)+(h/8),		x+((w/d)/2)+w,	y+((h/d)/2),	"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(h/d)+(h/8)+(h/2),x+((w/d)/2)+w,	y+h-(1.5*(h/d)),"cHUI",cO,st,op); c.push(e); 
	return c}
function mkP(c,x,y,w,h,d){ var e=null; var
	v =x+(w/d)	+","+(y+(h/d))	+" "+(x+(w/2))+","+(y+(h/d)) 	+" "+(x+(w/2)) +","+(y+(h/2));
	//	+(x+(w/d)+(w/2))+","+(y+(h/d)+(h/2))	+" "+(x+(w/d))+","+(y+(h/d));
	e=mkSG( v,"-pP","#650065","-pP-jou",false); /*console.log(e);*/ c.push(e); return c}
function mkI(x,y,X,Y,id,co,st,op){var r=document.createElementNS( nS,'line');
	r.setAttribute( 'x1',x);r.setAttribute('x2',X);
	r.setAttribute('y1',y); r.setAttribute('y2',Y); r.setAttribute('id',id); r.setAttribute( 'opacity',op);
	r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}
function mkB(x,y,w,h,id,co,cl,tId,tCo,tCl,fonSiz,txt){ var b=[];
	var e =mkL(x,y,w,h,id,co,cl); b.push(e); e =mkT(x,y,tId,tCo,tCl,fonSiz,txt); b.push(e); return b}
function mkD(x,y,w,h,id,co,cl) 	{ var r=document.createElement('div'); r.setAttribute( 'position','fixed'); r.setAttribute( 'width',w); r.setAttribute( 'height',h); r.setAttribute( 'left',x); r.setAttribute( 'top',y); r.setAttribute( 'id',id); r.setAttribute( 'background-color',co); if(typeof cl!='undefined'){ r.setAttribute( 'class',cl) }return r}
function mkS(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); if(id!=false){p.setAttribute( 'id',id)} p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} return p}
function mkG(id,stops,sL){ var g=document.createElementNS( nS,'linearGradient'); g.setAttribute('id',id);
	for(var i=0; i < sL; i++){ var ats = stops[i]; var stop = document.createElementNS( nS,'stop');
		for(var att in attrs){ if(atts.hasOwnProperty( att)) stop.setAttribute( att,atts[att])}
		g.appendChild( stop)}
	var defs =sV.querySelector('defs') || sV.insertBefore( document.createElementNS( nS,'defs'), sV.firstChild);
	return defs.appendChild(g)}
function mkH( id,offset,co){ var h=document.createElementNS( nS,'stop'); h.setAttribute('id',id);
	h.setAttribute('offset',offset); h.setAttribute('stop-color',co); return h}
function mkCH( pro,axi,dia){
	var ss=mkH( 'uRGX-pro',0,"#ff8888");

	var lG=mkLG( 'uRG'); }
function mkLG( id,stops,stLen){var lG=document.createElementNS( nS,'linearGradient'); lG.setAttribute('id',id);
	for(var i=0; i < stLen; i++){ lG.appendChild( stops[i])}
	console.log( lG)}
/*createGradient($('svg')[0],'MyGradient',[
  {offset:'5%', 'stop-color':'#f60'},
  {offset:'95%','stop-color':'#ff6'}
]);
$('svg path').attr('fill','url(#MyGradient)');*/

// svg:   the owning <svg> element
// id:    an id="..." attribute for the gradient
// stops: an array of objects with <stop> attributes
/*function createGradient(svg,id,stops){
  var svgNS = svg.namespaceURI;
  var grad  = document.createElementNS(svgNS,'linearGradient');
  grad.setAttribute('id',id);
  for (var i=0;i<stops.length;i++){
    var attrs = stops[i];
    var stop = document.createElementNS(svgNS,'stop');
    for (var attr in attrs){
      if (attrs.hasOwnProperty(attr)) stop.setAttribute(attr,attrs[attr]);
    }
    grad.appendChild(stop);
  }

  var defs = svg.querySelector('defs') ||
      svg.insertBefore( document.createElementNS(svgNS,'defs'), svg.firstChild);
  return defs.appendChild(grad);
}*/
function mkSG(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); p.setAttribute( 'id',id); p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} return p}
function mkL(x,y,w,h,id,co,cl,sC,sW){ var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
					if(sC!=""){ 	w -=sW*2; h -=sW*2; r.setAttribute( 'stroke',sC); r.setAttribute( 'stroke-width',sW)}
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}
function mkLT(x,y,w,h,id,co,cl,op){ var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
					 				r.setAttribute( 'opacity',op);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					//if( cl!=null){ 	cl.forEach( function(){ r.setAttribute( 'class',cl)}); } console.log(r);
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}
function mkK(x,y,w,h,id,co,cl,op) { var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
									r.setAttribute( 'opacity',op);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}

function mkFb( n,sB){ var id="sB_btn-"+n; n = n * sB.rowHei;
	var e =mkL( sB.disHrz, n, sB.disWid, sB.rowHei,	id, sB.sty.btn,"sB_btn",""); return e }
function mkFt( n,sB,ni){ var id="sB_btT-"+n; n = n * sB.rowHei;
	var e =mkT( sB.disHrz+sB.btnTOX, n+sB.btnTOY,		id, sB.sty.btnTxt, "sB_btT",15,ni,'profont'); return e }
function mkFr( n,sB){ var et=[]; var yi=n * sB.rowHei; var
	e=mkL( sB.disHrz, yi,  						sB.disWid, sB.btnBrd, false, sB.sty.btnU, "sB_btnBrd", ""); et.push( e);
	e=mkL( sB.disHrz, yi+sB.rowHei-sB.btnBrd, 	sB.disWid, sB.btnBrd, false, sB.sty.btnD, "sB_btnBrd", ""); et.push( e);
	var v = sB.disHrz+","+yi+" "+ 				(sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+sB.disHrz+","+(yi+sB.rowHei);
	e=mkS( v,false,sB.sty.btnL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
	var v = sB.disHrz+sB.disWid+","+yi+" "+ 	(sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
	e=mkS( v,false,sB.sty.btnR/*"#880000"*/,"sB_btnBrd",false); et.push( e);
	return et}

/*v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)));
						e =mkS( 	e =mkS(v,id+"-sP","#ffcccc",id+"-sP-hrz",op);c.push(e);*/
function mkSidebarElements( sB){  	sB.sV =mkSidebarSVG( sB); return sB}
function mkSidebarSVG( sB){ var re={ dE:[], dELen: 0}; var buf =null;
		re.dE =[mkL( sB.disHrz,sB.disVrt,sB.disWid,sB.disHei,"sB",sB.sty.bG,"sB",'')];
		for( var i=0; i < AL.fesLen; i++){	buf =mkFb( i,sB);  			re.dE.push(buf);
											buf =mkFt( i,sB, AL.fes[i]);re.dE.push(buf);
											buf =mkFr( i,sB); re.dE =re.dE.concat(buf);} re.dELen =re.dE.length; return re}
function mkProjectorElems( ui,pR){ 	pR.sV =mkProjectorSVG1( pR); return pR}
function mkProjectorSVG1( pR){ 	var re={ open:null, closed:null};
							re.open =mkL( pR.opeHrz,pR.opeVrt,pR.opeWid,pR.opeHei,"pROpe",pR.sty.bG,"pROpe","");
							re.closed=mkL(pR.cloHrz,pR.cloVrt,pR.cloWid,pR.cloHei,"pRClo",pR.sty.bG,"pRClo","");return re}
function mkToolTipsElements( tT){ tT.sV =mkToolTipsSVG( tT); return tT}
function mkToolTipsSVG( tT){ 	var re =mkL( tT.disHrz,tT.disVrt,tT.disWid,tT.disHei,"tT",tT.sty.bG,"tT",""); return re}
function mkSequencerElements( sQ){ sQ.sV =mkSequencerSVG( sQ); return sQ}
								//if( sQ.actDOM){ sQ.DOM =mkSequencerDOM( sQ);
								//				if( sQ.actSVG){ sQ.DOM.appendChild(sQ.sV)}} return sQ}
function mkSequencerDOM( sQ){	var re =mkD( sQ.disHrz,sQ.disVrt,sQ.disWid,sQ.disHei,"sQD",sQ.sty.bG,"sQD"); return re}
function mkSequencerSVG( sQ){	var re =mkL( sQ.disHrz,sQ.disVrt,sQ.disWid,sQ.disHei,"sQ",sQ.sty.bG,"sQ",""); return re}
function mkSuperTabsElements( sT){ /*console.log(sT);*/ sT.sV =mkSuperTabsSVG( sT); return sT}
								//if( sT.actDOM){ sT.DOM =mkSuperTabsDOM( sT);
								//				if( sT.actSVG){ sT.DOM.appendChild(sT.sV)}} return sT}
function mkSuperTabsDOM( sT){	var re =mkD( sT.disHrz,sT.disVrt,sT.disWid,sT.disHei,"sTD",sT.sty.bG,"sTD"); return re}
function mkSuperTabsSVG( sT){	var re =mkL( sT.disHrz,sT.disVrt,sT.disWid,sT.disHei,"sT",sT.sty.bG,"sT",""); return re}

function mkShotgunElements( sH) {if( sH.actSVG){ sH.sV =mkShotgunSVG( sH)}
								if( sH.actDOM){ sH.DOM =mkShotgunDOM( sH);
												if( sH.actSVG){ sH.DOM.appendChild(sH.sV)}} return sH}
function mkShotgunDOM( dE){		var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"sHD",dE.sty.bG,"sHD"); return re}
function mkShotgunSVG( dE){		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"sH",dE.sty.bG,"sH",""); return re}
function mkCannonElements( cA) {cA.sV =mkCannonSVG( cA);
								if( cA.actDOM){ cA.DOM =mkCannonDOM( cA);
													if( cA.actSVG){ cA.DOM.appendChild(cA.sV)}} return cA}
function mkCannonDOM( dE){		var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"cAD",dE.sty.bG,"cAD"); return re}
function mkCannonSVG( dE){		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"cA",dE.sty.bG,"cA",""); return re}
function mkAmmoElements( aM){	if( aM.actSVG){ aM.sV =mkAmmunitionSVG( aM)}
								if( aM.actDOM){ aM.DOM =mkAmmunitionDOM( aM);
													if( aM.actSVG){ aM.DOM.appendChild(aM.sV)}} return aM}
function mkAmmunitionDOM( dE){	var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"aMD",dE.sty.bG,"aMD"); return re}
function mkAmmunitionSVG( dE){	var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"aM",dE.sty.bG,"aM",""); return re}

function mkExplorerElements( eX){ if( eX.actSVG){ eX.sV =mkExplorerSVG( eX)}
								if( eX.actDOM){ eX.DOM =mkExplorerDOM( eX);
												if( eX.actSVG){ eX.DOM.appendChild(eX.sV)}} return eX}
function mkExplorerDOM( eX){	var re =mkD( eX.disHrz,eX.disVrt,eX.disWid,eX.disHei,"eXD",eX.sty.bG,"eXD"); return re}
function mkExplorerSVG( eX){	var re =mkL( eX.disHrz,eX.disVrt,eX.disWid,eX.disHei,"eX",eX.sty.bG,"eX",""); return re}
function mkGramElements( gR){ 	if( gR.actSVG){ gR.sV =mkGramSVG( gR)}
								if( gR.actDOM){ gR.DOM =mkGramDOM( gR);
												if( gR.actSVG){ gR.DOM.appendChild(gR.sV)}} return gR}
function mkGramDOM( gR){		var re =mkD( gR.disHrz,gR.disVrt,gR.disWid,gR.disHei,"gRD",gR.sty.bG,"gRD"); return re}
function mkGramSVG( gR){		var re =mkL( gR.disHrz,gR.disVrt,gR.disWid,gR.disHei,"gR",gR.sty.bG,"gR",''); return re}
function mkDevBarElements( dB){ if( dB.actSVG){ dB.sV =mkDevBarSVG( dB)}
								if( dB.actDOM){ dB.DOM =mkDevBarDOM( dB);
												if( dB.actSVG){ dB.DOM.appendChild(dB.sV)}} return dB}
function mkDevBarDOM( dB){		var re =mkD( dB.disHrz,dB.disVrt,dB.disWid,dB.disHei,"dBD",dB.sty.bG,"dBD"); return re}
function mkDevBarSVG( dB){		var re =mkL( dB.disHrz,dB.disVrt,dB.disWid,dB.disHei,"dB",dB.sty.bG,"dB",''); return re}
function mkDialogElements( dG){ if( dG.actSVG){ dG.sV =mkDialogSVG( dG)}
								if( dG.actDOM){ dG.DOM =mkDialogDOM( dG);
												if( dG.actSVG){ dG.DOM.appendChild(dG.sV)}} return dG}
function mkDialogDOM( dG){		var re =mkD( dG.disHrz,dG.disVrt,dG.disWid,dG.disHei,"dGD",dG.sty.bG,"dGD"); return re}
function mkDialogSVG( dG){		var re =mkL( dG.disHrz,dG.disVrt,dG.disWid,dG.disHei,"dG",dG.sty.bG,"dG",''); return re}
function mkSystemGridElements( sG){ if( sG.actSVG){ sG.sV =mkSystemGridSVG( sG)} 
								if( sG.actDOM){ sG.DOM =mkSystemGridDOM( sG);
												if( sG.actSVG){ sG.DOM.appendChild(sG.sV)}} return sG}
function mkSystemGridDOM( sG){	var re =mkD( sG.disHrz,sG.disVrt,sG.disWid,sG.disHei,"sGD",sG.sty.bG,"sGD"); return re}
function mkSystemGridSVG( sG){	var re =mkD( sG.disHrz,sG.disVrt,sG.disWid,sG.disHei,"sG",sG.sty.bG,"sG"); return re}
function mkMosaicElements( mC){ if( mC.actSVG){ mC.sV =mkMosaicSVG( mC)} return mC}
function mkMosaicSVG( mC){		var re =mkL( mC.disHrz,mC.disVrt,mC.disWid,mC.disHei,"mC",mC.sty.bG,"mC",''); return re}

function mkKakaraElements( dE){ if( dE.actSVG){ dE.sV =mkLakaraSVG( dE)} return dE}
function mkKakaraSVG( dE){ 		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"kK",dE.sty.bG,"kK",''); return re}
function mkYozenElements( dE){ 	if( dE.actSVG){ dE.sV =mkYozenSVG( dE)} return dE}
function mkYozenSVG( dE){ 		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"yO",dE.sty.bG,"yO",''); return re}
function mkMoralystElements( dE){ if( dE.actSVG){ dE.sV =mkMoralystSVG( dE)} return dE}
function mkMoralystSVG( dE){ 	var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"mT",dE.sty.bG,"mT",''); return re}

function precalcFeatureTemplates( uiFes,sB) { var ret=[]; AL.fesLen =AL.fes.length; uiFes.fesLen =AL.fesLen; var fe =null;
	for(var i=0; i < AL.fesLen; i++) { fe =precalcFeatureTemplate( AL.fes[i], uiFes); ret.push( fe)} return ret}
function precalcFeatureTemplate( nim,ui){
	var sTs =precalcSuperTabs( nim);
	var qU = precalcQuad( nim);
	var fe =new Feature( ui,nim,sTs,qU);	return fe}
function Feature( ui,h,sTs,qU){ this.nim=h; this.sTs=sTs; this.sTsLen=sTs.length;
	var txt =getCaptionForFeature( h); 					this.txt =txt;
	var act =getDevicesForFeature( h); 					this.act =act;
	var dev =precalcDevicesForFeature( ui,h,act,qU); 	this.dev =dev;
	this.tools=null; }
function getCaptionForFeature( h){ switch( h){ case "dharma": return "Dharma"; 	case "money": return "Money";
	case "mosaic": return "Mosaic"; case "yozen": return "Yozen"; case "sygnal": return "Sygnal"}}

function precalcQuad( feNim){ switch( feNim){ 	case "mosaic": return AL.qU 
												case "sygnal": return AL.qU } return null }
function precalcGridlock( disWid,disHei,gL){ gL.disWid=disWid; gL.disHei=disHei;
	gL.scrWid=disWid-gL.lVX-gL.mVX;					gL.scrHei=disHei-gL.tHY-gL.bHY;
	gL.scrHrz=gL.lVX+gL.mVX; 						gL.scrVrt=gL.mVX; return gL}
function measureWindow( ui){ ui.winWid =window.innerWidth; ui.winHei =window.innerHeight; return ui}
function precalcSuperTabs( feNim){var sTs=[]; switch( feNim){
	case "dharma" : sTs=[ "hello","world"]; break;
	case "mosaic" : sTs=[ "world"]; 		break}return sTs}
function getDevicesForFeature( h){ var r=null; switch( h){
	case "dharma": 	r = {  DOM:true, sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:true, eX:true, gR:true, dB:true, dG:false,pM:false,
							sG:true, qU:false,pN:false,mC:false,kK:false,yO:false};return r;
	case "money" : 	r = {  DOM:true, sV:true, sB:true, tT:true, gL:true, 
							sQ:true, aM:true, sH:true, cA:true, mE:false,
							sT:true, eX:true, gR:false,dB:true, dG:false,pM:false,
							sG:false,qU:false,pN:false,mC:false,kK:false,yO:false};return r;
	case "mosaic": 	r =	{  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:true,
							sT:true, eX:true, gR:true, dB:true, dG:false,pM:false,
							sG:false,qU:true, pN:false,mC:false,kK:false,yO:false};return r;
	case "yozen" : 	r = {  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:false,eX:true, gR:true, dB:true, dG:false,pM:false,
							sG:false,qU:false,pN:false,mC:false,kK:false,yO:true };return r;
	case "sygnal": 	r = {  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:true, eX:true, gR:false,dB:true, dG:false,pM:false,
							sG:false,qU:true, pN:false,mC:false,kK:false,yO:false};return r}}

function precalcToolsForFeatures( ui, fes, fesLen){
	for(var i=0; i < fesLen; i++) { var tools 	=precalcToolsForFeature( fes[i]);
									tools 		=mkTools( ui,i,tools);
									 }}
function precalcToolsForFeature( fe){ switch( fe){
	case 'dharma': var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4, 	siF1:4,bind:4,	min:0,max:4 };return ret;
	case 'money' : var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4,	siF1:4,bind:4,	min:0,max:4 };return ret;
	case 'mosaic': var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:false,siF1:4,bind:4, 	min:0,max:4 };return ret;
	case 'yozen' : var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:false,siF1:4,bind:4, 	min:0,max:4 };return ret;
	case 'sygnal': var r={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4, 	siF1:4,bind:4, 	min:0,max:4 };return r;}}
function mkTools( ui,i,t){ ui.features[i].tools = mkTools2( ui.devices.sB, t) }
function mkTools2( sB,t){ var tools ={ SVG:[], len:t.len, sB:null,
	tick:null,undo:null,redo:null,stop:null,play:null,rec:null, save:null,load:null }; var buf =null;
	for(var i=t.min; i < t.max; i++){ buf =null; buf =mkToolRow( i,t[i]); if( buf!=null){ tools.SVG.push( buf)}}
	tools =mkTools3( tools); return tools}
function mkToolRow( n,i){ var tools =mkToolRow2( n,i); if(!tools){ return null}else{
	var ret="ret"; return ret; }}
function mkToolRow2( n,i){ var r ={ r:[], ri:0}; 
	if(i.tick==n){ r.r.push("tick");r.ri++} if(i.undo==n){ r.r.push("undo");r.ri++} if(i.redo==n){ r.r.push("redo");r.ri++}
	if(i.stop==n){ r.r.push("stop");r.ri++} if(i.play==n){ r.r.push("play");r.ri++} if( i.rec==n){ r.r.push( "rec");r.ri++}
	if(i.save==n){ r.r.push("save");r.ri++} if(i.load==n){ r.r.push("load");r.ri++}if(i.scroll==n){r.r.push("scro");r.ri++}
	if(i.siF1==n){ r.r.push("s-F1");r.ri++} if(i.bind==n){ r.r.push("bind");r.ri++}
	
	if( r.ri==0){ return false}else{ return r}}
function mkTools3( tools){ for(var i=tools.len[0]; i < tools.len[1]; i++){ }} 

function mkToolsX( id,rowPop){ var r =null; switch( id){
	case "scro": r ={ id:id, rowPop:rowPop, auto:true, on:false, hold:false,
		sty:{ txt:'DOM', font:'strike_fighter', fontSi:3}}; return r}}


precalc();
</script></head><body onload='predraw( AL)'></body></html>
