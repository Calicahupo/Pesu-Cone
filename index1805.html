<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google Tag Manager -->
<!--<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!=='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVWFS2');</script>-->
<!-- End Google Tag Manager -->
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type"/>
<title>Floresta v1805</title>
<link rel="icon" href="diodi/favicon.ico">
<link rel="stylesheet" type="text/css" href="diodi/fonts.css">
<style>svg text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}
	svg text::selection { background: none;} svg {display:block}
	/*.element::-webkit-scrollbar { display:none; }*/
	#fE{ position:absolute; 	top:0px; left:0px; height:100%; width:100%;}
	#qZ{ position:absolute; 	top:0px; left:0px; height:100%; overflow: auto; background-color: #cccc88;}
	#tB{ position:absolute; 	top:0px; 						overflow: auto; overflow-x:auto;}
	#tB::-webkit-scrollbar{ display:none; }
	#lI{ position:absolute; 			 left:0px; 				overflow:auto; overflow-x: auto;}
	#lK{ position:absolute; overflow:auto; left:120px; background-color: black; top:39px; z-index:10;
		border-bottom:1px solid #3c3c3c; border-right:1px solid #3c3c3c;
		-webkit-border-radius: 7px;-moz-border-radius: 7px;border-radius: 7px;}
	#sK{ position:absolute; overflow:auto; background-color: black;
		border-bottom:1px solid #3c3c3c; border-right:1px solid #3c3c3c;
		-webkit-border-radius: 7px;-moz-border-radius: 7px;border-radius: 7px;}
	#lI::-webkit-scrollbar{ display:none; }
	#sQ{ position:absolute; 									overflow:auto; }
	/*#sC{ position:absolute; background-color:black; z-index:20; width:0px; height:1px; top:39px;}*/
	html{height:100%;padding:0px;margin:0px;/*font-family:PF;*/font-size:13px;background-color:black;color:white;overflow:auto; overflow-x:auto;}
	body{height:100%;padding:0px;margin:0px;background-color:transparent; overflow:auto; overflow-x:auto;}
</style>
<script>
var RE =null; var AB =null;
function initTheRelative(){ RE ={ subjs:[], sims:[],simsL:0, simsSrc:[],simsSrcL:0, simsSrcRand:[],simsSrcRandL:0, simsSrcDef:[],simsSrcDefL:0}}
function initTheAbsolute(){ AB ={ sims:[], simsL:0}}
initTheRelative(); initTheAbsolute();
var FL={ 
	pub: true,
	fe: "type",
	fEfe: "type",
	fEfes: ["quiz","type","rels","mood","mosaic","scalar","marker"],
	qZfes: ["quiz","tune","feat."],
	statTabs:["tot","avg","med"],
	rXp: 1, liNarrowInMosaic:true, liNarrow:false, liS:0, fElIS:0, mPlIS:0, lIW:1, fElIW:1, mPlIW:0, sQW:false, bPH:0,
	mosaicForm :true,
	lockSubj:false, lockSim:true,
	sBTools: ["play","fastForward","skip","skipForward"],
	sBTunes: [100, 	 100, 		   1, 	  1],
	sBMoved: false, sBPlay: false, 	sBSkipSims: true, 	sBFastForward:false,
	tBTools: ["cleanSlate","makeSim","randSim","copySim","lockSim","confStat"],
	tBTunes: [undefined, 	100, 		100,	100, 		true],
	lF:"subjects",
	lIFes: ["objects","subjects","places","contexts","families","peoples","goals","models"],
	lICols:{objs: 	[],
			subjs: 	["tY","mD","vQ","mos","nM","dC-","dC+","dT-","dT+"],
			places: [],
			conts: 	[],
			famis: 	[],
			ppls: 	[],
			goals: 	[],
			models: []},
	lITools: ["confRand","confDef","defSort","confSort"],
	lITunes: [undefined,true, 		false, 		"val"],
	bPTools: ["sizeList","wideList","wideSeq","highFoot"],
	sKTypeTools:[
		["Cube","Locate","Study"],
		["Select","off","global","save"],
		["Mood","Legend","Total","Stereo.","Infant.","Raise","Queer-","Queer+"],
		["Bottom","Faculty","infElem","Stage"]],
	sKTypeCube:"Locate", sKTypeSelect:"off", sKTypeMood: "Total", sKTypeBottom: "Stage",
	sKMoodTools: [
		"mosaicForm",
		["Select","off","local","global","save"],
		["Plane","Legend","Worth","infElem","I & U"],
		["TableMT","Total","Stereo.","Infant.","Raise","Queer-","Queer+"],
		["cell","bad","good","both"],
		["Bottom","Table","Stage"]],
	sKMoodPlane: "Worth", sKMoodTable: "Total", sKMoodBottom: "Stage", sKMoodSelect: "off", sKMoodCell: "both",
	sKQuizTools:[
		"private",
		"autist"],
	qZtest:false,qZtouched:false,qZdone:0,qZmore:false,qZopts:false, qZprivate:false, qZautist:false,

// moods accumulate quality and karma. scalar qualities also do. vector qualities don't, they're just the gate.

	tBRoomTools:[undefined,"roomAway","roomHide","roomCopy","roomRand","roomMake"],
	tBRoomTunes:[undefined,false, 		false, 		10, 	false, 		10],
	tBSubjTools: [undefined,"subjAway","subjHide","subjCopy","subjRand","subjMake"],
	tBSubjTunes: [undefined,false, 		false, 		10, 	false, 		10],
	tBObjTools: [undefined,"objAway","objHide","objCopy","objRand","objMake"],
	tBObjTunes: [undefined,false, 		false, 		10, 	false, 	10],
// objs Cloth Key Money
// room Spot Seat Way
//	lITools: ["listSort"],
//	lITunes: [false],
	lISimTools: ["simResos","simRooms","simSpots","simSeats","simWays","simSubjs","simFins","simMascs","simKids","simObjs","simCloths","simKeys","simMoneys","simConts"],
	liSimTunes: [ [2,0], [10,0], [10,0], [10,0]],
	liRoomTools:["roomResos","roomSizes","roomPlaces"],
	lISubjTools: ["resos","pcFin","pcFem","pcKid","pcReso","pcTys","pcPms","pcStereo","pcPureBad","pcInvMor","pcPureGood","pcSubject","pcReso"],
	rePreset: "default", abPreset: "default",
	lIObjTools: ["delObj","makeObj","pcReso","pcSafe","pcPeaceful","pcSensitive","pcToy","pcHostile","pcDangerous","pcOverwhelming"],
	lISimTools: ["pcSubjs"],

//ni,sim,reso,mas,kid,ppl,tY,fN,cR,pM,mD,xtn,ntn,dir,obj,stereo,bAge,gAge,bQueer,gQueer)
	pcSubjs: 8, pcReso:4, pcMas:0.5, pcKid:0.5, pcPpl:0.5,
	pcPms:[], pcStereo:false, pcBAge:0.2, pcGAge:0.2, pcQueer:0.2, pcQueerBG:0.5, pcObj:0.5,
	pcTys:[], pcFns:["f5"], pcCrs:["E"]};
if( FL.pub){ FL.fe ="quiz"}
</script>
<script src="diodi/diodi0022.js"></script>
<script src="diodi/lodash.js"></script>
<script>
//IEs should be bigger. V and K should be displayed on circs and funcs because IEs do not accommodate for circs. But there's not enough room. It should be possible to replace the stage with some other, more informative kind of display.
//It could be wrong to say IEs are an input to the model. It's possibly more right to say funcs and circs are an input to the model.

// This application has been developed on MacBook Pro and Chrome. It is meant to be used with the touchpad – please do not plug an external mouse on OS X. The application does not work on Safari. The back button of the browser has been disabled to prevent two-finger left swipe from unloading the page. This gesture is needed for horizonal scrolling.
var svgFe =null; var divFe =null; var nS ="http://www.w3.org/2000/svg";
var svgSk =null; var divSk =null;
var svgQz =null; var divQz =null;
var svgTb =null; var divTb =null;
var svgLi =null; var divLi =null;
var svgLk =null; var divLk =null;
var svgSq =null; var divSq =null;
//var divSc =null;
var ui ={winWid:0, winHei:0,
	sB:{disWid:66, disHei:0, disHrz:0, disVrt:0, fErowHei:25, qZrowHei:41, fesHei:0, qZbTOY:11, fEbTOY:2, btnBrd:4, bTOX:6, fnt:15, HUDhei:25,
		btnTxt:"#cccccc",btnU:"#444444",	btnR:"#111111",		btnD:"#080808",		btnL:"#333333", 	sel:"#1c1c1c",
		selTxt:"#ffffff",selU:"#000000",	selR:"#333333",		selD:"#555555",		selL:"#080808", 	btn:"#333333",
		bG:"#222222", HUDbg:"#444444"},
	qZ:{bG:"#cccc88"},
	sK:{disWid:62,keyWid:58,tH:16},
	tB:{disHei: 40, disVrt:0, tooWid:40, tabGap:5, tabSep:10,
		abTabW:25, abTabsW:0, reTabW:40, reTabH:16,reTabV:45,reTabsW:0, tabHei:30,  
		bG:"#000000", strCol:"#444444"},
	lF:{kH:20,kW:80},
	lK:{},
	lI:{iteHei:0, fonSiz:0, svgHei:0, //mDx kix mPx nMx miW
		iHe0:16,tPF0:15,tTR0:14,tSF0:14,tYw: 80,kiw0:7,mDw0: 80,obx0:4,vQw0:130,mow0:80,nMw0:190,dNw0:25,
		iHe1:25,tPF1:20,tTR1:20,tSF1:20,tYw:100,kiw1:4,mDw1:200,obx1:4,vQw1:240,mow1:80,nMw1:200,dNw1:25,
		iHe2:0 ,tPF2: 0,tTR2: 0,tSF2: 0,tYw:100,kiw2:4,mDw2:200,obx2:4,vQw2:240,mow2:80,nMw2:200,dNw2:25},
	/*lI:{liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff"}*/
	sQ:{bG:"#333333", disHrz:0/*66*/, disWid:66, disWid2:66},
	tY:{disWid:0, disHei:0, disHrz:0, disVrt:0,
		cE:230, cuD:4, op2:0.7, c1x:0 ,c1y:40,/*40*/ c2x:0 ,c2y:40,/*40*/ cMarg:25, liY:0,
		base:"#234567", 	hilite:"#ff6600", area:"#345678", areaT:"#89abcd", selArea:"#6789ab",
		selAreaT:"#deefde", cShade:"#ffcccc", valNum:"#662525", shaNum:"#252566", plane:"#336688",
		selAreaB:"#6789ab", areaB:"#6789ab", shArea:"#012345", liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff", cIE:"#33d0aa"}, //ui.tY.cIE #95B388 #33d0aa
	rE:{bG:"#120a8f"},
	mD:{base:"#002200", key:"#083300", key2:"#0c4400", selKey:"#105500", selTxt:"#40ee00", dis:"#221900", disStr: "#110800", stroke:"#009900", stroke2:"#208800", hilTxt: "#30cc00", selKey2:"#1c7700", selKey3: "#0c4400", stroke3: "#002200"},
	sC:{bG:"#004040",öö:"#016648",hL:"#01796F",fX:"#00A693"},
	//ultramarine 120a8f

	mP:{liW:120},
	bP:{disHei: 173, tipHei:66},
	red: {l: { h:0  , s:25 , v:100}, f:{ h:0  , s:50 , v:50 }, h:{ h:0  , s:100, v:100}},
	cya: {l: { h:180, s:25 , v:100}, f:{ h:180, s:50 , v:50 }, h:{ h:180, s:100, v:100}},
	gre: {l: { h:135, s:25 , v:100}, f:{ h:135, s:50 , v:50 }, h:{ h:135, s:100, v:100}}, 
	lil: {l: { h:315, s:25 , v:100}, f:{ h:315, s:50 , v:50 }, h:{ h:315, s:100, v:100}}, 
	yel: {l: { h:70 , s:25 , v:100}, f:{ h:70 , s:50 , v:50 }, h:{ h:70 , s:100, v:100}}, 
	vio: {l: { h:275, s:25 , v:100}, f:{ h:275, s:50 , v:50 }, h:{ h:275, s:100, v:100}}, 
	blu: {l: { h:222, s:25 , v:100}, f:{ h:222, s:50 , v:50 }, h:{ h:222, s:100, v:100}}, 
	ora: {l: { h:30 , s:25 , v:100}, f:{ h:30 , s:50 , v:50 }, h:{ h:30 , s:100, v:100}}, 
	gra: {l: { h:1  , s:1  , v:100}, f:{ h:1  , s:1  , v:50 }, h:{ h:1  , s:1  , v:1}}}
function predraw(){
	ui.winHei =window.innerHeight;
	ui.winWid =window.innerWidth;

	if(FL.fe==="quiz"){ FL.fes =FL.qZfes; FL.fesL =FL.qZfesL; ui.sB.rowHei =ui.sB.qZrowHei; ui.sB.bTOY =ui.sB.qZbTOY;
						ui.sB.fesHei =FL.fesL * ui.sB.rowHei;
						ui.sK.disVrt =ui.sB.fesHei + 25 -16;
						ui.sK.disHei =ui.winHei -ui.sB.fesHei -50 +16}
	else{ 				FL.fes =FL.fEfes; FL.fesL =FL.fEfesL; ui.sB.rowHei =ui.sB.fErowHei; ui.sB.bTOY =ui.sB.fEbTOY;
						ui.sB.fesHei =FL.fesL * ui.sB.rowHei; }

	//divSk.style.height =ui.sK.disHei+'px';
	//divSk.style.top =ui.sK.disVrt+'px';
	/*		ui.sK.disVrt =ui.sB.fesHei+ui.sB.HUDhei+ui.sB.tooHei;
		ui.sK.disHei =ui.midMinHei-ui.sK.disVrt;}
*/

	if(FL.fe!=="mosaic"){ 	FL.lIS=FL.fElIS; FL.lIW=FL.fElIW; }
	else{ 					FL.lIS=FL.mPlIS; FL.lIW=FL.mPlIW; }

	if( FL.lIS===2){
		ui.lI.iHeL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tPFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tTRL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tSFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.mDx =ui.lI.iHeL*8;
		ui.lI.nMx =ui.lI.iHeL*14}

	ui.sB.disHrz =ui.winWid-ui.sB.disWid;
	ui.sB.tooHei =FL.sBToolsL*ui.tB.tooWid;

	if(FL.fe==="quiz"){
		ui.qZ.disWid =Math.round((ui.winWid*(3/4))-ui.sB.disWid);
		ui.qZ.disHrz =Math.round((ui.winWid-ui.sB.disWid-ui.qZ.disWid)/2);
		ui.qZ.disVrt =Math.floor( ui.sB.rowHei/1.618); 	ui.qZ.rowHei=Math.floor( ui.winHei/5);
		ui.qZ.optRad =Math.floor(ui.qZ.disWid/91);//66);
		ui.qZ.optStr =ui.qZ.disWid/512;
		ui.qZ.rowGap =ui.qZ.rowHei-2*ui.qZ.optRad -ui.qZ.optStr;
		ui.qZ.qZh =Math.round((FL.quizL) * ui.qZ.rowHei - (ui.qZ.rowGap -(ui.qZ.rowGap)/1.618));//-ui.qZ.optRad;
		ui.qZ.capVrt =Math.floor( ui.qZ.rowHei/1.618);
		ui.qZ.capFnt =Math.floor( ui.qZ.disWid/15); 	ui.qZ.capFntG=Math.floor( ui.qZ.capFnt*1.618);
		ui.qZ.fnt =Math.floor( ui.qZ.disWid/41); 		ui.qZ.fntG =Math.floor( ui.qZ.fnt/1.618);
		ui.qZ.topGap =ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.fntG+ui.qZ.capFntG;
		ui.qZ.qZy 	=ui.qZ.topGap+ui.qZ.qZh;
		ui.qZ.colWid =Math.round( ui.qZ.disWid/1.618/1.618);
		ui.qZ.midWid =ui.qZ.disWid-2*ui.qZ.colWid;//+ui.qZ.doneH;
		ui.qZ.margin =Math.round( ui.qZ.disWid/41);
		ui.qZ.lAnc =ui.qZ.disHrz+ui.qZ.colWid;
		ui.qZ.rAnc =ui.qZ.disHrz+ui.qZ.colWid+ui.qZ.midWid;
		
		ui.qZ.optstr =Math.round(ui.qZ.optStr/2);
		ui.qZ.LOptX =ui.qZ.lAnc+Math.round(ui.qZ.margin*1.618)+ui.qZ.optRad+ui.qZ.optstr;
		ui.qZ.ROptX =ui.qZ.rAnc-Math.round(ui.qZ.margin*1.618)-ui.qZ.optRad-ui.qZ.optstr;
		ui.qZ.MOptX =Math.round( ui.qZ.disWid/2)+ui.qZ.disHrz;
		//ui.qZ.optGap=Math.round(( ui.qZ.MOptX -ui.qZ.LOptX)/2);
		ui.qZ.optG4 =Math.round(( ui.qZ.ROptX -ui.qZ.LOptX)/3);
		ui.qZ.lOptX =ui.qZ.LOptX +ui.qZ.optG4;
		ui.qZ.rOptX =ui.qZ.ROptX -ui.qZ.optG4;
		ui.qZ.optL7 =ui.qZ.lAnc +ui.qZ.margin+ui.qZ.optRad+ui.qZ.optstr;
		ui.qZ.optR7 =ui.qZ.rAnc -ui.qZ.margin-ui.qZ.optRad-ui.qZ.optstr;
		ui.qZ.optG7 =Math.round(( ui.qZ.optR7 -ui.qZ.optL7)/6);
		ui.qZ.optLm7=ui.qZ.optL7 +ui.qZ.optG7;
		ui.qZ.optRm7=ui.qZ.optR7 -ui.qZ.optG7;
		ui.qZ.optMl7=ui.qZ.MOptX -ui.qZ.optG7;
		ui.qZ.optMr7=ui.qZ.MOptX +ui.qZ.optG7;		
		//ui.qZ.optG4 =Math.round(( ui.qZ.optR7 -ui.qZ.optL7)/3);
		//ui.qZ.optMl4=ui.qZ.MOptX
		ui.qZ.doneW =Math.round( ui.qZ.midWid/1.618);
		ui.qZ.doneH =Math.round( ui.qZ.doneW/1.618);
		ui.qZ.doneX =Math.round( ui.qZ.MOptX-ui.qZ.doneW/2);
		ui.qZ.dunF1 =Math.round( ui.qZ.doneH/1.618/2);
		ui.qZ.dunF2 =Math.round( ui.qZ.dunF1/1.618);
		ui.qZ.dunF3 =Math.round( ui.qZ.dunF2/1.618);
		ui.qZ.dunF4 =Math.round( ui.qZ.dunF3/1.618);
		ui.qZ.dunF5 =Math.round( ui.qZ.dunF4/1.618);
		ui.qZ.doneF =ui.qZ.doneH-2*ui.qZ.dunF2-1;
		ui.qZ.donef =mR((ui.qZ.doneH-2*ui.qZ.dunF2)/1.618/1.618);
		ui.qZ.gapHei =Math.round(( ui.qZ.doneH-ui.qZ.doneF)/1.618);
		if( !FL.qZdone && !FL.qZtest){	ui.qZ.dunFeh =ui.qZ.doneH+mR(ui.qZ.doneH-ui.qZ.doneH/1.618)}
		else{ 	ui.qZ.dunFeH =Math.round(ui.qZ.disWid/1.618);
				ui.qZ.dunFeh =ui.qZ.dunFeH-2*ui.qZ.gapHei+2*ui.qZ.doneH+mR(ui.qZ.doneH-ui.qZ.doneH/1.618);
				ui.qZ.dunFeX =Math.round((ui.winWid-ui.sB.disWid)/2-ui.qZ.dunFeH/2)}
		ui.qZ.dunCor=Math.round((ui.qZ.dunFeH-ui.qZ.doneW)/2);
		ui.qZ.gapW 	=ui.qZ.dunCor-ui.qZ.doneW-Math.round((ui.qZ.dunCor-ui.qZ.doneW)/1.618);
		//ui.qZ.gapW2	=ui.qZ.gapW;
		ui.qZ.feY 	=ui.qZ.qZy+ui.qZ.doneH-ui.qZ.gapHei;
		ui.qZ.againX =ui.qZ.doneX+ui.qZ.doneW+ui.qZ.gapW;
		
		//ui.qZ.mineY =ui.qZ.topGap-Math.ceil((ui.qZ.optRad*2+ui.qZ.optStr)/2)
		//ui.qZ.disHei =ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFnt*2+ui.qZ.qZh+ui.qZ.dunFeh;
		ui.qZ.disHei =ui.qZ.qZy+ui.qZ.dunFeh-ui.qZ.disVrt;//+ui.qZ.dunF1;
		ui.qZ.winHei =ui.qZ.disHei+(2*ui.qZ.disVrt);

		//ui.qZ.feCubW= mR((ui.qZ.dunFeH-2*ui.qZ.dunF1)/1.618);
		ui.qZ.feCubW= mR((ui.qZ.doneW*1.618));
		ui.qZ.feCubX= mR((ui.qZ.dunFeH-ui.qZ.doneH-ui.qZ.feCubW));
		ui.qZ.tyColF =mR((ui.qZ.doneH-2*ui.qZ.dunF2)/1.618);
		ui.qZ.tyColM= ui.qZ.dunF1+mR((ui.qZ.dunFeH-ui.qZ.feCubW-ui.qZ.doneH-ui.qZ.dunF1*2)/2);
		ui.qZ.tyColL= ui.qZ.dunFeX+ui.qZ.doneH-ui.qZ.dunF1;
		ui.qZ.tyColR= mR(ui.qZ.dunFeX +ui.qZ.dunFeH/2 -ui.qZ.feCubW/2);
		}
// INVA LOGO gross negligence

//"MORE" button opens an info screen with "back" and "OK" buttons in the same places. theme phtalo blue or ultramarine

	ui.tB.abTabH=(ui.tB.tooWid*FL.tBToolsL)+3;
	ui.tB.abTabsW=ui.tB.tabGap+(FL.statTabsL*(ui.tB.abTabW+ui.tB.tabGap));
	//ui.tB.reTabG=((ui.tB.reTabW-9.425)/Math.sqrt(2));
	//ui.tB.reTabG=((ui.tB.reTabW-9.433)/Math.sqrt(2));
	ui.tB.reTabG=Math.floor((ui.tB.reTabW-3)/1.618);
	//console.log(((ui.tB.reTabW+1)-ui.tB.reTabG)/2);
	ui.tB.disHrz=ui.tB.abTabH+ui.tB.abTabsW+ui.tB.tabSep;
	ui.tB.disWid=Math.max(ui.winWid-ui.sB.disWid-ui.tB.disHrz, (RE.simsL*ui.tB.reTabG)+30);
	ui.tB.skrHei=Math.floor(12);//3.236
	ui.tB.skrVrt=ui.tB.disHei-ui.tB.skrHei;

	ui.sQ.narVrt=ui.tB.disHei*4; 		ui.sQ.widVrt=ui.tB.disHei*2;

	ui.bP.disWid=ui.winWid-ui.sB.disWid;
	ui.bP.disHrz=0;
	ui.bP.disVrt=ui.winHei-Math.floor(ui.winHei/12);
	ui.bP.skrHei=Math.round((ui.tB.disHei-ui.tB.skrVrt)/1.618);
	ui.bP.rimHei=Math.round(ui.bP.skrHei/1.618);
	ui.bP.divWid=ui.winWid-Math.round((ui.winWid/1.618)-(ui.bP.skrHei/2));
	ui.bP.lilTip=Math.round(ui.bP.tipHei/1.618/1.618);
	ui.bP.lilDiv=Math.round(ui.bP.divWid/1.618/1.618);
	ui.bP.rH=(ui.bP.tipHei-ui.bP.skrHei)/2;
	ui.bP.cW=(ui.bP.divWid-ui.bP.lilDiv-ui.bP.lilTip)/3;
	ui.bP.lW=(ui.bP.lilDiv-ui.bP.lilTip-ui.tB.disHei/2)/2;

	ui.lK.dW=300;
	ui.lK.dH=159;
	ui.lK.sW=300;
	ui.lK.sH=500;

	ui.tY.cE1 = Math.round(Math.min(ui.winWid,ui.winHei)/4);
	ui.tY.cE2 = Math.round(Math.min(ui.winWid,ui.winHei)/3);
	if(FL.lIW===2){ ui.tY.cE =ui.tY.cE1;}
	else{ 			ui.tY.cE =ui.tY.cE2;}
	if( FL.sQW){ ui.sQ.disWid = ui.tY.cE1;}
	else 		{ui.sQ.disWid = ui.sB.disWid}

	ui.tY.cMarg =Math.round(ui.tY.cE/10);
	ui.tY.bMarg =ui.tY.cMarg/1.618;
	ui.tY.aMarg =ui.tY.bMarg/1.618;
	ui.tY.dMarg =Math.round(ui.tY.cMarg*1.618);
	ui.mD.lineW=Math.round(ui.tY.cMarg/10); 	if(ui.mD.lineW<1){ ui.mD.lineW=1}
	ui.mD.LineW=Math.round(ui.mD.lineW*1.618); 	if(ui.mD.LineW<1){ ui.mD.LineW=1}
	ui.mD.linew=Math.round(ui.mD.lineW/1.618); 	if(ui.mD.linew<1){ ui.mD.linew=1}

	ui.tY.cuHrz =Math.round(ui.winWid-ui.sB.disWid-(2*(ui.tY.cE/ui.tY.cuD))-ui.tY.cE-ui.tY.cMarg);
	ui.tY.c2x= Math.round(-(1.5 * ui.tY.cE)-ui.tY.cMarg);
	ui.tY.liW= Math.round(ui.winWid-(1*ui.sB.disWid)-(4*(ui.tY.cE/ui.tY.cuD))-(2*ui.tY.cE)-(3*ui.tY.cMarg));
	ui.tY.disHrz =ui.tY.liW;

	ui.tY.lIW= ui.tY.liW-ui.sQ.disWid;
	ui.tY.disWid =ui.winWid-ui.sB.disWid-ui.tY.liW;
	ui.tY.disVrt =ui.tB.disHei;
	ui.tY.liY=ui.tB.disHei;
	ui.tY.keX=ui.tY.liW+ui.tY.cMarg+ui.mD.linew/2;
	//ui.tY.keW=Math.round((4*(ui.tY.cE/ui.tY.cuD))+(2*ui.tY.cE)+ui.tY.cMarg);
	ui.tY.keW = ui.tY.disWid-ui.tY.cMarg-ui.tY.cMarg-ui.mD.linew;//ääää
	ui.tY.keY=Math.round((2*(ui.tY.cE/ui.tY.cuD))+ui.tY.cE+(2*ui.tY.cMarg)+ui.tY.c1y);
	//ui.tY.keY =
	ui.tY.keyGap= Math.round(ui.tY.aMarg);
	ui.tY.keyWid= (ui.tY.keW-(15*ui.tY.keyGap))/16;
	ui.tY.stY=Math.round(ui.tY.keY+((3*ui.tY.cE)/5));
	ui.tY.lilStY =Math.round(ui.tY.keY+((3*ui.tY.cE1)/5)); 

	ui.mD.keY=Math.round((2*(ui.tY.cE/ui.tY.cuD))+ui.tY.cE+(2*ui.tY.cMarg)+ui.tY.c1y);
	ui.mD.plW=Math.min(ui.winWid,ui.winHei)/1.5; 	ui.mD.plX =ui.winWid-ui.sB.disWid-ui.tY.cMarg-ui.mD.plW;
	ui.mD.plH=Math.min(ui.winWid,ui.winHei)/2; 		ui.mD.plY =ui.tB.disHei+ui.tY.cMarg;
	ui.mD.kex=ui.tY.liW+ui.tY.cMarg; 	ui.mD.keX =ui.winWid-ui.sB.disWid-ui.tY.cMarg;
	ui.mD.KeW=ui.mD.keX-ui.mD.kex; 					ui.mD.keW =(ui.mD.KeW-(11*ui.tY.keyGap))/12;
	//ui.mD.kex2=ui.mD.kex+ui.mD.keW+ui.tY.keyGap; 	ui.mD.keX2=ui.mD.kex2+(2*ui.tY.keyGap)+(3*ui.mD.keW);
	//ui.mD.KeW2= -(ui.mD.kex2-ui.mD.keX2); 				ui.mD.keW2=(ui.mD.KeW2-(3*ui.tY.keyGap))/4;
	ui.mD.disWid=ui.mD.KeW-ui.mD.plW-ui.tY.cMarg;
	ui.mD.disHei = Math.floor(ui.mD.plY+((6*ui.tY.cMarg))+(2*ui.tY.cMarg*1.618) + 1.618*(2*ui.tY.cMarg)-ui.tB.disHei);
	ui.mD.keH = Math.floor(ui.mD.keW/1.618);
	ui.mD.taH = ui.mD.plH-ui.tY.keyWid-ui.tY.cMarg;
	ui.mD.tRH = Math.round(ui.mD.taH*(3/11));
	ui.mD.tRL = Math.round(ui.mD.taH*(2/11));
	ui.mD.fRH = Math.round(ui.mD.tRH/1.618);
	ui.mD.fRH2= Math.round(ui.mD.tRH/1.618/1.3);
	ui.mD.fRL = Math.round(ui.mD.tRL/1.618);
	ui.mD.fRL2= Math.round(ui.mD.tRL/1.618/1.3);
	//ui.mD.tRL = Math.round(ui.mD.taH*(1.618/11));

	ui.mP.disWid=ui.winWid-ui.sB.disWid-ui.mP.liW-ui.sQ.disWid;

	ui.midMinHei1 =Math.round(ui.tB.disHei+ui.tY.stY/*-(ui.tY.cE/12)*/+ui.tY.keyGap+(ui.mD.keH/3));
	ui.midMinHei2 =Math.round(ui.tB.disHei+ui.tY.lilStY/*-(ui.tY.cE/12)*/+ui.tY.keyGap+(ui.mD.keH/3));
	switch(FL.lIW){ case 1:	ui.midMinHei=ui.midMinHei1; break;
					case 2: ui.midMinHei=ui.midMinHei2; break;}
	ui.bP.minHei=173;
	switch(FL.bPH){ case 0: ui.bP.disHei=173; break;
					case 1: ui.bP.disHei=452; break;
					case 2: ui.bP.disHei=ui.winHei; break;}	

	if((ui.bP.disHei+ui.midMinHei)<ui.winHei){ ui.bP.disHei =ui.winHei-ui.midMinHei;}
	ui.bP.minVer=ui.midMinHei+ui.bP.minHei;
	if(ui.bP.minVer <ui.winHei){ ui.bP.minVer=ui.winHei}

	if(FL.fe !=="quiz"){ ui.feHei =ui.midMinHei+ui.bP.disHei;}
	else{ 				 ui.feHei =ui.winHei}
	ui.tY.disHei=ui.midMinHei-ui.tB.disHei;
	ui.tY.liHe = ui.midMinHei-ui.tB.disHei;
	ui.sQ.disHei=ui.midMinHei-ui.tB.disHei;

	ui.bP.tooVer=ui.bP.minVer-(FL.bPToolsL*ui.tB.disHei);

	// sidebar feature tools

	if(FL.fe!=="quiz"){
		ui.sK.disVrt =ui.sB.fesHei+ui.sB.HUDhei+ui.sB.tooHei;
		ui.sK.disHei =ui.midMinHei-ui.sK.disVrt;}
	ui.sK.widMid =ui.sK.disWid/2;
	ui.sK.svgHei =2;
	switch(FL.fe){
	case "type": 	FL.sKTypeTools.forEach(function(t){ if(Array.isArray(t)){ t.forEach(function(){ ui.sK.svgHei+=ui.sK.tH+2}); ui.sK.svgHei+=4}
														else{ 										ui.sK.svgHei+=ui.sK.tH+2}}); break;
	case "mood":	FL.sKMoodTools.forEach(function(t){ if(Array.isArray(t)){ t.forEach(function(){ ui.sK.svgHei+=ui.sK.tH+2}); ui.sK.svgHei+=4}
														else{ 										ui.sK.svgHei+=ui.sK.tH+2}}); break;
	case "quiz":	FL.sKQuizTools.forEach(function(t){ if(Array.isArray(t)){ t.forEach(function(){ ui.sK.svgHei+=ui.sK.tH+2}); ui.sK.svgHei+=4}
														else{ 										ui.sK.svgHei+=ui.sK.tH+2}}); break}


	// type stage or table
	ui.tY.stgf=Math.round(ui.tY.cE/6);
	ui.tY.stgy=Math.round(ui.tB.disHei+ui.tY.disHei-ui.tY.stgf-ui.tY.cMarg);
	ui.tY.stgF=Math.round((2*ui.tY.cE)/5);
	ui.tY.stgY=Math.round(((ui.tY.keY+ui.tY.keyWid+ui.tY.stgy+(ui.tY.stgf/3))/2)-ui.tY.stgF);

	ui.tY.tbY =Math.round(ui.tY.keY+ui.tY.keyWid+ui.tY.bMarg);
	ui.tY.tbH =Math.round(ui.tY.disHei-ui.tY.tbY-ui.tY.cMarg+ui.tB.disHei);
	ui.tY.tbW =Math.round(ui.tY.keW+ui.mD.linew);
	ui.tY.tbX =ui.tY.liW+ui.tY.cMarg;
	ui.tY.coW =ui.tY.tbW/5;
	ui.tY.cow =ui.tY.coW-ui.mD.linew;
	ui.tY.roH =ui.tY.tbH/4;
	ui.tY.roh =ui.tY.roH-ui.mD.linew;

	ui.tY.tY1 =Math.floor(-2/7*ui.tY.roh);
	ui.tY.tY2 =Math.floor(2/15*ui.tY.roh);
	ui.tY.tCO =ui.tY.cMarg;
	ui.tY.tCW =ui.tY.cMarg+2*ui.mD.lineW;
	ui.tY.tC2 =ui.tY.tCO+ui.tY.tCW;
	ui.tY.tC3 =ui.tY.tCO+ui.tY.tCW*2;
	ui.tY.tC4 =ui.tY.tCO+ui.tY.tCW*3;
	ui.tY.tCF =Math.floor(3/4*ui.tY.roh);

	ui.tY.coW2=ui.tY.tbW/4;
	ui.tY.cow2=ui.tY.coW2-ui.mD.linew;
	ui.tY.roH2=ui.tY.tbH/2;
	ui.tY.roh2=ui.tY.roH2-ui.mD.linew;

	ui.tY.tY12=Math.floor(-2/7*ui.tY.roh2);
	ui.tY.tY22=Math.floor(2/15*ui.tY.roh2);
	ui.tY.tCO2=ui.tY.cMarg;
	ui.tY.tCW2=ui.tY.cMarg+2*ui.mD.lineW;
	ui.tY.tC22=ui.tY.tCO2+ui.tY.tCW2;
	ui.tY.tC32=ui.tY.tCO2+ui.tY.tCW2*2;
	ui.tY.tC42=ui.tY.tCO2+ui.tY.tCW2*3;
	ui.tY.tCF2=Math.floor(3/4*ui.tY.roh2);
//	ui.tY.tC1
/*e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.mD.LineW+ui.tY.bMarg+ui.mD.LineW+(ui.tY.cMarg+ui.mD.LineW)*3, ui.tY.tbY+j*ui.tY.roH-1/5*ui.tY.roh,
 				undefined,"#0c0",undefined,3/4*ui.tY.roh,".000","CH"); E.push(e);
*/

// HUD needs to contain info of 1.0 sV = 2393042490 etc.

	// mood plane
	ui.mD.plFrW=Math.round(ui.tY.disWid/1.618-ui.tY.cMarg+ui.tY.bMarg);
	ui.mD.plFrX=Math.round(ui.tY.disHrz+ui.tY.disWid-(ui.tY.disWid/1.618)-ui.tY.bMarg);
	ui.mD.plFrY=ui.tB.disHei+ui.tY.cMarg;
	ui.mD.plDiW=Math.round(ui.tY.disWid/1.618-ui.tY.cMarg-ui.tY.bMarg);
	ui.mD.plDiX=Math.round(ui.tY.disHrz+ui.tY.disWid-(ui.tY.disWid/1.618));
	ui.mD.plDiH=Math.round(ui.tY.disHei/1.618-ui.tY.cMarg-ui.tY.bMarg);
	ui.mD.plFrH=Math.round(ui.mD.plDiH+2*ui.tY.bMarg);
	ui.mD.plDiY=Math.round(ui.mD.plFrY+ui.tY.bMarg);
	// mood keys
	ui.mD.keGaV=ui.mD.lineW/1.618;
	ui.mD.keGaH=ui.mD.LineW;
	ui.mD.keRoW=ui.tY.disWid-(2*ui.tY.cMarg)-ui.mD.linew;
	ui.mD.keRoX=ui.tY.disHrz+ui.tY.cMarg+ui.mD.linew/2;
	ui.mD.keFaH=ui.tY.keyWid/1.618-ui.mD.linew/2;
	ui.mD.keFnS=Math.round(ui.mD.keFaH/1.414);
	ui.mD.keFnY=Math.round(ui.mD.keFaH/7);
	ui.mD.keFaW=((ui.mD.keRoW-(12*ui.mD.keGaH))-ui.mD.linew/2)/13;
	ui.mD.pPmRY=Math.round(ui.mD.plFrY+ui.mD.plFrH+ui.tY.aMarg);
	ui.mD.sPmRY=ui.mD.pPmRY+ui.mD.keFaH+ui.mD.keGaV;
	ui.mD.obKeH=2*ui.mD.keFaH+ui.mD.keGaV;
	ui.mD.gndRY=ui.mD.pPmRY-ui.tY.cMarg-ui.mD.keFaH;
	ui.mD.sexRY=ui.mD.gndRY-ui.mD.keFaH-ui.mD.keGaV;
	// mood disp
	ui.mD.tbFrW=Math.round(ui.tY.disWid-ui.mD.plFrW-2*ui.tY.cMarg-ui.tY.aMarg);
	ui.mD.tbFrX=ui.tY.disHrz+ui.tY.cMarg;
	ui.mD.tbFrY=ui.mD.plFrY;
	ui.mD.tbFrH=ui.mD.sexRY-ui.tB.disHei-2*ui.tY.cMarg;
	ui.mD.tbDiW=(ui.mD.tbFrW-ui.mD.LineW*3);
	ui.mD.tbDiX=(ui.mD.tbFrX+ui.mD.LineW*1.5);
	ui.mD.tbDiH=(ui.mD.tbFrH-ui.mD.LineW*3);
	ui.mD.tbDiY=(ui.mD.tbFrY+ui.mD.LineW*1.5);
	ui.mD.tbHeW=Math.round(ui.mD.tbDiW/1.618);
	ui.mD.tbRoH=(ui.mD.tbDiH*(1/5));
	ui.mD.tbCeW=ui.mD.tbDiW/2;
	ui.mD.tbCeB=ui.mD.tbRoH/1.618;
	ui.mD.tbCeT=ui.mD.tbCeB/1.618-ui.mD.LineW/2;
	ui.mD.tbTxX=(ui.mD.tbCeW+ui.mD.tbCeT+ui.mD.LineW)/2;
	// stage or table
	ui.mD.tbY =Math.round(ui.mD.pPmRY+ui.mD.obKeH+ui.mD.linew/2+ui.tY.bMarg);
	ui.mD.tbH =Math.round(ui.tY.disHei+ui.tY.disVrt-ui.mD.tbY-ui.tY.cMarg);
	ui.mD.roH =ui.mD.tbH/5-ui.mD.linew;
	ui.mD.coW =ui.tY.tbW/13-ui.mD.linew;

	// scalar
	ui.sC.diX =ui.tY.disHrz+ui.tY.cMarg;
	ui.sC.diY =ui.tY.disVrt+ui.tY.cMarg;
	ui.sC.diW =ui.tY.disWid-2*ui.tY.cMarg;
	ui.sC.diH =Math.round(/*3/4**/ui.tY.disHei-2*ui.tY.cMarg);
	ui.sC.hDH =Math.round((ui.sC.diH-ui.tY.bMarg)/2);
	ui.sC.hDB =Math.round(ui.sC.diY+ui.sC.hDH+ui.tY.bMarg);
	ui.sC.roW =Math.round(ui.sC.diW-2*ui.tY.bMarg);
	ui.sC.roX =Math.round(ui.sC.diX+ui.tY.bMarg);
	ui.sC.mQY =Math.round(ui.sC.diY+ui.sC.hDH/2);
	ui.sC.cQY =Math.round(ui.sC.hDB+ui.sC.hDH/2);
	ui.sC.cQW =ui.sC.diW/AB.fQsL;
	ui.sC.rQW =ui.sC.diW/AB.aQsL;
	ui.sC.quH =ui.tY.dMarg;
	
// markover needs to print each line FOUR TIMES:
// line 1: intension's romantic quality
// line 2: intension's classical quality
// line 3: extension's romantic quality
// line 4: extension's classical quality	
}


function initDraw(){
	svgFe =document.createElementNS( nS,"svg");
	/*nS =svgFe.namespaceURI;*/ svgFe.appendChild( defs);
	divFe =document.createElement( 'div');divFe.setAttribute( 'id','fE');
	svgFe.setAttribute( 'width', ui.winWid);
	if(ui.winHei <ui.feHei){ 	svgFe.setAttribute( 'height',ui.feHei);
								divFe.style.height 			=ui.feHei+"px";
								document.body.style.height 	=ui.feHei+"px";}
	else { 						svgFe.setAttribute( 'height',ui.winHei);
								divFe.style.height 			=ui.winHei+"px";
								document.body.style.height 	=ui.winHei+"px";}
	divFe.appendChild( svgFe);

	switch( FL.fe){
		case "quiz" 	: 
			ui.sB.disHei=ui.winHei;	
			svgQz =document.createElementNS( nS,"svg");
			divQz =document.createElement( 'div');divQz.setAttribute( 'id','qZ');
			svgQz.setAttribute( 'width', ui.winWid-ui.sB.disWid);
			svgQz.setAttribute( 'height', ui.qZ.winHei);
			divQz.style.height 			=ui.winHei+"px";
			divQz.appendChild( svgQz);
			if(FL.qZopts){
				svgSk =document.createElementNS( nS,"svg");
				divSk =document.createElement( 'div'); divSk.setAttribute( 'id','sK');
				
				svgSk.setAttribute( 'width', ui.sB.disWid-2);
				svgSk.setAttribute( 'height',ui.sK.svgHei);
				divSk.style.width = ui.sB.disWid-4+'px';
				divSk.style.height =ui.sK.disHei+'px';
				divSk.style.top =ui.sK.disVrt+'px';
				divSk.style.left =ui.sB.disHrz+2+'px';
				divSk.appendChild( svgSk)}
		break;
		case "type" : case "mood" : case "scalar" : case "mosaic" : case "rels" : case "marker" :
			ui.sB.disHei=ui.midMinHei;
			svgSk =document.createElementNS( nS,"svg");
			svgTb =document.createElementNS( nS,"svg");
			svgLi =document.createElementNS( nS,"svg");
			svgLk =document.createElementNS( nS,"svg");
			svgSq =document.createElementNS( nS,"svg");
			divSk =document.createElement( 'div');divSk.setAttribute( 'id','sK');
			divTb =document.createElement( 'div');divTb.setAttribute( 'id','tB');
			divLi =document.createElement( 'div');divLi.setAttribute( 'id','lI');
			divLk =document.createElement( 'div');divLk.setAttribute( 'id','lK');
			divSq =document.createElement( 'div');divSq.setAttribute( 'id','sQ');

			svgSk.setAttribute( 'width', ui.sB.disWid-2);
			svgSk.setAttribute( 'height',ui.sK.svgHei);
			divSk.style.width = ui.sB.disWid-4+'px';
			divSk.style.height =ui.sK.disHei+'px';
			divSk.style.top =ui.sK.disVrt+'px';
			divSk.style.left =ui.sB.disHrz+2+'px';
			divSk.appendChild( svgSk);

			svgTb.setAttribute( 'width', ui.tB.disWid); // modify later
			svgTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.width = ui.winWid-ui.sB.disWid-ui.tB.disHrz+'px';
			divTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.left =ui.tB.disHrz+"px";
			divTb.appendChild( svgTb);
			
			if(ui.tY.lIW>0){
				svgLi.setAttribute( 'width', ui.tY.lIW); // modify later
				svgLi.setAttribute( 'height', ui.lI.svgHei);
				divLi.appendChild( svgLi);
				if(ui.tY.lIW>120){
					svgLk.setAttribute( 'width', ui.lK.sW);
					svgLk.setAttribute( 'height',ui.lK.sH);
					divLk.style.width = ui.lK.dW+"px";
					divLk.style.height =ui.lK.dH+"px";
					divLk.appendChild( svgLk);
					divFe.appendChild( divLk)}
				else{
					divLk.style.display="none";
				}
				//if( FL.liNarrow) { 	divLk.style.width =(ui.mP.liW-122)+"px"}
				/*else{*/ 				divLk.style.width =(ui.tY.lIW-122)+"px";//}
				if( FL.lIW===0){ 	divLi.style.width =ui.mP.liW+'px'}
				else{				divLi.style.width =ui.tY.lIW+'px'}

				divLi.style.height = (ui.midMinHei-(5*ui.tB.disHei))+'px';
				divLi.style.top =ui.tB.disHei*5+"px";}
			else{
				divLi.style.display="none";
			}
		

			svgSq.setAttribute( 'width', ui.sQ.disWid); 
			svgSq.setAttribute( 'height',ui.sQ.disHei/*-ui.sQ.cH*/);
			divSq.style.width = ui.sQ.disWid+'px';
			divSq.setAttribute( 'height',ui.sQ.disHei/*-ui.sQ.cH*/);
			if( FL.lIW===0) { 	divSq.style.left =ui.mP.liW+"px"}
			else{ 				divSq.style.left =ui.tY.lIW+"px"}
			divSq.style.top =(ui.tB.disHei/*+ui.sQ.cH*/)+'px';
			divSq.appendChild( svgSq);

			/*if(!FL.liNarrow) {
				divSc.style.width = ui.sQ.disWid-20+"px";
			 	divSc.style.left =ui.tY.lIW+9+"px"}*/

}}
// pååå way object directed, speed can be "escalator" or "gate" etc

function postDraw(){ 
	if( FL.fe==="quiz"){ var b =[]; var e =null; var E =null;
		/*e =document.getElementById( "qZ_h"); e =e.getBBox();
		E =mkL( e.x, e.y+e.height-6, e.width, 6, undefined, "#fff",undefined,undefined,undefined,undefined,undefined,undefined,"0.75"); console.log( E); b.push( E);
		b.forEach( function(e){ svgQz.appendChild( e)})*/
		//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op){ 
		for(var i=0; i<FL.quizL; i++){ { if(FL.quiz[i].mT){
			E =document.getElementsByClassName("qZ_"+i+"_0");
			console.log( E);
		}}}
	}
}


var defs 	=document.createElementNS( nS, "defs");

var filter  =document.createElementNS( nS, "filter");
filter.setAttribute( "id", "fil1");		filter.setAttribute( "x", "-40%"); filter.setAttribute( "y", "0");
filter.setAttribute( "width", "180%");
var gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic");	gaussianFilter.setAttribute( "stdDeviation","6");
filter.appendChild(gaussianFilter);		defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'fil2'); 		filter.setAttribute( "x", "-64%"); filter.setAttribute( "y", "-31%"); 	
filter.setAttribute( "width", "291%"); 	filter.setAttribute( "height", "162%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","16");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'fil3'); 		filter.setAttribute( "x", "-100%"); filter.setAttribute( "y", "-100%"); 	
filter.setAttribute( "width", "300%"); 	filter.setAttribute( "height", "300%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","8");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'fil4'); 	filter.setAttribute( "x", "-10%"); filter.setAttribute( "y", "-10%");	
filter.setAttribute( "width", "120%"); 	filter.setAttribute( "height", "120%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","3");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'fil5'); 		filter.setAttribute( "x", "-64%"); filter.setAttribute( "y", "-31%"); 	
filter.setAttribute( "width", "291%"); 	filter.setAttribute( "height", "500%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","64");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);


function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op){ var r=document.createElementNS( nS,'rect');
					 				r.setAttribute( 'x',x);
					 				r.setAttribute( 'y',y);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id){ 		r.setAttribute( 'id', 	id) }
					if( co){ 		r.setAttribute( 'fill', co) }
					if( cl){ 		r.setAttribute( 'class',cl) }
					if( sC){ 		r.setAttribute( 'stroke',sC); r.setAttribute( 'stroke-width',sW)}
					if( pE){ 		r.setAttribute( 'pointer-events', 'none')}
					if( rx){ 		r.setAttribute( 'rx',rx)}
					if( ry){ 		r.setAttribute( 'ry',ry)}
					if( op){ 		r.setAttribute( 'fill-opacity',op)}return r}
function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
					if( fonSiz){ 	t.setAttribute( 'font-size',fonSiz)}
					if( id){ 		t.setAttribute( 'id', 	id) }
					if( co){ 		t.setAttribute( 'fill', co) }
					if( cl){ 		t.setAttribute( 'class',cl) }
					if( fonFam){ switch( fonFam){
						case "PF" : 	t.setAttribute( 'font-family','ProFontWindows'); 			break;
						case "AI" : 	t.setAttribute( 'font-family','Aileron'); 					break;
						case "SF" : 	t.setAttribute( 'font-family','Steelfish Rg'); 				break;
						case "CH" : 	t.setAttribute( 'font-family','Chathura'); 					break;
						case "SR" : 	t.setAttribute( 'font-family','Strike Fighter');			break;
//						case "MP" : 	t.setAttribute( 'font-family','More Perfect DOS VGA');		break;
//						case "AB" : 	t.setAttribute( 'font-family','Aileron Bold');				break;
						case "TR" : 	t.setAttribute( 'font-family','times new roman'); 			break;
										t.setAttribute( 'font-family',fonFam)}}
									t.setAttribute( 'pointer-events', 'none');
					if( anc){ 		t.setAttribute( 'text-anchor',anc)}
					if( op){	 	t.setAttribute( 'opacity',op)}
					if( dB){	 	t.setAttribute( 'dominant-baseline',dB)}
									t.textContent =txt; return t}
//function  gT(font,x,y,fS,c,txt,anc,dB,lH,op,sT,pE,id,cl)
function gT(font,x,y,fS,c,txt,anc,dB,lH,op,sT,pE,id,cl){ var t =document.createElementNS( nS,'text');
					if( font){ switch( font){
						case "PF" : 	t.setAttribute( 'font-family','ProFontWindows'); 			break;
						case "AI" : 	t.setAttribute( 'font-family','Aileron'); 					break;
						case "SF" : 	t.setAttribute( 'font-family','Steelfish Rg'); 				break;
						case "CH" : 	t.setAttribute( 'font-family','Chathura'); 					break;
						case "SR" : 	t.setAttribute( 'font-family','Strike Fighter');			break;
//						case "MP" : 	t.setAttribute( 'font-family','More Perfect DOS VGA');		break;
//						case "AB" : 	t.setAttribute( 'font-family','Aileron Bold');				break;
						case "TR" : 	t.setAttribute( 'font-family','times new roman'); 			break;
										t.setAttribute( 'font-family', font)}}
					if( !Array.isArray(txt)){ t.textContent =txt;
						if( dB){	 	t.setAttribute( 'dominant-baseline',dB);
						if( sT){		t.setAttribute( 'font-style',sT)}}}
					else{ 					var tL =txt.length;
						for(var i=0; i<tL; i++){
											var Y=y;
							if(!lH){ 			var lH =1}
											var lHpx =Math.round(fS*lH);
							if( txt[i]!==""){
												b =document.createElementNS( nS,'tspan');
												b.textContent =txt[i];
								if( sT){ 		b.setAttribute( 'font-style',sT)}
								if(dB==="middle"){	y -= Math.round(fS*((lH-1)/2));
													b.setAttribute( 'dominant-baseline',"hanging");
													Y -= tL *lHpx /2}
								if(dB==="hanging"){	b.setAttribute( 'dominant-baseline',"hanging");
													Y += i*(lHpx -fS);
													/*Y += (lHpx -fS)*/}
												b.setAttributeNS(null, 'y', Y+i*lHpx);
												b.setAttributeNS(null, 'x', x);
												t.appendChild( b)}}}
									t.setAttribute( 'x',x);
									t.setAttribute( 'y',y);
									t.setAttribute( 'font-size',fS);
					if( c ){ 		t.setAttribute( 'fill', c ) }
					if( id){ 		t.setAttribute( 'id', 	id) }
					if( cl){ 		t.setAttribute( 'class',cl) }
					if( pE){ 		t.setAttribute( 'pointer-events', pE);}
					if( anc){ 		t.setAttribute( 'text-anchor',anc)}
					if( op){	 	t.setAttribute( 'opacity',op)}
					
									return t}
/*
var $svg = d3.select("#svg0");
var $text = $svg.append("text");
var $tspan1 = $text.append('tspan');
var $tspan2 = $text.append('tspan');
var $tspan3 = $text.append('tspan');

$text.attr('transform', 'translate(0, 18)');
$tspan1.text('Lorem ipsum');
$tspan2.text('dolor').style('alignment-baseline', 'text-before-edge');
$tspan3.text('sit amet');
*/
function mkI(x,y,X,Y,id,co,st,op,d){var r=document.createElementNS( nS,'line');
									r.setAttribute( 'x1',x);r.setAttribute( 'x2',X);r.setAttribute( 'y1',y);r.setAttribute( 'y2',Y);
					if( id){ 			r.setAttribute( 'id',id)}
					if( op){ 			r.setAttribute( 'opacity',op)}
					if( d){ 			r.setAttribute( 'stroke-dasharray',d)}
					r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}
function mkS(pt,id,co,cl,op,pE) { var p=document.createElementNS( nS,'polygon');
									p.setAttribute("points", pt);
									p.setAttribute( 'fill',co);
					if(id){ 			p.setAttribute( 'id',id)}
					if(cl){ 			p.setAttribute( 'class',cl)}
					if(op){ 			p.setAttribute( 'opacity',op)}
					if(!pE){			p.setAttribute( 'pointer-events', 'none')}return p}
function mkE(x,y,w,h,c){ var e=document.createElementNS( nS,'ellipse');
									e.setAttribute('cx',x);e.setAttribute('cy',y);
									e.setAttribute( 'width',2*w);e.setAttribute( 'height',2*h);
									e.setAttribute( 'rx',w);e.setAttribute( 'ry',h);
									e.setAttribute( 'fill',c); return e}
function drS(v,l,id,cl,op,sC,sW){ var e=document.createElementNS( nS,'polygon'); e.setAttribute("points",v);
	e.setAttribute( 'fill',l); e.setAttribute('id',id); e.setAttribute('class',cl);
	if(op){ e.setAttribute( 'opacity',op);} if(sC){ e.setAttribute('stroke',sC)}if(sW){ e.setAttribute('stroke-width',sW)} return e}
function drA(x,y,w,h,l,id,cl,b,L,op){ var e=document.createElementNS( nS,'rect'); e.setAttribute( 'fill',l);
	e.setAttribute('x',x);e.setAttribute('y',y); e.setAttribute( 'width',w); e.setAttribute( 'height',h); 
	if(b > 0){ e.setAttribute( 'stroke',L); e.setAttribute( 'stroke-width',b)}
	if(op){ e.setAttribute( 'opacity',op)} e.setAttribute( 'id',id); e.setAttribute( 'class',cl); return e}
function drC(x,y,r,c,id,cl,sW,sC,d,fO,sO){var e=document.createElementNS( nS,'circle'); if(c){e.setAttribute( 'fill',c)}
	e.setAttribute('cx',x); e.setAttribute('cy',y); e.setAttribute('r',r); e.setAttribute('id',id);
	e.setAttribute('class',cl);	e.setAttribute('stroke',sC); e.setAttribute('stroke-width',sW);
	if(d){e.setAttribute('stroke-dasharray',d)} if(fO){ e.setAttribute( 'fill-opacity',fO)}
	if(sO){ e.setAttribute( 'stroke-opacity',sO)} return e}

// N and F are vital IEs, S and T are mental IEs

function mkFb( n,sB,ni){ var id="sB_btn-"+n; n = n * sB.rowHei;
	if( !(FL.fe === ni || (ni === "tune" && FL.qZopts))){
			var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.btn,"sB_btn")}
	else{ 	var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.sel,"sB_btn")}
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sidebarKey( e.id);break}}); return e }
function mkFt( n,sB,ni){ var id="sB_btT-"+n; n = n * sB.rowHei;
	if( !(FL.fe === ni || (ni === "tune" && FL.qZopts))){
			if( FL.fe==="quiz"&&(ni==="quiz"||ni==="tune"||ni==="feat.")){ var ni =ni.toUpperCase()}
			var e =mkT( ui.sB.disHrz+sB.bTOX+50, n+sB.bTOY+ui.sB.disVrt,	id, sB.btnTxt, "sB_btT",sB.fnt,ni,'PF',"end")}
	else{ 	if( FL.fe==="quiz"&&(ni==="quiz"||ni==="tune"||ni==="feat.")){ var ni =ni.toUpperCase()}
			var e =mkT( ui.sB.disHrz+sB.bTOX, n+sB.bTOY+ui.sB.disVrt,	id, sB.selTxt, "sB_btT",sB.fnt,ni,'PF')}return e }
function mkFr( n,sB,ni){ var et=[]; var yi=(n * sB.rowHei)+sB.disVrt;
	if( !(FL.fe === ni || (ni === "tune" && FL.qZopts))){
		var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnU, "sB_btnBrd"); et.push( e);
		e=mkL(ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnR/*"#880000"*/,"sB_btnBrd",false); et.push( e)}
	else{ var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.selU, "sB_btnBrd"); et.push( e);
		e=mkL( ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid,sB.btnBrd, "sB_btnBrd-"+n, sB.selD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selR/*"#880000"*/,"sB_btnBrd",false); et.push( e)} return et}

function refreshSbTool( t){ 	var id ="sBTool-"+t; var e=document.getElementById( id); e.remove();
							   	var id ="sBToolT-"+t;var e=document.getElementById( id); e.remove();
								var T = mkSbTool( t,ui.sB); T.forEach( function(T){ svgFe.appendChild( T)})}
function sBToolMouseDown( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(FL.sBTools[t]){
	case "play" 		: 	FL.sBToolsP[t] =true; FL.moved =true; FL.playMouseDown =true;
							FL.fastForward =false; FL.prevFastForward =false;
							FL.skipForward =false; FL.prevSkipForward =false;
							FL.prevPlay =FL.play; FL.play =false;
							startTurn( FL.sim); console.log(t);refreshSbTool( t); 								break;
	case "fastForward" 	: 	FL.sBToolsP[t] =true; FL.moved =true; FL.fastForwardMouseDown =true;
							FL.play =false; FL.prevPlay =false;
							FL.skipForward =false; FL.prevSkipForward =false;
							FL.prevFastForward =FL.fastForward; FL.fastForward =false;
							startTurn( FL.sim); refreshSbTool( t); 								break;
	case "skip" 		: 	FL.sBToolsP[t] =true; FL.moved =true; FL.skipMouseDown =true;
							FL.play =false; FL.prevPlay =false; 
							FL.prevFastForward =false; FL.fastForward =false;
							FL.prevSkipForward =false; FL.skipForward =false;
							/*startSkip( FL.sim);*/ 												break;
	case "skipForward" 	: 	FL.sBToolsP[t] =true; FL.moved =true; FL.skipForwardMouseDown =true;
							FL.play =false; FL.prevPlay =false;
							FL.prevFastForward =false; FL.fastForward =false;
							FL.prevSkipForward =FL.skipForward; FL.skipForward =false;
							/*startSkip( FL.sim);*/ refreshSbTool( t)}}
function sBToolMouseUp  ( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(FL.sBTools[t]){
	case "play" 		: 	FL.sBToolsP[t] =false;if( !FL.prevMoved){ FL.prevMoved =true}
							if( !FL.prevPlay){ 	FL.prevPlay =true; FL.play =true }
							else{ 				FL.prevPlay =false;FL.play =false}
							refreshSbTool( t); 													break;
	case "fastForward" 	: 	FL.sBToolsP[t] =false;if( !FL.prevMoved){ FL.prevMoved =true}
							if( !FL.prevFastForward){ 	FL.prevFastForward =true; FL.fastForward =true }
							else 					{ 	FL.prevFastForward =false;FL.fastForward =false}
							refreshSbTool( t); 													break;
	case "skip" 		: 	FL.sBToolsP[t] =false;if( !FL.prevMoved){ FL.prevMoved =true} 							break;
	case "skipForward" 	: 	FL.sBToolsP[t] =false;if( !FL.prevMoved){ FL.prevMoved =true}
							if( !FL.prevSkipForward){ 	FL.prevSkipForward =true; FL.skipForward =true }
							else 					{ 	FL.prevSkipForward =false;FL.skipForward =false}
							refreshSbTool( t)}}
function sBToolMouseLeave(e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(FL.sBTools[t]){
	case "play" 		: 	if( !FL.prevMoved && FL.moved && FL.sBToolsP[t]){ FL.moved =false}
							if( FL.playMouseDown){ 			FL.playMouseDown =false;
								FL.prevPlay =false;		 /*undoStartTurn(FL.sim);*/refreshSbTool(t)}break;
	case "fastForward" 	: 	if( !FL.prevMoved && FL.moved && FL.sBToolsP[t]){ FL.moved =false}
							if( FL.fastForwardMouseDown){ 	FL.fastForwardMouseDown =false;
								FL.prevFastForward=false;/*undoStartTurn(FL.sim);*/refreshSbTool(t)}break;
	case "skip" 		: 	if( !FL.prevMoved && FL.moved && FL.sBToolsP[t]){ FL.moved =false}
							if( FL.skipMouseDown){ 			FL.skipMouseDown =false;
	 							/*undoStartSkip( FL.sims, FL.sim)*/}								break;
	case "skipForward" 	: 	if( !FL.prevMoved && FL.moved && FL.sBToolsP[t]){ FL.moved =false}
							if( FL.skipForwardMouseDown){ 	FL.skipForwardMouseDown =false;
								FL.prevSkipForward =false; 	/*undoStartSkip( FL.sims, FL.sim);*/
								refreshSbTool(t)}}}
function sBTuneMoreMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									FL.sBTunes[t] +=FL.sBTunes[t]; 								}
function sBTuneLessMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									FL.sBTunes[t] -=FL.sBTunes[t]; 								}
function sBTuneMouseDown( e){	var t=parseInt(e.substr( e.indexOf('-')+1)); switch( t){
	case 0 : FL.sBTunes[t] =prompt("Set play delay in 1/100 seconds:", 			FL.sBTunes[t]); 	break;
	case 1 : FL.sBTunes[t] =prompt("Set fast forward delay in 1/100 seconds:", 	FL.sBTunes[t]); 	break;
	case 2 : FL.sBTunes[t] =prompt("Set skip length:", 							FL.sBTunes[t]); 	break;
	case 3 : FL.sBTunes[t] =prompt("Set skip fast forward length:",				FL.sBTunes[t])}}
function clearTool(n){var e=Array.from(document.querySelectorAll('sB')); e.forEach( function(e){ e.remove()})}
function mkSbTool( n, sB){ var r=[]; var b; var l; var s; var y; var x=sB.disWid-(ui.tB.tooWid/2);
	b=mkL( sB.disHrz+sB.disWid-ui.tB.tooWid, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1, ui.tB.tooWid-2, ui.tB.tooWid-2,
		"sBTool-"+n, "#555", "sBTool", undefined, 0, undefined, ui.tB.tooWid/3.236);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBToolMouseDown( b.id);break;
											case "mouseup" 	 : sBToolMouseUp(b.id);   break;
											case "mouseleave": sBToolMouseLeave(b.id)}});r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1, sB.disWid-ui.tB.tooWid-4, ui.tB.tooWid-2,
		"sBTune-"+n, "#555", undefined, undefined, 0, true, ui.tB.tooWid/3.236); r.push(b);
	b=mkI( sB.disHrz,sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/2),
		sB.disHrz+sB.disWid-ui.tB.tooWid, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/2),
		"sBTuneDeco"+n, sB.btnL, 3); r.push(b);
	b=mkT( sB.disHrz+Math.floor((sB.disWid-ui.tB.tooWid)/2), sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n),
		"sBTuneMoreT-"+n, "#888", undefined, ui.tB.tooWid/3.236, "▲", "arial", "middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1,
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*2),
		"sBTuneMore-"+n, undefined,"sBTuneMore",undefined,undefined,undefined,undefined,undefined,"0");
	//sBTuneMoreMouseDown( e);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMoreMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-ui.tB.tooWid)/2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/1.618),
		"sBTuneLessT-"+n, "#888", undefined,ui.tB.tooWid/3.236, "▼","arial","middle"); r.push(b);
	//mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+Math.round(((ui.tB.tooWid-2)/5)*3),
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*3),
		"sBTuneLess-"+n, undefined,"sBTuneLess",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneLessMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-ui.tB.tooWid)/2+1, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/3.7),
		"sBTuneT-"+n, "#fff", undefined,ui.tB.tooWid/3, FL.sBTunes[n], "PF","middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+Math.round(((ui.tB.tooWid-2)/5)*2),
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*2),
		"sBTune-"+n, 	undefined,"sBTune",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMouseDown( b.id);break;}});
	r.push(b);
	switch( FL.sBTools[n]){ 	
		case "play": 		if( FL.play){ l="❚❚"}else { l="►"}
							s =Math.floor(ui.tB.tooWid/1.618); y =sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3; break;
		case "fastForward": if( FL.fastForward)	{ 	l ="❚❚"; s =Math.floor(ui.tB.tooWid/1.618);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3}
							else 				{ 	l ="►►"; s =Math.floor(ui.tB.tooWid/3.236);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n+3)+(ui.tB.tooWid/5)} break;
		case "skip": 		l ="❚►"; s =Math.floor(ui.tB.tooWid/1.618);
							y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3; break;
		case "skipForward": if( FL.skipForward) { 	l ="❚❚"; s =Math.floor(ui.tB.tooWid/1.618);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3}
							else 				{ 	l="❚►►"; s =Math.floor(ui.tB.tooWid/3.236);
												y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n+3)+(ui.tB.tooWid/5); break;}}
		/*case "reso" 		: l="⊞"; 							s=ui.tB.tooWid;
			y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)-(ui.tB.tooWid/4)}*/
	t=mkT( sB.disHrz+x, y, "sBToolT-"+n, "#ffffff", undefined, s, l, "arial", "middle");r.push(t);
	return r}
function mkTurnCounter(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3, ui.sB.disWid, ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	if(FL.sim){ if(FL.subjsL>0){
			e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined,
			ui.sB.fnt,FL.sim.nI+":"+FL.sim.turn+FL.sim.keySubj.nI, "PF","end"); E.push(e)}
		else{
			e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined,
			ui.sB.fnt,FL.sim.nI+":"+FL.sim.turn, "PF","end"); E.push(e)}} return E}
function mkResoTool(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3+ui.sB.HUDhei+ui.sB.tooHei, Math.round(ui.sB.disWid/1.618), ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined, ui.sB.fnt,"reso", "PF"); E.push(e); return E}
function sidebarKey( e){ var tab= parseInt(e.split("-").pop());
	if(FL.fe==="quiz"){	switch(FL.fes[tab]){case "tune" : FL.qZopts =!FL.qZopts; break;
											case "feat." : FL.fe =FL.fEfe;}}
	else{ 				FL.fEfe =FL.fes[tab]; FL.fe =FL.fes[tab]}
	predraw(); draw();}
function drSidebar(){ var obs=[];  var buf =null;
	buf =mkL(ui.sB.disHrz,ui.sB.disVrt,ui.sB.disWid,ui.sB.disHei,"sB",ui.sB.bG,"sB"); obs.push(buf);
	for( var i=0; i < FL.fesL; i++){
		buf =mkFb( i,ui.sB, FL.fes[i]); obs.push(buf);
		buf =mkFt( i,ui.sB, FL.fes[i]); obs.push(buf);
		buf =mkFr( i,ui.sB, FL.fes[i]); obs =obs.concat(buf)}
	obs.forEach( function(obs){ svgFe.appendChild( obs)});
	if(FL.fe !== "quiz"){ obs=[];
		buf=mkTurnCounter( FL.sim); obs =obs.concat(buf);
		for( var n=0; n < FL.sBToolsL;n++){ buf =mkSbTool( n, ui.sB); obs=obs.concat(buf)}
		obs.forEach( function(obs){ svgFe.appendChild( obs)}); obs=[];
		switch(FL.fe){ 
			case "mood": 		for( var n=0; n <FL.sKMoodToolsL;n++){ buf =mkSkMoodTool( n); obs=obs.concat(buf)} break;
			case "type": 		for( var n=0; n <FL.sKTypeToolsL;n++){ buf =mkSkTypeTool( n); obs=obs.concat(buf)} break;}
		obs.forEach( function(obs){ svgSk.appendChild( obs)});}
	else if(FL.qZopts){ obs=[]; for( var n=0; n <FL.sKQuizToolsL;n++){ buf =mkSkQuizTool( n); obs=obs.concat(buf)}
		obs.forEach( function(obs){ svgSk.appendChild( obs)})}}
	
//function sidebarKey( e){ var tab= parseInt(e.split("-").pop()); FL.fe=FL.fes[tab]; draw();}


//scalar qualities acquire positive and negative quality separately?

// detach --> shock ååå
// dysphoria --> terror?

//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)

//stattab summa 0–1

function sKQuizSingleToolMouseDown( n){	switch( FL.sKQuizTools[n]){
		case "private" 	: 	FL.qZprivate=  !FL.qZprivate; draw(); break;
		case "autist" 	: 	FL.qZautist=  !FL.qZautist; draw(); break;}}
function isSkQuizToolFaded( t){ return false; var r=false; if(Array.isArray(t)){ t =t[0]}	switch(t){
		case "Mood": if((FL.sKTypeBottom==="Stage")){ r=true} 	break;} return r}
function mkSkQuizSingleTool( n,yO,k,l,m,h){ var E =[]; var e =null; var T,b,s,t;
	if((FL.qZprivate && FL.sKQuizTools[n]==="private")||(FL.qZautist && FL.sKQuizTools[n]==="autist")){b=m; t=k; s=m;}
	else{  																								b=k; t=h; s=m;}
	e =mkL( 2, yO, ui.sK.keyWid,ui.sK.tH,undefined,b,"sKQuizTool-"+n,s,1,undefined,7,7);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKQuizSingleToolMouseDown( n);break}});E.push(e);
	switch( FL.sKQuizTools[n]){ case "private": 	T="Private\n Mode";	  break;
								case "autist": 		T="Autist\n Mode";  break;}
	e =mkT( ui.sK.widMid, yO-2, undefined,t,"sKQuizTool-"+n,14,T,"PF","middle");E.push(e); return E}
function mkSkQuizTool( n){ var yO=2.5; var k,l,m,h;
	if( isSkQuizToolFaded( FL.sKQuizTools[n])){ k="#000"; 		l="#3e3e3e"; 	m="#888"; 		h="#ccc"}
	else{ 										k="#000"; 		l=ui.tY.base; 	m=ui.tY.areaB; 	h=ui.tY.areaT}
	for(var i=0; i<n; i++){	if(Array.isArray(FL.sKQuizTools[i])){ FL.sKQuizTools[i].forEach(function(){ yO+=ui.sK.tH+2}); yO+=4}
							else{ 																		yO+=ui.sK.tH+2}}
	if( Array.isArray( FL.sKQuizTools[n])){ var E =mkSkQuizMultiTool( n,yO,k,l,m,h)}
	else{ 									var E =mkSkQuizSingleTool(n,yO,k,l,m,h)} return E}



function sKTypeSingleToolMouseDown( n){	switch( FL.sKTypeTools[n]){
		case "mosaicForm" 	: 	FL.mosaicForm=  !FL.mosaicForm; draw(); break;}}
function sKTypeMultiToolMouseDown( n,tune){ 
	switch(FL.sKTypeTools[n][0]){ 	
		case "Cube" 	: 	FL.sKTypeCube=tune; 	break;
		case "Select" 	: 	FL.sKTypeSelect=tune;	break;
		case "TableMT" 	: 	FL.sKTypeTable=tune; 	break;
		case "Mood" 	: 	FL.sKTypeMood=tune;  	break;
		case "Bottom" 	: 	FL.sKTypeBottom=tune;	break;}	draw();}
function mkSkTypeMultiToolKey( n,i,yO,k,l,m,h){ var E=[]; var e=null; var T,b,s,t,tune;
	switch( FL.sKTypeTools[n][0]){ 	
		case "Cube" 	: 	tune=FL.sKTypeCube; 	break;
		case "Select" 	: 	tune=FL.sKTypeSelect; 	break;
		case "Mood" 	: 	tune=FL.sKTypeMood; 	break;
		case "TableMT" 	: 	tune=FL.sKTypeTable; 	break;
		case "Bottom" 	: 	tune=FL.sKTypeBottom; 	break;}
	if(tune===FL.sKTypeTools[n][i]){b=m; s=h; t=k}
	else { 							b=l; s=m; t=h}
	switch(FL.sKTypeTools[n][i]){ 	
		case "Study" 	: 	T="Study"; 	break;
		case "Locate" 	: 	T="Use"; 	break;
		case "off" 		: 	T="Off"; 	break;
		case "local" 	: 	T="Local"; 	break;
		case "global" 	: 	T="Global"; break;
		case "save" 	: 	T="Save"; 	break;
		case "Legend" 	: 	T="Legend"; break;
		case "Worth" 	: 	T="Worth"; 	break;
		case "infElem" 	: 	T="InfElem";break;
		case "I & U" 	: 	T="I & U"; 	break;
		case "Total" 	: 	T="Total"; 	break;
		case "Stereo." 	: 	T="Stereo.";break;
		case "Infant." 	: 	T="Age-"; 	break;
		case "Raise" 	: 	T="Age+"; 	break;
		case "Queer-" 	: 	T="Queer-"; break;
		case "Queer+" 	: 	T="Queer+"; break;
		case "Faculty" 	: 	T="Faculty";break;
		case "Table" 	: 	T="Table"; 	break;
		case "Stage" 	: 	T="Stage"; 	break;}
	e =mkL( 4,yO+(ui.sK.tH+2)*i+2, 54, ui.sK.tH, undefined, b, "sKTypeTool-"+n, s,1,undefined,7,7);E.push(e);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKTypeMultiToolMouseDown( n, FL.sKTypeTools[n][i]); 	break}});
	e =mkT( ui.sK.widMid,yO+(ui.sK.tH+2)*i-1, undefined, t, "sKTypeTool-"+n,14,T,"PF","middle"); E.push(e);return E}
function isSkTypeToolFaded( t){ var r=false; if(Array.isArray(t)){ t =t[0]}	switch(t){
		case "Mood": if((FL.sKTypeBottom==="Stage")){ r=true} 	break;} return r}
function mkSkTypeMultiTool( n,yO,ck,lo,mi,hi){ var E=[];var e=null; var T;
	var l=FL.sKTypeTools[n].length; var h=l*(ui.sK.tH+2)+2; 
	e =mkL(2, yO, ui.sK.keyWid, h, undefined, lo, "sKTypeTool-"+n, mi,1, true,7,7); E.push(e);
	switch(FL.sKTypeTools[n][0]){ 	
		case "Cube" 	: T="cube";break;
		case "Select" 	: T="select";break;
		case "Mood" 	: T="table"; break;
		case "TableMT" 	: T="table"; break;
		case "Bottom" 	: T="bottom";break}
	e =mkT( ui.sK.widMid,yO, undefined, hi, "sKTypeTool-"+n,14,T,"AI","middle"); E.push(e);
	for(var i=1; i<l; i++){ e =mkSkTypeMultiToolKey( n,i,yO,ck,lo,mi,hi); E=E.concat(e)} return E}
function mkSkTypeSingleTool( n,yO,k,l,m,h){ var E =[]; var e =null; var T,b,s,t;
	if((!FL.mosaicForm && FL.sKTypeTools[n]==="mosaicForm")||(FL.stage && FL.sKTypeTools[n]==="stage")){b=m; t=k; s=m;}
	else{  																								b=k; t=h; s=m;}
	e =mkL( 2, yO, ui.sK.keyWid,ui.sK.tH,undefined,b,"sKTypeTool-"+n,s,1,undefined,7,7);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKTypeSingleToolMouseDown( n);break}});E.push(e);
	switch( FL.sKTypeTools[n]){ case "stage": 		T="Stage";	  break;
								case "mosaicForm": 	T="Compare";  break;}
	e =mkT( ui.sK.widMid, yO-2, undefined,t,"sKTypeTool-"+n,14,T,"PF","middle");E.push(e); return E}
function mkSkTypeTool( n){ var yO=2.5; var k,l,m,h;
	if( isSkTypeToolFaded( FL.sKTypeTools[n])){ k="#000"; 		l="#3e3e3e"; 	m="#888"; 		h="#ccc"}
	else{ 										k="#000"; 		l=ui.tY.base; 	m=ui.tY.areaB; 	h=ui.tY.areaT}
	for(var i=0; i<n; i++){	if(Array.isArray(FL.sKTypeTools[i])){ FL.sKTypeTools[i].forEach(function(){ yO+=ui.sK.tH+2}); yO+=4}
							else{ 																		yO+=ui.sK.tH+2}}
	if( Array.isArray( FL.sKTypeTools[n])){ var E =mkSkTypeMultiTool( n,yO,k,l,m,h)}
	else{ 									var E =mkSkTypeSingleTool(n,yO,k,l,m,h)} return E}


function sKMoodSingleToolMouseDown( n){	switch( FL.sKMoodTools[n]){
		case "mosaicForm" 	: 	FL.mosaicForm=  !FL.mosaicForm; draw(); break;}}
function sKMoodMultiToolMouseDown( n,tune){ 
	switch(FL.sKMoodTools[n][0]){ 
		case "Select" 	: 	FL.sKMoodSelect=tune;	break;
		case "Plane" 	: 	FL.sKMoodPlane=tune; 	break;
		case "TableMT" 	: 	FL.sKMoodTable=tune; 	break;
		case "Bottom" 	: 	FL.sKMoodBottom=tune;	break;
		case "cell" 	: 	FL.sKMoodCell=tune; }	draw();}
function mkSkMoodMultiToolKey( n,i,yO,k,l,m,h){ var E=[]; var e=null; var T,b,s,t,tune;
	switch( FL.sKMoodTools[n][0]){ 	
		case "Select" 	: 	tune=FL.sKMoodSelect; 	break;
		case "Plane" 	: 	tune=FL.sKMoodPlane;  	break;
		case "TableMT" 	: 	tune=FL.sKMoodTable;  	break;
		case "Bottom" 	: 	tune=FL.sKMoodBottom; 	break;
		case "cell" 	: 	tune=FL.sKMoodCell; 	break;}
	if(tune===FL.sKMoodTools[n][i]){b=m; s=h; t=k}
	else { 							b=l; s=m; t=h}
	switch(FL.sKMoodTools[n][i]){ 
		case "off" 		: 	T="Off"; 	break;
		case "local" 	: 	T="Local"; 	break;
		case "global" 	: 	T="Global"; break;	
		case "save" 	: 	T="Save"; 	break;
		case "Legend" 	: 	T="Legend"; break;
		case "Worth" 	: 	T="Worth"; 	break;
		case "infElem" 	: 	T="InfElem";break;
		case "I & U" 	: 	T="I & U"; 	break;
		case "Total" 	: 	T="Total"; 	break;
		case "Stereo." 	: 	T="Stereo.";break;
		case "Infant." 	: 	T="Age-"; 	break;
		case "Raise" 	: 	T="Age+"; 	break;
		case "Queer-" 	: 	T="Queer-"; break;
		case "Queer+" 	: 	T="Queer+"; break;
		case "good" 	: 	T="Good"; 	break;
		case "bad" 		: 	T="Bad"; 	break;
		case "both" 	: 	T="Both"; 	break;
		case "Table" 	: 	T="Table"; 	break;
		case "Stage" 	: 	T="Stage"; 	break;}
	e =mkL( 4,yO+(ui.sK.tH+2)*i+2, 54, ui.sK.tH, undefined, b, "sKMoodTool-"+n, s,1,undefined,7,7);E.push(e);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKMoodMultiToolMouseDown( n, FL.sKMoodTools[n][i]); 	break}});
	e =mkT( ui.sK.widMid,yO+(ui.sK.tH+2)*i-1, undefined, t, "sKMoodTool-"+n,14,T,"PF","middle"); E.push(e);return E}
function isSkMoodToolFaded( t){ var r=false; if(Array.isArray(t)){ t =t[0]}	switch(t){
		case "TableMT": if((FL.sKMoodPlane==="Legend")||(FL.sKMoodBottom==="Stage")){ r=true} 	break;
		case "Bottom": 	if(FL.sKMoodPlane==="Legend"){ r=true} 									break;
		case "cell": 	if((FL.sKMoodPlane==="Legend")||(FL.sKMoodBottom==="Stage")){ r=true} 	break;
		case "Select": 	if(FL.sKMoodPlane==="Legend"){ r=true}} return r}
function mkSkMoodMultiTool( n,yO,ck,lo,mi,hi){ var E=[];var e=null; var T;
	var l=FL.sKMoodTools[n].length; var h=l*(ui.sK.tH+2)+2; 
	e =mkL(2, yO, ui.sK.keyWid, h, undefined, lo, "sKMoodTool-"+n, mi,1, true,7,7); E.push(e);
	switch(FL.sKMoodTools[n][0]){ 
		case "Select" 	: T="select"; 	break;
		case "Plane" 	: T="plane"; 	break;
		case "TableMT" 	: T="table"; 	break;
		case "Bottom" 	: T="bottom";	break;
		case "cell" 	: T="cell"; 	break;}
	e =mkT( ui.sK.widMid,yO, undefined, hi, "sKMoodTool-"+n,14,T,"AI","middle"); E.push(e);
	for(var i=1; i<l; i++){ e =mkSkMoodMultiToolKey( n,i,yO,ck,lo,mi,hi); E=E.concat(e)} return E}
function mkSkMoodSingleTool( n,yO,k,l,m,h){ var E =[]; var e =null; var T,b,s,t;
	if((!FL.mosaicForm && FL.sKMoodTools[n]==="mosaicForm")||(FL.stage && FL.sKMoodTools[n]==="stage")){b=m; t=k; s=m;}
	else{  																								b=k; t=h; s=m;}
	e =mkL( 2, yO, ui.sK.keyWid,ui.sK.tH,undefined,b,"sKMoodTool-"+n,s,1,undefined,7,7);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKMoodSingleToolMouseDown( n);break}});E.push(e);
	switch( FL.sKMoodTools[n]){ case "stage": 		T="Stage";	  break;
								case "mosaicForm": 	T="Compare";  break;}
	e =mkT( ui.sK.widMid, yO-2, undefined,t,"sKMoodTool-"+n,14,T,"PF","middle");E.push(e); return E}
function mkSkMoodTool( n){ var yO=2.5; var k,l,m,h;
	if( isSkMoodToolFaded( FL.sKMoodTools[n])){ k="#000"; 		l="#3e3e3e"; 	m="#888"; 		h="#ccc"}
	else{ 										k="#000"; 		l=ui.mD.key2; 	m="#33aa00"; 	h=ui.mD.selTxt}
	for(var i=0; i<n; i++){	if(Array.isArray(FL.sKMoodTools[i])){ FL.sKMoodTools[i].forEach(function(){ yO+=ui.sK.tH+2}); yO+=4}
							else{ 																		yO+=ui.sK.tH+2}}
	if( Array.isArray( FL.sKMoodTools[n])){ var E =mkSkMoodMultiTool( n,yO,k,l,m,h)}
	else{ 									var E =mkSkMoodSingleTool(n,yO,k,l,m,h)} return E}

//creative func maxes to the objectively fullest extent provided by circumstances but only when appropriate circumstances are provided by the environment and only after any necessary preparations have been completed.
//charlie blue
//resistor color coding for circuits
//IE tracker should have rows instead of columns(vertical channels). the rows are on top of each other and the past is to the right.

function selectSubj(s){
	FL.subj 	=s;
	FL.tY 		=s.tY;
	FL.fN 		=s.fN;
	FL.fNopts 	=s.fNopts;
	FL.cR 		=s.cR;
	FL.cRopts 	=s.cRopts;
	FL.fAopts 	=s.fAopts; // this only tY opts?
	FL.mD 		=s.mD;
	FL.pMd 		=s.pMd;
	FL.sMd 		=s.sMd;
	FL.fMd 		=s.fMd;
	FL.mMd 		=s.mMd;
	FL.sex 		=s.sex;
	FL.nM 		=s.nM;
	FL.gnd 		=s.gnd;
	FL.pGn 		=s.pGn;
	FL.sGn 		=s.fGn;
	FL.mGn 		=s.mGn;
	FL.fGn 		=s.fGn;
	FL.pM 		=s.pM;
	FL.pPm 		=s.pPm;
	FL.sPm 		=s.sPm;
	FL.mPm 		=s.mPm;
	FL.fPm 		=s.fPm;
	FL.mSb 		=s.mSb;
	FL.fSb 		=s.fSb;
	FL.mOb 		=s.mOb;
	FL.fOb 		=s.fOb;
	FL.mos 		=s.mos;
	FL.dir 		=s.dir;
	FL.loc 		=s.loc;

	FL.ntR 		=s.ntR;
	FL.ntC 		=s.ntC;
	FL.ntn 		=s.ntn;
	FL.xtR 		=s.xtR;
	FL.xtC 		=s.xtC;
	FL.xtn 		=s.xtn;
}

function deselectSubj(s){
	FL.subj 	=null; // <- here select absSubj from statTab later
	FL.tY 		=AB.tYs.find(o =>o.ni ===s.tY.ni);
	FL.fN 		=null;
	FL.fNopts 	=null;
	FL.cR 		=null;
	FL.cRopts 	=null;
	FL.fAopts 	=null;
	FL.mD 		=AB.mDs.find(o =>o.ni ===s.mD.ni);
	FL.pMd 		=AB.mDs.find(o =>o.ni ===s.pMd.ni);
	FL.sMd 		=AB.mDs.find(o =>o.ni ===s.sMd.ni);
	FL.fMd 		=AB.mDs.find(o =>o.ni ===s.fMd.ni);
	FL.mMd 		=AB.mDs.find(o =>o.ni ===s.mMd.ni);
	FL.sex 		=AB.sXs.find(o =>o.ni ===s.sex.ni);
	FL.nM 		=null;
	FL.gnd 		=AB.gNs.find(o =>o.ni ===s.gnd.ni);
	FL.pGn 		=AB.gNs.find(o =>o.ni ===s.pGn.ni);
	FL.sGn 		=AB.gNs.find(o =>o.ni ===s.sGn.ni);
	FL.mGn 		=AB.gNs.find(o =>o.ni ===s.mGn.ni);
	FL.fGn 		=AB.gNs.find(o =>o.ni ===s.fGn.ni);
	FL.pM 		=AB.pMs.find(o =>o.ni ===s.pM.ni);
	FL.pPm 		=AB.pMs.find(o =>o.ni ===s.pPm.ni);
	FL.sPm 		=AB.pMs.find(o =>o.ni ===s.sPm.ni);
	FL.mPm 		=AB.pMs.find(o =>o.ni ===s.mPm.ni);
	FL.fPm 		=AB.pMs.find(o =>o.ni ===s.fPm.ni);
	FL.mSb 		=AB.mDs.find(o =>o.ni ===s.mSb.ni);
	FL.fSb 		=AB.mDs.find(o =>o.ni ===s.fSb.ni);
	FL.mOb 		=AB.mDs.find(o =>o.ni ===s.mOb.ni);
	FL.fOb 		=AB.mDs.find(o =>o.ni ===s.fOb.ni);
	FL.mos 

	FL.ntR 		=null;//to-do
	FL.ntC 		=null;//to-do
	FL.ntn 		=null;//to-do
	FL.xtR 		=null;//to-do
	FL.xtC 		=null;//to-do
	FL.xtn 		=null;//to-do
}

function deselectSim(s){
	FL.sim 		=AB.sim;
	//selectSubj(FL.sim.subjs[0]);
	deselectSubj(FL.subj);
	FL.turn 	=FL.sim.turn;
	FL.subTurn 	=FL.sim.subTurn;
	FL.subjs 	=FL.sim.subjs;
	FL.subjsL 	=FL.sim.subjsL;
	FL.keySubj 	=FL.sim.keySubj;
	FL.queue 	=FL.sim.queue;
}
function selectSim(sim){					
	if(FL.lockSubj){FL.subj =sim.subjs.find(s => s.ni===FL.subj.ni); FL.subj ? selectSubj(FL.subj) : selectSubj(sim.keySubj)}
	else{ 			selectSubj(sim.keySubj)}
	FL.sim 		=sim;
	FL.turn 	=FL.sim.turn;
	FL.subTurn 	=FL.sim.subTurn;
	FL.subjs 	=FL.sim.subjs;
	FL.subjsL 	=FL.sim.subjsL;
	FL.keySubj 	=FL.sim.keySubj;
	FL.queue 	=FL.sim.queue;
	console.log(sim);	
}


function subjListKey( e){var s =e.split("-").pop(); s =FL.sim.subjs.find(o => o.nI ===s); 
 	if(FL.subj ===s){ deselectSubj(s)} else{ selectSubj(s)}	draw()}

function clearScreen(){
	var e=Array.from(document.querySelectorAll('div, svg, rect, text, polygon, line, circle, ellipse'));
 	e.forEach( function(e){ e.remove()})}
function draw(){
	FL.feInit =true;
	if( FL.fe==='mosaic'){ FL.liNarrow =FL.liNarrowInMosaic}else{ FL.liNarrow =false}
	clearScreen(); initDraw();
	switch( FL.fe){ 
		case "quiz": 	drawQuiz(); 	postDraw(); break;
		case "type": 	drawType(); 				break;
		case "mood": 	drawMood(); 				break;
		case "scalar": 	drawScalar(); 				break;
		case "mosaic": 	drawMosaic(); 				break;
		case "rels": 	drawRels(); 				break;
		case "marker": 	drawMarker(); 				break;}
	FL.feInit =false}
function bindK( e,c){	e.addEventListener("mousedown", function(){ c("mousedown", e)});
						e.addEventListener("mouseup", 	function(){ c("mouseup", e)});
						e.addEventListener("mouseleave",function(){ c("mouseleave", e)})}
function bindE( e,c){	e.addEventListener("mousedown", function(){ c("mousedown", e)})}
function bindO( e,c){	e.addEventListener("mouseover", function(){ c("mouseover", e)})}

function bindMosaic( sel,c){ var e=Array.from(document.querySelectorAll( sel));
	e.forEach( function(e){ e.addEventListener("mouseover", function(){ 	c( "mouseover",	e)})});
	e.forEach( function(e){ e.addEventListener("mouseleave", function(){ 	c( "mouseleave",e)})});
	e.forEach( function(e){ e.addEventListener("mouseup", function(){ 		c( "mouseup",	e)})});
	e.forEach( function(e){ e.addEventListener("mousedown", function(){ 	c( "mousedown", e)})})}

//weak–strong
//fe ˆs/w _i/e

FL.preQuiz = [
	{ l:"Extroverts are energised by social situations,\n introverts spend their energy\nand need a bit of solitude afterwards",
		r:"Introverts are focused on their own mind or state\n of mind whereas extroverts focus on\n their environment, surroundings, their body\n and the meaning of their existence."}];
FL.quiz = [
/*	{ l:"I want to be innocent", r:"I like peace", m:{}},
	{ l:"I cooperate", r:"I understand", m:{}},
	{ l:"I seek happiness", r:"I seek freedom", m:{}},*/
	{ lT:"I’m interested of myself",rT:"I’m not interested of me", lQ:"i", rQ:"e"},
	{ lT:"I’m a cool thinker",rT:"I’m emotional or fabulous", lQ:"T", rQ:"F"},	
	{ rT:"I’m flexible",mT:"I’m dedicated",lT:["I got physical and","mental stamina"],LQ:"ST",lQ:"SF",rQ:"NT",RQ:"NF"},
	{ lT:["Something is about","to happen"],rT:["It works,","I’m doing it right"], lQ:"N", rQ:"S"},
	{ lT:["I’ve been more concerned about","whether my behavior is childlish"],rT:["I’ve been more confused about","femininity and masculinity"],lQ:"C",rQ:"R"},
	{ lT:"I’m energized by social situations", rT:["I spend my energy in social","situations and need a bit of","tranquility afterwards"],lQ:"CeRi", rQ:"CiRe"},
	{ lT:"I like to love",rT:"Being loved is more important", lQ:"Fi", rQ:"Fe"},
	{ lT:"I don’t want to be bad or evil",rT:["I’d rather be free and","believe in what I’m doing"], lQ:"Ni", rQ:"Ne"},	
	{ lT:"I don’t particularly care about rank",rT:["I need to be a priority or to be","in charge of something"], lQ:"Se", rQ:"Si"},
	{ lT:"I like to say what I think or know",rT:"I like to talk about my thoughts",lQ:"Te", rQ:"Ti"}];
function mkQuizResult(){ FL.tYs =[]; var hiScore =0; var b =null; FL.qZresults =[];
	FL.quiz.forEach( function(q){ q.mT ? mkQuizResult7( q) : mkQuizResult4( q)});
	FL.qZresults.forEach( function(T){ b =addType( T.ni, FL.tYs); b.score +=T.score});
	FL.tYs.sort((t1,t2) => t1.score - t2.score).reverse();
	if( FL.tYs.length >0){ hiScore =FL.tYs[0].score} b =[];
	FL.tYs.forEach( function(T){ if( T.score===hiScore){ b.push( T)}}); FL.tYs =b;
	console.log( FL.tYs)} // zoom h2 nauhuri ja semmonen kuntopallo joka aina nostaa sen pystyyn telineeksi, voi heittää
function mkQuizResult4( q){	var b =[];
							if( 	q.answer <0){ 	b =interpretQuizAnswer( q.lQ,-q.answer)}
							else if(q.answer >0){ 	b =interpretQuizAnswer( q.rQ, q.answer)}
							FL.qZresults =FL.qZresults.concat( b)}
function mkQuizResult7( q){	var b =[]; switch( q.answer){ 
							case -3 : 	b =interpretQuizAnswer( q.LQ, 2); 	FL.qZresults =FL.qZresults.concat( b); break; // try to put b in concat
							case -2 : 	b =interpretQuizAnswer( q.LQ, 1); 	FL.qZresults =FL.qZresults.concat( b);
										b =interpretQuizAnswer( q.lQ, 1); 	FL.qZresults =FL.qZresults.concat( b); break;
							case -1 :	b =interpretQuizAnswer( q.lQ, 2); 	FL.qZresults =FL.qZresults.concat( b); break;
							case  0 : 	b =interpretQuizAnswer( q.lQ, 1); 	FL.qZresults =FL.qZresults.concat( b);
										b =interpretQuizAnswer( q.rQ, 1); 	FL.qZresults =FL.qZresults.concat( b); break;
							case  1 : 	b =interpretQuizAnswer( q.rQ, 2); 	FL.qZresults =FL.qZresults.concat( b); break;
							case  2 : 	b =interpretQuizAnswer( q.rQ, 1); 	FL.qZresults =FL.qZresults.concat( b);
										b =interpretQuizAnswer( q.RQ, 1); 	FL.qZresults =FL.qZresults.concat( b); break;
							case  3 : 	b =interpretQuizAnswer( q.RQ, 2); 	FL.qZresults =FL.qZresults.concat( b)}}
function interpretQuizAnswer( meaning,score){ var B =[]; var b =[]; var T =null; switch( meaning){
		case "i" : 	b =AB.tYs.filter( t=>!t.ie); break;				case "e" : 	b =AB.tYs.filter( t=> t.ie); break;
		case "F" : 	b =AB.tYs.filter( t=>!t.FT); break;				case "T" : 	b =AB.tYs.filter( t=> t.FT); break;
		case "S" : 	b =AB.tYs.filter( t=>!t.SN); break;				case "N" : 	b =AB.tYs.filter( t=> t.SN); break;
		case "C" : 	b =AB.tYs.filter( t=>!t.CR); break;				case "R" : 	b =AB.tYs.filter( t=> t.CR); break;
		case "Fi": case "Fe": case "Si": case "Se": case "Ti": case "Te": case "Ni": case "Ne":
			b =AB.tYs.filter( t=> isValuedIeInType( meaning,t)); break;
		case "ST": 	b =AB.tYs.filter( t=>( !t.SN &&  t.FT)); break;	case "NF": 	b =AB.tYs.filter( t=>(  t.SN && !t.FT)); break;
		case "SF": 	b =AB.tYs.filter( t=>( !t.SN && !t.FT)); break;	case "NT": 	b =AB.tYs.filter( t=>(  t.SN &&  t.FT)); break;
		case "CeRi":b =AB.tYs.filter( t=>((!t.CR &&  t.ie)||( t.CR && !t.ie))); break;
		case "CiRe":b =AB.tYs.filter( t=>((!t.CR && !t.ie)||( t.CR &&  t.ie))); break;}
	b.forEach( function(t){ T =mkType( t.ni); T.score =score; B.push( T)}); return B }
function isValuedIeInType( iE,tY){ var fN =tY.fNs.find( f => f.abs.ni ===iE); if( fN.val){ return true }else{ return false}}

function qZDoneMouseUp(){ if(FL.mouseAct){ FL.qZdoneP =!FL.qZdoneP; FL.qZdone =!FL.qZdone; var scroll =divQz.scrollTop;
		if( FL.qZdone){ mkQuizResult();} predraw(); draw();
		if(!FL.qZdone){ scroll >ui.qZ.winHei ? divQz.scrollTop =ui.qZ.winHei : divQz.scrollTop =scroll}
		else{ divQz.scrollTop =ui.qZ.qZy-25}} FL.mouseAct =true}
function qZDoneMouseDown(){ FL.mouseAct =true; var scroll =divQz.scrollTop; FL.qZdoneP =!FL.qZdoneP; draw(); divQz.scrollTop =scroll}

function qZMoreMouseUp(){ if(FL.mouseAct){ FL.qZmoreP =!FL.qZmoreP; FL.qZmore =!FL.qZmore; predraw(); draw();} FL.mouseAct =true}
function qZMoreMouseDown(){ FL.mouseAct =true; var scroll =divQz.scrollTop; FL.qZmoreP =!FL.qZmoreP; draw(); divQz.scrollTop =scroll}

function qZResetMouseUp(){ if(FL.mouseAct){ FL.qZagainP =!FL.qZagainP; FL.qZdone =false; predraw(); draw();} FL.mouseAct =true} //clear opts
function qZResetMouseDown(){ FL.mouseAct =true; var scroll =divQz.scrollTop; FL.qZagainP =!FL.qZagainP; draw(); divQz.scrollTop =scroll}

function qZMouseLeave(){ FL.mouseAct =false}
//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
function drawQuiz(){
	var b =null; var B=[]; var v=""; var u,l,d,r,f,t; var p="#e0eebb"; var L,D,R,uL,uR; var n;

	function upColors(){ 	f="#ccff88"; l="#ddff99"; r="#88cc77"; u="#f8ffdd"; d="#668877"; t="#668866"}
	function dnColors(){ 	f="#bbee77"; l="#88cc77"; r="#ddff99"; u="#668877"; d="#f8ffdd"; t="#668866"}	
	function loColors(){ 	f="#e0f8aa"; l="#aae899"; r="#e4fabf"; u="#88aa99"; d="#e8fccc"; t="#668866";
							L="#ddff99"; D="#f8ffdd"; R="#88cc77"; uL="#81c270";uR="#d2f490"}	
	function dnDnColors(){ 	f="#99bb99"; l="#88cc77"; r="#ddff99"; u="#668877"; d="#f8ffdd"; t="#ffffff"}

	drSidebar();
// pååå 4th question should partially show
	b =mkL(0,0,ui.winWid-ui.sB.disWid, ui.qZ.disHei+(2*ui.qZ.disVrt)+ui.qZ.dunFeh,
		undefined,ui.qZ.bG,undefined); B.push(b);
	b =mkL(ui.qZ.disHrz+1, ui.qZ.disVrt+5, ui.qZ.disWid, ui.qZ.disHei-4,undefined,"#240",undefined,"#240",undefined,undefined,undefined,undefined,0.2);
	b.setAttribute("filter","url(#fil4)");B.push(b);
	b =mkL(ui.qZ.disHrz-4, ui.qZ.disVrt-4, ui.qZ.disWid+8, ui.qZ.disHei+8,undefined,"#fcc",undefined,"#fcc",undefined,undefined,undefined,undefined,0.2);
	b.setAttribute("filter","url(#fil2)");B.push(b);
	b =mkL(ui.qZ.disHrz, ui.qZ.disVrt, ui.qZ.disWid, ui.qZ.disHei,undefined,"#fff",undefined,"#ccc"); B.push(b);
/*b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#0df",undefined,ui.qZ.capFnt,"Personality Test","StrikeFighter","middle",0.66); b.setAttribute( 'text-decoration', 'underline');*/ // #bbc
	b =mkE(ui.qZ.disHrz+(ui.qZ.disWid/2), ui.qZ.disVrt+ui.qZ.capFntG, (ui.qZ.disWid/2)-ui.qZ.capFnt,ui.qZ.capFnt,"#8df");
	b.setAttribute("filter","url(#fil2)");B.push(b);
	b =mkE(ui.winWid-Math.round(ui.winWid/1.618), ui.qZ.disVrt+Math.round(ui.qZ.capFntG/1.618),
		(ui.qZ.disWid/2/1.618)-ui.qZ.capFnt,Math.floor(ui.qZ.capFnt/1.618),"846");
	b.setAttribute("filter","url(#fil5)");B.push(b);
	b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#fff",undefined,ui.qZ.capFnt,"Personality Test","SR","middle",0.75);
		b.setAttribute( 'text-decoration', 'underline'); B.push(b);
	//b = ööööl
	//ui.qZ.disWid/15
	//b =mkL()
	for(var n=0; n<FL.quizL; n++){ b=drQuestion( FL.quiz[n], n); B=B.concat(b)}

	if( FL.qZtest){ FL.qZdone =true; FL.tYs =[mkType('eNTR')]}

	if( FL.qZdone){ b =mkL( ui.qZ.dunFeX, ui.qZ.feY,	ui.qZ.dunFeH, ui.qZ.dunFeH,undefined,p); B.push(b);	}

	FL.qZdone ? dnDnColors() : FL.qZdoneP ? dnColors() : upColors();

	b =drHugeButton( "DONE", ui.qZ.doneX, ui.qZ.qZy, f,l,r,u,d,t); B=B.concat(b);

	if( FL.qZdone){
		loColors();
		b =mkL( ui.qZ.dunFeX, ui.qZ.feY, ui.qZ.dunF1, ui.qZ.dunFeH,undefined,l); B.push(b);
		b =mkL( ui.qZ.dunFeX+ui.qZ.dunCor, ui.qZ.qZy+ui.qZ.doneH-ui.qZ.dunF3, ui.qZ.doneW, ui.qZ.dunF1, undefined, p);B.push(b);	
		v =ui.qZ.dunFeX+","+ui.qZ.feY+" "+(ui.qZ.dunFeX+ui.qZ.dunCor)+","+ui.qZ.feY+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor)+","+(ui.qZ.feY+ui.qZ.dunF1)+" "+(ui.qZ.dunFeX+ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunF1);
		b=mkS( v,undefined,u,undefined,false); B.push(b);
		v =(ui.qZ.dunFeX+ui.qZ.dunCor)+","+ui.qZ.feY+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor+ui.qZ.dunF2)+","+(ui.qZ.qZy+ui.qZ.doneH-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor)+","+(ui.qZ.feY+ui.qZ.dunF1);
		b=mkS( v,undefined,uL,undefined,false); B.push(b);
		v =(ui.qZ.dunFeX+ui.qZ.dunCor+ui.qZ.doneW)+","+ui.qZ.feY+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor+ui.qZ.doneW-ui.qZ.dunF2)+","+(ui.qZ.qZy+ui.qZ.doneH-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunF1);
		b=mkS( v,undefined,uR,undefined,false); B.push(b);
		b =mkL( ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1, ui.qZ.feY,ui.qZ.dunF1,ui.qZ.dunFeH,undefined,r);B.push(b);
		v =(ui.qZ.dunFeX+ui.qZ.dunFeH)+","+ui.qZ.feY+" "+(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunCor)+","+ui.qZ.feY+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunCor)+","+(ui.qZ.feY+ui.qZ.dunF1)+" "+(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunF1);
		b=mkS( v,undefined,u,undefined,false); B.push(b);
		v =(ui.qZ.dunFeX+ui.qZ.dunFeH)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1-ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1-ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,d,undefined,false); B.push(b);
		b =mkL( ui.qZ.dunFeX+ui.qZ.dunCor+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1, ui.qZ.gapW, ui.qZ.dunF1,undefined,d);B.push(b);
		v =(ui.qZ.dunFeX)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunCor)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunF1)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,d,undefined,false); B.push(b);
		// huge button frames
		v =(ui.qZ.doneX+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.doneX+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.doneX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.doneX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,R,undefined,false); B.push(b);
		v =(ui.qZ.doneX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.doneX-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.doneW-ui.qZ.gapW-ui.qZ.dunF1*2-ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.doneW-ui.qZ.gapW-ui.qZ.dunF1*2)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei);
		b=mkS( v,undefined,D,undefined,false); B.push(b);
		v =(ui.qZ.doneX)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.doneX)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.doneX-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.doneX-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,L,undefined,false); B.push(b);
		b=mkI( ui.qZ.doneX, ui.qZ.feY+ui.qZ.dunFeH, ui.qZ.doneX, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#fff");B.push(b);
		b=mkI( ui.qZ.doneX, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei, ui.qZ.doneX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#fff");B.push(b);
		b=mkI( ui.qZ.doneX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH, ui.qZ.doneX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#ccc");B.push(b);	
		v =(ui.qZ.againX+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.againX+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.againX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.againX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,R,undefined,false); B.push(b);
		v =(ui.qZ.againX+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.againX-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.againX)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.againX+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei);
		b=mkS( v,undefined,D,undefined,false); B.push(b);
		v =(ui.qZ.againX)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+
			(ui.qZ.againX)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei)+" "+
			(ui.qZ.againX-ui.qZ.gapW/2)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(ui.qZ.againX-ui.qZ.gapW/2)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1);
		b=mkS( v,undefined,L,undefined,false); B.push(b);
		b=mkI( ui.qZ.againX, ui.qZ.feY+ui.qZ.dunFeH, ui.qZ.againX, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#fff");B.push(b);
		b=mkI( ui.qZ.againX, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei, ui.qZ.againX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#fff");B.push(b);
		b=mkI( ui.qZ.againX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH, ui.qZ.againX+ui.qZ.doneW, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei,undefined,"#ccc");B.push(b);	
		FL.qZagainP ? dnColors() : upColors();
		b =drHugeButton( "reset",ui.qZ.doneX, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei, f,l,r,u,d,t); B=B.concat(b);
		FL.qZmoreP ? dnColors() : upColors();
		b =drHugeButton( "MORE", ui.qZ.againX,ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.gapHei, f,l,r,u,d,t); B=B.concat(b);

		if( FL.tYs.length ===1){
			//clearSignal( FL.tYs[0]);
			b =mkL(ui.qZ.dunFeX+ui.qZ.feCubX-ui.qZ.dunF1+1, ui.qZ.feY+ui.qZ.doneH-ui.qZ.dunF1+1, ui.qZ.feCubW+2*ui.qZ.dunF1, ui.qZ.feCubW+2*ui.qZ.dunF1,
				undefined,"#888",undefined,undefined,undefined,undefined,ui.qZ.dunF2,ui.qZ.dunF2);B.push(b);
			b =mkL(ui.qZ.dunFeX+ui.qZ.feCubX-ui.qZ.dunF1-1, ui.qZ.feY+ui.qZ.doneH-ui.qZ.dunF1-1, ui.qZ.feCubW+2*ui.qZ.dunF1+1, ui.qZ.feCubW+2*ui.qZ.dunF1+1,
				undefined,"#111",undefined,undefined,undefined,undefined,ui.qZ.dunF2,ui.qZ.dunF2);B.push(b);
			b =mkL(ui.qZ.dunFeX+ui.qZ.feCubX-ui.qZ.dunF1, ui.qZ.feY+ui.qZ.doneH-ui.qZ.dunF1, ui.qZ.feCubW+2*ui.qZ.dunF1, ui.qZ.feCubW+2*ui.qZ.dunF1,
				undefined,ui.tY.base,undefined,undefined,undefined,undefined,ui.qZ.dunF2,ui.qZ.dunF2);B.push(b);	
			b =drTypeCage(ui.qZ.dunFeX+ui.qZ.feCubX, ui.qZ.feY+ui.qZ.doneH, "tYC2", ui.qZ.feCubW); B=B.concat(b);		

			b =gT("AI", ui.qZ.dunFeX+ui.qZ.tyColM-ui.qZ.dunF1, ui.qZ.feY+ui.qZ.doneH, mR(ui.qZ.doneF/1.618/1.618), t,
				"Your type is", "middle"); B.push(b);		
			b =mkE( ui.qZ.dunFeX+ui.qZ.tyColM+ui.qZ.dunF4, ui.qZ.feY+ui.qZ.doneH+ui.qZ.dunF4+ui.qZ.dunF1+mR(ui.qZ.doneF/2/1.618), mR(ui.qZ.tyColM/2), mR(ui.qZ.doneF/2/1.618),D);
				b.setAttribute("filter","url(#fil3)"); B.push(b);
			b =gT("PF", ui.qZ.dunFeX+ui.qZ.tyColM+ui.qZ.dunF4, ui.qZ.feY+ui.qZ.doneH+ui.qZ.dunF4+ui.qZ.dunF1, ui.qZ.doneF, D, FL.tYs[0].ni, "middle","hanging");
				b.setAttribute("filter","url(#fil3)"); B.push(b);
			b =gT("PF", ui.qZ.dunFeX+ui.qZ.tyColM, ui.qZ.feY+ui.qZ.doneH+ui.qZ.dunF2+ui.qZ.dunF4, ui.qZ.doneF, "#114433", FL.tYs[0].ni, "middle","hanging"); B.push(b);

			FL.tYs[0].CR ? v ="1. Romantic" 	: v ="1. Classical"; 	n =[v];	
			FL.tYs[0].ie ? v ="2. extroverted" 	: v ="2. introverted"; 	n.push( v);
			FL.tYs[0].FT ? v ="3. Thinking" 	: v ="3. Feeling";  	n.push( v);
			FL.tYs[0].SN ? v ="4. iNtuitive" 	: v ="4. Sensing"; 		n.push( v);
			b =gT("PF", ui.qZ.tyColL, ui.qZ.feY+ui.qZ.doneW+ui.qZ.dunF3+ui.qZ.dunF1, ui.qZ.donef, "#336655", n, undefined,"hanging",1.25 ); B.push(b);

			b =gT("AI", ui.qZ.tyColL, ui.qZ.feY+ui.qZ.doneH+ui.qZ.feCubW+ui.qZ.dunF1, ui.qZ.donef, t, "also known as"); B.push(b);
			b =gT("SR", ui.qZ.MOptX+ui.qZ.dunF4, ui.qZ.feY+ui.qZ.doneH+ui.qZ.feCubW+ui.qZ.dunF1+ui.qZ.dunF2+ui.qZ.dunF4,
				ui.qZ.doneH-ui.qZ.dunF2, "#000", FL.tYs[0].zo, "middle","hanging");
				b.setAttribute("filter","url(#fil1)");B.push(b);
			b =gT("SR", ui.qZ.MOptX, ui.qZ.feY+ui.qZ.doneH+ui.qZ.feCubW+ui.qZ.dunF1+ui.qZ.dunF2,
				ui.qZ.doneH-ui.qZ.dunF2, "#fff", FL.tYs[0].zo, "middle","hanging"); B.push(b);

			b =gT("TR", ui.qZ.tyColR,
				//ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.feCubX-ui.qZ.doneH+ui.qZ.dunF1,
				ui.qZ.feY+ui.qZ.doneH+ui.qZ.feCubW+ui.qZ.doneH+ui.qZ.dunF1+ui.qZ.dunF3,
				ui.qZ.dunF1, "#114433", FL.tYs[0].desc, undefined,"hanging",1.096,undefined,"italic"); B.push(b);//påå	

			b =gT("AI", ui.qZ.dunFeX+ui.qZ.dunFeH-ui.qZ.dunF1*2, ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1*2,
				//ui.qZ.feY+ui.qZ.doneH+ui.qZ.feCubW+ui.qZ.dunF1+ui.qZ.doneH+ui.qZ.dunF1,
				ui.qZ.donef, t, "Formerly known as "+FL.tYs[0].modA3+", "+FL.tYs[0].modA4+" or "+FL.tYs[0].MBTI,"end"); B.push(b);	

			
		}

		else{ //  gT(font,x,y,fS,c,txt,anc,dB,lH,op,sT,pE,id,cl)
			n =numberToWord( FL.tYs.length); n =n.charAt(0).toUpperCase() +n.slice(1);
			n ==="Every" ? n +=" type was equally implicated." : n +=" types were implicated.";
			b=gT("AI",ui.qZ.MOptX, ui.qZ.feY+mR(ui.qZ.dunFeH/2/1.618), ui.qZ.fnt, t,
				["Unfortunately your result was inconclusive.",n,"Please try to be more specific.","","You may click “reset” or scroll back up."],"middle","hanging",1.618);B.push(b);
		}
	}
	B.forEach( function(B){ svgQz.appendChild(B)});
	document.body.appendChild( divFe);
	if( FL.qZopts){ document.body.appendChild( divSk)}
	document.body.appendChild( divQz);
	if( FL.qZtest){ divQz.scrollTop =ui.qZ.winHei-ui.winHei-25}}

function numberToWord( n){ switch( n){ case 0 : return "no"; 	break; case 2 : return "two"; 	break; case 3 : return "three"; break;
	case 4 : return "four"; 	break; case 5 : return "five"; 	break; case 6 : return "six"; 	break; case 7 : return "seven"; break;
	case 8 : return "eight"; 	break; case 9 : return "nine"; 	break; case 10: return "ten"; 	break; case 11: return "eleven";break;
	case 12: return "twelve"; 	break; case 13:return "thirteen";break;case 14:return "fourteen";break;case 15:return "fifteen";break;
	case 16: return "every"}}
function qZOptMouseDown( n,v){ FL.quiz[n].answer===v ? FL.quiz[n].answer =undefined : FL.quiz[n].answer =v; 
	var scroll =divQz.scrollTop; if( FL.qZdone){ FL.qZdone =false; predraw() } draw();
	scroll >ui.qZ.winHei ? divQz.scrollTop =ui.qZ.winHei : divQz.scrollTop =scroll}
function drHugeButton(T,x,y,f,l,r,u,d,t){ var b =null; var B =[];
	b =mkL( x+ui.qZ.dunF1, y+ui.qZ.dunF2, ui.qZ.doneW-2*ui.qZ.dunF1, ui.qZ.doneH-2*ui.qZ.dunF2, undefined, f); B.push(b);
	b =mkL( x, y, ui.qZ.dunF1, ui.qZ.doneH, undefined, l,undefined,undefined,undefined,true); B.push(b);
	b =mkL( x+ui.qZ.doneW-ui.qZ.dunF1, y, ui.qZ.dunF1, ui.qZ.doneH, undefined, r,undefined,undefined,undefined,true); B.push(b);
	v =x+","+(y)+" "+(x+ui.qZ.doneW)+","+(y)+" "+
		(x+ui.qZ.doneW-ui.qZ.dunF1)+","+(y+ui.qZ.dunF2)+" "+(x+ui.qZ.dunF1)+","+(y+ui.qZ.dunF2);
	b=mkS( v,undefined,u,undefined,false); B.push(b);
	v =x+","+(ui.qZ.doneH+y)+" "+(x+ui.qZ.doneW)+","+(ui.qZ.doneH+y)+" "+
		(x+ui.qZ.doneW-ui.qZ.dunF1)+","+(y+ui.qZ.doneH-ui.qZ.dunF2)+" "+(x+ui.qZ.dunF1)+","+(y+ui.qZ.doneH-ui.qZ.dunF2);
	b=mkS( v,undefined,d,undefined,false); B.push(b);
	b=gT("SF", Math.round(x+ui.qZ.doneW/2), Math.round(y+ui.qZ.doneH/2+5), ui.qZ.doneF, t,
		T,"middle","middle",undefined,undefined,"none"); B.push(b);
	switch(T){ case "DONE" :
		b =mkL( x, y, ui.qZ.doneW, ui.qZ.doneH, undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,"0");
		bindK( b, function(ev,b) { switch( ev){ case "mouseleave": qZMouseLeave();break;
												case "mouseup"   : qZDoneMouseUp  ( );break;
												case "mousedown" : qZDoneMouseDown( );break}});B.push(b);break;
		case "reset" :
		v =x+","+(y+ui.qZ.doneH)+" "+(x+ui.qZ.doneW)+","+(y+ui.qZ.doneH)+" "+
			(x+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+(x+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+
			(x+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(y-ui.qZ.dunF2+ui.qZ.dunF4)+" "+(x-ui.qZ.dunF1+ui.qZ.dunF3)+","+(y-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(x-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+x+","+(ui.qZ.feY+ui.qZ.dunFeH);
		b=mkS( v,undefined,"#555",undefined,"0",true);
		bindK( b, function(ev,b) { switch( ev){ case "mouseleave": qZMouseLeave();break;
												case "mouseup"   : qZResetMouseUp  ( );break;
												case "mousedown" : qZResetMouseDown( );break}});B.push(b);break;
		case "MORE" :
		v =x+","+(y+ui.qZ.doneH)+" "+(x+ui.qZ.doneW)+","+(y+ui.qZ.doneH)+" "+
			(x+ui.qZ.doneW)+","+(ui.qZ.feY+ui.qZ.dunFeH)+" "+(x+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+
			(x+ui.qZ.doneW+ui.qZ.dunF1-ui.qZ.dunF3)+","+(y-ui.qZ.dunF2+ui.qZ.dunF4)+" "+(x-ui.qZ.dunF1+ui.qZ.dunF3)+","+(y-ui.qZ.dunF2+ui.qZ.dunF4)+" "+
			(x-ui.qZ.dunF1+ui.qZ.dunF3)+","+(ui.qZ.feY+ui.qZ.dunFeH-ui.qZ.dunF1)+" "+x+","+(ui.qZ.feY+ui.qZ.dunFeH);
		b=mkS( v,undefined,"#555",undefined,"0",true);
		bindK( b, function(ev,b) { switch( ev){ case "mouseleave": qZMouseLeave();break;
												case "mouseup"   : qZMoreMouseUp  ( );break;
												case "mousedown" : qZMoreMouseDown( );break}});B.push(b)} return B}
//"iSFC","iSFR","iSTC","iSTR","eSFC","eSFR","eSTC","eSTR","iNFC","iNFR","iNTC","iNTR","eNFC","eNFR","eNTC","eNTR"
// REeN
// ohut fontti display type desc vähän kuin Disco mutta joku muu
function drQuestion( q,n){ var b =null; var B=[]; var v =FL.quiz[n].answer; var tYo=2; var tB;
	b=gT("TR",ui.qZ.lAnc, ui.qZ.topGap+(n*ui.qZ.rowHei)+tYo, ui.qZ.fnt, "#000",
		q.lT,"end","middle",1.3); B.push(b);
	b=gT("TR",ui.qZ.rAnc, ui.qZ.topGap+(n*ui.qZ.rowHei)+tYo, ui.qZ.fnt, "#000",
		q.rT,undefined,"middle",1.3); B.push(b);
	if(!q.mT){
 		b =drC( ui.qZ.LOptX, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-2",undefined,ui.qZ.optStr,"#000");
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n,-2);break}}); B.push(b);
 		b =drC( ui.qZ.lOptX, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-1",undefined,ui.qZ.optStr,"#000",ui.qZ.optStr);
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n,-1);break}}); B.push(b);
 		b =drC( ui.qZ.rOptX, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_1" ,undefined,ui.qZ.optStr,"#000",ui.qZ.optStr);
		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 1);break}}); B.push(b);
 		b =drC( ui.qZ.ROptX, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_0" ,undefined,ui.qZ.optStr,"#000");
		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 2);break}}); B.push(b)}
	else{
 		b=gT("TR", ui.qZ.MOptX, ui.qZ.topGap+(n*ui.qZ.rowHei)+tYo+ui.qZ.rowGap-Math.round(ui.qZ.rowGap/1.618), ui.qZ.fnt, "#000", ["\xa0\xa0\xa0\xa0\xa0\xa0\xa0"+q.mT],undefined,"middle");
 		b.setAttribute( 'text-decoration', 'underline'); B.push(b);

 		v = ui.qZ.MOptX+","+(ui.qZ.topGap+n*ui.qZ.rowHei+ui.qZ.optRad+ui.qZ.optStr)+" "+
 		 	(ui.qZ.MOptX-ui.qZ.optStr)+","+(ui.qZ.optStr+ui.qZ.topGap+n*ui.qZ.rowHei+ui.qZ.optRad+ui.qZ.optStr)+" "+(ui.qZ.MOptX-ui.qZ.optStr)+","+
  				(ui.qZ.topGap+n*ui.qZ.rowHei+ui.qZ.optRad+ui.qZ.rowGap+ui.qZ.optStr-mR(ui.qZ.rowGap/1.618)-1)+" "+
 		 	(ui.qZ.MOptX+","+
 		 		(ui.qZ.topGap+n*ui.qZ.rowHei+ui.qZ.optRad+ui.qZ.rowGap+ui.qZ.optStr-mR(ui.qZ.rowGap/1.618)-1));//+" "+
 		b=mkS( v,undefined,"#000",undefined,false); B.push(b);
 		b =drC( ui.qZ.optL7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000");
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n,-3);break}}); B.push(b);
 		b =drC( ui.qZ.optLm7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000",ui.qZ.optStr);
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n,-2);break}}); B.push(b);
 		b =drC( ui.qZ.optMl7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000");
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n,-1);break}}); B.push(b);
 		b =drC( ui.qZ.MOptX, ui.qZ.topGap+(n*ui.qZ.rowHei),//pååå
			ui.qZ.optRad,"#fff","qZ_0" ,"qZ_"+n+"_0",ui.qZ.optStr,"#000",ui.qZ.optStr); 
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 0);break}}); B.push(b);
 		b =drC( ui.qZ.optMr7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000");
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 1);break}}); B.push(b);
 		b =drC( ui.qZ.optRm7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000",ui.qZ.optStr);
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 2);break}}); B.push(b);
 		b =drC( ui.qZ.optR7, ui.qZ.topGap+(n*ui.qZ.rowHei),
			ui.qZ.optRad,"#fff","qZ_-3",undefined,ui.qZ.optStr,"#000");
 		bindE( b, function(ev,e) { switch( ev){ case "mousedown" : qZOptMouseDown( n, 3);break}}); B.push(b)}
	if( FL.quiz[n].answer!==undefined){
		if(!q.mT){
			switch( FL.quiz[n].answer){ case 0 : b =ui.qZ.MOptX; break; 	case -1: b =ui.qZ.lOptX; break; 	case -2: b =ui.qZ.LOptX; break;
																			case 1 : b =ui.qZ.rOptX; break; 	case 2 : b =ui.qZ.ROptX; break}
 			b =drC( b, ui.qZ.topGap+(n*ui.qZ.rowHei),
				Math.round(ui.qZ.optRad/1.618),"#446",undefined,undefined,ui.qZ.optstr,"#002");
 			b.setAttribute( "pointer-events","none"); B.push(b)}
 		else{
			switch( FL.quiz[n].answer){ case 0 : b =ui.qZ.MOptX; break;
										case -1: b =ui.qZ.optMl7; break; 	case -2: b =ui.qZ.optLm7; break; 	case -3: b =ui.qZ.optL7; break;
										case 1 : b =ui.qZ.optMr7; break; 	case 2 : b =ui.qZ.optRm7; break; 	case 3 : b =ui.qZ.optR7; break}
 			b =drC( b, ui.qZ.topGap+(n*ui.qZ.rowHei),
				Math.round(ui.qZ.optRad/1.618),"#446",undefined,undefined,ui.qZ.optstr,"#002");
 			b.setAttribute( "pointer-events","none"); B.push(b)}}
	return B}
//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
//sKTypeSelect:"off", sKTypeTable: "Faculty", sKTypeMood: "Total", sKTypeBottom: "Stage",
function drawType(){ var b =null; var B =[];
	drSidebar();
	drTopBar();
	drList();
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.tY.base,"tY"); B.push( b);
	b =drTypeCube(ui.tY.c1x, ui.tY.c1y, "tYC1"); B =B.concat(b);
	b =drTypeCage(ui.tY.c2x, ui.tY.c2y, "tYC2"); B =B.concat(b);
	B.forEach( function(B){svgFe.appendChild(B)});	
	drSequencer( );						
	drTypeKeys();
	switch( FL.sKTypeBottom){
		case "Stage" 	: drTypeStage(); 	 	break;
		case "Faculty" 	: drTypeTableOfFaculties(); break;
		case "infElem" 	: drTypeTableOfIEs()}				
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq); 
	//document.body.appendChild( divSc);
}
//function mkI(x,y,X,Y,id,co,st,op,d)
//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){ 

function bPToolMouseDown( n){ FL.mouseAct =true;	FL.bPToolsP[n] 	=true; 	refreshBpTool( n)}
function bPToolMouseLeave( n){ FL.mouseAct =false; if( FL.bPToolsP[n]){ 	FL.bPToolsP[n] 	=false; refreshBpTool( n)}}
function bPToolMouseUp( n){ if( FL.mouseAct){ switch( FL.bPTools[n]){
	case "sizeList":if(FL.fe!=="mosaic"){ 	FL.fElIS++; if(FL.fElIS>2){ FL.fElIS=0}} 
					else{ 					FL.mPlIS++; if(FL.mPlIS>2){ FL.mPlIS=0}}
					predraw(); draw();  break;
	case "wideList":var scrollY =window.pageYOffset; var oldMiV =ui.bP.minVer;
					if(FL.fe!=="mosaic"){ 	FL.fElIW++; if(FL.fElIW>2){ FL.fElIW=1}} 
					else{ 					FL.mPlIW++; if(FL.mPlIW>2){ FL.mPlIW=0}}
					predraw(); draw();
					//console.log("oldFeH: "+oldFeH+", oldMiV: "+oldMiV+", newFeH: "+newFeH+", newMiV: "+newMiV+", winHei: "+ui.winHei);
					if((oldMiV===ui.winHei)||(ui.bP.minVer>ui.winHei)){
						document.documentElement.scrollTop = document.body.scrollTop = ui.bP.minVer-ui.winHei+scrollY; }
					if((oldMiV>ui.winHei)||(ui.bP.minVer===ui.winHei)){
						document.documentElement.scrollTop = document.body.scrollTop = scrollY-(oldMiV-ui.bP.minVer); }
					break;
	case "wideSeq": FL.sQW= !FL.sQW; predraw(); draw();  break;
	case "highFoot":FL.bPH++; if(FL.bPH>2){FL.bPH=0} predraw(); draw();  break; }
	bPToolMouseLeave( n)} FL.mouseAct =true}
function mkBpTool(n){ var E=[]; var e=null; var t,f,T,F,y,Y; var p =0; var P=4;
	if((FL.sQW && FL.bPTools[n]==="wideSeq")){ FL.bPToolsP[n]=true}
	if(!FL.bPToolsP[n]){
		e =mkL( ui.bP.divWid-20+2, ui.tB.tooWid*n+ui.bP.tooVer,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.bP.divWid-20+2, ui.tB.tooWid*n+ui.bP.tooVer,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.bP.divWid-20+2, P+(ui.tB.tooWid*n)+ui.bP.tooVer,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( FL.feInit){
		e =mkL( ui.bP.divWid-20+2, (ui.tB.tooWid*n)+ui.bP.tooVer, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0");
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": bPToolMouseLeave(n);break;
												case "mouseup"   : bPToolMouseUp  ( n);break;
												case "mousedown" : bPToolMouseDown( n);break}});E.push(e)}
	//"preCalc","defSort","turnSort","confSort"
	switch( FL.bPTools[n]){
		case "sizeList": 	t="size";	T="List";	y=-1; Y=11; 	f=14; F=14;		break;
		case "wideList": 	t="wide";	T="List";	y=-1; Y=11; 	f=14; F=14;		break;
		case "wideSeq": 	t="wide";	T="Seq";	y=-1; Y=11; 	f=14; F=14;		break;
		case "highFoot": 	t="high";	T="Foot";	y=-1; Y=11; 	f=14; F=14;		break;
		//case "confSort": 	t="conf";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		}
	e 		=mkT( ui.bP.divWid-20+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+y+p+ui.bP.tooVer, undefined,"#ccc","bPTool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.bP.divWid-20+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+Y+p+ui.bP.tooVer, undefined,"#ccc","bPTool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshBpTool( n){ var t ="bPTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkBpTool( n); t.forEach( function( e){ svgFe.appendChild( e)})}
function bToW(hex){ if(hex==="#ffffff"){ return "#000000"} else if(hex==="#000000"){ return "#ffffff"}}
function drBottomPanel(){ var E=[]; var e=null; var v; var c; var t;
	e=mkL(0,ui.midMinHei,ui.winWid,ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	//e=mkL(ui.bP.divWid-20,midMinHei+ui.bP.skrHei,ui.tB.disHei,ui.bP.disHei-ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkL(ui.bP.divWid-20,ui.midMinHei+ui.bP.skrHei,ui.tB.disHei,ui.bP.disHei-ui.bP.skrHei,undefined,ui.sB.bG); 						E.push(e);
	for(var i=0; i<FL.bPToolsL; i++){ e =mkBpTool(i); 																					E=E.concat(e)}
	e=mkL(0,ui.midMinHei+ui.bP.tipHei,ui.bP.divWid-20,ui.bP.skrHei,undefined,ui.sB.bG); 												E.push(e);
	
	e=mkL(0,ui.midMinHei,ui.bP.lilTip,ui.bP.tipHei,undefined,ui.sB.bG); 																E.push(e);
	e=mkT(ui.bP.lilTip-ui.bP.rimHei,ui.midMinHei+ui.bP.skrHei,undefined,"#fff",undefined,20,"xtn :","SF","end"); 						E.push(e);
	e=mkT(ui.bP.lilTip-ui.bP.rimHei,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,undefined,"#fff",undefined,20,"ntn :","SF","end");				E.push(e);

	e=mkL(ui.bP.lilTip,ui.midMinHei+ui.bP.skrHei,ui.bP.cW,ui.bP.rH,												undefined,"#660000"); 	E.push(e);
	e=mkL(ui.bP.lilTip,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,ui.bP.cW,ui.bP.rH,									undefined,"#990000"); 	E.push(e);
	e=mkL(ui.bP.lilTip+ui.bP.cW,ui.midMinHei+ui.bP.skrHei,ui.bP.cW,ui.bP.rH,									undefined,"#006600"); 	E.push(e);
	e=mkL(ui.bP.lilTip+ui.bP.cW,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,ui.bP.cW,ui.bP.rH,							undefined,"#009900"); 	E.push(e);
	e=mkL(ui.bP.lilTip+ui.bP.cW+ui.bP.cW,ui.midMinHei+ui.bP.skrHei,ui.bP.cW,ui.bP.rH,							undefined,"#000066"); 	E.push(e);
	e=mkL(ui.bP.lilTip+ui.bP.cW+ui.bP.cW,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,ui.bP.cW,ui.bP.rH,					undefined,"#000099"); 	E.push(e);

	e=mkL(ui.bP.divWid-ui.bP.lilDiv,ui.midMinHei,ui.bP.lilTip,ui.bP.tipHei,undefined,ui.sB.bG); 										E.push(e);
	e=mkT(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip-ui.bP.rimHei,ui.midMinHei+ui.bP.skrHei,
		undefined,"#fff",undefined,20,"loc :","SF","end"); 																				E.push(e);
	e=mkT(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip-ui.bP.rimHei,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,
		undefined,"#fff",undefined,20,"dir :","SF","end"); 																				E.push(e);

	v=FL.fN.hex; c=FL.cR.hex; t=bToW(v);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip,ui.midMinHei+ui.bP.skrHei,ui.bP.lW,ui.bP.rH,					undefined,"#666600"); 	E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,ui.bP.lW,ui.bP.rH,			undefined,"#999900"); 	E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.rimHei, ui.midMinHei+ui.bP.skrHei+ui.bP.rimHei/1.618,
		ui.bP.lW-ui.bP.rimHei*2, ui.bP.rH*2-ui.bP.rimHei*2/1.618,
		undefined, v, 		undefined,undefined,undefined,undefined,undefined,undefined,"0.39");										E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.rimHei+ui.bP.rimHei/1.618, ui.midMinHei+ui.bP.skrHei+ui.bP.rH,
		ui.bP.lW-ui.bP.rimHei*2-ui.bP.rimHei/1.618*2, ui.bP.rH-ui.bP.rimHei/1.618-ui.bP.rimHei/1.618/1.618,
		undefined, c);																													E.push(e);

	v =FL.mos[FL.loc.y][FL.loc.x]; v =hsvToRgb(v.h,v.s,v.v); v =rgbToHex(v.r,v.g,v.b); c ="#000000"; t=bToW(c);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.lW,ui.midMinHei+ui.bP.skrHei,ui.bP.lW,ui.bP.rH,			undefined,"#660066"); 	E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.lW,ui.midMinHei+ui.bP.skrHei+ui.bP.rH,ui.bP.lW,ui.bP.rH,	undefined,"#990099"); 	E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.rimHei+ui.bP.lW, ui.midMinHei+ui.bP.skrHei+ui.bP.rimHei/1.618,
		ui.bP.lW-ui.bP.rimHei*2, ui.bP.rH*2-ui.bP.rimHei*2/1.618,
		undefined, c 		,undefined,undefined,undefined,undefined,undefined,undefined,"0.39"); 										E.push(e);
	e=mkL(ui.bP.divWid-ui.bP.lilDiv+ui.bP.lilTip+ui.bP.rimHei+ui.bP.rimHei/1.618+ui.bP.lW, ui.midMinHei+ui.bP.skrHei+ui.bP.rimHei/1.618+ui.bP.rimHei/1.618/1.618,
		ui.bP.lW-ui.bP.rimHei*2-ui.bP.rimHei/1.618*2, ui.bP.rH-ui.bP.rimHei/1.618-ui.bP.rimHei/1.618/1.618,
		undefined, v);																													E.push(e);


	//if(FL.subj){ t="("+FL.subj.xtR.nP+","+FL.subj.xtC.nP+") = "+FL.subj.xtn.ni}
	//e=mkT(25,Math.round(ui.midMinHei+ui.bP.tipHei/2+ui.bP.skrHei),undefined,"#fff",undefined,20,t,"AI"); E.push(e);

	//e=mkT(75,Math.round(ui.midMinHei+ui.bP.tipHei/2+ui.bP.skrHei),undefined,"#fff",undefined,25,,"AI"); E.push(e);
	E.forEach( function(e){ svgFe.appendChild(e)})}

// it is not so that abstract karma would be more valuable than abstract value
// it is so that abstract value is in the axial position whereas abstract karma is in the diagonal position
// what does this mean?
// probably need to rewrite mood system. modal and mosaic forms are different for abstract value.
// maybe should scrap this hypothesis anyway

/*I got a solution to the problem of induction as Part III of this book. I should try to publish this on arXiv math.LO because it's so easy. Can someone recommend me? If you can, please visit: https://arxiv.org/auth/endorse?x=CUAERM*/

function cleanSlate(){ initTheRelative(); initTheAbsolute(); initOntology(); initCleanSlate(); predraw(); draw(); }
function tBToolMouseDown( n){ FL.mouseAct =true; if(!(!FL.sim && FL.tBTools[n]==="copySim")){	FL.tBToolsP[n] 	=true; 	refreshTbTool( n)}}
function tBToolMouseLeave( n){ FL.mouseAct =false; if( FL.tBToolsP[n]){ FL.tBToolsP[n] 	=false; refreshTbTool( n)}}
function tBToolMouseUp( n){ if( FL.mouseAct){ switch( FL.tBTools[n]){
	case "cleanSlate" : if( !FL.touched){ 	cleanSlate()}
						else{ var v =confirm("Delete all data?"); if(v){ cleanSlate()}}break;
	case "copySim" : 	if( FL.sim){ var N =prompt("How many copies of Simulation "+FL.sim.nI+"?", FL.tBTunes[n]);
							if(N){ FL.touched=true; FL.tBTunes[n]=N; copySim(RE,FL.sim,N); predraw(); draw();}} break;
	case "makeSim" : 	var N =prompt("How many default Simulations shall be made?", FL.tBTunes[n]);
						if(N){ FL.touched=true; FL.tBTunes[n]=N; for(var i=0; i<N; i++){	mkSim( RE, "sim", false)}
							if( !FL.sim){ selectSim( RE.sims[ RE.simsL-1])} predraw(); draw();} break;
	case "randSim" : 	var N =prompt("How many randomized Simulations shall be made?", FL.tBTunes[n]);
						if(N){ FL.touched=true; FL.tBTunes[n]=N; for(var i=0; i<N; i++){	mkSim( RE, "sim", false)}
							if( !FL.sim){ selectSim( RE.sims[ RE.simsL-1])} predraw(); draw();} break;
	case "lockSim" : 	FL.lockSim= !FL.lockSim; draw(); break;
	case "confStat" : 	if(FL.lF!=="confStat"){ FL.prevLf=FL.lF; FL.lF="confStat"}
						else{ FL.lF=FL.prevLf} draw(); break;
	/*case "delSim" : 	if( RE.simsL >1){ var v =confirm("Delete this simulation?");
							if(v){ 			tBToolDelSim( FL.sim)}}break;
	case "delSims" : 	if( RE.simsL >1){ var v =confirm("Delete all untagged simulations?");
 							if(v){ 			tBToolDelSim( FL.sim)}}*/}
	tBToolMouseLeave( n)} FL.mouseAct =true}
// mentality causes a bonus for acc function, vitality bonus for prod function.
// this explains why neurosoma is so strong as to be overwhelming because the leading function is already strongest.
// mobi func turns "3-dimensional" (lol?) in metaprogramming circuit
function mkTbTool( n){ var E =[]; var e =null; var t,f,T,F,y,Y; var p =0; var P=4;
	if((FL.lockSim && FL.tBTools[n]==="lockSim")||(FL.lF==="confStat"&&FL.tBTools[n]==="confStat")){ FL.tBToolsP[n]=true}
	if(!FL.tBToolsP[n]){
		e =mkL( ui.tB.tooWid*n+2, 0/*2*/,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.tB.tooWid*n+2, 0,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.tB.tooWid*n+2, 0+P,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( FL.feInit){
		e =mkL( ui.tB.tooWid*n+2, 0, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0");
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": tBToolMouseLeave(n);break;
												case "mouseup"   : tBToolMouseUp  ( n);break;
												case "mousedown" : tBToolMouseDown( n);break}});E.push(e)}
	switch( FL.tBTools[n]){
		case "cleanSlate":t="cln";		T="Slate";	y=-1; Y=11; 	f=14; F=14;		break;
//		case "clearSubjs":t="clr"; 		T="subjs";	y=0; Y=12; 	f=15; F=15;		break;
		case "copySim" 	: t="copy"; 	T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "makeSim" 	: t="norm";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "randSim" 	: t="rand";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "lockSim" 	: t="lock";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "confStat" : t="conf";		T="Stat"; 	y=-1; Y=11; 	f=14; F=14;		break;
//		case "delSim" 	: t="del"; 		T="Sim";	y=0; Y=12; 	f=15; F=15; 	break;
//		case "delSims" 	: t="del"; 		T="Sims";   y=0; Y=12;  f=15; F=15; 	break;
		}
	e 		=mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), y+p, undefined,"#ccc","tBTool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), Y+p, undefined,"#ccc","tBTool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshTbTool( n){ var t ="tBTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkTbTool( n); t.forEach( function( e){ svgFe.appendChild( e)})}

function tabKey(n){	FL.sim===RE.sims[n] ? deselectSim(FL.sim) : selectSim(RE.sims[n]); predraw(); draw()}
function mkTab(n){ var E=[]; var e=null;
	var c="#888"; if( RE.sims[n] === FL.sim){ c = "#fff"}	
	e = mkL( 3+(n*ui.tB.reTabG), 0,	ui.tB.reTabW, ui.tB.reTabH,
		undefined, ui.sB.bG, undefined, "#3c3c3c"/*ui.tB.strCol*/, 1);
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : 		tabKey( n); 	break}});	E.push(e);
	var t = (3+(n*ui.tB.reTabG)+(ui.tB.reTabW)-1)+"px "+(0+(ui.tB.reTabH)-1)+"px";
	e.style.transformOrigin = t; e.style.transform = "rotate(-45deg)";	E.push(e);	
	e = mkT( 3+(n*ui.tB.reTabG)+ui.tB.reTabW-2, 0,
		undefined, c, undefined, 13, RE.sims[n].nI, "SF","end");
	e.style.transformOrigin = t; e.style.transform = "rotate(-45deg)";	E.push(e);
	return E}
function statTabKey(n){ FL.statSim =FL.statSims[n]; draw();}
function mkStatTab(n){ var E=[]; var e=null;
	var c="#888"; if( FL.statSims[n] === FL.statSim){ c = "#fff"}
		e = mkL( ui.tB.tabGap+ui.tB.abTabH+(n*ui.tB.tabGap)+(n*ui.tB.abTabW), 3, ui.tB.abTabW, ui.tB.tabHei,
		undefined, ui.sB.bG, undefined, ui.tB.strCol, 1,undefined,6,6);
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : 		statTabKey( n); 	break}});	E.push(e);
	e = mkT( ui.tB.tabGap+ui.tB.abTabH+(n*ui.tB.tabGap)+(n*ui.tB.abTabW)+Math.floor(ui.tB.abTabW/2)+1, 3,
		undefined, c, undefined, 20, FL.statSims[n].nI, "TR","middle"); E.push(e);
	return E}
function drTopBar(){ var E=[]; var e=null; var T=[]; var t=null;
	e=mkL(0,0,ui.tB.disHrz,ui.tB.disHei,undefined,ui.sB.bG); E.push(e);
	for(var n=0; n<FL.tBToolsL; n++){ e =mkTbTool(n); E=E.concat(e)}
	e=mkL(ui.tB.abTabH,-10,ui.tB.abTabsW,ui.tB.disHei,undefined,"#3c3c3c", undefined,
		ui.tB.strCol,1,undefined,10,10); E.push(e);
	for(var i=0; i<FL.statTabsL; i++){ e =mkStatTab(i); E=E.concat(e); }
	e=mkL(ui.tB.abTabH,ui.tB.skrVrt,ui.tB.abTabsW,ui.tB.skrHei,undefined,ui.sB.bG); E.push(e);
	E.forEach( function(e){svgFe.appendChild(e)}); 

	t=mkL(0, 0, ui.tB.disWid, ui.tB.skrVrt, "tB_bg", ui.tB.bG, "tB"); T.push(t);
	t=mkL(0, 0, 10, ui.tB.skrVrt+1, undefined, ui.sB.bG); T.push(t);
	t=mkL(0, -ui.tB.skrHei, 20, ui.tB.disHei, undefined, ui.tB.bG, undefined,undefined,undefined,undefined,10,10); T.push(t);

	t=mkI(7, ui.tB.skrVrt, ui.tB.disWid, ui.tB.skrVrt,undefined,"#3c3c3c",1); T.push(t);
	for(var n=0; n<RE.simsL; n++){ t =mkTab(n); T=T.concat(t);}
	//if(RE.simsL > 1){ t =mkTab(-1); T=T.concat(t); }
	t=mkL(0, ui.tB.skrVrt, ui.tB.disWid, ui.tB.skrHei,undefined,ui.sB.bG); T.push(t);
	T.forEach( function(t){svgTb.appendChild(t)})}



function lIToolMouseDown( n){ FL.mouseAct =true; FL.lIToolsP[n] 	=true; 	refreshLiTool( n)}
function lIToolMouseLeave( n){ FL.mouseAct =false; if( FL.lIToolsP[n]){ FL.lIToolsP[n] 	=false; refreshLiTool( n)}}
function lIToolMouseUp( n){ if(FL.mouseAct){ switch( FL.lITools[n]){
	case "cleanSlate" : if( !FL.touched){ 	cleanSlate()}
						else{ var v =confirm("Delete all data?"); if(v){ cleanSlate()}}break;}
	lIToolMouseLeave( n)} FL.mouseAct =true}
function mkLiTool(n){ var E=[]; var e=null; var t,f,T,F,y,Y; var p =0; var P=4;
	if(!FL.lIToolsP[n]){
		e =mkL( ui.lF.kW+2, ui.tB.tooWid*n+ui.tB.disHei,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.lF.kW+2, ui.tB.tooWid*n+ui.tB.disHei,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.lF.kW+2, P+(ui.tB.tooWid*n)+ui.tB.disHei,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( FL.feInit){
		e =mkL( ui.lF.kW+2, (ui.tB.tooWid*n)+ui.tB.disHei, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0");
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": lIToolMouseLeave(n);break;
												case "mouseup"   : lIToolMouseUp  ( n);break;
												case "mousedown" : lIToolMouseDown( n);break}});E.push(e)}
	//"preCalc","defSort","turnSort","confSort"
	switch( FL.lITools[n]){
		case "confRand": 	t="conf";	T="Rand";	y=-1; Y=11; 	f=14; F=13;		break;
		case "confDef": 	t="conf";	T="Norm";	y=-1; Y=11; 	f=14; F=13;		break;
		case "defSort": 	t="def";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		case "confSort": 	t="conf";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		}
	e 		=mkT( ui.lF.kW+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+y+p+ui.tB.disHei, undefined,"#ccc","lITool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.lF.kW+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+Y+p+ui.tB.disHei, undefined,"#ccc","lITool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshLiTool( n){ var t ="lITool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkLiTool( n); t.forEach( function( e){ svgFe.appendChild( e)})}

function listFeatureKey(e){ var f= parseInt(e.split("-").pop()); FL.lF=FL.lIFes[f]; draw();}
function mkLiFb( n,ni){ var id="lIFe-"+n;
	if( FL.lF !== ni){ 	var e =mkL( 0, n*ui.lF.kH+ui.tB.disHei, ui.lF.kW, ui.lF.kH, id, ui.sB.btn)}
	else 			{ 	var e =mkL( 0, n*ui.lF.kH+ui.tB.disHei, ui.lF.kW, ui.lF.kH, id, ui.sB.sel)}
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : listFeatureKey( e.id);break}}); return e }
function mkLiFt( n,ni){ 
	if( FL.lF !== ni){ 	var e =mkT( 8, (n*ui.lF.kH)-2+ui.tB.disHei, undefined, ui.sB.btnTxt, undefined, ui.sB.fnt, ni, 'PF')}
	else 			{ 	var e =mkT( 76, (n*ui.lF.kH)-2+ui.tB.disHei, undefined, ui.sB.selTxt, undefined, ui.sB.fnt, ni, 'PF',"end")}return e }
function mkLiFr( n,sB,ni){ var et=[]; var v; // NO "FORM", NO "SUBSTANCE"!
	if( FL.lF !== ni) { 
		var e=mkL( 0, n*ui.lF.kH+ui.tB.disHei, 			ui.lF.kW, 3, undefined, ui.sB.btnU); et.push( e);
		var e=mkL( 0, ((n+1)*ui.lF.kH)-3+ui.tB.disHei, 	ui.lF.kW, 3, undefined, ui.sB.btnD); et.push( e);
		v = "0,"+(n*ui.lF.kH+ui.tB.disHei)+" 3,"+((n*ui.lF.kH)+3+ui.tB.disHei)+" 3,"+(((n+1)*ui.lF.kH+ui.tB.disHei)-3)+" 0,"+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.btnL,undefined,false); et.push(e);
		v = ui.lF.kW+","+(n*ui.lF.kH+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+((n*ui.lF.kH)+3+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" "+ui.lF.kW+","+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.btnR,undefined,false); et.push(e);}
	else{
		var e=mkL( 0, n*ui.lF.kH+ui.tB.disHei, 			ui.lF.kW, 3, undefined, ui.sB.selU); et.push( e);
		var e=mkL( 0, ((n+1)*ui.lF.kH)-3+ui.tB.disHei, 	ui.lF.kW, 3, undefined, ui.sB.selD); et.push( e);
		v = "0,"+(n*ui.lF.kH+ui.tB.disHei)+" 3,"+((n*ui.lF.kH)+3+ui.tB.disHei)+" 3,"+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" 0,"+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.selL,undefined,false); et.push(e);
		v = ui.lF.kW+","+(n*ui.lF.kH+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+((n*ui.lF.kH)+3+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" "+ui.lF.kW+","+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.selR,undefined,false); et.push(e);
	} return et}

function mkSubjMoodCode(subj){ var r=subj.sex.nI; if(subj.mD.obj){ r +="'"}	r=r+"("+subj.pPm.niH+subj.pGn.nI+subj.pPm.niT+")"; return r	}

function drList(){ var E=[]; var e=null; var liI="";liT="";liB=""; var off; var absB; var F=[];var G=[];
	e =mkL( 0, ui.tB.disHei, ui.tY.liW, ui.tY.liHe,"tY_L",ui.sB.bG,"tY_L_bg");											svgFe.appendChild( e);
	for( var i=0; i < FL.lIFesL; i++){ 	e =mkLiFb( i, FL.lIFes[i]); E.push(e);
										e =mkLiFt( i, FL.lIFes[i]); E.push(e);
										e =mkLiFr( i, ui.sB, FL.lIFes[i]); E =E.concat(e)}
	for(var i=0; i<FL.lIToolsL; i++){ e =mkLiTool(i); E=E.concat(e)}
	switch( FL.liS){
		case 0: ui.lI.iHe=ui.lI.iHe0; ui.lI.tPF=ui.lI.tPF0; ui.lI.tTR=ui.lI.tTR0; ui.lI.tSF=ui.lI.tSF0;	ui.lI.mDx=ui.lI.mDx0;
				ui.lI.kix=ui.lI.kix0; ui.lI.mPx=ui.lI.mPx0; ui.lI.obx=ui.lI.obx0; ui.lI.vQx=ui.lI.vQx0; ui.lI.nMx=ui.lI.nMx0;
				ui.lI.miW=ui.lI.miW0; break;
		case 1: ui.lI.iHe=ui.lI.iHe1; ui.lI.tPF=ui.lI.tPF1; ui.lI.tTR=ui.lI.tTR1; ui.lI.tSF=ui.lI.tSF1;
				ui.lI.mDx=ui.lI.mDx1; ui.lI.nMx=ui.lI.nMx1; break;
		case 2: ui.lI.iHe=ui.lI.iHe2; ui.lI.tPF=ui.lI.tPF2; ui.lI.tTR=ui.lI.tTR2; ui.lI.tSF=ui.lI.tSF2;
				ui.lI.mDx=ui.lI.mDx2; ui.lI.nMx=ui.lI.nMx2; break;}

	var ctrHei=0;
	ui.lI.miW=500; // temp
	ui.lI.svgHei =(FL.subjsL*ui.lI.iHe+2); svgLi.setAttribute( 'height', ui.lI.svgHei);
	svgLi.setAttribute( 'width', ui.lI.miW);
	var lisLen=18;
	var lisHei=ui.midMinHei -ui.tB.disHei*5;
	var lisY =ctrHei;
	var width = ui.lI.miW;
	E.forEach( function(E){svgFe.appendChild(E)}); var E=null;
	if(FL.sim){for(var n=0; n <FL.sim.subjsL; n++){
		if( 	FL.sim.subjs[n]===FL.subj)	{ liI="#ffffff"; liT="#000000"; liB="#000000"; 	E=G}
		else if(FL.sim.subjs[n]===FL.keySubj){ liI=ui.tY.sLiI;liT=ui.tY.sLiT;liB=ui.tY.sLiB; E=G}
		else 								{ liI=ui.tY.liI; liT=ui.tY.liT; liB=ui.tY.liB; 	E=F}					
		e =mkL(1, ui.lI.iHe*n+ctrHei+1,width-2,ui.lI.iHe,"tY_Li-"+FL.subjs[n].nI,liI,"tY_Li",liB,1);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : subjListKey( e.id);break}});									E.push(e);

		e =mkT(4,(ui.lI.iHe*n)-1+ctrHei,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tPF,
			FL.subjs[n].nI+" "+FL.subjs[n].tY.nI+" "+FL.subjs[n].fN.ni2+FL.subjs[n].cR.ni,"PF"); 								E.push(e);

		if( FL.subjs[n].stereo){ var liT2=liT}
		else if(FL.subjs[n].bAge){ 	var liT2="#ff0000"} else if(FL.subjs[n].gAge){ 	var liT2="#00ff00"}
		else if(FL.subjs[n].bQueer){var liT2="#00ffff"} else if(FL.subjs[n].gQueer){var liT2="#ffff00"}
		if( FL.subjs[n].sex.mas){ if(!FL.subjs[n].sex.Ac){ off=ui.lI.mDx+ui.lI.kix; absB="♂("} else{ off=ui.lI.mDx; absB="*♂("}}
		else 					{ if(!FL.subjs[n].sex.Ac){ off=ui.lI.mDx+ui.lI.kix; absB="♀("} else{ off=ui.lI.mDx; absB="*♀("}}
		e =mkT(off, (ui.lI.iHe*n)-1+ctrHei,"tY_LiB-"+n,liT2,"tY_LiB",ui.lI.tTR,
			absB+FL.subjs[n].pPm.niH+FL.subjs[n].pGn.nI+FL.subjs[n].pPm.niT+")","TR");											E.push(e);

		if( FL.subjs[n].symm){ liT2="#ffffff"} else { liT2=liT}
		off =ui.lI.mPx-ui.lI.obx-2;
		e =mkT( off, 		(ui.lI.iHe*n)+1, 			undefined,liT, undefined,ui.lI.tPF/2,FL.subjs[n].loc.X,"AI","end");		E.push(e);
		e =mkT( off, 		(ui.lI.iHe*n)+ui.lI.tPF/2, 	undefined,liT, undefined,ui.lI.tPF/2,FL.subjs[n].loc.Y,"AI","end"); 	E.push(e);
		if( FL.subjs[n].gnd.mas){ if(!FL.subjs[n].obj){ off=ui.lI.mPx; absB="♂"} else{ off=ui.lI.mPx-ui.lI.obx; absB="’♂"}}
		else 					{ if(!FL.subjs[n].obj){ off=ui.lI.mPx; absB="♀"} else{ off=ui.lI.mPx-ui.lI.obx; absB="’♀"}}
		e =mkT( off, 	(ui.lI.iHe*n)-1+ctrHei+1, 			 undefined,liT, undefined,ui.lI.tTR,absB,"TR");						E.push(e);
		e =mkT( ui.lI.mPx+18,(ui.lI.iHe*n)+1, 			undefined,liT, undefined,ui.lI.tPF/2,FL.subjs[n].dir.X,"AI","end");		E.push(e);
		e =mkT( ui.lI.mPx+18,(ui.lI.iHe*n)+ui.lI.tPF/2, 	undefined,liT, undefined,ui.lI.tPF/2,FL.subjs[n].dir.Y,"AI","end"); E.push(e);
		/*e =mkT(ui.lI.vQx, (ui.lI.iHe*n)-1+ctrHei+1,"tY_LiP-"+n,liT2,"tY_LiP",ui.lI.tTR,
			"= "+FL.sim.subjs[n].xtn.ni,"AI");*/
		///*"= ("+*//*FL.sim.subjs[n].ntn.nI+*/"("+/*FL.sim.subjs[n].xtn.nI+*/"))","AI");	E.push(e);
		e =mkT(ui.lI.nMx,(ui.lI.iHe*n)-1+ctrHei+1,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tSF,FL.subjs[n].nM.full,"SF"); 				E.push(e)}
	E=F.concat(G);	E.forEach( function(E){svgLi.appendChild(E)})}}
// i.a.a.i.a.a.öö.öö.
// function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){
// function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
function drSequencer(){ var E=[]; var e=null; var l=120;
	if(FL.lIW>0) { 	l =ui.tY.lIW}
//	e= mkL(l,ui.tB.disHei-1,ui.sQ.cW-2,ui.sQ.cH,undefined,"#3c3c3c",undefined,undefined,undefined,undefined,12,12); E.push(e);
//	e= mkL(l,ui.tB.disHei-1,ui.sQ.cW-3,ui.sQ.cH-1,undefined,"#000000",undefined,undefined,undefined,undefined,12,12); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); E=[];
	e= mkL(0,0,ui.sQ.disWid,ui.sB.disHei-ui.tB.disHei,"tY_sQ",ui.sQ.bG,"tY_sQ");				E.push(e);
	E.forEach( function(E){svgSq.appendChild(E)})}

// adjust cube, middle zy 1x2, middle xz 2x1
function drTypeCube(cX,cY,cl){ var e; var E=[]; var v; var w=ui.tY.cE; var h=ui.tY.cE; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane; var x=cX+h/d+ui.tY.cuHrz; var y=cY+h/d+ui.tY.cMarg; //"#002d33"
	v =  x -(w/d)+","+(y + (h/d)) +" "+			(x +(w/d)+","+(y - (h/d)))+" "+
		(x + (w/d))+","+(y+h-(h/d))+" "+			(x -(w/d)+","+(y+h+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-vrt", cl, "0.236"); 		E.push(e);
	/*v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+			(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+w-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, ui.tY.cShade, id+"-cU-hrz", cl, op); 		E.push(e);*/
	v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+			(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, ui.tY.cShade, id+"-cU-hrzL", cl, "0.382"); 		E.push(e);
	v =  x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)) +" "+			(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+w-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, "#002d33", id+"-cU-hrzR", cl, "0.146"); 		E.push(e);

	v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-top", cl, op);		E.push(e);
/*	v =  x+(w/2)+(w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-btm", cl, op/1.618);E.push(e);*/
	v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-btmL", cl, op/1.618);E.push(e);
	v =  x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, "#002d33", id+"-cU-btmR", cl, "0.382");E.push(e);

/*	v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+			(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+			(x + (w/2)-(w/d)+","+(y+h+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-vrt", cl, op); 		E.push(e);*/
	v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+			(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+		(x + (w/2)-(w/d)+","+(y+(h/2)+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-zyMT", cl, op); 		E.push(e);
	v =  x + (w/2)-(w/d)+","+(y+(w/2)+(h/d)) +" "+		(x + (w/2)+(w/d)+","+(y+(w/2)-(h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+ h -(h/d)))+" "+		(x + (w/2)-(w/d)+","+(y+ h +(h/d)));		
	e =drS(v, "#002d33", id+"-cU-zyMB", cl, "0.236"); 		E.push(e);

	e =drA(x+(w/d),	y-(h/d),w,h,co,id+"-btm",cl+"-btm pAIU",0,undefined,op); 		E.push(e);

	var p=(w/32)-2;
	v = x+(w/4)-p+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4)-p)+" "+
		(x+(w/2)+p)+","+(y+(h/8))+" "+ 					(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-npp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)+(w/2)-p+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4)-p)+" "+
		(x+(w/2)+(w/2)+p)+","+(y+(h/8))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-ppp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)+(w/2)-p+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4)+(h/2)-p)+" "+
		(x+(w/2)+(w/2)+p)+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-pnp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)-p+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4)+(h/2)-p)+" "+
		(x+(w/2)+p)+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-nnp", cl, undefined, "#8fc",1); E.push(e);

/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2)+(w/d),	y+(h/2)-(h/d),	undefined,"#ccff66",1,"0.382");E.push(e);  
	//e.setAttribute("marker-end","url(#triangle)");
	//marker.appendChild(e); E.push(e);
	/*e.marker('start', 10, 10, function(add) {
  add.circle(10).fill('#f06')
})*/
//	var f = mkM("triangle","0 0 10 10",x,y,"strokeWidth","4","3","auto"); 
	//e.markerEnd ="url(#marker)";
	//e.setAttribute("class","path");
	//E.push(f);
	//f.appendChild(e); E.push(f);
	e =mkI(x+(w/2),			y+h,			x+(w/2)+(w/d),	y+h-(w/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+h-(h/d),		x,				y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+(h/d),		x,				y+(h/2),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =drA(x, 		y, 		w,h,co,id+"-mid",cl+"-mid pAIU",0,undefined,op/1.618/1.618);	E.push(e);
	e =mkI(x-(w/d),			y+(h/2)+(h/d),	x,				y+(h/2),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x,				y+h,			x-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x,				y,				x,				y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/2),			y+h,			x+(w/2)-(w/d),	y+h+(w/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2)-(w/d),	y+(h/2)+(h/d),	undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2),		y+(h/d),		undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+(w/2),			y,				x+(w/2),		y+(h/d),		undefined,"#ccff66",1,"0.236"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2),		y+h,			undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x,				y+(h/2),		x+w-(w/d),		y+(h/2),		undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+w,				y+(h/2),		x+w-(w/d),		y+(h/2),		undefined,"#ccff66",1,"0.236"); E.push(e);


	e =mkI(x+w+(w/d),		y+(h/d),		x+w-(w/d),		y+(h/d),		undefined,"#ffffff",1,"0.146"); E.push(e);
	e =mkI(x+w+(w/d),		y+h-(h/d),		x+w-(w/d),		y+h-(h/d),		undefined,"#ffffff",1,"0.146"); E.push(e);

	e =mkI(x,				y+h,			x+w-(w/d),		y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w,				y+h,			x+w-(w/d),		y+h,			undefined,"#ffffff",1,"0.146"); E.push(e);

	v = x-p+	","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8))+","+(y+(w/4)-p)+" "+
		(x+(w/4)+p)+","+(y+(h/4)+(h/8))+" "+ 		(x+(w/8))+","+(y+(w/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-npn", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/2)-p+","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4)-p)+" "+
		(x+(w/4)+(w/2)+p)+","+(y+(h/4)+(h/8))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-ppn", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/2)-p+","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4)+(h/2)-p)+" "+
		(x+(w/4)+(w/2)+p)+","+(y+(h/4)+(h/8)+(h/2))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-pnn", cl, undefined, "#8fc",1); E.push(e);
	v = x-p+	","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8))+","+(y+(w/4)+(h/2)-p)+" "+
		(x+(w/4)+p)+","+(y+(h/4)+(h/8)+(h/2))+" "+ 		(x+(w/8))+","+(y+(w/2)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-nnn", cl, undefined, "#8fc",1); E.push(e);

	/*v =  x + (w/2)+(w/d)+","+(y + (h/d)) +" "+			(x + w+(w/d)+","+(y - (h/d)))+" "+
		(x + w+(w/d)+","+(y+h-(h/d)))+" "+				(x + w-(w/d)+","+(y+h+(h/d)));		
	e =drS(v, "#002d33", id+"-cU-vrtR", cl, "0.236"); 		E.push(e); */
	v =  x + (w/2)+(w/d)+","+(y+(h/d)) +" "+		(x + w+(w/d)+","+(y-(h/d)))+" "+
		(x + w+(w/d)+","+(y+(h/2)-(h/d)))+" "+		(x + w-(w/d)+","+(y+(h/2)+(h/d)));	
	e =drS(v, ui.tY.cShade, id+"-cU-zyRE", cl, "0.146"); 		E.push(e);
	v =  x + (w/2)+(w/d)+","+(y+(w/2)+(h/d)) +" "+		(x + w+(w/d)+","+(y+(w/2)-(h/d)))+" "+
		(x + w+(w/d)+","+(y+ h -(h/d)))+" "+		(x + w-(w/d)+","+(y+ h +(h/d)));		
	e =drS(v, "#002d33", id+"-cU-zyRB", cl, "0.146"); 		E.push(e);

	e =drA(x-(w/d),	y+(h/d),w,h,co,id+"-top",cl+"-top pAIU",0,undefined,"0.146");		E.push(e);

	e =mkI(x+(w/d), 		y-(h/d), 		(x+w)+(w/d), 	y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x, 				y, 				(x+w), 			y, 				undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+(h/d), 		(x+w)-(w/d), 	y+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+(h/2)+(h/d),	(x+w)-(w/d), 	y+(h/2)+(h/d),	undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+h+(h/d),		(x+w)-(w/d), 	y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	e =mkI(x-(w/d), 		y+(h/d), 		x+(w/d), 		y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d), 		y+(h/d), 		x+(w/2)+(w/d), 	y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+(h/d), 		x+w+(w/d), 		y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+(w/2)+(h/d), 	x+w+(w/d), 		y+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+w+(h/d), 		x+w+(w/d), 		y+w-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	e =mkI(x+w+(w/d), 		y-(h/d), 		x+w+(w/d), 		y+w-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w, 			y, 				x+w, 			y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d),		y+(h/d),		x+w-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+(h/d),		x+(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d),			y+(h/d),		x-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	if(FL.sKTypeCube==="Study"){ var o =FL.tY.absSpace; }
	else if(FL.sKTypeCube==="Locate"){ var o =FL.tY.mapSpace;}

	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)+(h/2)-p),cl+"_IET-nnn","#ffffff",cl+"_IET", 		w/11,o[0][0][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-nnn","#ffffff",cl+"_IEN",w/22,AB.abSpace[0][0][0].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)+(h/2)-p),cl+"_IET-pnn","#ffffff",cl+"_IET", 	w/11,o[2][0][0].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-pnn","#ffffff",cl+"_IEN",w/22,AB.abSpace[2][0][0].val,"tahoma","middle");E.push(e);*/
	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)-p),cl+"_IET-ppn","#ffffff",cl+"_IET",			w/11,o[2][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)),cl+"_IEN-ppn","#ffffff",cl+"_IEN",w/22,AB.abSpace[2][2][0].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)-p),cl+"_IET-npn","#ffffff",cl+"_IET",				w/11,o[0][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)),cl+"_IEN-npn","#ffffff",cl+"_IEN",	w/22,AB.abSpace[0][2][0].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)+(h/2)-p),cl+"_IET-nnp","#ffffff",cl+"_IET",			w/11,o[0][0][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/2)+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",w/22,AB.abSpace[0][0][2].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)-p),cl+"_IET-npp","#ffffff",cl+"_IET",				w/11,o[0][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",		w/22,AB.abSpace[0][2][2].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)-p),cl+"_IET-ppp","#ffffff",cl+"_IET",			w/11,o[2][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/8)),cl+"_IEN-ppp","#ffffff",cl+"_IEN",		w/22,AB.abSpace[2][2][2].val,"tahoma","middle"); E.push(e);*/
	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)+(h/2)-p),cl+"_IET-pnp","#ffffff",cl+"_IET",	w/11,o[2][0][2].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/2)+(h/8)),cl+"_IEN-pnp","#ffffff",cl+"_IEN",	w/22,AB.abSpace[2][0][2].val,"tahoma","middle");E.push(e);*/

	return E }

function drTypeCage(cX,cY,cl,w){

	function drAr(x,y,X,Y,lx,ly,lz){

		function drCr(cx,cy,x,y,X,Y){ var crR;
			if(FL.subj){
				if(FL.subj.cR.ni ===o.ni){
					crR=Math.round((w/13));
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.236"); F.push(e); 
					crR=Math.round((w/13)/1.618);
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.381"); F.push(e);
					e=mkI(x,y,X,Y,undefined,"#ffffff",Math.ceil(w/170),0.236,dash); F.push(e);}
				else if(FL.cRopts.includes(o)){
					crR=Math.round((w/13)/1.618/1.618);
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.236"); F.push(e);
					e=mkI(x,y,X,Y,undefined,"#ffffff",Math.ceil(w/170),0.236,dash); F.push(e);}}}

		if( 	FL.sKTypeCube==="Study"){  	var o =FL.tY.relSpace[lx][ly][lz]; }
		else if(FL.sKTypeCube==="Locate"){ 	var o =FL.tY.dirSpace[lx][ly][lz];}
		var cNi=o.ni; var col,stC,tCo; var cSD, cVD, cMD; var dash; var stW=w/65;
		if(FL.sKTypeCube==="Study"){
			if(!FL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
				if(o.val){ 		col="#880000"; stC="#ff0000"}}
			else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
				if(o.val){ 		col="#880000"; stC="#ff0000"}
				if(FL.cR.ni ===o.ni){ var fil ="url(#fil3)"; var fr=w/13+5; var fCo="#ffffff"
					if(o.val){ 	col="#ffffff"; stC="#ff8888"; tCo ="#000000";}
					else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
				if(FL.cRopts.includes(o)){ var fil ="url(#fil3)"; var fr=w/15+5;
					if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
					else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}}
		else if(FL.sKTypeCube==="Locate"){
			if(!FL.subj){ 					col="#000000"; 		stC=o.hex; 		tCo="#ffffff";}
			else{ 							col="#000000"; 		stC=o.hex; 		tCo="#ffffff";
				if(FL.cR.ni ===o.ni){ 		col="#ffffff"; 						tCo="#000000";
											var fil ="url(#fil3)"; var fr=w/13+5; var fCo="#ffffff"}
				if( FL.cRopts.includes(o)){ col="#ffffff"; 						tCo="#000000";
											var fil ="url(#fil3)"; var fr=w/15+5; }}}
		var cS =o.str; if(cS){ cSD="S"} else{ cSD="s"}
		var cV =o.val; if(cV){ cVD="V"} else{ cVD="v"}
		var cM =o.mnt; if(cM){ cMD="M"} else{ cMD="m"}
		if(!cM){ dash=w/105+","+w/105}
		var E=[];var e=null;var id="_cUC-";var dx=false;var dy=false;var dz=false;var st;
		if(lx===2){ id+="p"} else if(lx===1){ id+="t"; dx=true;}else if(lx===0){ id+="n"}
		if(ly===2){ id+="p"} else if(ly===1){ id+="t"; dy=true;}else if(ly===0){ id+="n"}
		if(lz===2){ id+="p"} else if(lz===1){ id+="t"; dz=true;}else if(lz===0){ id+="n"}
		switch(o.str){ case true: st=Math.round(w/8); break; case false: st=Math.round(w/13)}
		if(dx){
			if( o.aDi=== 1){ x += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/6))+","+y+" "+x+","+(y+(w/14))+" "+x+","+(y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC);  										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x/*+(w/13)*/,y,X/*-(w/10)*/,Y)}
			else if( o.aDi=== -1){ X -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/6))+","+Y+" "+X+","+(Y+(w/14))+" "+X+","+(Y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}}
		if(dy){
			if( o.aDi=== 1){ y += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/14))+","+y+" "+(x+(w/14))+","+y+" "+x+","+(y-(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x,y,X,Y)}
			else if( o.aDi=== -1){ Y -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X-(w/14))+","+Y+" "+(X+(w/14))+","+Y+" "+X+","+(Y+(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}}
		if(dz){
			if( o.aDi=== -1){ x += w/6; y-= w/6;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/18))+","+(y-(w/18))+" "+(x-(w/9))+","+(y+(w/9))+" "+(x+(w/18))+","+(y+(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x,y,X,Y)}
			else if( o.aDi=== 1){ Y += w/6; X -= w/6;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/18))+","+(Y+(w/18))+" "+(X+(w/9))+","+(Y-(w/9))+" "+(X-(w/18))+","+(Y-(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}
			else if( o.aDi=== 0){ cY = Y+ w/4.5; cX = X- w/4.5;
				if(fil){ e=drC(cX,cY,fr,fCo); e.setAttribute("filter",fil); 					E.push(e)}
				e =drC(cX,cY,w/13,col,"jou","jou",stW,stC); 									F.push(e);
				e =mkT(cX+1,cY-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(cX+1,cY-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(cX,cY,x,y,X,Y)}}
		e=mkI(x,y,X,Y,id,stC,st,undefined,dash); E.push(e);
		return E}

	function drFu(cx,cy,lx,ly,lz){ var E=[];var e=null;var cSD,cVD,cMD,col,co,stC,dash,crR;
		if(FL.sKTypeCube==="Study"){ var o =FL.tY.relSpace[lx][ly][lz]; }
		else if(FL.sKTypeCube==="Locate"){ var o =FL.tY.dirSpace[lx][ly][lz];}
		if(FL.sKTypeCube==="Study"){
			if(!FL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
				if(o.val){ 		col="#880000"; stC="#ff0000"}}
			else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
				if(o.val){ 		col="#880000"; stC="#ff0000"}
				if(FL.fN.ni ===o.ni){ var fil ="url(#fil3)"; var fr=w/10+8; var fCo="#ffffff"
					if(o.val){ 	col="#ffffff"; stC="#ffacac"; tCo ="#000000";}
					else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
				if(FL.fNopts.includes(o)){ var fil ="url(#fil3)"; var fr=w/12+8;
					if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
					else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}}
		else if(FL.sKTypeCube==="Locate"){
			if(!FL.subj){ 					col="#000000"; stC=o.hex; 	tCo="#ffffff";}
			else{ 							col="#000000"; stC=o.hex; 	tCo="#ffffff";
				if(FL.fN.ni ===o.ni){		col="#ffffff"; 				tCo="#000000";
											var fil ="url(#fil3)"; var fr=w/10+8; var fCo="#ffffff"}
				if(FL.fNopts.includes(o)){  col="#ffffff";  			tCo="#000000";
											var fil ="url(#fil3)"; var fr=w/12+8; var fCo="#ffffff"}}}
		var st=w/65;var cl1="_cUF";var id1=cl1+"-";var cl2="_fuT";var id2=cl2+"-";var cl3="_fuN";var id3=cl3+"-"; 
		if(o.str){ cSD="S"; st=w/25}else{ cSD="s"}
		if(o.val){ cVD="V"} 		else{ cVD="v"}
		if(o.mnt){ cMD="M"} 		else{ cMD="m"; dash=w/105+","+w/105}
		if(lx===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(ly===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(lz===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		//function drC(x,y,r,c,id,cl,sW,sC,d,fO,sO)
		if(FL.subj){
			if(FL.fN.ni ===o.ni){
				e=drC(cx,cy,fr,fCo); e.setAttribute("filter",fil); 					E.push(e);
				crR=Math.round((w/10));
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.236"); F.push(e); 
				crR=Math.round((w/10)/1.618/1.618);
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.381"); F.push(e);}
			else if(FL.fNopts.includes(o)){
				e=drC(cx,cy,fr,fCo); e.setAttribute("filter",fil); 					E.push(e);
				crR=Math.round((w/10)/1.618/1.618);
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,Math.ceil(w/170),"#ffffff",undefined,"0","0.236"); F.push(e)}}	 
		e=drC(cx,cy,w/10,col,cl1,id1,st,stC,dash); 									E.push(e);
		e=mkT(cx+1,cy-(w/11),id2,tCo,cl2,w/11,o.ni2,"PF","middle"); 		E.push(e);
		e=mkT(cx+1,cy-(w/60),id3,tCo,cl3,w/17,cVD+cSD+cMD,"PF","middle");E.push(e); return E}

	if(FL.fe==="type"){ 	var x=cX+h/d+ui.tY.cuHrz; 	var y=cY+h/d+ui.tY.cMarg;	var w =ui.tY.cE; 	}
	else{ 					var x=cX +mR(w/8); 			var y=cY +mR(w/8);			w = w -mR(w/4)}
	var e; var E=[]; var F=[]; var v; var h=w; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane;

	e =drAr(x+(w/4)+w/32,	y-(w/8),			x+(w/4)+w/32,	y-(w/4)-(w/32)+h,	0,1,2);E=E.concat(e);
	e =drAr(x+w+(w/8),		y-(w/8),			x+w+(w/8),		y-(w/4)-(w/32)+h,	2,1,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/32,	y-(w/8),			x+w+(w/8),		y-(w/8),			1,2,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/32,	y-(w/4)-(w/32)+h,	x+w+(w/8),		y-(w/4)-(w/32)+h,	1,0,2);E=E.concat(e);

	e =drAr(x-(w/8),		y+(w/4)+(w/32), 	x+(w/4)+w/32,	y-(w/8), 			0,2,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/32)+w,y+(w/4)+(w/32),	x+w+(w/8),		y-(w/8), 			2,2,1);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x+(w/4)+w/32,	y-(w/4)-(w/32)+h,	0,0,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/32)+w,y+(w/8)+h,			x+w+(w/8),		y-(w/4)-(w/32)+h,	2,0,1);E=E.concat(e);

	e =drAr(x-(w/4)-(w/32)+w,y+(w/4)+(w/32),	x-(w/4)-(w/32)+w,y+w/8+h,			2,1,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/32),		x-(w/4)-(w/32)+w,y+(w/4)+(w/32),	1,2,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x-(w/4)-(w/32)+w,y+(w/8)+h,			1,0,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/32),		x-(w/8),		y+w/8+h,			0,1,0);E=E.concat(e);

	e =drFu(x-(w/8),		y+(w/4)+(w/32), 										0,2,0); E=E.concat(e);
	e =drFu(x-(w/8),		y+(w/8)+h,												0,0,0); E=E.concat(e);
	e =drFu(x-(w/4)-(w/32)+w,y+(w/4)+(w/32),										2,2,0); E=E.concat(e);
	e =drFu(x-(w/4)-(w/32)+w,y+(w/8)+h,												2,0,0); E=E.concat(e);
	e =drFu(x+(w/4)+w/32,	y-(w/8),												0,2,2); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/8),												2,2,2); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/4)-(w/32)+h,										2,0,2); E=E.concat(e);
	e =drFu(x+(w/4)+w/32,	y-(w/4)-(w/32)+h,										0,0,2); E=E.concat(e); E=E.concat(F);
	return E}

function addType( t,arr){
	var tY =arr.find(o => o.ni===t);
	if(tY){ return tY}
	else{ 	tY=mkType( t);
			tY.score =0;
			arr.push(tY);
			return tY}}
function applyType( t,s){
	var tY =s.tYs.find(o => o.ni===t);
	if(tY){ s.tY=tY}
	else{ 	tY=mkType( t,AB);
			s.tYs.push(tY);
			transSignalByTy( s, tY);
			s.tY=tY}}
function typeKeyMouseDown( e){ var tY= parseInt(e.split("-").pop()); tY=FL.Sociotypes.seed[tY];	
	if( FL.subj){ // should be possible to have many instances of same type in one subj if multiple personality disorder
		if( tY!==FL.subj.tY.ni){
			e=FL.subj.tY;
			applyType( tY, FL.subj);
			FL.tY =FL.subj.tY;
			mkSignal( FL.subj, e.fN, e.cR, FL.subj.loc, FL.subj.dir, FL.subj.gnd);
			mkTyOptions( FL.subj);
			draw()}}
	else{ 
		if(FL.tY.ni===tY){ 	FL.tY =AB.tY; 						}
		else{ 				FL.tY =AB.tYs.find(o => o.ni===tY); }draw()}}
function drTypeKeys(){ var E=[]; var e=null; var area, areaB, areaT;
	for(var n=0; n<16; n++){
		if((FL.tY===null)||(AB.tYs[n].ni !== FL.tY.ni)){ area=ui.tY.area; areaB=ui.tY.areaB; areaT=ui.tY.areaT; }
		else 							{ area=ui.tY.selArea; areaB=ui.tY.selAreaB; areaT=ui.tY.selAreaT; }
		e =mkL(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap)),ui.tY.keY,
			ui.tY.keyWid-ui.mD.linew/2,ui.tY.keyWid-ui.mD.linew/2,"tY_Keys-"+n,area,"tY_Keys",areaB,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : typeKeyMouseDown( e.id);break}}); E.push(e);
		e=mkT(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap))+(ui.tY.keyWid/2)-1,ui.tY.keY+(ui.tY.keyWid/7)-1,
		undefined,areaT,undefined,ui.tY.keyWid/1.6,FL.Sociotypes.seed[n],"SF","middle"); E.push(e)}
	E.forEach( function(E){svgFe.appendChild(E)}); }
function drTypeStage(){ var E=[]; var e=null;
	var x=Math.round(ui.tY.disHrz+(ui.tY.disWid/2));
	e=mkT(x, ui.tY.stgY, "-stg", "#ffffff", "stg", ui.tY.stgF, FL.tY.zo, "SR","middle");
	e.setAttribute("filter","url(#fil1)"); e.setAttribute("dominant-baseline","middle"); E.push(e);
	e=mkT(x, ui.tY.stgY, "-stg", "#ffffff", "stg", ui.tY.stgF, FL.tY.zo, "SR","middle");
	e.setAttribute('opacity',0.62); e.setAttribute("dominant-baseline","middle"); E.push(e);
	if(FL.subj){ 
		e=mkT(ui.tY.keX, ui.tY.stgy,
		"-stg", "#ffffff", "stg", ui.tY.stgf,FL.subj.nI+". "+FL.subj.nM.full, "PF","left");
		//e.setAttribute("alignment-baseline","hanging");
		E.push(e)}
	e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stgy,
		undefined,"#fff",undefined,ui.tY.stgf,FL.tY.nI,"PF","end");E.push(e)
	E.forEach( function(E){svgFe.appendChild(E)})}
function drTypeTableOfFaculties(){ var e=null; var E=[]; var t,b;
	for(var i=0; i<5; i++){
		for(var j=0; j<4; j++){
			if(FL.subj){
				if( 	FL.fN && FL.fN.ni ===FL.tY.fAs[ i*4+j].ni){ t="#fff"; 		b=ui.tY.areaB}
				else if(FL.cR && FL.cR.ni ===FL.tY.fAs[ i*4+j].ni){ t="#fff"; 		b=ui.tY.areaB}
				else if(FL.fAopts.includes(FL.tY.fAs[ i*4+j])){ 	t=ui.tY.base; 	b=ui.tY.areaB}
				else{ 												t=ui.tY.areaT;	b=ui.tY.area}}
			else{ 												t=ui.tY.areaT;	b=ui.tY.area}
 			e =mkL( ui.tY.tbX+i*ui.tY.coW, ui.tY.tbY+j*ui.tY.roH,
 				ui.tY.cow, ui.tY.roh, undefined, b); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.mD.LineW+1, ui.tY.tbY+j*ui.tY.roH-1/5*ui.tY.roh,//-ui.tY.aMarg,
 				undefined,t,undefined,ui.tY.roh,FL.tY.fAs[i*4+j].ni2,"PF"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tCO, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#fff",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC2, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#fff",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC3, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#ccc",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC4, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#ccc",undefined,ui.tY.tCF,".000","CH"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tCO, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#000",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC2, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#000",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC3, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#333",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC4, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#333",undefined,ui.tY.tCF,".000","CH"); E.push(e);

		}
	}
	//e= mkL(ui.tY.tbX, ui.tY.tbY, ui.tY.tbW, ui.tY.tbH, undefined, "#000"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}


function drTypeTableOfIEs(){ var e=null; var E=[]; var J;
	for(var i=0; i<4; i++){
		for(var j=0; j<2; j++){
 			e =mkL( ui.tY.tbX+i*ui.tY.coW2, ui.tY.tbY+j*ui.tY.roH2,
 				ui.tY.cow2, ui.tY.roh2, undefined, ui.tY.area); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.mD.LineW+1, ui.tY.tbY+j*ui.tY.roH2-1/5*ui.tY.roh,//-ui.tY.aMarg,
 				undefined,ui.tY.areaT,undefined,ui.tY.roh,FL.tY.iEs[i*2+(1-j)].ni,"PF"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tCO2, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY12,
 				undefined,"#fff",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC22, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY12,
 				undefined,"#fff",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC32, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY12,
 				undefined,"#ccc",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC42, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY12,
 				undefined,"#ccc",undefined,ui.tY.tCF2,".000","CH"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tCO2, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY22,
 				undefined,"#000",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC22, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY22,
 				undefined,"#000",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC32, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY22,
 				undefined,"#333",undefined,ui.tY.tCF2,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW2+ui.tY.tC42, ui.tY.tbY+j*ui.tY.roH2+ui.tY.tY22,
 				undefined,"#333",undefined,ui.tY.tCF2,".000","CH"); E.push(e);

		}
	}
	//e= mkL(ui.tY.tbX, ui.tY.tbY, ui.tY.tbW, ui.tY.tbH, undefined, "#000"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}

// wovels/consonants for male/female, upper/lower for child adult?
// include big mood plane with descriptions and nothing else

function mosaicTextColor(c){ if(c.v > 68){ return "#000000"} else{ return "#ffffff"}}
function drMoodPlane(){ var e; var E=[];
	if(FL.mD){ 
		var pL =null;
		FL.mosaicForm ? pL =FL.mD.xY : pL =FL.mD.bG;
		var w =ui.mD.plDiW/FL.vQr; var h=ui.mD.plDiH/FL.vQr;
		var X =ui.mD.plDiX; var Y =ui.mD.plDiY;
		e =mkL(ui.mD.plFrX, ui.mD.plFrY, ui.mD.plFrW, ui.mD.plFrH,"mD_plane-","#000000","mD_plane"); E.push(e);
		var mD =mkNullMatrix( FL.vQr,FL.vQr);
		for(var y =0; y <FL.vQr; y++){
			for(var x =0; x <FL.vQr; x++){
				mD[y][x] = hsvToRgb(pL[y][x].h, pL[y][x].s, pL[y][x].v);
				mD[y][x] = rgbToHex(mD[y][x].r, mD[y][x].g, mD[y][x].b);
				e=mkL( w*x+X, h*y+Y, w, h, "test", mD[y][x]);	E.push(e);
				e=mkT(w*x+X+3, h*y+Y-h/8, false, mosaicTextColor( pL[y][x]),false,h/2,"V: "+pL[y][x].V,
					"PF", false, 0.618); E.push(e);
				e=mkT(w*x+X+3, h*y+Y-(h/8)+(h/2), "test", mosaicTextColor(pL[y][x]), "test",h/2,"K: "+pL[y][x].K,
					"PF", false, 0.618); E.push(e);
				/*e=mkT(w*x+X+1, h*y+Y-5+(h/3), "test", mosaicTextColor(q[y][x]), "test",h*(2/3),FL.pE.mo.qU[y][x].Q ,"StrikeFighter");*/ E.push(e);}}}
		E.forEach( function(E){svgFe.appendChild(E)})}
function moodKey( e,prim){
	if(FL.subj){
		var pM= parseInt(e.split("-").pop()); pM=FL.PrimalMoods.seed[pM];
		var b = FL.subj.pMs.find(o => o.ni===pM); b ? pM =b : pM =mkPm( pM,AB,FL.subj.pMs);
		if(prim){ 	//var gnd= mkBeing(FL.pE.pGn.ni);
				//FL.subj.pMd =combineMoodAndBeing(pM, bE);
				//function getMood( sex,gnd,pM,from)
				//åöä
				//if( o.mDs)
				FL.subj.pMd =copyMood( FL.subj.sex, FL.subj.pGn, FL.subj.pPm, AB.mDs, AB);
				FL.mD = FL.subj.pMd;  	FL.pMd =FL.subj.pMd; 		
				FL.pGn= FL.subj.pGn;		FL.gnd =FL.subj.pGn; 		
				FL.pPm= FL.subj.pMd.pM;	FL.pM  =FL.subj.pMd.pM}
		else { 	//var bE= mkBeing(FL.subj.sGn.ni);
				//FL.subj.sMd=combineMoodAndBeing( pM, bE);
				FL.subj.sMd =copyMood( FL.subj.sex, FL.subj.sGn, FL.subj.sPm, AB.mDs, AB);
				FL.mD = FL.subj.sMd; 		FL.sMd= FL.subj.sMd;	
				FL.sGn= FL.subj.sGn; 		FL.gnd= FL.subj.sGn;
				FL.sPm= FL.subj.sMd.pM; 	FL.pM = FL.subj.sMd.pM}
		draw();}}
function sexKey( e){
	var sex =parseInt(e.split("-").pop()); sex =FL.Sexes.seed[sex];
	if(FL.subj){
		sex =getObjByNi( sex,FL.subj.sXs);
		if( sex.mas !== FL.subj.sex.mas){ var bu=null;
			bu 			=FL.subj.sMd;
			FL.subj.sMd =FL.subj.pMd;
			FL.subj.pMd =bu;
			FL.mD  		=FL.subj.pMd;
			FL.pMd 		=FL.subj.pMd;
			FL.sMd 		=FL.subj.sMd;

			bu 			=FL.subj.sGn;
			FL.sex 		=FL.subj.sex;
			FL.gnd 		=FL.subj.pGn;
			FL.pGn 		=FL.subj.pGn;
			FL.sGn 		=FL.subj.sGn;

			bu 		 	=FL.subj.sMd.pM;
			FL.sPm 		=FL.subj.sMd.pM;
			FL.pM 		=FL.subj.pMd.pM;
			FL.pPm 		=FL.subj.pMd.pM;
			}
		FL.subj.sex =sex;
		draw()}
	else{
		sex =getObjByNi( sex,AB.sXs);
		if(FL.sex===sex){FL.sex =null}
		else{ 			FL.sex =sex }
		draw()}}
function genderKey( e){
	var gnd =parseInt(e.split("-").pop()); gnd =FL.Genders.seed[gnd];
	if(FL.subj){
		gnd =getObjByNi( gnd,FL.subj.gNs);
		if(gnd.mas === FL.subj.sex.mas){
			//var pM= mkPrimalMood(FL.pE.pMd.pM.ni);
			//FL.subj.pMd =combineMoodAndBeing(pM, bE);
			FL.mD =FL.subj.pMd; 		FL.pMd =FL.subj.pMd;
			FL.gnd=FL.subj.pGn; 		FL.pGn =FL.subj.pGn;
			FL.pM =FL.subj.pMd.pM;	FL.pPm =FL.subj.pMd.pM}
		else{
			//var pM= mkPrimalMood(FL.pE.sMd.pM.ni);
			//FL.subj.sMd=combineMoodAndBeing(pM, bE);
			FL.mD = FL.subj.sMd; 		FL.sMd = FL.subj.sMd;
			FL.gnd= FL.subj.sGn; 		FL.sGn = FL.subj.sGn;
			FL.pM = FL.subj.sPm;		FL.sPm = FL.subj.sPm}	
		draw(); }
	else if( FL.bE===null){ FL.bE=bE;} else if(FL.bE!==bE){FL.bE=bE} else { FL.bE=null}}
function drMoodKeys(){ var e; var E=[]; var keyC, keyS, symC; var p;
	for(let n=0; n<AB.sXsL; n++){
		if(( FL.sex ===null)||( AB.sXs[n].ni !== FL.sex.ni)){
			keyC =ui.mD.key2; keyS =ui.mD.stroke2; keyF =ui.mD.selTxt}
		//else if(AB.sXs[n].ni === FL.sBe.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(AB.sXs[n].ni ===FL.sex.ni) 	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.keRoX+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sexRY, ui.mD.keFaW, ui.mD.keFaH,
			"mD_sexKey-"+n,keyC,"mD_sexKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sexKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sexRY-ui.mD.keFnY,//+(ui.mD.keFaH/2),
			"mD_sexKeyTxt",keyF,"mD_sexKeyTxt-",ui.mD.keFnS,
			AB.sXs[n].nI+"( )","TR","middle",undefined,"middle"); E.push(e); }

	for(let n=0; n<AB.gNsL; n++){
		if((FL.gnd===null)||((AB.gNs[n].ni !== FL.pGn.ni)&&(AB.gNs[n].ni !== FL.sGn.ni)))
												{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; keyF=ui.mD.selTxt; }
		else if(AB.gNs[n].ni ===FL.sGn.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(AB.gNs[n].ni ===FL.pGn.ni)	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.keRoX+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.gndRY, ui.mD.keFaW, ui.mD.keFaH,
			"mD_gndKey-"+n,keyC,"mD_gndKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : genderKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.gndRY-ui.mD.keFnY,
			"mD_gndKeyTxt",keyF,"mD_gndKeyTxt-",ui.mD.keFnS,
			AB.gNs[n].nI,"TR","middle",undefined,"middle");E.push(e);}
// ååå 
	for(let n=0; n <AB.pMsL; n++){
		//var m=combineMoodAndBeing(AB.pMs[n], FL.pE.pGn );
		var m =getMood( FL.sex, FL.gnd, FL.obj, FL.pM, AB.mDs);
		if((FL.pM===null)||(AB.pMs[n].ni !== FL.pPm.ni)){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt }
		else if(FL.pM.ni ===AB.pMs[n].ni && FL.gnd.ni === FL.pGn.ni)
														{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(FL.pE.sMo.pM.ni === AB.pMs[n].ni)*/		{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	symC=ui.mD.selTxt}
		if(m.sSym){ symC = "#ffff00"; } else if(m.cSym){ symC = "#ff00ff"}
		//if(FL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.keRoX+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.pPmRY, ui.mD.keFaW,ui.mD.keFaH,
			"mD_pMdKey-"+n,keyC,"mD_pMdKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,true);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.pPmRY-ui.mD.keFnY,
			"mD_pMdKeyTxt",symC,"mD_pMdKeyTxt-",ui.mD.keFnS,
			AB.pMs[n].niH+FL.pGn.nI+AB.pMs[n].niT,"TR","middle",undefined,"middle"); E.push(e);}

	for(let n=0; n<AB.pMsL; n++){
		//var m=combineMoodAndBeing(AB.pMs[n], FL.pE.sGn );
		if((FL.pM===null)||(AB.pMs[n].ni !== FL.sPm.ni))
													{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
		else if(FL.pM.ni ===AB.pMs[n].ni && FL.gnd.ni === FL.sGn.ni)	
													{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(FL.pE.sMo.pM.ni === AB.pMs[n].ni)*/	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt;  symC=ui.mD.selTxt;}
		if(m.symm){ symC = "#ffff00"; }
		//if(FL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.keRoX+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sPmRY, ui.mD.keFaW,ui.mD.keFaH,
			"mD_sMdKey-"+n,keyC,"mD_sMdKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,false);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sPmRY-ui.mD.keFnY,
			"mD_mKeyTxt",symC,"mD_sMdKeyTxt-",ui.mD.keFnS,
			AB.pMs[n].niH+FL.sGn.nI+AB.pMs[n].niT,"TR","middle",undefined,"middle"); E.push(e);}

	if(!FL.mD.obj){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
	else { keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2;}
	e=mkL(ui.mD.keRoX, ui.mD.pPmRY/*-Math.floor(ui.tY.aMarg)*/, ui.mD.keFaW-Math.floor(ui.tY.bMarg),ui.mD.keFaH,
		"mD_objKey",keyC,"mD_objKeys",keyS,ui.mD.linew); E.push(e);
	e=mkT(ui.mD.keRoX+((ui.mD.keFaW-Math.floor(ui.tY.bMarg))/2), ui.mD.pPmRY-ui.mD.keFnY/*-Math.floor(ui.tY.aMarg)*/,
		"mD_objKeyTxt",symC,"mD_objKeyTxt-",ui.mD.keFnS,
		"¬"+FL.gnd.nI+"'","TR","middle",undefined,"middle"); E.push(e);
	if( FL.mD.obj){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
	else { keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2;}
	e=mkL(ui.mD.keRoX, ui.mD.sPmRY/*-Math.floor(ui.tY.aMarg)*/, ui.mD.keFaW-Math.floor(ui.tY.bMarg),ui.mD.keFaH,
		"mD_objKey",keyC,"mD_objKeys",keyS,ui.mD.linew); E.push(e);
	e=mkT(ui.mD.keRoX+((ui.mD.keFaW-Math.floor(ui.tY.bMarg))/2), ui.mD.sPmRY-ui.mD.keFnY/*-Math.floor(ui.tY.aMarg)*/,
		"mD_objKeyTxt",symC,"mD_objKeyTxt-",ui.mD.keFnS,
		FL.gnd.nI+"'","TR","middle",undefined,"middle"); E.push(e);

	E.forEach( function(E){svgFe.appendChild(E)})}

function drMoodDisp(){ 

// CV CK TV TK
//IE are classical binary
//FT are classical scalar
//SN are romantic non-binary non-scalar
//1. CR 2. IE 3. FT 4. SN

/*
ui.mD.tbFrW
ui.mD.tbFrX
ui.mD.tbFrY
ui.mD.tbFrH
*///function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op) // ööö
//function mkI(x,y,X,Y,id,co,st,op,d)

/*if we have a notation in which we always begin with a positive variable if possible and never use brackets
we will be able to express value and karma quantification arithmetic as an array of strings like ["X","-Y"]
and if we encounter something like ["Y","-r","+r"] it will be easy to algorithmically simplify that to ["Y"]*/

// STEREOTYPICAL MOOD 	GENDER ALIGNED 			AGE ALIGNED
// COMING TO AGE		GENDER ALIGNED 			SEX KID GENDER ADULT 											BAD V -> GOOD V w/ OFFSET
// INFANTILIZABION 		GENDER ALIGNED 			SEX ADULT GENDER KID 	GOOD V -> BAD V w/ OFFSET
// FEMALE-TO-MALE QUEER SEX FEMALE GENDER MALE 	AGE ALIGNED 			INTRO GOOD V -> INTRO BAD V w/ OFFSET
// MALE-TO-FEMALE QUEER SEX MALE GENDER FEMALE 	AGE ALIGNED 			EXTRO GOOD V -> EXTRO BAD V w/ OFFSET
// INVERSE MORALITY 	GENDER MISMABCH  		AGE MISMABCH 			GOOD V -> BAD V w/ OFFSET 				BAD V -> GOOD V w/ OFFSET

// 3 screens:
// Value/Karma
// LifeP/ProcessP
// Sex/Gender
	
	var e; var E=[];
	//frame
	e=mkL(ui.mD.tbFrX,ui.mD.tbFrY,ui.mD.tbFrW,ui.mD.tbFrH,"tY",ui.mD.key,"tY"); E.push(e);
	e=mkL(ui.mD.tbDiX,ui.mD.tbDiY,ui.mD.tbDiW,ui.mD.tbDiH,"tY",ui.mD.key,"tY",ui.mD.base,ui.mD.LineW); E.push(e); 
	//grid
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*2, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*2,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*3, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*3,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*4, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*4,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX+ui.mD.tbCeW,ui.mD.tbDiY, ui.mD.tbDiX+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbDiH,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	//left label containers
	e=mkL(ui.mD.tbDiX, 				ui.mD.tbDiY, ui.mD.tbCeT+ui.mD.LineW,ui.mD.tbDiH, undefined,ui.mD.base); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeW, 	ui.mD.tbDiY, ui.mD.tbCeT+ui.mD.LineW,ui.mD.tbDiH, undefined,ui.mD.base); E.push(e);
	//top label containers
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.linew/2,  			ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH+ui.mD.linew/2, 	ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*2+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*3+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*4+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	//left labels
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"I:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"U:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"I:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"U:","PF","middle",undefined,"middle");E.push(e);
	//cell frames
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT, ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.selKey,undefined,ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.bMarg); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW, 	ui.mD.tbDiY+ui.mD.tbCeT, ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.selKey,undefined,ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.bMarg); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	//variables
	/*var r1="";
	var lAriV="N/A";var rAriV="N/A";var lAriK="N/A";var rAriK="N/A";var lCmp="N/A"; var rCmp="N/A";var lMF="N/A";var rMF="N/A";
	var mFDC;
	var lHead="GOOD";
	var rHead="BAD";
	var moF="Modal Form:"; 			if(FL.mosaicForm){ 	moF 	="Mosaic Form:"} 		 
	var cmp="Mood Complexity"; 		if(FL.mD.stereo){ 	cmp 	="Stereotypical Mood"; 	cmpL="NORMAL"; cmpR="NORMAL"}
								else if(FL.mD.invMor){ 	cmp 	="Inverse Morality"; 	cmpL="V - r"}
								else if(FL.mD.pureBad){ cmp 	="Pure Bad"}*/
	var mFDC, lHead, rHead, moF, cmplx, lMF, rMF, lAriV, rAriV, lAriK, rAriK;
	var moF="Modal Form:"; 			if(FL.mosaicForm){ 	moF 	="Mosaic Form:"}
	if( FL.mD.sSym){ mFDC="#ffff00"} else if( FL.mD.cSym){ MFDC="#ff00ff"} else{ mFDC="#00ff00"}
	if(!FL.mosaicForm){ lHead="Bad"; rHead="Good"; lMF=FL.mD.bMF; rMF=FL.mD.gMF;
		lAriV=FL.mD.bAriV; rAriV=FL.mD.gAriV; lAriK=FL.mD.bAriK; rAriK=FL.mD.gAriK;}
	else{ if( FL.gnd.mas){ lHead="Bad"; rHead="Good"; lMF=FL.mD.xMF; rMF=FL.mD.yMF;
		lAriV=FL.mD.xAriV; rAriV=FL.mD.yAriV; lAriK=FL.mD.xAriK, rAriK=FL.mD.yAriK;}
	else{ lHead="Good"; rHead="Bad"; lMF=FL.mD.xMF; rMF=FL.mD.yMF;
		lAriV=FL.mD.xAriV; rAriV=FL.mD.yAriV; lAriK=FL.mD.xAriK, rAriK=FL.mD.yAriK;}}
	//row labels
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW, 				undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,moF,"PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Value:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*2, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Karma:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*3, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Life Position:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*4, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Process Position:","PF","middle",undefined); E.push(e);
	//cell content
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW,
		undefined, mFDC, undefined, 	ui.mD.tbCeB*0.8, lMF, "TR", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW, 	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW,
		undefined, mFDC, undefined, 	ui.mD.tbCeB*0.8, rMF, "TR", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, lAriV, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, rAriV, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH*2,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, lAriK, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH*2,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, rAriK, "PF", "middle"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); }

//can subject exist without tYl? for example when sleeping? or does this default to iNtuition?

function drMoodStage(){ 
if(FL.subj){ var E=[]; var e=null; var x=Math.round(ui.tY.disHrz+(ui.tY.disWid/2)); var mFS;
	if(FL.mD.symm){ mFS="#ffff00"} else{ mFS="#88ff88"}
	var mDisp = mkSubjMoodCode(FL.subj);
	if(FL.subj.pMd.ni === FL.mD.ni){
		e=mkT(x, ui.tY.stgY+ui.tY.cE/6, // not right
			"-stg", mFS, "stg", (ui.tY.cE)/4, FL.mD.nI, "SF","middle",undefined,"middle");
		e.setAttribute("filter","url(#fil1)"); E.push(e);}
	e=mkT(x, ui.tY.stgY+ui.tY.cE/6,
		"-stg", mFS, "stg", (ui.tY.cE)/4, FL.mD.nI, "SF","middle",undefined,"middle");
	e.setAttribute('opacity',0.62);E.push(e);
		e=mkT(ui.tY.keX, ui.tY.stgy,
		"-stg", mFS, "stg", ui.tY.cE/6,FL.subj.nI+". "+FL.subj.nM.full, "PF","start");E.push(e);
	e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stgy,
		undefined,mFS,undefined,ui.tY.cE/6, mDisp, "TR","end"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); }}
/*
function drTypeTable(){ var e=null; var E=[]; var t,b;
	for(var i=0; i<5; i++){
		for(var j=0; j<4; j++){
			if( FL.tYl && FL.tYl.ni2 ===FL.tY.fAs[ i*4+j].ni2){ t="#fff"; 		b=ui.tY.areaB}
			else if(FL.subj.opts.includes(FL.tY.fAs[ i*4+j])){ 	t=ui.tY.base; 	b=ui.tY.areaB}
			else{ 												t=ui.tY.areaT;	b=ui.tY.area;}
 			e =mkL( ui.tY.tbX+i*(ui.tY.coW+ui.mD.linew), ui.tY.tbY+j*(ui.tY.roH+ui.mD.linew),
 				ui.tY.coW, ui.tY.roH, undefined, b); E.push(e);
 			e =mkT( ui.tY.tbX+i*(ui.tY.coW+ui.mD.linew)+ui.mD.LineW+1, ui.tY.tbY+j*(ui.tY.roH+ui.mD.linew)-1/5*ui.tY.roH,//-ui.tY.aMarg,
 				undefined,t,undefined,ui.tY.roH,FL.tY.fAs[i*4+j].ni2,"PF"); E.push(e);
		}
	}
	//e= mkL(ui.tY.tbX, ui.tY.tbY, ui.tY.tbW, ui.tY.tbH, undefined, "#000"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}
*/
function drMoodTable(){ var e=null; var E=[];
	/*		if((FL.pM===null)||(AB.pMs[n].ni !== FL.sPm.ni))
													{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
		else if(FL.pM.ni ===AB.pMs[n].ni && FL.gnd.ni === FL.sGn.ni)	
													{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else 	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt;  symC=ui.mD.selTxt;}
	*/
	for(var i=0; i<13; i++){
		for(var j=0; j<5; j++){
			e =mkL( ui.tY.tbX+i*(ui.mD.coW+ui.mD.linew), ui.mD.tbY+j*(ui.mD.roH+ui.mD.linew),
				ui.mD.coW, ui.mD.roH, undefined, ui.mD.key2); E.push(e);
		}
	}
	//e= mkL(ui.tY.tbX, ui.mD.tbY, ui.tY.tbW, ui.mD.tbH, undefined, ui.mD.key2); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}
function drawMood(){var b =null;
	drSidebar();
	drTopBar();
	drList();
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.mD.base,"tY"); svgFe.appendChild( b);
	drMoodPlane();
	if( FL.sKMoodPlane!=="Legend"){
	 	drMoodKeys();
		drMoodDisp();
		if( FL.sKMoodBottom!=="Stage"){
			drMoodTable();}
		else{
			drMoodStage();}}
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
	//document.body.appendChild( divSc);
}


function mosaicKeyMouseOver(mX,mY) 	{ previewMove( mX, mY)}
function mosaicKeyMouseDown(mX,mY) 	{ FL.moved =attemptMove( mX, mY)}
function mosaicKeyMouseUp(mX,mY) 	{ if(FL.moved){ processSubTurn( FL.sim, mX, mY); FL.moved=false}}

function drMosaicDisp(){
	var pC, tC;	var r =2*FL.vQr; var pRow=2; var pCol=1;
	if(FL.sim.subjs.length > 2){ pRow=4; pCol=2}
	if(FL.sim.subjs.length > 8){ pRow=6; pCol=3}
	var w= Math.floor(ui.mP.disWid/r); // tile width
	var h= Math.floor((ui.winHei-ui.bP.tipHei-ui.tB.disHei)/r); // tile height
	var X= Math.round((ui.mP.disWid-(r*w))/2)+ui.mP.liW+ui.sQ.disWid; // screen offset x
	var Y= Math.round(((ui.winHei-ui.bP.tipHei+ui.tB.disHei)-(r*h))/2); // screen offset y
	var pW=Math.floor((w-pRow)/pRow); // person width
	var pH=Math.floor((h-pCol)/pCol); // person height
	var fOff=2; if(pH < 12){ fOff=0}
	var c; var e; var E=[]; var E2=[];
	for(var y=0; y <r; y++){ for(var x=0; x <r; x++){
		c =FL.keySubj.mP[y][x];
		c = hsvToRgb(c.h, c.s, c.v);
		c = rgbToHex(c.r, c.g, c.b);
		e=mkL(w*x+X, h*y+Y, w, h, "mP_"+x+"-"+y, c, "mP", "#666", 1); E.push(e);
		if(FL.keySubj.sMp[y][x]){
			var subjs =chunkArray(FL.keySubj.sMp[y][x],pRow);
			for(var i=0; i<subjs.length;i++){
				for(var j=0; j<subjs[i].length;j++){
					pC=subjs[i][j].mP[y][x];
					tC=mosaicTextColor(pC);
					pC=hsvToRgb( pC.h, pC.s, pC.v);
					pC=rgbToHex( pC.r, pC.g, pC.b);
					e=mkL(w*x+X+(j*(pW))+j+1, h*y+Y+(i*(pH))+1, pW, pH,
						undefined,pC, "mP_P",tC,undefined,false,3,3);
					E2.push(e);
					e=mkT(w*x+X+(j*(pW))+(pW/2)+j+1, h*y+Y+(i*(pH))-fOff-1,
						undefined,tC,"mP_PT",pH,subjs[i][j].nI,"PF","middle");
					E2.push(e);	}}}}}
	E=E.concat(E2);
	E.forEach( function(E){svgFe.appendChild(E)});
	bindMosaic( '.mP', function(ev,e) {
		var mX=e.id.split("_").pop(); var mY=parseInt(mX.split("-").pop()); mX=parseInt(mX.split("-")[0]);
		switch(ev){ case "mouseover" 	: mosaicKeyMouseOver( mX,mY); 				break;
					case "mousedown" 	: mosaicKeyMouseDown( mX,mY); 				break;
					case "mouseup" 		: mosaicKeyMouseUp( mX,mY); 				break;
					case "mouseleave" 	: mosaicKeyMouseUp( mX,mY); 				break;}})}
function drawMosaic(){
	drSidebar();
	drTopBar();
	drList();
	drSequencer();
	drMosaicDisp();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
}

//rom cla tool sel
function drawScalar(){ var e=null; var E=[];
	drSidebar();
	drTopBar();
	drList();
	drSequencer();
	e =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.sC.bG,"tY"); E.push(e);
	e =mkL(ui.sC.diX,ui.sC.diY,ui.sC.diW,ui.sC.hDH,"tY",ui.sC.hL,"tY"); E.push(e);
	for(var i=0; i<AB.fQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.cQW, ui.sC.diY, ui.sC.cQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.cQW+ui.tY.bMarg, ui.sC.diY+ui.sC.quH,
			ui.sC.cQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.fX); E.push(e);
	}
	for(var i=0; i<AB.mQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.cQW, ui.sC.mQY, ui.sC.cQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.cQW+ui.tY.bMarg, ui.sC.mQY+ui.sC.quH,
			ui.sC.cQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.fX); E.push(e);
	}
	e =mkL(ui.sC.diX,ui.sC.hDB,ui.sC.diW,ui.sC.hDH,"tY",ui.sC.fX,"tY"); E.push(e);
	for(var i=0; i<AB.aQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.rQW, ui.sC.hDB, ui.sC.rQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.rQW+ui.tY.bMarg, ui.sC.hDB+ui.sC.quH,
			ui.sC.rQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.hL); E.push(e);
	}
	for(var i=0; i<AB.cQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.rQW, ui.sC.cQY, ui.sC.rQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.rQW+ui.tY.bMarg, ui.sC.cQY+ui.sC.quH,
			ui.sC.rQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.hL); E.push(e);
	}
	E.forEach( function(e){ svgFe.appendChild(e)})
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}

function drawRels(){ var b=null;
	drSidebar();
	drTopBar();
	drList();
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}

function drawMarker(){ var b=null;
	drSidebar();
	drTopBar();
	drList();
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}


function resizeWindow(){ var scr; var oldHei =ui.winHei;
	if(FL.fe==="quiz"){ scr =divQz.scrollTop} else{ scr =window.pageYOffset}
	predraw();draw();
	scr =Math.floor( scr * ui.winHei /oldHei);
	if(FL.fe==="quiz"){ scr >ui.qZ.winHei ? divQz.scrollTop =ui.qZ.winHei : divQz.scrollTop =scr}
	else{ 	if( scr >ui.feHei){ document.documentElement.scrollTop =document.body.scrollTop =ui.feHei}
			else{ 				document.documentElement.scrollTop =document.body.scrollTop =ui.scr}}}
window.addEventListener("resize", resizeWindow, true);

//FL.mouseDown =0;

//window.onmousedown 	=function() { ++FL.mouseDown}
//window.onmouseup 	=function() { --FL.mouseDown}
//document.body.onmousedown 	=function() { ++FL.mouseDown}
//document.body.onmouseup 	=function() { --FL.mouseDown}



window.oncontextmenu = function ()
{
    console.log("JOU");
    return false;     // cancel default menu
}



function coinToss() { return ( Math.floor( Math.random() * 2) === 0)}
function isEven(n){ n =Number(n); return n === 0 || !!(n && !(n%2))}
function isOdd(n) { return isEven(Number(n) + 1)}
function union (x, y) { var obj = {}; var res = [];
	for (var i = x.length-1; i >= 0; -- i) obj[x[i]] = x[i];
	for (var i = y.length-1; i >= 0; -- i) obj[y[i]] = y[i];
	for (var k in obj) { if (obj.hasOwnProperty(k))/*<-optional*/res.push(obj[k])}return res}
function shuffle(a) { var j, x, i;
    for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1));
        x = a[i]; 	a[i] = a[j]; 	a[j] = x}return a}
function chunkArray(arr, chunkL){ var index=0; var arrL=arr.length; var ret=[];    
	for (index =0; index <arrL; index +=chunkL){
		chunk =arr.slice(index, index+chunkL); ret.push(chunk)}return ret}
function idOf(i) {
    return (i >= 52 ? idOf((i / 52 >> 0) - 1) : '') +  'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'[i % 52 >> 0];
}
function mR(n){ return Math.round(n)}
function mF(n){ return Math.floor(n)}
function mC(n){ return Math.ceil(n)}





function mkAbsSubj(ni,sim,reso,mas,Ac,ppl,tY,fN,cR,pM,stereo,bAge,gAge,bQueer,gQueer,loc,dir,obj){}
function Subj( 	   ni,sim,reso,mas,Ac,ppl,tY,fN,cR,pM,stereo,bAge,gAge,bQueer,gQueer,loc,dir,obj){
	mkSubj2(  this,ni,sim,reso,mas,Ac,ppl,tY,fN,cR,pM,stereo,bAge,gAge,bQueer,gQueer,loc,dir,obj)}
function mkSubj2(s,ni,sim,reso,mas,Ac,ppl,tY,fN,cR,pM,stereo,bAge,gAge,bQueer,gQueer,loc,dir,obj){
	s.ni=ni; s.ab={}; s.re={};
	var b=null;s.sex=null;s.gnd=null;s.nM =null;s.weird=false;s.away=false;

	s.pMd=null;s.pGn=null;s.pPm=null;s.sMd=null;s.sGn=null;s.sPm=null;
	s.mMd=null;s.mPm=null;s.fMd=null;s.fPm=null;s.mGn=null;s.fGn=null;

	s.mSb=null;s.fSb=null;s.mOb=null;s.fOb=null;

	s.fN=null;s.cR=null;
	s.ntn=null;s.xtn=null;
	s.bGl=null;s.xYl=null;s.bGd=null;s.xYd=null;s.mPl=null;
	s.tYopts=null;

	transSignalByTy( s, tY);

	
	s.tYs =[]; s.nMs=[]; s.mDs =[]; s.pMs =[]; s.gNs =[]; s.sXs =[];
	s.reso =reso;	s.mas =mas; 	s.Ac =Ac; 			s.ppl =ppl; 			s.obj =obj;
	s.stereo=stereo;s.gQueer=gQueer;s.gAge=gAge; 	s.bQueer=bQueer;s.bAge=bAge; 	if( bQueer||gQueer){ s.queer=true}
	s.loc=loc; s.dir=dir;

	if 		(  s.mas &&!s.Ac){ s.height=175; s.radius=25}
	else if (  s.mas && s.Ac){ s.height=130; s.radius=15}
	else if ( !s.mas &&!s.Ac){ s.height=165; s.radius=25}
	else if ( !s.mas && s.Ac){ s.height=130; s.radius=15}

	//mkQualities(s.ab, sim.ab);
	//mkForms( 	s.ab, s.ab, sim.ab, s);

	//s.tY =mkType( 	tY, sim.ab, sim, s); 	
	applyType( tY, s);
	s.fAs =s.tY.fAs;
	s.fNs =s.tY.fNs;
	s.cRs =s.tY.cRs;
	s.fN =fN;
	s.cR =cR;

	s.pMd =AB.mDs.filter( mD => mD.sex.mas ===s.mas)
						.filter( mD => mD.sex.Ac ===s.Ac)
							.filter( mD => mD.obj ===s.obj);
	s.pMd =rmMoods( s.pMd, pM, ppl, bAge, gAge, bQueer, gQueer); 
	console.log(s.pMd);
	s.pMd =mkMood( 	s.pMd[Math.floor(Math.random()*s.pMd.length)].ni, sim, s.mDs); 			s.mD =s.pMd;

	if( !s.pMd.sex.mas) { 	if(!s.pMd.obj){ s.mSb =s.mD;
											s.mOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mOb =mkMood( s.mOb, sim, s.mDs)}
							else{  			s.mOb =s.mD;
											s.mSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mSb =mkMood( s.mSb, sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fOb =mkMood( s.fOb, sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fSb =mkMood( s.fSb, sim, s.mDs)}}

	s.nM =mkName( 	s.pMd.gnd.mas, s.pMd.gnd.Ac, s.fin, s.weird, undefined, s);

	s.sex =mkSex( 	s.pMd.sex.ni, sim, s);

	s.pGn =mkGender(s.pMd.gnd.ni, sim, s); s.gnd =s.pGn;
	s.pPm =mkPm( 	s.pMd.pM.ni,  sim, s); s.pM =s.pPm;
	if( !s.pMd.sex.mas){ s.mMd=s.pMd; s.mPm=s.pPm} else { s.fMd=s.pMd; s.fPm=s.pPm}

	s.sMd =AB.mDs.filter(mD=>mD.sex.mas!==s.mas);
	s.sMd =rmMoods( s.sMd, pM, ppl, bAge, gAge, bQueer, gQueer);
	s.sMd =mkMood( 	s.sMd[Math.floor(Math.random()*s.sMd.length)].ni, sim, s.mDs);

	if( !s.sMd.sex.mas) { 	if(!s.sMd.obj){ s.mSb =s.sMd;
											s.mOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mOb =mkMood( s.mOb, sim, s.mDs)}
							else{  			s.mOb =s.sMd;
											s.mSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mSb =mkMood( s.mSb, sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fOb =mkMood( s.fOb, sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fSb =mkMood( s.fSb, sim, s.mDs)}}

	s.sGn =mkGender(s.sMd.gnd.ni, sim, s);
	s.sPm=mkPm( 	s.sMd.pM.ni,  sim, s);
	if( s.sMd.gnd.mas){ s.mMd=s.sMd; s.mPm=s.sPm} else{ s.fMd=s.sMd; s.fPm=s.sPm}

	if( s.pGn.mas){ s.mGn=s.pGn; s.fGn=s.sGn} else{ s.mGn=s.sGn; s.fGn=s.pGn}

	s.mos =mkMos( s);
	
//mkSq( ni,iEs,parent)
	RE.subjs.push( s); RE.subjsL++;
}
function rmMoods( a, pM, ppl, bAge, gAge, bQueer, gQueer){ var b =[]; var B =false;
	for( var i =0; i <a.length; i++){ B =pM.includes( a[i].pM.ni); if(B){ b.push( a[i])}}
	if( ppl){ 	b =b.filter( o => !o.bQueer && !o.gQueer)}return b}
function mkInputs( s){
	o.PHEN_4_1 = mkSq("PHEN_4_1", AB, )//
}
//mkSignal( FL.subj, FL.subj.tYl, FL.subj.tYd, FL.subj.xYl, FL.subj.xYd, FL.subj.gnd);

function transSignalByTy(){}


function mkSignal( s,fN,cR,loc,dir,gnd){
	mkTySignal( s, fN, cR);
	mkMcSignal( s, loc, dir, gnd)}
/*function clearSignal( t){ t.fN =null; t.cR =null; t.loc =null; t.dir =null;
	FL.fNopts=[]; FL.fAopts=[]; FL.cRopts=[]; FL.fN=null; FL.cR=null}*/ //rikki

function mkTySignal( s,fN,cR){
	s.fN =s.fNs.find( f =>f.ni===fN);
	s.cR =s.cRs.find( c =>c.ni===cR)}
	//if(!s.xtR){ s.xtR=initXtR( s); s.xtC=initXtC( s); s.xtn=initXtn( s); }

function mkMcSignal( s,loc,dir,gnd){ s.loc=loc; s.dir=dir;
	s.loc.X =loc.x; s.loc.Y =loc.y; s.dir.X =dir.x; s.dir.Y =dir.y;
	if( s.gnd.mas){ s.loc.y = loc.y +(s.reso*3)+1; 	s.dir.y = dir.y +(s.reso*3)+1;
		if( s.obj){ s.loc.x = loc.x +(s.reso*3)+1; 	s.dir.x = dir.x +(s.reso*3)+1}
		else{ 		s.loc.x = loc.x +s.reso; 		s.dir.x = dir.x +s.reso}}
	else{ 			s.loc.y = loc.y +s.reso; 		s.dir.y = dir.y +s.reso;
		if( s.obj){ s.loc.x = loc.x +(s.reso*3)+1; 	s.dir.x = dir.x +(s.reso*3)+1}
		else{ 		s.loc.x = loc.x +s.reso; 		s.dir.x = dir.x +s.reso}}
	while( s.loc.x >((s.reso*4)+2)){ s.loc.x -=((s.reso*4)+2)}while( s.loc.x <0){ s.loc.x +=((s.reso*4)+2)}
	while( s.loc.y >((s.reso*4)+2)){ s.loc.y -=((s.reso*4)+2)}while( s.loc.y <0){ s.loc.y +=((s.reso*4)+2)}}
function mkOptions(s){
	mkTyOptions(s);
}
function mkTyOptions(s){ s.fAopts =[]; mkFnOptions(s); mkCrOptions(s)}
function mkFnOptions(s){ s.fNopts =[]; console.log(s);
	function getOpts( x,y,z,d){ switch(d){
		case "x" : 	if(s.tY.relSpace[z][y][0] !== s.fN){ s.fNopts.push(s.tY.relSpace[z][y][0]); s.fAopts.push(s.tY.relSpace[z][y][0])}
					if(s.tY.relSpace[z][y][2] !== s.fN){ s.fNopts.push(s.tY.relSpace[z][y][2]); s.fAopts.push(s.tY.relSpace[z][y][2])}break;
		case "y" : 	if(s.tY.relSpace[z][0][x] !== s.fN){ s.fNopts.push(s.tY.relSpace[z][0][x]); s.fAopts.push(s.tY.relSpace[z][0][x])}
					if(s.tY.relSpace[z][2][x] !== s.fN){ s.fNopts.push(s.tY.relSpace[z][2][x]); s.fAopts.push(s.tY.relSpace[z][2][x])}break;
		case "z" : 	if(s.tY.relSpace[0][y][x] !== s.fN){ s.fNopts.push(s.tY.relSpace[0][y][x]); s.fAopts.push(s.tY.relSpace[0][y][x]);}
					if(s.tY.relSpace[2][y][x] !== s.fN){ s.fNopts.push(s.tY.relSpace[2][y][x]); s.fAopts.push(s.tY.relSpace[2][y][x]);}}}
	getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "x"); getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "y"); getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "z")}
function mkCrOptions(s){ s.cRopts =[];
	function getOpts( x,y,z,d){ switch(d){
		case "x" : 	s.cRopts.push(s.tY.relSpace[z][y][1]); s.fAopts.push(s.tY.relSpace[z][y][1]); break;
		case "y" : 	s.cRopts.push(s.tY.relSpace[z][1][x]); s.fAopts.push(s.tY.relSpace[z][1][x]); break;
		case "z" : 	s.cRopts.push(s.tY.relSpace[1][y][x]); s.fAopts.push(s.tY.relSpace[1][y][x]); }}
	getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "x"); getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "y"); getOpts( s.fN.aX, s.fN.aY, s.fN.aZ, "z")}



function mkMoodNi( sex,gnd,obj,pM){ var mD;
	obj ? mD ="obj" : mD ="sbj";
	mD =sex.ni+"_"+gnd.ni+"_"+mD+"_";
	pM.head ? mD+="p_" : mD+="m_";
	for(let n=0; n < pM.tail.length; n++){
		switch(pM.tail[n]){ case "+" : mD = mD + "p"; break;
							case "-" : mD = mD + "m"; break;
							case "x" : mD = mD + "b"; break}}
	return mD}
function getMood( sex,gnd,obj,pM,from){ 
	var mD =mkMoodNi( sex,gnd,obj,pM);
	mD =getObjByNi( mD,from); return mD}

/*function getMoodOld(pm,be){ var mood ="_";
	if(pm.head){ mood = "n"+mood }
	mood = mood + be.ni + "_";
	for(let n=0; n < pm.tail.length; n++){
		switch(pm.tail[n]){ case "+" : mood = mood + "p"; break;
							case "-" : mood = mood + "n"; break;
							case "x" : mood = mood + "b"; break;}}
	var mo = mkMood(mood, AB); return mo}*/

function interleaveDomains(R,lM,rM) { var r = (2*R)+1; var X = 2*r; var Y = r; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<r) { m[y][x] = lM[y][x] }
													 else 	 { m[y][x] = rM[y][x-r] }}} return m }
function mkMos( subj){ 
	var uL =null, uR =null, dR =null, dL =null, u =null, d =null, mos=null;
	uL =subj.mOb.xY;
	uR =subj.mSb.xY;
	dR =subj.fSb.xY;
	dL =subj.fOb.xY;
	u =interleaveDomains( FL.sQr, uL, uR);
	d =interleaveDomains( FL.sQr, dL, dR);
	mos=u.concat( d); return mos
	/*if 		(!projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, false)}
	else if (!projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, true )}
	else if ( projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  false)}
	else if ( projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  true )}*/
	}
function mkMosTemplate( r){
	var uL=null, uR=null, dL=null, dR=null, u=null, d =null, mos=null;
	uL =mkMosaicXYPlaneTemplate( r,true, true );
	uR =mkMosaicXYPlaneTemplate( r,true, false);
	dR =mkMosaicXYPlaneTemplate( r,false,true );
	dL =mkMosaicXYPlaneTemplate( r,false,true );
	u =interleaveDomains( r, uL, uR);
	d =interleaveDomains( r, dL, dR);
	mos=u.concat( d); return mos
}
function evalQuantity(ari){ var ret=null;
	switch( ari ) { case "-X" 	: ret =function(r,X,Y){ return -X 	};break;
					case "X" 	: ret =function(r,X,Y){ return X 	};break;
					case "-Y" 	: ret =function(r,X,Y){ return -Y 	};break;
					case "Y" 	: ret =function(r,X,Y){ return Y 	};break;
					case "X - Y": ret =function(r,X,Y){ return X - Y};break;
					case "Y - X": ret =function(r,X,Y){ return Y - X};break;
					case "X - r": ret =function(r,X,Y){ return X - r};break;
					case "r - X": ret =function(r,X,Y){ return r - X};break;
					case "Y - r": ret =function(r,X,Y){ return Y - r};break;
					case "r - Y": ret =function(r,X,Y){ return r - Y};break;} return ret}
function evalModalXYPlane(m,r,R){ m.bV=null; m.bK=null; m.gK=null; m.gV=null;
	m.bK=evalQuantity(m.bAriK);m.gK=evalQuantity(m.gAriK);m.bV=evalQuantity(m.bAriV);m.gV=evalQuantity(m.gAriV);
	for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.bG[y][x].Y <= m.bG[y][x].X ) {  m.bG[y][x].V = m.gV( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.bG[y][x].V === -0}
														else 					{ m.bG[y][x].V === +0}}
													m.bG[y][x].K = m.gK( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].K === 0){ m.bG[y][x].K === +0}}
	 	else if ( m.bG[y][x].Y  > m.bG[y][x].X ) {  m.bG[y][x].V = m.bV( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.bG[y][x].V === +0}
	 													else 					{ m.bG[y][x].V === -0}}
	 												m.bG[y][x].K = m.bK( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].K === 0){ m.bG[y][x].K === -0}}}}}
function evalMosaicXYPlane(m,r,R,mas){ m.xV=null; m.xK=null; m.yK=null; m.yV=null;
	m.xK=evalQuantity(m.xAriK);m.yK=evalQuantity(m.yAriK);m.xV=evalQuantity(m.xAriV);m.yV=evalQuantity(m.yAriV);
	if(mas){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].X <= m.xY[y][x].Y ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V === -0}
														else 					{ m.xY[y][x].V === +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K === 0){ m.xY[y][x].K === +0}}
	 	else if ( m.xY[y][x].X  > m.xY[y][x].Y ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V === +0}
	 													else 					{ m.xY[y][x].V === -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K === 0){ m.xY[y][x].K === -0}}}}}
	else 		 { for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].Y <= m.xY[y][x].X ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V === -0}
														else 					{ m.xY[y][x].V === +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K === 0){ m.xY[y][x].K === +0}}
	 	else if ( m.xY[y][x].Y  > m.xY[y][x].X ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V === +0}
	 													else 					{ m.xY[y][x].V === -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K === 0){ m.xY[y][x].K === -0}}}}}}
function mapXYPlane(q,r,R){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
	q[y][x].x =x-r; q[y][x].y =y-r; q[y][x].X=Math.abs(q[y][x].x); q[y][x].Y=Math.abs(q[y][x].y);}}}
//lane( 	m, 	xY, FL.sQr, m.gnd.mas, obj);
function idnXYPlane(m,xY,r,R,mas,obj){
	if 		(!mas &&  obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AB.vQsL, y-r, x-r)   }}}
	else if (!mas && !obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AB.vQsL, y-r,-(x-r)) }}}
	else if ( mas &&  obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AB.vQsL, x-r, y-r)   }}}
	else if ( mas && !obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AB.vQsL, x-r,-(y-r)) }}}}

function hsvToRgb(h, s, v) {
	var r, g, b;	var i;	var f, p, q, t;
	h = Math.max(0, Math.min(360, h));	s = Math.max(0, Math.min(100, s));	v = Math.max(0, Math.min(100, v));
	s /= 100;	v /= 100;
	if(s === 0) { r = g = b = v;	return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];}
	h /= 60; // sector 0 to 5
	i = Math.floor(h);
	f = h - i; // factorial part of h
	p = v * (1 - s);
	q = v * (1 - s * f);
	t = v * (1 - s * (1 - f));
	switch(i) {		case 0:			r = v;			g = t;			b = p;			break;
					case 1:			r = q;			g = v;			b = p;			break;
					case 2:			r = p;			g = v;			b = t;			break;
					case 3:			r = p;			g = q;			b = v;			break;
					case 4:			r = t;			g = p;			b = v;			break;
					default:/*case 5*/r = v;		g = p;			b = q;	}
	return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255)}}
function RGBtoHSV(r, g, b) { if (arguments.length === 1) { g = r.g, b = r.b, r = r.r; }
    var max = Math.max(r, g, b), min = Math.min(r, g, b), d = max - min, h, s = (max === 0 ? 0 : d / max), v = max / 255;
    switch (max) { case min: h = 0; break; case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;
        case g: h = (b - r) + d * 2; h /= 6 * d; break; case b: h = (r - g) + d * 4; h /= 6 * d; break}
    return { h: h, s: s, v: v }}
function componentToHex(c) { var hex = c.toString(16); return hex.length === 1 ? "0" + hex : hex}
function rgbToHex(r, g, b) { return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);}
function hexToRgb(hex) { var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
	return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16)} : null}

function blendColours2(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify2(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify2(src,dst,r){ 	var min =Math.max(src,dst);	var max =Math.min(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function blendColours(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify(src,dst,r){ 	var min =Math.min(src,dst);	var max =Math.max(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function mkBoolMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(false)}}
		else { for(var m=0; m<y; m++){	q[n].push(false)}}} return q}
function mkNullMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(null)}}
		else { for(var m=0; m<y; m++){	q[n].push(null)}}} return q}

function interleaveQuadrants(R,l,v,r) { var X = (2*R)+1; var Y = R; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<R)  { m[y][x] = l[y][x] }
												else if(x===R) { m[y][x] = v[y][0] }
												else 		  { m[y][x] = m[y][x] = r[y][x-R-1] }}} return m }

function flipHor(m){ var M=mkNullMatrix(m.length);
	for(var n=0; n<M.length; n++){ M[n] = m[n].reverse()} return M}
function flipVer(m){
	var M=mkNullMatrix(m.length); var len=M.length;
	for(var n=0; n<len; n++){ M[len-1-n]=m[n]} return M}
//(ui.ora, true, false, m.bE.reso, m.goodForm);
function rotate(matrix,n) {	var r=Math.ceil(n/2); if(n%2===1) { r--; }
    for (var i = 0; i < n/2; i++) { for (var j = 0; j < r; j++) {
            var temp = matrix[i][j]; matrix[i][j] = matrix[n-1-j][i]; matrix[n-1-j][i] = matrix[n-1-i][n-1-j];
            matrix[n-1-i][n-1-j] = matrix[j][n-1-i]; matrix[j][n-1-i] = temp; }} return matrix }
function flipDiagonal(matrix,n) { for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) {
        	if(j < i) {	var temp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = temp; }}} return matrix }

function fillHalfQuadrant(q,r,reverse,blend2){
	var from; var to; var L; var len;
	for(var y=0; y<r; y++){ L =[]; from=null; to=null;
		for(var x=0; x<r; x++){ if(q[x][y]!==null){
			if(from===null){ from = {y:y, x:x, c:q[x][y] }} else{ to ={ y:y, x:x, c:q[x][y]}}}
		if(from&&to){
			if(blend2){ L=blendColours2(from.c, to.c, to.x-from.x+1);}
			else{ L=blendColours(from.c, to.c, to.x-from.x+1);}
			if(reverse){ L.reverse();}
			for(var n=1; n<to.x; n++){ q[n][y] = L[n]}
			break}}}}
function mkHalfQuadrantTemplate(c,g,r){
	if(!g){ r--}
	var q=mkNullMatrix(r);
	for(var y=0; y<r; y++){
		for(var x=0; x<r-y; x++){
			q[y][x] =c }}
	return q}
function mkHalfQuadrant(c,kc,r,mF){
	var q=mkNullMatrix(r);
	if(c===kc) { var fToL=blendColours2(c.f, c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (c.f, c.h, r)}
	else 	  { var fToL=blendColours2(kc.f,c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (kc.f,c.h, r)}
	switch(mF[0]){ 
		case "a" : case "a'" :
			switch(mF[1]){ 
				case "b" : case "b'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[n];
					q[n][0] 	= fToH[n];
					q[n][r-n-1] = lToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[r-n-1];
					q[n][0] 	= fToH[r-n-1];
					q[n][r-n-1] = fToL[r-n-1]}
					fillHalfQuadrant(q,r,true);
					} break;
		case "b" : case "b'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[r-n-1];
					q[n][0] 	= lToH[n];
					q[n][r-n-1] = fToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[r-n-1];
					q[n][0] 	= lToH[r-n-1];
					q[n][r-n-1] = fToL[n]}
					fillHalfQuadrant(q,r,false,true);
					} break;
		case "c" : case "c'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[n];
					q[n][0] 	= fToL[r-n-1];
					q[n][r-n-1] = fToH[r-n-1]}
					fillHalfQuadrant(q,r,true,true);
					break;
				case "b" : case "b'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[n];
					q[n][0] 	= fToL[n];
					q[n][r-n-1] = lToH[r-n-1]}
					fillHalfQuadrant(q,r,false,true);
					} break} return q}
function mkXYCol(c,r){ 	var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push([b])} 	return a}
function mkXYRow(c,r){ 		var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push(b)} 	return a}
function offsetDownwards(m,r){	var a=[]; 	for(var n=0; n<r; n++){ a.push(null)}	m.unshift(a);}
function offsetRightwards( m,r){			for(var n=0; n<r; n++){					m[n].unshift(null)}}
function offsetUpwards( m,r){	var a=[];	for(var n=0; n<r; n++){	a.push(null)}	m.push(a);}
function offsetLeftwards( m,r) { 			for(var n=0; n<r; n++){ 				m[n].push(null)}}
function connectHalfQuadrants(master,slave,r){
	for(var y=0; y<r; y++){	for(var x=0; x<r; x++){	if(master[x][y]===null){ master[x][y] =slave[x][y]}}} return master}
function mkModalXYPlane(m,r){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null, l:null,c:null,r:null,
		dLX:null,dLY:null,d:null,dRX:null,dRY:null,uL:null, uR:null, dL:null, dR:null};
	if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm)}

	else 					  { xY.uLX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.red, ui.red, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.gForm)}

	if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.bForm)}

	else 					  { xY.uLY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.bForm)}

	/*console.log("DEBUT mkModalXYPlane I");
	console.log("DEBUT uLX");console.log(xY.uLX);
	console.log("DEBUT uLY");console.log(xY.uLY);
	console.log("DEBUT uRY");console.log(xY.uRY);
	console.log("DEBUT uRX");console.log(xY.uRX);
	console.log("DEBUT dRX");console.log(xY.dRX);
	console.log("DEBUT dRY");console.log(xY.dRY);
	console.log("DEBUT dLX");console.log(xY.dLX);
	console.log("DEBUT dLY");console.log(xY.dLY);*/

	xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

	xY.uLY =rotate( xY.uLY, r-1);
	offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

	xY.uRY =flipDiagonal( xY.uRY, r-1);
	offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

	xY.uRX =rotate(rotate( xY.uRX, r), r);

	xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

	xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
	offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

	xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
	offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

	xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
	xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
	xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
	xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

	xY.u = mkXYCol( ui.gra.h, r);
	xY.d = mkXYCol( ui.gra.h, r);
	xY.l = mkXYRow( ui.gra.l, r);
	xY.r = mkXYRow( ui.gra.l, r);
	xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

	xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
	xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
	xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

	xY = xY.U.concat( xY.C).concat( xY.D);

	mapXYPlane( 		xY, FL.sQr, FL.vQr);
	//idnXYPlane( 	 	xY, true, true);
	//idnXYPlane( 	m, 	xY, FL.sQr, FL.vQr, true, true);

	return xY}

function mkMosaicXYPlaneTemplate(r,mas,obj){
	var qU={ };
	if(mas){
		qU.uLV = mkHalfQuadrantTemplate(ui.ora.l, true, r);
		 	qU.uLV=rotate(qU.uLV, r);
		qU.uLH = mkHalfQuadrantTemplate(ui.blu.l, false,r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r-1), r-1);
			offsetDownwards( qU.uLH, r-1);	offsetLeftwards( qU.uLH, r);
		qU.uRV = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.uRV=flipDiagonal(qU.uRV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.cya.l, false,r);
			qU.uRH =rotate(rotate(qU.uRH, r-1), r-1);
			offsetDownwards( qU.uRH, r-1); offsetRightwards( qU.uRH, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.dLV =flipDiagonal(rotate(rotate(qU.dLV, r), r), r);
		qU.dLH = mkHalfQuadrantTemplate(ui.vio.l, false,r);
			offsetUpwards( qU.dLH, r-1); offsetLeftwards( qU.dLH, r);
		qU.dRV = mkHalfQuadrantTemplate(ui.lil.l, true, r);
			qU.dRV =rotate(rotate(rotate(qU.dRV, r), r), r);
		qU.dRH = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r-1), r-1), r-1), r-1);
			offsetUpwards( qU.dRH, r-1); offsetRightwards( qU.dRH, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYCol( ui.gra.l, r);
		qU.d = mkXYCol( ui.gra.l, r);
		qU.l = mkXYRow( ui.gra.h, r);
		qU.r = mkXYRow( ui.gra.h, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}
	else {
		qU.uLH = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r), r);
		qU.uLV = mkHalfQuadrantTemplate(ui.vio.l, false, r);
			qU.uLV =rotate( qU.uLV,r-1);
			offsetRightwards( qU.uLV, r-1); offsetUpwards( qU.uLV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.ora.l, true, r);
			qU.uRH =rotate(rotate( qU.uRH, r), r);
		qU.uRV = mkHalfQuadrantTemplate(ui.blu.l, false, r);
			qU.uRV =flipDiagonal( qU.uRV, r-1);
			offsetLeftwards( qU.uRV, r-1); offsetUpwards( qU.uRV, r);
		qU.dLH = mkHalfQuadrantTemplate(ui.lil.l, true, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dLV =flipDiagonal(rotate(rotate( qU.dLV, r-1), r-1), r-1);
			offsetRightwards( qU.dLV, r-1); offsetDownwards( qU.dLV, r);
		qU.dRH = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r), r), r), r);
		qU.dRV = mkHalfQuadrantTemplate(ui.cya.l, false, r);
			qU.dRV =rotate(rotate(rotate( qU.dRV, r-1), r-1), r-1);
			offsetLeftwards( qU.dRV, r-1); offsetDownwards( qU.dRV, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYCol( ui.gra.h, r);
		qU.d = mkXYCol( ui.gra.h, r);
		qU.l = mkXYRow( ui.gra.l, r);
		qU.r = mkXYRow( ui.gra.l, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}

	if( obj){ qU.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		qU, FL.sQr, FL.vQr);
	//idnXYPlane( 	m, 	qU, FL.vQr, mas, obj);

	return qU}
function mkMosaicXYPlane(m,r,obj){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null,l:null,c:null,r:null,dLX:null,dLY:null,d:null,dRX:null,dRY:null,
		uL:null, uR:null, dL:null, dR:null};
	if(m.gnd.mas){
		if( m.invMor||m.pureGood) { xY.uLX = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.red, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.xForm)}

		if( m.invMor||m.pureBad)  { xY.uLY = mkHalfQuadrant(ui.blu, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.cya, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.vio, ui.yel, r,   m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.ora, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.red, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.yel, ui.yel, r,   m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r-1), r-1);
		offsetDownwards( xY.uLX, r-1); offsetLeftwards( xY.uLX, r);

		xY.uLY=rotate( xY.uLY, r);
		
		xY.uRY=flipDiagonal( xY.uRY, r);

		xY.uRX =rotate(rotate(xY.uRX, r-1), r-1);
		offsetDownwards( xY.uRX, r-1); offsetRightwards( xY.uRX, r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r-1), r-1), r-1), r-1);
		offsetUpwards( xY.dRX, r-1); offsetRightwards( xY.dRX, r);

		xY.dRY =rotate(rotate(rotate(xY.dRY, r), r), r);

		xY.dLY =flipDiagonal(rotate(rotate(xY.dLY, r), r), r);
		offsetUpwards( xY.dLX, r-1); offsetLeftwards( xY.dLX, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.l, r);
		xY.d = mkXYCol( ui.gra.l, r);
		xY.l = mkXYRow( ui.gra.h, r);
		xY.r = mkXYRow( ui.gra.h, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}
	else{
		if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.red, ui.red, r,   m.xForm)}

		if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

		xY.uLY =rotate( xY.uLY, r-1);
		offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

		xY.uRY =flipDiagonal( xY.uRY, r-1);
		offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

		xY.uRX =rotate(rotate( xY.uRX, r), r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

		xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
		offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

		xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
		offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.h, r);
		xY.d = mkXYCol( ui.gra.h, r);
		xY.l = mkXYRow( ui.gra.l, r);
		xY.r = mkXYRow( ui.gra.l, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}

	if( obj){ xY.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		xY, FL.sQr, FL.vQr);
 	//idnXYPlane( 	m, 	xY, FL.vQr, m.gnd.mas, obj);

	return xY}



function combineMoodAndBeing(pM,bE){
	var mD = pM.ni.substr(0, pM.ni.indexOf('B'));
	mD = mD + "_" + bE.ni + "_";
	mD = mD + pM.ni.split("B").pop();
	mD = mkMood(mD, AB);
	return mD}
function mkMoodOld(mo){
	var primalMood= mo.ni.substr(0, mo.ni.indexOf('_'));
	var being= mo.ni.split('_')[1]; 					
	var tail= mo.ni.split("_").pop(); 					
	primalMood = primalMood+"B"+tail;
	mo.bE = mkBeing(being, AB.gender);
	mo.pM = mkPrimalMood(primalMood, AB);
	getModalFormByBeing(mo, mo.bE.ni);
	getModalFormByPrimalMood(mo);
	parseModalForm(mo);
	mo.qU =mkXYPlane(mo);
	mapXYPlane(mo.qU, mo.bE.reso);
	evalXYPlane(mo)}



function getVqNiBySqs( cla,rom){ var q; switch(rom.ni){
	case "A 4-Sew-1" : case "c 4-Sew-1"	: switch(cla.ni){		
		case "F NIL 0" : q="F Sense 1ew"; 		return q; 	case "M NIL 0" : q="M Sense 1ew"; 		return q;
		case "F Fis 0" : q="F Sense 4ew"; 		return q; 	case "M Fis 0" : q="M Sense 4ew"; 		return q;
		case "F Fiw 1" : q="F dysphoria iw";	return q; 	case "M Fiw 1" : q="M dysphoria iw";	return q;
		case "F Fis 2" : q="F defeat is"; 		return q; 	case "M Fis 2" : q="M defeat is"; 		return q;
		case "F Few 3" : q="F fake ew"; 		return q; 	case "M Few 3" : q="M fake ew"; 		return q;
		case "F Fes 4" : q="F epiphany es"; 	return q; 	case "M Fes 4" : q="M epiphany es"; 	return q;
		case "F Tew 0" : q="F Sense 1ew"; 		return q; 	case "M Tew 0" : q="M Sense 1ew"; 		return q; 
		case "F Tes 1" : q="F body es"; 		return q; 	case "M Tes 1" : q="M body es"; 		return q;
		case "F Tew 2" : q="F need ew"; 		return q; 	case "M Tew 2" : q="M need ew"; 		return q;
		case "F Tis 3" : q="F tool is"; 		return q; 	case "M Tis 3" : q="M tool is"; 		return q;
		case "F Tiw 4" : q="F method iw"; 		return q; 	case "M Tiw 4" : q="M method iw"; 		return q;}
	case "A 3-Sew-2" : case "c 3-Sew-2"	: switch(cla.ni){	
		case "F NIL 0" : q="F Sense 2ew"; 		return q; 	case "M NIL 0" : q="M Sense 2ew"; 		return q;
		case "F Fis 0" : q="F Sense 3ew"; 		return q; 	case "M Fis 0" : q="M Sense 3ew"; 		return q;
		case "F Fiw 1" : q="F detach iw";		return q; 	case "M Fiw 1" : q="M detach iw";		return q;
		case "F Fis 2" : q="F burden is"; 		return q; 	case "M Fis 2" : q="M burden is"; 		return q;
		case "F Few 3" : q="F happiness ew"; 	return q; 	case "M Few 3" : q="M happiness ew"; 	return q;
		case "F Fes 4" : q="F fun es"; 			return q; 	case "M Fes 4" : q="M fun es"; 			return q;
		case "F Tew 0" : q="F Sense 2ew"; 		return q; 	case "M Tew 0" : q="M Sense 2ew"; 		return q; 
		case "F Tes 1" : q="F pain es"; 		return q; 	case "M Tes 1" : q="M pain es"; 		return q;
		case "F Tew 2" : q="F life ew"; 		return q; 	case "M Tew 2" : q="M life ew"; 		return q;
		case "F Tis 3" : q="F order is"; 		return q; 	case "M Tis 3" : q="M order is"; 		return q;
		case "F Tiw 4" : q="F should iw"; 		return q; 	case "M Tiw 4" : q="M should iw"; 		return q;}
	case "A 2-Sew-3" : case "c 2-Sew-3"	: switch(cla.ni){	
		case "F NIL 0" : q="F Sense 3ew"; 		return q; 	case "M NIL 0" : q="M Sense 3ew"; 		return q;
		case "F Fis 0" : q="F Sense 2ew"; 		return q; 	case "M Fis 0" : q="M Sense 2ew"; 		return q;
		case "F Fiw 1" : q="F fear iw";			return q; 	case "M Fiw 1" : q="M fear iw";			return q;
		case "F Fis 2" : q="F love is"; 		return q; 	case "M Fis 2" : q="M love is"; 		return q;
		case "F Few 3" : q="F style ew"; 		return q; 	case "M Few 3" : q="M style ew"; 		return q;
		case "F Fes 4" : q="F can es"; 			return q; 	case "M Fes 4" : q="M can es"; 			return q;
		case "F Tew 0" : q="F Sense 3ew"; 		return q; 	case "M Tew 0" : q="M Sense 3ew"; 		return q; 
		case "F Tes 1" : q="F shame es"; 		return q; 	case "M Tes 1" : q="M shame es"; 		return q;
		case "F Tew 2" : q="F problem ew"; 		return q; 	case "M Tew 2" : q="M problem ew"; 		return q;
		case "F Tis 3" : q="F social is"; 		return q; 	case "M Tis 3" : q="M social is"; 		return q;
		case "F Tiw 4" : q="F right iw"; 		return q; 	case "M Tiw 4" : q="M right iw"; 		return q;}
	case "A 1-Sew-4" : case "c 1-Sew-4"	: switch(cla.ni){	
		case "F NIL 0" : q="F Sense 4ew"; 		return q; 	case "M NIL 0" : q="M Sense 4ew"; 		return q;
		case "F Fis 0" : q="F Sense 1ew"; 		return q; 	case "M Fis 0" : q="F Sense 1ew"; 		return q;
		case "F Fiw 1" : q="F belief iw";		return q; 	case "M Fiw 1" : q="F belief iw";		return q;
		case "F Fis 2" : q="F like is"; 		return q; 	case "M Fis 2" : q="F like is"; 		return q;
		case "F Few 3" : q="F motive ew"; 		return q; 	case "M Few 3" : q="F motive ew"; 		return q;
		case "F Fes 4" : q="F peace es"; 		return q; 	case "M Fes 4" : q="F peace es"; 		return q;
		case "F Tew 0" : q="F Sense 4ew"; 		return q; 	case "M Tew 0" : q="F Sense 4ew"; 		return q; 
		case "F Tes 1" : q="F fail es"; 		return q; 	case "M Tes 1" : q="F fail es"; 		return q;
		case "F Tew 2" : q="F loss ew"; 		return q; 	case "M Tew 2" : q="F loss ew"; 		return q;
		case "F Tis 3" : q="F wrong is"; 		return q; 	case "M Tis 3" : q="F wrong is"; 		return q;
		case "F Tiw 4" : q="F success iw"; 		return q; 	case "M Tiw 4" : q="F success iw"; 		return q;}

	case "A 0-Nis-0" : case "c 0-Nis-0"	: switch(cla.ni){
		case "F NIL 0" : q="F strength"; 		return q; 	case "M NIL 0" : q="M weakness"; 		return q;
		case "F Fis 0" : q="F Feel 0is"; 		return q; 	case "M Fis 0" : q="M Feel 0is"; 		return q;
		case "F Fiw 1" : q="F Feel 1iw";		return q; 	case "M Fiw 1" : q="M Feel 1iw";		return q;
		case "F Fis 2" : q="F Feel 2is"; 		return q; 	case "M Fis 2" : q="M Feel 2is"; 		return q;
		case "F Few 3" : q="F Feel 3ew"; 		return q; 	case "M Few 3" : q="M Feel 3ew"; 		return q;
		case "F Fes 4" : q="F Feel 4es"; 		return q; 	case "M Fes 4" : q="M Feel 4es"; 		return q;
		case "F Tew 0" : q="F Think 0ew"; 		return q; 	case "M Tew 0" : q="M Think 0ew"; 		return q; 
		case "F Tes 1" : q="F Think 1es"; 		return q; 	case "M Tes 1" : q="M Think 1es"; 		return q;
		case "F Tew 2" : q="F Think 2ew"; 		return q; 	case "M Tew 2" : q="M Think 2ew"; 		return q;
		case "F Tis 3" : q="F Think 3is"; 		return q; 	case "M Tis 3" : q="M Think 3is"; 		return q;
		case "F Tiw 4" : q="F Think 4iw"; 		return q; 	case "M Tiw 4" : q="M Think 4iw"; 		return q;}
	case "A 4-Nis-1" : case "c 4-Nis-1"	: switch(cla.ni){
		case "F NIL 0" : q="F iNtuit 4is"; 		return q; 	case "M NIL 0" : q="M iNtuit 4is"; 		return q;
		case "F Fis 0" : q="F iNtuit 4is"; 		return q; 	case "M Fis 0" : q="M iNtuit is"; 		return q;
		case "F Fiw 1" : q="F destroy iw";		return q; 	case "M Fiw 1" : q="M destroy iw";		return q;
		case "F Fis 2" : q="F confusion is"; 	return q; 	case "M Fis 2" : q="M confusion is"; 	return q;
		case "F Few 3" : q="F apathy ew";		return q; 	case "M Few 3" : q="M apathy ew";		return q;
		case "F Fes 4" : q="F beauty es";		return q; 	case "M Fes 4" : q="M beauty es";		return q;
		case "F Tew 0" : q="F iNtuit 1is"; 		return q; 	case "M Tew 0" : q="M iNtuit 1is"; 		return q; 
		case "F Tes 1" : q="F form es"; 		return q; 	case "M Tes 1" : q="M form es"; 		return q;
		case "F Tew 2" : q="F meaning ew"; 		return q; 	case "M Tew 2" : q="M meaning ew"; 		return q;
		case "F Tis 3" : q="F kind is"; 		return q; 	case "M Tis 3" : q="M kind is"; 		return q;
		case "F Tiw 4" : q="F reason iw"; 		return q; 	case "M Tiw 4" : q="M reason iw"; 		return q;}
	case "A 3-Nis-2" : case "c 3-Nis-2"	: switch(cla.ni){
		case "F NIL 0" : q="F iNtuit 3is"; 		return q; 	case "M NIL 0" : q="M iNtuit 3is"; 		return q;
		case "F Fis 0" : q="F iNtuit 3is"; 		return q; 	case "M Fis 0" : q="M iNtuit 3is"; 		return q;
		case "F Fiw 1" : q="F hate iw";			return q; 	case "M Fiw 1" : q="M hate iw";			return q;
		case "F Fis 2" : q="F awkward is"; 		return q; 	case "M Fis 2" : q="M awkward is"; 		return q;
		case "F Few 3" : q="F freedom ew";		return q; 	case "M Few 3" : q="M freedom ew";		return q;
		case "F Fes 4" : q="F event es";		return q; 	case "M Fes 4" : q="M event es";		return q;
		case "F Tew 0" : q="F iNtuit 2is"; 		return q; 	case "M Tew 0" : q="M iNtuit 2is"; 		return q; 
		case "F Tes 1" : q="F exclude es"; 		return q; 	case "M Tes 1" : q="M exclude es"; 		return q;
		case "F Tew 2" : q="F purpose ew"; 		return q; 	case "M Tew 2" : q="M purpose ew"; 		return q;
		case "F Tis 3" : q="F use is"; 			return q; 	case "M Tis 3" : q="M use is"; 			return q;
		case "F Tiw 4" : q="F would iw"; 		return q; 	case "M Tiw 4" : q="M would iw"; 		return q;}
	case "A 2-Nis-3" : case "c 2-Nis-3"	: switch(cla.ni){
		case "F NIL 0" : q="F iNtuit 2is"; 		return q; 	case "M NIL 0" : q="M iNtuit 2is"; 		return q;
		case "F Fis 0" : q="F iNtuit 2is"; 		return q; 	case "M Fis 0" : q="M iNtuit 2is"; 		return q;
		case "F Fiw 1" : q="F greed 1iw";		return q; 	case "M Fiw 1" : q="M greed 1iw";		return q;
		case "F Fis 2" : q="F culture 2is"; 	return q; 	case "M Fis 2" : q="M culture 2is"; 	return q;
		case "F Few 3" : q="F join 3ew";		return q; 	case "M Few 3" : q="M join 3ew";		return q;
		case "F Fes 4" : q="F could 4es";		return q; 	case "M Fes 4" : q="M could 4es";		return q;
		case "F Tew 0" : q="F iNtuit 3is"; 		return q; 	case "M Tew 0" : q="M iNtuit 3is"; 		return q; 
		case "F Tes 1" : q="F impose es"; 		return q; 	case "M Tes 1" : q="M impose es"; 		return q;
		case "F Tew 2" : q="F reject ew"; 		return q; 	case "M Tew 2" : q="M reject ew"; 		return q;
		case "F Tis 3" : q="F metalevel is"; 	return q; 	case "M Tis 3" : q="M metalevel is"; 	return q;
		case "F Tiw 4" : q="F relevance iw"; 	return q; 	case "M Tiw 4" : q="M relevance iw"; 	return q;}
	case "A 1-Nis-4" : case "c 1-Nis-4"	: switch(cla.ni){
		case "F NIL 0" : q="F iNtuit 1is"; 		return q; 	case "M NIL 0" : q="M iNtuit 1is"; 		return q;
		case "F Fis 0" : q="F iNtuit 1is"; 		return q; 	case "M Fis 0" : q="M iNtuit 1is"; 		return q;
		case "F Fiw 1" : q="F norm iw";			return q; 	case "M Fiw 1" : q="M norm iw";			return q;
		case "F Fis 2" : q="F want is"; 		return q; 	case "M Fis 2" : q="M want is"; 		return q;
		case "F Few 3" : q="F integrity ew";	return q; 	case "M Few 3" : q="M integrity ew";	return q;
		case "F Fes 4" : q="F innocence es";	return q; 	case "M Fes 4" : q="M innocence es";	return q;
		case "F Tew 0" : q="F iNtuit 4is"; 		return q; 	case "M Tew 0" : q="M iNtuit 4is"; 		return q; 
		case "F Tes 1" : q="F condemn es"; 		return q; 	case "M Tes 1" : q="M condemn es"; 		return q;
		case "F Tew 2" : q="F deceive ew"; 		return q; 	case "M Tew 2" : q="M deceive ew"; 		return q;
		case "F Tis 3" : q="F withhold is"; 	return q; 	case "M Tis 3" : q="M withhold is"; 	return q;
		case "F Tiw 4" : q="F wisdom iw"; 		return q; 	case "M Tiw 4" : q="M wisdom iw"; 		return q;}}}
//when weakness gets positive karma, subject falls asleep

function precalcVectorQualities( seed,sQs){ //if( s){ if(s.vQs.length >0){ return s.vQs}}
 	var b =null; var vQs =[];
 	for(let n=0; n <AB.vQsL; n++){ b =mkVq( seed[n],sQs); vQs.push( b);} return vQs}
				/*if(s){ switch(seed[n]){ case "U_origin_i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;*/
	//for(let n=0; n <AB.vQsL; n++){ b =mkVq( seed[n],sQs,parent,s); a.push( b)}return a}

function mkVq( ni,par,cla,rom){ var q=null; switch(ni){ //"F strength", 	"F Feel 0is", 	"F Think 0ew",
	case "F Feel 0is" 		:q=new FL.VectorQualities.F_Feel_0is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Feel 1iw" 		:q=new FL.VectorQualities.F_Feel_1iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Feel 2is" 		:q=new FL.VectorQualities.F_Feel_2is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Feel 3ew" 		:q=new FL.VectorQualities.F_Feel_3ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Feel 4es" 		:q=new FL.VectorQualities.F_Feel_4es		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Think 0ew" 		:q=new FL.VectorQualities.F_Think_0ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Think 1es" 		:q=new FL.VectorQualities.F_Think_1es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Think 2ew" 		:q=new FL.VectorQualities.F_Think_2ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Think 3is" 		:q=new FL.VectorQualities.F_Think_3is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Think 4ew" 		:q=new FL.VectorQualities.F_Think_4ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Sense 1ew" 		:q=new FL.VectorQualities.F_Sense_1ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Sense 2ew" 		:q=new FL.VectorQualities.F_Sense_2ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Sense 3ew" 		:q=new FL.VectorQualities.F_Sense_3ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F Sense 4ew" 		:q=new FL.VectorQualities.F_Sense_4ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F strength" 		:q=new FL.VectorQualities.F_strength		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F iNtuit 1is" 	:q=new FL.VectorQualities.F_iNtuit_1is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F iNtuit 2is" 	:q=new FL.VectorQualities.F_iNtuit_2is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F iNtuit 3is" 	:q=new FL.VectorQualities.F_iNtuit_3is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F iNtuit 4is" 	:q=new FL.VectorQualities.F_iNtuit_4is		(ni,cla,rom,par); inhVq( q,par);return q;

	case "F dysphoria iw" 	:q=new FL.VectorQualities.F_dysphoria_iw	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F defeat is" 		:q=new FL.VectorQualities.F_defeat_is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F fake ew" 		:q=new FL.VectorQualities.F_fake_ew			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F epiphany es" 	:q=new FL.VectorQualities.F_epiphany_es		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F detach iw" 		:q=new FL.VectorQualities.F_detach_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F burden is" 		:q=new FL.VectorQualities.F_burden_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F happiness ew" 	:q=new FL.VectorQualities.F_happiness_ew	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F fun es" 		:q=new FL.VectorQualities.F_fun_es 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F fear iw" 		:q=new FL.VectorQualities.U_fear_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F love is" 		:q=new FL.VectorQualities.U_love_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F style ew" 		:q=new FL.VectorQualities.U_style_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F can es" 		:q=new FL.VectorQualities.U_can_es 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F belief iw" 		:q=new FL.VectorQualities.U_belief_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F like is" 		:q=new FL.VectorQualities.U_like_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F motive ew" 		:q=new FL.VectorQualities.U_motive_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F peace es" 		:q=new FL.VectorQualities.U_peace_es 		(ni,cla,rom,par); inhVq( q,par);return q;

	case "F body es" 		:q=new FL.VectorQualities.F_body_es			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F need ew" 		:q=new FL.VectorQualities.F_need_ew			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F tool is" 		:q=new FL.VectorQualities.F_tool_is			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F method iw" 		:q=new FL.VectorQualities.F_method_iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F pain es" 		:q=new FL.VectorQualities.F_pain_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F life ew" 		:q=new FL.VectorQualities.F_life_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F order is" 		:q=new FL.VectorQualities.F_order_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F should iw" 		:q=new FL.VectorQualities.F_should_iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F shame es" 		:q=new FL.VectorQualities.F_shame_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F problem ew" 	:q=new FL.VectorQualities.F_problem_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F social is" 		:q=new FL.VectorQualities.F_social_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F right iw" 		:q=new FL.VectorQualities.F_right_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F fail es" 		:q=new FL.VectorQualities.F_fail_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F loss ew" 		:q=new FL.VectorQualities.F_loss_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F wrong is" 		:q=new FL.VectorQualities.F_wrong_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F success iw" 	:q=new FL.VectorQualities.F_success_iw 		(ni,cla,rom,par); inhVq( q,par);return q;

	case "F destroy iw" 	:q=new FL.VectorQualities.F_destroy_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F confusion is" 	:q=new FL.VectorQualities.F_confusion_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F apathy ew" 		:q=new FL.VectorQualities.F_apathy_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F beauty es" 		:q=new FL.VectorQualities.F_beauty_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F hate iw" 		:q=new FL.VectorQualities.F_hate_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F awkward is" 	:q=new FL.VectorQualities.F_awkward_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F freedom ew" 	:q=new FL.VectorQualities.F_freedom_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F event es" 		:q=new FL.VectorQualities.F_event_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F greed iw" 		:q=new FL.VectorQualities.F_greed_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F culture is" 	:q=new FL.VectorQualities.F_culture_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F join ew" 		:q=new FL.VectorQualities.F_join_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F could es" 		:q=new FL.VectorQualities.F_could_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F norm iw" 		:q=new FL.VectorQualities.F_norm_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F want is" 		:q=new FL.VectorQualities.F_want_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F integrity ew" 	:q=new FL.VectorQualities.F_integrity_ew 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F innocence es" 	:q=new FL.VectorQualities.F_innocence_es 	(ni,cla,rom,par); inhVq( q,par);return q;

	case "F form es" 		:q=new FL.VectorQualities.F_form_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F meaning ew" 	:q=new FL.VectorQualities.F_meaning_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F kind is" 		:q=new FL.VectorQualities.F_kind_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F reason iw" 		:q=new FL.VectorQualities.F_reason_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F exclude es" 	:q=new FL.VectorQualities.F_exclude_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F purpose ew" 	:q=new FL.VectorQualities.F_purpose_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F use is" 		:q=new FL.VectorQualities.F_use_is 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "F would iw" 		:q=new FL.VectorQualities.F_would_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F impose es" 		:q=new FL.VectorQualities.F_impose_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F reject ew" 		:q=new FL.VectorQualities.F_reject_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F metalevel is" 	:q=new FL.VectorQualities.F_metalevel_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F relevance iw" 	:q=new FL.VectorQualities.F_relevance_iw 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F condemn es" 	:q=new FL.VectorQualities.F_condemn_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F deceive ew" 	:q=new FL.VectorQualities.F_deceive_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "F withhold is" 	:q=new FL.VectorQualities.F_withhold_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "F wisdom iw" 		:q=new FL.VectorQualities.F_wisdom_iw 		(ni,cla,rom,par); inhVq( q,par);return q;


	case "M Feel 0is" 		:q=new FL.VectorQualities.M_Feel_0is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Feel 1iw" 		:q=new FL.VectorQualities.M_Feel_1iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Feel 2is" 		:q=new FL.VectorQualities.M_Feel_2is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Feel 3ew" 		:q=new FL.VectorQualities.M_Feel_3ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Feel 4es" 		:q=new FL.VectorQualities.M_Feel_4es		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Think 0ew" 		:q=new FL.VectorQualities.M_Think_0ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Think 1es" 		:q=new FL.VectorQualities.M_Think_1es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Think 2ew" 		:q=new FL.VectorQualities.M_Think_2ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Think 3is" 		:q=new FL.VectorQualities.M_Think_3is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Think 4ew" 		:q=new FL.VectorQualities.M_Think_4ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Sense 1ew" 		:q=new FL.VectorQualities.M_Sense_1ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Sense 2ew" 		:q=new FL.VectorQualities.M_Sense_2ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Sense 3ew" 		:q=new FL.VectorQualities.M_Sense_3ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M Sense 4ew" 		:q=new FL.VectorQualities.M_Sense_4ew		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M weakness" 	:q=new FL.VectorQualities.M_weakness		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M iNtuit 1is" 	:q=new FL.VectorQualities.M_iNtuit_1is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M iNtuit 2is" 	:q=new FL.VectorQualities.M_iNtuit_2is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M iNtuit 3is" 	:q=new FL.VectorQualities.M_iNtuit_3is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M iNtuit 4is" 	:q=new FL.VectorQualities.M_iNtuit_4is		(ni,cla,rom,par); inhVq( q,par);return q;

	case "M dysphoria iw" 	:q=new FL.VectorQualities.M_dysphoria_iw	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M defeat is" 		:q=new FL.VectorQualities.M_defeat_is		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M fake ew" 		:q=new FL.VectorQualities.M_fake_ew			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M epiphany es" 	:q=new FL.VectorQualities.M_epiphany_es		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M detach iw" 		:q=new FL.VectorQualities.M_detach_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M burden is" 		:q=new FL.VectorQualities.M_burden_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M happiness ew" 	:q=new FL.VectorQualities.M_happiness_ew	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M fun es" 		:q=new FL.VectorQualities.M_fun_es 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M fear iw" 		:q=new FL.VectorQualities.M_fear_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M love is" 		:q=new FL.VectorQualities.M_love_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M style ew" 		:q=new FL.VectorQualities.M_style_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M can es" 		:q=new FL.VectorQualities.M_can_es 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M belief iw" 		:q=new FL.VectorQualities.M_belief_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M like is" 		:q=new FL.VectorQualities.M_like_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M motive ew" 		:q=new FL.VectorQualities.M_motive_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M peace es" 		:q=new FL.VectorQualities.M_peace_es 		(ni,cla,rom,par); inhVq( q,par);return q;

	case "M body es" 		:q=new FL.VectorQualities.M_body_es			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M need ew" 		:q=new FL.VectorQualities.M_need_ew			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M tool is" 		:q=new FL.VectorQualities.M_tool_is			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M method iw" 		:q=new FL.VectorQualities.M_method_iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M pain es" 		:q=new FL.VectorQualities.M_pain_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M life ew" 		:q=new FL.VectorQualities.M_life_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M order is" 		:q=new FL.VectorQualities.M_order_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M should iw" 		:q=new FL.VectorQualities.M_should_iw		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M shame es" 		:q=new FL.VectorQualities.M_shame_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M problem ew" 	:q=new FL.VectorQualities.M_problem_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M social is" 		:q=new FL.VectorQualities.M_social_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M right iw" 		:q=new FL.VectorQualities.M_right_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M fail es" 		:q=new FL.VectorQualities.M_fail_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M loss ew" 		:q=new FL.VectorQualities.M_loss_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M wrong is" 		:q=new FL.VectorQualities.M_wrong_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M success iw" 	:q=new FL.VectorQualities.M_success_iw 		(ni,cla,rom,par); inhVq( q,par);return q;

	case "M destroy iw" 	:q=new FL.VectorQualities.M_destroy_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M confusion is" 	:q=new FL.VectorQualities.M_confusion_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M apathy ew" 		:q=new FL.VectorQualities.M_apathy_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M beauty es" 		:q=new FL.VectorQualities.M_beauty_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M hate iw" 		:q=new FL.VectorQualities.M_hate_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M awkward is" 	:q=new FL.VectorQualities.M_awkward_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M freedom ew" 	:q=new FL.VectorQualities.M_freedom_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M event es" 		:q=new FL.VectorQualities.M_event_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M greed iw" 		:q=new FL.VectorQualities.M_greed_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M culture is" 	:q=new FL.VectorQualities.M_culture_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M join ew" 		:q=new FL.VectorQualities.M_join_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M could es" 		:q=new FL.VectorQualities.M_could_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M norm iw" 		:q=new FL.VectorQualities.M_norm_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M want is" 		:q=new FL.VectorQualities.M_want_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M integrity ew" 	:q=new FL.VectorQualities.M_integrity_ew 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M innocence es" 	:q=new FL.VectorQualities.M_innocence_es 	(ni,cla,rom,par); inhVq( q,par);return q;

	case "M form es" 		:q=new FL.VectorQualities.M_form_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M meaning ew" 	:q=new FL.VectorQualities.M_meaning_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M kind is" 		:q=new FL.VectorQualities.M_kind_is 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M reason iw" 		:q=new FL.VectorQualities.M_reason_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M exclude es" 	:q=new FL.VectorQualities.M_exclude_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M purpose ew" 	:q=new FL.VectorQualities.M_purpose_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M use is" 		:q=new FL.VectorQualities.M_use_is 			(ni,cla,rom,par); inhVq( q,par);return q;
	case "M would iw" 		:q=new FL.VectorQualities.M_would_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M impose es" 		:q=new FL.VectorQualities.M_impose_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M reject ew" 		:q=new FL.VectorQualities.M_reject_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M metalevel is" 	:q=new FL.VectorQualities.M_metalevel_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M relevance iw" 	:q=new FL.VectorQualities.M_relevance_iw 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M condemn es" 	:q=new FL.VectorQualities.M_condemn_es 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M deceive ew" 	:q=new FL.VectorQualities.M_deceive_ew 		(ni,cla,rom,par); inhVq( q,par);return q;
	case "M withhold is" 	:q=new FL.VectorQualities.M_withhold_is 	(ni,cla,rom,par); inhVq( q,par);return q;
	case "M wisdom iw" 		:q=new FL.VectorQualities.M_wisdom_iw 		(ni,cla,rom,par); inhVq( q,par);return q;
}}
function inhVq( v,parent){ if(parent){ v.parent=parent.vQs.find(o => o.ni ===v.ni)}}
/*							 if()

	if(!parent){ var q=v.ni.charAt(0); switch(q){
		case "M" : AB.vQsM.push( v);break; 	case "L" : AB.vQsL.push( v);break;
		case "U" : AB.vQsU.push( v);break; 	case "O" : AB.vQsO.push( v)}}}*/

FL.VectorQualities = { seed:[
	"F strength", 	"F Feel 0is", 	"F Think 0ew",
	"F Feel 1iw",  		"F Feel 2is",  	"F Feel 3ew",  		"F Feel 4is",  		"F Think 1es", 	"F Think 2ew", 		"F Think 3is", 		"F Think 4iw",
	"F Sense 1es", 		"F Sense 2ew", 	"F Sense 3ew", 		"F Sense 4ew", 		"F iNtuit 1iw", "F iNtuit 2is", 	"F iNtuit 3ew", 	"F iNtuit 4es",
	"F dysphoria iw", 	"F defeat is", 	"F fake ew", 		"F epiphany es",	"F detach iw", 	"F burden is", 		"F happiness ew", 	"F fun es",
	"F fear iw", 		"F love is", 	"F style ew", 		"F can es", 		"F belief iw", 	"F like is",		"F motive ew", 		"F peace es",
	"F body es", 		"F need ew", 	"F tool is", 		"F method iw", 		"F pain es", 	"F life ew", 		"F order is", 		"F should iw",
	"F shame es",		"F problem ew",	"F social is", 		"F right iw",		"F fail es", 	"F loss ew", 		"F wrong is", 		"F success iw",
	"F norm iw", 		"F want is", 	"F integrity ew", 	"F innocence es", 	"F greed iw", 	"F culture is",		"F join ew", 		"F could es",
	"F hate iw", 		"F awkward is",	"F freedom ew", 	"F event es", 		"F destroy iw",	"F confusion is", 	"F apathy ew", 		"F beauty es",
	"F form es", 		"F meaning ew", "F kind is", 		"F reason iw", 		"F exclude es", "F purpose ew", 	"F use is", 		"F would iw",
	"F impose es", 		"F reject ew", 	"F metalevel is", 	"F relevance iw", 	"F condemn es", "F deceive ew", 	"F withhold is", 	"F wisdom iw",
	"M weakness", 	"M Feel 0is", 	"M Think 0ew",
	"M Feel 1iw",  		"M Feel 2is",  	"M Feel 3ew",  		"M Feel 4is",  		"M Think 1es", 	"M Think 2ew", 		"M Think 3is", 		"M Think 4iw",
	"M Sense 1ew", 		"M Sense 2ew", 	"M Sense 3ew", 		"M Sense 4ew", 		"M iNtuit 1iw", "M iNtuit 2is", 	"M iNtuit 3ew", 	"M iNtuit 4es",
	"M dysphoria iw", 	"M defeat is", 	"M fake ew", 		"M epiphany es",	"M detach iw", 	"M burden is", 		"M happiness ew", 	"M fun es",
	"M fear iw", 		"M love is", 	"M style ew", 		"M can es", 		"M belief iw", 	"M like is",		"M motive ew", 		"M peace es",
	"M body es", 		"M need ew", 	"M tool is", 		"M method iw", 		"M pain es", 	"M life ew", 		"M order is", 		"M should iw",
	"M shame es",		"M problem ew",	"M social is", 		"M right iw",		"M fail es", 	"M loss ew", 		"M wrong is", 		"M success iw",
	"M norm iw", 		"M want is", 	"M integrity ew", 	"M innocence es", 	"M greed iw", 	"M culture is",		"M join ew", 		"M could es",
	"M hate iw", 		"M awkward is",	"M freedom ew", 	"M event es", 		"M destroy iw",	"M confusion is", 	"M apathy ew", 		"M beauty es",
	"M form es", 		"M meaning ew", "M kind is", 		"M reason iw", 		"M exclude es", "M purpose ew", 	"M use is", 		"M would iw",
	"M impose es", 		"M reject ew", 	"M metalevel is", 	"M relevance iw", 	"M condemn es", "M deceive ew", 	"M withhold is", 	"M wisdom iw"],
	F_strength	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 0,0, 0,false,true, "strength", 	"strong introv.\n romantic\n quality"		)},
	F_Feel_0is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,0, 0,false,false,"meditate", 	"introverted\n gnostic\n emptiness"	)},
	F_Think_0ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,0, 0,true, false,"anticipate",	"extroverted\n rational\n attention")},
	F_Feel_1iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1, 0,false,false,undefined, 	"introverted\n weak\n Feeling" 		)},
	F_Feel_2is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2, 0,false,true, undefined, 	"introverted\n strong\n Feeling" 	)},
	F_Feel_3ew 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3, 0,true, false,undefined, 	"extroverted\n weak\n Feeling" 		)},
	F_Feel_4es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4, 0,true, true, undefined, 	"introverted\n strong\n Feeling" 	)},
	F_Think_1es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1, 0,true, true, undefined, 	"extroverted\n strong\n Thinking" 	)},
	F_Think_2ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2, 0,true, false,undefined, 	"extroverted\n weak\n Thinking" 	)},
	F_Think_3is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3, 0,false,true, undefined, 	"introverted\n strong\n Thinking" 	)},
	F_Think_4iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4, 0,false,false,undefined, 	"introverted\n weak\n Thinking" 	)},
	F_Sense_1es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,0,-1,true, false,undefined, 	"extroverted\n strong\n Sensing"	)},
	F_Sense_2ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,0,-2,true, false,undefined, 	"extroverted\n weak\n Sensing" 		)},
	F_Sense_3is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,0,-3,true, false,undefined, 	"introverted\n strong\n Sensing"	)},
	F_Sense_4iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,0,-4,true, false,undefined, 	"introverted\n weak\n Sensing"		)},
	F_iNtuit_1iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,0, 1,false,false,undefined, 	"introverted\n weak\n iNtuition"	)},
	F_iNtuit_2is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,0, 2,false,true, undefined, 	"introverted\n strong\n iNtuition" 	)},
	F_iNtuit_3ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,0, 3,true, false,undefined, 	"extroverted\n weak\n iNtuition" 	)},
	F_iNtuit_4es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,0, 4,true, true, undefined, 	"extroverted\n strong\n iNtuition" 	)},

	F_dysphoria_iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1,-4,false,false,undefined, 	"Something\n bad happens\n to us." 			)},
	F_defeat_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2,-4,false,true, undefined, 	"That isn't\n possible\n for us." 			)},
	F_fake_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3,-4,true, false,undefined, 	"That\n makes us\n pretentious." 				)},
	F_epiphany_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4,-4,true, true, undefined, 	"Something\n good happens\n to us." 			)},
	F_detach_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1,-3,false,false,undefined, 	"That breaks\n us apart." 		 				)},
	F_burden_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2,-3,false,true, undefined, 	"That makes us\n feel bad about\n ourselves." )},
	F_happiness_ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3,-3,true, false,undefined, 	"That keeps\n us together." 					)},
	F_fun_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4,-3,true, true, undefined, 	"That makes\n us attractive." 					)},
	F_fear_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1,-2,false,false,undefined, 	"That\n makes us\n feel bad." 				)},
	F_love_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2,-2,false,true, undefined, 	"That brings\n us together." 					)},
	F_style_ew 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3,-2,true, false,undefined, 	"That\n distinguishes\n us." 					)},
	F_can_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4,-2,true, true, undefined, 	"That is\n possible\n for us." 				)},
	F_belief_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1,-1,false,false,undefined, 	"That matters\n to us." 		 				)},
	F_like_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2,-1,false,true, undefined, 	"That makes\n us feel good."					)},
	F_motive_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3,-1,true, false,undefined, 	"That\n unites us." 							)},
	F_peace_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4,-1,true, true, undefined, 	"What\n happens\n to us?" 					)},

	F_fail_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1,-4,true, true, undefined, 	"I do\n something\n bad." 					)},
	F_loss_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2,-4,true, false,undefined, 	"I need this\n but don't\n preserve it." 		)},
	F_wrong_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3,-4,false,true, undefined, 	"I harm\n someone for\n no reason." 			)},
	F_success_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4,-4,false,false,undefined, 	"I do\n something\n good." 					)},
	F_shame_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1,-3,true, true, undefined, 	"Others need\n help because\n of me." 		)},
	F_problem_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2,-3,true, false,undefined, 	"I need help\n with this." 					)},
	F_social_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3,-3,false,true, undefined, 	"I cooperate." 									)},
	F_right_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4,-3,false,false,undefined, 	"This makes\n me a priority." 					)},
	F_pain_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1,-2,true, true, undefined, 	"This makes\n me not whole." 					)},
	F_life_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2,-2,true, false,undefined, 	"I preserve\n this." 							)},
	F_order_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3,-2,false,true, undefined, 	"This puts me\n in control." 					)},
	F_should_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4,-2,false,false,undefined, 	"This puts me\n in charge." 					)},
	F_body_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1,-1,true, true, undefined, 	"I perceive\n this." 		 					)},
	F_need_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2,-1,true, false,undefined, 	"This makes\n me whole."						)},
	F_tool_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3,-1,false,true, undefined, 	"This\n makes me\n independent." 				)},
	F_method_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4,-1,false,false,undefined, 	"How do I\n do this?" 							)},

	F_destroy_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1, 4,false,false,undefined, 	"We do\n something\n bad." 					)},
	F_confusion_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2, 4,false,true, undefined, 	"We don't\n know what\n we want." 			)},
	F_apathy_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3, 4,true, false,undefined, 	"We don't\n want\n anything." 				)},
	F_beauty_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4, 4,true, true, undefined, 	"We do\n something\n good." 					)},
	F_hate_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1, 3,false,false,undefined, 	"We don't\n want them." 			 			)},
	F_awkward_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2, 3,false,true, undefined, 	"We don't\n want to do\n this together." 		)},
	F_freedom_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3, 3,true, false,undefined, 	"We let this\n happen."						)},
	F_event_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4, 3,true, true, undefined, 	"We pay\n attention\n to this."				)},
	F_greed_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1, 2,false,false,undefined, 	"We don't\n want this." 						)},
	F_culture_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2, 2,false,true, undefined, 	"We want to\n do things\n this way."			)},
	F_join_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3, 2,true, false,undefined, 	"We do this\n together." 						)},
	F_could_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4, 2,true, true, undefined, 	"We prepare\n for this." 						)},
	F_norm_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,1, 1,false,false,undefined, 	"We do this." 				 					)},
	F_want_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,2, 1,false,true, undefined, 	"We want this."									)},
	F_integrity_ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,3, 1,true, false,undefined, 	"We are\n these people."						)},
	F_innocence_es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false,-1,4, 1,true, true, undefined, 	"Who does\n this, when\n and where?" 			)},

	F_condemn_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1, 4,true, true, undefined, 	"condemn", 	"You are bad."						)},
	F_deceive_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2, 4,true, false,undefined, 	"You shall\n falsely relate\n to that." 		)},
	F_withhold_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3, 4,false,true, undefined, 	"You would\n harm that."						)},
	F_wisdom_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4, 4,false,false,undefined, 	"You are good." 								)},
	F_impose_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1, 3,true, true, undefined, 	"You aren't\n like that." 						)},
	F_reject_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2, 3,true, false,undefined, 	"You don't\n relate to that." 					)},
	F_metalevel_is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3, 3,false,true, undefined, 	"You can\n relate\n like that."				)},
	F_relevance_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4, 3,false,false,undefined, 	"You would\n contribute\n to that." 			)},
	F_exclude_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1, 2,true, true, undefined, 	"You can't\n be that." 						)},
	F_purpose_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2, 2,true, false,undefined, 	"You relate\n like that." 						)},
	F_use_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3, 2,false,true, undefined, 	"You relate\n to that." 						)},
	F_would_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4, 2,false,false,undefined, 	"You would\n relate to that."					)},
	F_form_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,1, 1,true, true, undefined, 	"You are that." 				 				)},
	F_meaning_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,2, 1,true, false,undefined, 	"You can\n be that."							)},
	F_kind_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,3, 1,false,true, undefined, 	"You are\n like that." 						)},
	F_reason_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,false, 1,4, 1,false,false,undefined, 	"Why are you\n like that?"						)},

// An Accurate Way To Measure Faculty Processing Speed
//----------------------------------------------------
// There has been no obvious way to measure empirically and exactly
// how long do cognitive events last. This is one. The moment of penetration
// comes from origin M_weakness to F_strength in the direction (±9,±9),
// pulling back from F_strength to M_weakness in the same direction.
// Vector magnitude grows exponentially as powers of 9.
// Apparently the duration of memory episodes shortens as vector magnitude
// increases until climax. After climax the duration of memory episodes
// diverges. But until the climax the precision of the timing could be
// measured in milliseconds. We could obtain exact values for how long does
// it take for functions and circuits to perform events under some
// controlled circumstances.

/*
Quiz needs sidebar feature tool for "autist mode" in which each question is either true or false.
Also "anonymous" mode in which the text is small
In reality the quiz is binary anyway
*/

	M_weakness	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  0,0, 0,false,true, "weakness", 	"weak introv.\n romantic\n quality"		)},
	M_Feel_0is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,0, 0,false,false,"meditate", 	"introverted\n gnostic\n emptiness"	)},
	M_Think_0ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,0, 0,true, false,"anticipate",	"extroverted\n rational\n attention")},
	M_Feel_1iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1, 0,false,false,undefined, 	"introverted\n weak\n Feeling" 		)},
	M_Feel_2is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2, 0,false,true, undefined, 	"introverted\n strong\n Feeling" 	)},
	M_Feel_3ew 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3, 0,true, false,undefined, 	"extroverted\n weak\n Feeling" 		)},
	M_Feel_4es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4, 0,true, true, undefined, 	"introverted\n strong\n Feeling" 	)},
	M_Think_1es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1, 0,true, true, undefined, 	"extroverted\n strong\n Thinking" 	)},
	M_Think_2ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2, 0,true, false,undefined, 	"extroverted\n weak\n Thinking" 	)},
	M_Think_3is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3, 0,false,true, undefined, 	"introverted\n strong\n Thinking" 	)},
	M_Think_4iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4, 0,false,false,undefined, 	"introverted\n weak\n Thinking" 	)},
	M_Sense_1es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,0,-1,true, false,undefined, 	"extroverted\n strong\n Sensing"	)},
	M_Sense_2ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,0,-2,true, false,undefined, 	"extroverted\n weak\n Sensing" 		)},
	M_Sense_3is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,0,-3,true, false,undefined, 	"introverted\n strong\n Sensing"	)},
	M_Sense_4iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,0,-4,true, false,undefined, 	"introverted\n weak\n Sensing"		)},
	M_iNtuit_1iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,0, 1,false,false,undefined, 	"introverted\n weak\n iNtuition"	)},
	M_iNtuit_2is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,0, 2,false,true, undefined, 	"introverted\n strong\n iNtuition" 	)},
	M_iNtuit_3ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,0, 3,true, false,undefined, 	"extroverted\n weak\n iNtuition" 	)},
	M_iNtuit_4es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,0, 4,true, true, undefined, 	"extroverted\n strong\n iNtuition" 	)},

	M_dysphoria_iw 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1,-4,false,false,undefined, 	"Something\n bad happens\n to us." 			)},
	M_defeat_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2,-4,false,true, undefined, 	"That isn't\n possible\n for us." 			)},
	M_fake_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3,-4,true, false,undefined, 	"That\n makes us\n pretentious." 				)},
	M_epiphany_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4,-4,true, true, undefined, 	"Something\n good happens\n to us." 			)},
	M_detach_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1,-3,false,false,undefined, 	"That breaks\n us apart." 		 				)},
	M_burden_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2,-3,false,true, undefined, 	"That makes us\n feel bad about\n ourselves." )},
	M_happiness_ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3,-3,true, false,undefined, 	"That keeps\n us together." 					)},
	M_fun_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4,-3,true, true, undefined, 	"That makes\n us attractive." 					)},
	M_fear_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1,-2,false,false,undefined, 	"That\n makes us\n feel bad." 				)},
	M_love_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2,-2,false,true, undefined, 	"That brings\n us together." 					)},
	M_style_ew 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3,-2,true, false,undefined, 	"That\n distinguishes\n us." 					)},
	M_can_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4,-2,true, true, undefined, 	"That is\n possible\n for us." 				)},
	M_belief_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1,-1,false,false,undefined, 	"That matters\n to us." 		 				)},
	M_like_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2,-1,false,true, undefined, 	"That makes\n us feel good."					)},
	M_motive_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3,-1,true, false,undefined, 	"That\n unites us." 							)},
	M_peace_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4,-1,true, true, undefined, 	"What\n happens\n to us?" 					)},

	M_fail_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1,-4,true, true, undefined, 	"I do\n something\n bad." 					)},
	M_loss_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2,-4,true, false,undefined, 	"I need this\n but don't\n preserve it." 		)},
	M_wrong_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3,-4,false,true, undefined, 	"I harm\n someone for\n no reason." 			)},
	M_success_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4,-4,false,false,undefined, 	"I do\n something\n good." 					)},
	M_shame_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1,-3,true, true, undefined, 	"Others need\n help because\n of me." 		)},
	M_problem_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2,-3,true, false,undefined, 	"I need help\n with this." 					)},
	M_social_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3,-3,false,true, undefined, 	"I cooperate." 									)},
	M_right_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4,-3,false,false,undefined, 	"This makes\n me a priority." 					)},
	M_pain_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1,-2,true, true, undefined, 	"This makes\n me not whole." 					)},
	M_life_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2,-2,true, false,undefined, 	"I preserve\n this." 							)},
	M_order_is 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3,-2,false,true, undefined, 	"This puts me\n in control." 					)},
	M_should_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4,-2,false,false,undefined, 	"This puts me\n in charge." 					)},
	M_body_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1,-1,true, true, undefined, 	"I perceive\n this." 		 					)},
	M_need_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2,-1,true, false,undefined, 	"This makes\n me whole."						)},
	M_tool_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3,-1,false,true, undefined, 	"This\n makes me\n independent." 				)},
	M_method_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4,-1,false,false,undefined, 	"How do I\n do this?" 							)},

	M_destroy_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1, 4,false,false,undefined, 	"We do\n something\n bad." 					)},
	M_confusion_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2, 4,false,true, undefined, 	"We don't\n know what\n we want." 			)},
	M_apathy_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3, 4,true, false,undefined, 	"We don't\n want\n anything." 				)},
	M_beauty_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4, 4,true, true, undefined, 	"We do\n something\n good." 					)},
	M_hate_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1, 3,false,false,undefined, 	"We don't\n want them." 			 			)},
	M_awkward_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2, 3,false,true, undefined, 	"We don't\n want to do\n this together." 		)},
	M_freedom_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3, 3,true, false,undefined, 	"We let this\n happen."						)},
	M_event_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4, 3,true, true, undefined, 	"We pay\n attention\n to this."				)},
	M_greed_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1, 2,false,false,undefined, 	"We don't\n want this." 						)},
	M_culture_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2, 2,false,true, undefined, 	"We want to\n do things\n this way."			)},
	M_join_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3, 2,true, false,undefined, 	"We do this\n together." 						)},
	M_could_es 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4, 2,true, true, undefined, 	"We prepare\n for this." 						)},
	M_norm_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,1, 1,false,false,undefined, 	"We do this." 				 					)},
	M_want_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,2, 1,false,true, undefined, 	"We want this."									)},
	M_integrity_ew 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,3, 1,true, false,undefined, 	"We are\n these people."						)},
	M_innocence_es 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true, -1,4, 1,true, true, undefined, 	"Who does\n this, when\n and where?" 			)},

	M_condemn_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1, 4,true, true, undefined, 	"condemn", 	"You are bad."						)},
	M_deceive_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2, 4,true, false,undefined, 	"You shall\n falsely relate\n to that." 		)},
	M_withhold_is	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3, 4,false,true, undefined, 	"You would\n harm that."						)},
	M_wisdom_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4, 4,false,false,undefined, 	"You are good." 								)},
	M_impose_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1, 3,true, true, undefined, 	"You aren't\n like that." 						)},
	M_reject_ew		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2, 3,true, false,undefined, 	"You don't\n relate to that." 					)},
	M_metalevel_is 	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3, 3,false,true, undefined, 	"You can\n relate\n like that."				)},
	M_relevance_iw	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4, 3,false,false,undefined, 	"You would\n contribute\n to that." 			)},
	M_exclude_es	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1, 2,true, true, undefined, 	"You can't\n be that." 						)},
	M_purpose_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2, 2,true, false,undefined, 	"You relate\n like that." 						)},
	M_use_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3, 2,false,true, undefined, 	"You relate\n to that." 						)},
	M_would_iw 		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4, 2,false,false,undefined, 	"You would\n relate to that."					)},
	M_form_es		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,1, 1,true, true, undefined, 	"You are that." 				 				)},
	M_meaning_ew	:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,2, 1,true, false,undefined, 	"You can\n be that."							)},
	M_kind_is		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,3, 1,false,true, undefined, 	"You are\n like that." 						)},
	M_reason_iw		:function(ni,cla,rom,par){mkVq2(this,ni,cla,rom,par,true,  1,4, 1,false,false,undefined, 	"Why are you\n like that?"						)}};

function getVq(a,l,r,c){ var v=null; for(var i=0; i<l; i++){ if((a[i].r===r)&&(a[i].c===c)){ v=a[i]}}return v}
function getByNis(a,l,nis,nisL){ var b=null; var q=[];
	for(var i=0; i<l; i++){ for(var j=0; j<nisL; j++) { if(nis[j]===a[i].ni){ q.push(a[i])}}}return q}
function getByNi1st(a,l,c){ var b=null; var q=[];
	for(var i=0; i<l; i++){ if((a[i].ni.charAt(0)===c)&&(a[i].ni.charAt(1)==='_')){ q.push(a[i])}}return q}
function mkVq2(o,ni,cla,rom,par,mas,FT,c,r,ie,s,nI,desc){ o.ni=ni; o.rom=rom; o.cla=cla; o.sQs=o.sQs;
	o.mas=mas; o.FT=FT; o.c=c; o.r=r; o.ie=ie; o.s=s; o.desc=desc;
	nI ? o.nI=nI : o.nI=ni.split('_')[1];
	FT===0 ? o.nG=o.nI : mas ? o.nG="♂ "+o.nI : o.nG="♀ "+o.nI;}




function evalRom(s){ if(s.at.ni==="Sandbox"){}}


function initXtR( s){ var b=null; switch(s.tYl.ab.ni){
	case "Fi" : s.safe ? b =mkSq("HIGH_2_3", s.tY.iEs, s.ab) : b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) 	;return b;
	case "Fe" : s.safe ? b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) : b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) 	;return b;
	case "Si" : s.safe ? b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) : b =mkSq("HIGH_2_3", s.tY.iEs, s.ab)  ;return b;
	case "Se" : s.safe ? b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) : b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) 	;return b;
	case "Ni" : s.safe ? b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) : b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) 	;return b;
	case "Ne" : s.safe ? b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) : b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) 	;return b;
	case "Ti" : s.safe ? b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) : b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) 	;return b;
	case "Te" : s.safe ? b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) : b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) 	;return b}}
function initXtC( s){ var b=null; console.log(s); switch(s.tYl.ab.ni){ 
	case "Fi":case "Ni": s.xtR.str ? b=mkSq("FEEL_4i", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_2i", s.tY.iEs, s.ab) ;return b;
	case "Fe":case "Ne": s.xtR.str ? b=mkSq("FEEL_3e", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_1i", s.tY.iEs, s.ab) ;return b; 
	case "Si":case "Ti": s.xtR.str ? b=mkSq("THINK_3i", s.tY.iEs, s.ab) : b=mkSq("THINK_1i", s.tY.iEs, s.ab);return b; 
	case "Se":case "Te": s.xtR.str ? b=mkSq("THINK_4e", s.tY.iEs, s.ab) : b=mkSq("THINK_2e", s.tY.iEs, s.ab);return b}}
function initXtn( s){ var b=mkVqByScalars( s.xtR,s.xtC,s.ab,s); console.log(b);return b}

/*function initNtn(iE){ var b=null; switch(iE.ni){
		case "Fi" : case "Ni" : b = mkSq("FEEL_0i"); 	return b;
		case "Fe" : case "Ne" : b = mkSq("FEEL_1e"); 	return b;
		case "Si" : case "Ti" : b = mkSq("THINK_0e"); 	return b;
		case "Se" : case "Te" : b = mkSq("THINK_1i"); 	return b}}
function initXtn(iE,ntn){ var b=null; switch(ntn.ni){
		case "FEEL_0i"  	: if(iE.ni==="Fi"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "FEEL_1e"  	: if(iE.ni==="Fe"){ b =mkSq("DLBR_1_4")}	else{b =mkSq("UNITY_1_4")}return b;
		case "THINK_0e"  	: if(iE.ni==="Se"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "THINK_1i"  	: if(iE.ni==="Si"){ b =mkSq("PHEN_4_1")}	else{b =mkSq("HRMNY_4_1")}return b}}*/
//replace sense 0 and intuit 0 with inspection of environment



function precalcMoods(seed,qua,parent){ var ms=[]; var m=null;
	for(let n=0; n<AB.mDsL; n++){ m=mkMood(seed[n],qua,parent); ms.push(m);} return ms}
function mkMood( ni,qua,parent,arr){ var m=null; switch(ni){
	case "MAS_MAS_obj_p_"   : m= new FL.Moods.MAS_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_m" 	: m= new FL.Moods.MAS_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_p" 	: m= new FL.Moods.MAS_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_mp"	: m= new FL.Moods.MAS_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_pm"	: m= new FL.Moods.MAS_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_b" 	: m= new FL.Moods.MAS_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_"   : m= new FL.Moods.MAS_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_m" 	: m= new FL.Moods.MAS_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_p" 	: m= new FL.Moods.MAS_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_mp" : m= new FL.Moods.MAS_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_pm" : m= new FL.Moods.MAS_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_b" 	: m= new FL.Moods.MAS_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "mas_MAS_obj_p_"   : m= new FL.Moods.mas_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_m" 	: m= new FL.Moods.mas_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_p" 	: m= new FL.Moods.mas_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_mp"	: m= new FL.Moods.mas_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_pm"	: m= new FL.Moods.mas_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_b" 	: m= new FL.Moods.mas_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_"   : m= new FL.Moods.mas_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_m" 	: m= new FL.Moods.mas_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_p" 	: m= new FL.Moods.mas_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_mp" : m= new FL.Moods.mas_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_pm" : m= new FL.Moods.mas_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_b" 	: m= new FL.Moods.mas_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "fem_MAS_obj_p_"   : m= new FL.Moods.fem_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_m" 	: m= new FL.Moods.fem_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_p" 	: m= new FL.Moods.fem_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_mp"	: m= new FL.Moods.fem_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_pm"	: m= new FL.Moods.fem_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_b" 	: m= new FL.Moods.fem_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_"   : m= new FL.Moods.fem_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_m" 	: m= new FL.Moods.fem_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_p" 	: m= new FL.Moods.fem_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_mp" : m= new FL.Moods.fem_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_pm" : m= new FL.Moods.fem_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_b" 	: m= new FL.Moods.fem_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_MAS_obj_p_"   : m= new FL.Moods.FEM_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_m" 	: m= new FL.Moods.FEM_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_p" 	: m= new FL.Moods.FEM_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_mp"	: m= new FL.Moods.FEM_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_pm"	: m= new FL.Moods.FEM_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_b" 	: m= new FL.Moods.FEM_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_"   : m= new FL.Moods.FEM_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_m" 	: m= new FL.Moods.FEM_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_p" 	: m= new FL.Moods.FEM_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_mp" : m= new FL.Moods.FEM_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_pm" : m= new FL.Moods.FEM_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_b" 	: m= new FL.Moods.FEM_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_mas_obj_p_"   : m= new FL.Moods.MAS_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_m" 	: m= new FL.Moods.MAS_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_p" 	: m= new FL.Moods.MAS_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_mp" : m= new FL.Moods.MAS_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_pm" : m= new FL.Moods.MAS_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_b" 	: m= new FL.Moods.MAS_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_"   : m= new FL.Moods.MAS_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_m" 	: m= new FL.Moods.MAS_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_p" 	: m= new FL.Moods.MAS_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_mp" : m= new FL.Moods.MAS_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_pm" : m= new FL.Moods.MAS_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_b" 	: m= new FL.Moods.MAS_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_mas_obj_p_"   : m= new FL.Moods.mas_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_m" 	: m= new FL.Moods.mas_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_p" 	: m= new FL.Moods.mas_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_mp" : m= new FL.Moods.mas_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_pm" : m= new FL.Moods.mas_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_b" 	: m= new FL.Moods.mas_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_"   : m= new FL.Moods.mas_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_m" 	: m= new FL.Moods.mas_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_p" 	: m= new FL.Moods.mas_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_mp" : m= new FL.Moods.mas_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_pm" : m= new FL.Moods.mas_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_b" 	: m= new FL.Moods.mas_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_mas_obj_p_"   : m= new FL.Moods.fem_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_m" 	: m= new FL.Moods.fem_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_p" 	: m= new FL.Moods.fem_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_mp" : m= new FL.Moods.fem_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_pm" : m= new FL.Moods.fem_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_b" 	: m= new FL.Moods.fem_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_"   : m= new FL.Moods.fem_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_m" 	: m= new FL.Moods.fem_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_p" 	: m= new FL.Moods.fem_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_mp" : m= new FL.Moods.fem_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_pm" : m= new FL.Moods.fem_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_b" 	: m= new FL.Moods.fem_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_mas_obj_p_"   : m= new FL.Moods.FEM_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_m" 	: m= new FL.Moods.FEM_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_p" 	: m= new FL.Moods.FEM_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_mp" : m= new FL.Moods.FEM_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_pm" : m= new FL.Moods.FEM_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_b" 	: m= new FL.Moods.FEM_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_"   : m= new FL.Moods.FEM_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_m" 	: m= new FL.Moods.FEM_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_p" 	: m= new FL.Moods.FEM_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_mp" : m= new FL.Moods.FEM_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_pm" : m= new FL.Moods.FEM_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_b" 	: m= new FL.Moods.FEM_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_fem_obj_p_"   : m= new FL.Moods.MAS_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_m" 	: m= new FL.Moods.MAS_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_p" 	: m= new FL.Moods.MAS_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_mp" : m= new FL.Moods.MAS_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_pm" : m= new FL.Moods.MAS_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_b" 	: m= new FL.Moods.MAS_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_"   : m= new FL.Moods.MAS_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_m" 	: m= new FL.Moods.MAS_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_p" 	: m= new FL.Moods.MAS_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_mp" : m= new FL.Moods.MAS_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_pm" : m= new FL.Moods.MAS_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_b" 	: m= new FL.Moods.MAS_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_fem_obj_p_"   : m= new FL.Moods.mas_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_m" 	: m= new FL.Moods.mas_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_p" 	: m= new FL.Moods.mas_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_mp" : m= new FL.Moods.mas_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_pm" : m= new FL.Moods.mas_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_b" 	: m= new FL.Moods.mas_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_"   : m= new FL.Moods.mas_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_m" 	: m= new FL.Moods.mas_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_p" 	: m= new FL.Moods.mas_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_mp" : m= new FL.Moods.mas_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_pm" : m= new FL.Moods.mas_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_b" 	: m= new FL.Moods.mas_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_fem_obj_p_"   : m= new FL.Moods.fem_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_m" 	: m= new FL.Moods.fem_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_p" 	: m= new FL.Moods.fem_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_mp" : m= new FL.Moods.fem_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_pm" : m= new FL.Moods.fem_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_b" 	: m= new FL.Moods.fem_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_"   : m= new FL.Moods.fem_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_m" 	: m= new FL.Moods.fem_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_p" 	: m= new FL.Moods.fem_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_mp" : m= new FL.Moods.fem_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_pm" : m= new FL.Moods.fem_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_b" 	: m= new FL.Moods.fem_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_fem_obj_p_"   : m= new FL.Moods.FEM_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_m" 	: m= new FL.Moods.FEM_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_p" 	: m= new FL.Moods.FEM_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_mp" : m= new FL.Moods.FEM_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_pm" : m= new FL.Moods.FEM_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_b" 	: m= new FL.Moods.FEM_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_"   : m= new FL.Moods.FEM_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_m" 	: m= new FL.Moods.FEM_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_p" 	: m= new FL.Moods.FEM_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_mp" : m= new FL.Moods.FEM_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_pm" : m= new FL.Moods.FEM_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_b" 	: m= new FL.Moods.FEM_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_FEM_obj_p_"   : m= new FL.Moods.MAS_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_m" 	: m= new FL.Moods.MAS_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_p" 	: m= new FL.Moods.MAS_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_mp" : m= new FL.Moods.MAS_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_pm" : m= new FL.Moods.MAS_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_b" 	: m= new FL.Moods.MAS_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_"   : m= new FL.Moods.MAS_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_m" 	: m= new FL.Moods.MAS_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_p" 	: m= new FL.Moods.MAS_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_mp" : m= new FL.Moods.MAS_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_pm" : m= new FL.Moods.MAS_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_b" 	: m= new FL.Moods.MAS_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_FEM_obj_p_"   : m= new FL.Moods.mas_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_m" 	: m= new FL.Moods.mas_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_p" 	: m= new FL.Moods.mas_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_mp" : m= new FL.Moods.mas_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_pm" : m= new FL.Moods.mas_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_b" 	: m= new FL.Moods.mas_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_"   : m= new FL.Moods.mas_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_m" 	: m= new FL.Moods.mas_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_p" 	: m= new FL.Moods.mas_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_mp" : m= new FL.Moods.mas_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_pm" : m= new FL.Moods.mas_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_b" 	: m= new FL.Moods.mas_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_FEM_obj_p_"   : m= new FL.Moods.fem_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_m" 	: m= new FL.Moods.fem_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_p" 	: m= new FL.Moods.fem_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_mp" : m= new FL.Moods.fem_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_pm" : m= new FL.Moods.fem_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_b" 	: m= new FL.Moods.fem_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_"   : m= new FL.Moods.fem_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_m" 	: m= new FL.Moods.fem_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_p" 	: m= new FL.Moods.fem_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_mp" : m= new FL.Moods.fem_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_pm" : m= new FL.Moods.fem_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_b" 	: m= new FL.Moods.fem_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_FEM_obj_p_"   : m= new FL.Moods.FEM_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_m" 	: m= new FL.Moods.FEM_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_p" 	: m= new FL.Moods.FEM_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_mp" : m= new FL.Moods.FEM_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_pm" : m= new FL.Moods.FEM_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_b" 	: m= new FL.Moods.FEM_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_"   : m= new FL.Moods.FEM_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_m" 	: m= new FL.Moods.FEM_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_p" 	: m= new FL.Moods.FEM_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_mp" : m= new FL.Moods.FEM_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_pm" : m= new FL.Moods.FEM_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_b" 	: m= new FL.Moods.FEM_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;


	case "MAS_MAS_sbj_p_"   : m= new FL.Moods.MAS_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_m"  : m= new FL.Moods.MAS_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_p"  : m= new FL.Moods.MAS_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_mp" : m= new FL.Moods.MAS_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_pm" : m= new FL.Moods.MAS_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_b"  : m= new FL.Moods.MAS_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_"   : m= new FL.Moods.MAS_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_m"  : m= new FL.Moods.MAS_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_p"  : m= new FL.Moods.MAS_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_mp" : m= new FL.Moods.MAS_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_pm" : m= new FL.Moods.MAS_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_b"  : m= new FL.Moods.MAS_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "mas_MAS_sbj_p_"   : m= new FL.Moods.mas_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_m"  : m= new FL.Moods.mas_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_p"  : m= new FL.Moods.mas_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_mp" : m= new FL.Moods.mas_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_pm" : m= new FL.Moods.mas_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_b"  : m= new FL.Moods.mas_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_"   : m= new FL.Moods.mas_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_m"  : m= new FL.Moods.mas_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_p"  : m= new FL.Moods.mas_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_mp" : m= new FL.Moods.mas_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_pm" : m= new FL.Moods.mas_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_b"  : m= new FL.Moods.mas_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "fem_MAS_sbj_p_"   : m= new FL.Moods.fem_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_m"  : m= new FL.Moods.fem_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_p"  : m= new FL.Moods.fem_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_mp" : m= new FL.Moods.fem_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_pm" : m= new FL.Moods.fem_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_b"  : m= new FL.Moods.fem_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_"   : m= new FL.Moods.fem_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_m"  : m= new FL.Moods.fem_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_p"  : m= new FL.Moods.fem_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_mp" : m= new FL.Moods.fem_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_pm" : m= new FL.Moods.fem_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_b"  : m= new FL.Moods.fem_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_MAS_sbj_p_"   : m= new FL.Moods.FEM_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_m"  : m= new FL.Moods.FEM_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_p"  : m= new FL.Moods.FEM_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_mp" : m= new FL.Moods.FEM_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_pm" : m= new FL.Moods.FEM_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_b"  : m= new FL.Moods.FEM_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_"   : m= new FL.Moods.FEM_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_m"  : m= new FL.Moods.FEM_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_p"  : m= new FL.Moods.FEM_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_mp" : m= new FL.Moods.FEM_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_pm" : m= new FL.Moods.FEM_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_b"  : m= new FL.Moods.FEM_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_mas_sbj_p_"   : m= new FL.Moods.MAS_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_m"  : m= new FL.Moods.MAS_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_p"  : m= new FL.Moods.MAS_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_mp" : m= new FL.Moods.MAS_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_pm" : m= new FL.Moods.MAS_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_b"  : m= new FL.Moods.MAS_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_"   : m= new FL.Moods.MAS_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_m"  : m= new FL.Moods.MAS_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_p"  : m= new FL.Moods.MAS_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_mp" : m= new FL.Moods.MAS_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_pm" : m= new FL.Moods.MAS_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_b"  : m= new FL.Moods.MAS_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_mas_sbj_p_"   : m= new FL.Moods.mas_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_m"  : m= new FL.Moods.mas_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_p"  : m= new FL.Moods.mas_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_mp" : m= new FL.Moods.mas_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_pm" : m= new FL.Moods.mas_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_b"  : m= new FL.Moods.mas_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_"   : m= new FL.Moods.mas_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_m"  : m= new FL.Moods.mas_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_p"  : m= new FL.Moods.mas_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_mp" : m= new FL.Moods.mas_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_pm" : m= new FL.Moods.mas_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_b"  : m= new FL.Moods.mas_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_mas_sbj_p_"   : m= new FL.Moods.fem_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_m"  : m= new FL.Moods.fem_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_p"  : m= new FL.Moods.fem_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_mp" : m= new FL.Moods.fem_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_pm" : m= new FL.Moods.fem_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_b"  : m= new FL.Moods.fem_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_"   : m= new FL.Moods.fem_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_m"  : m= new FL.Moods.fem_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_p"  : m= new FL.Moods.fem_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_mp" : m= new FL.Moods.fem_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_pm" : m= new FL.Moods.fem_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_b"  : m= new FL.Moods.fem_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_mas_sbj_p_"   : m= new FL.Moods.FEM_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_m"  : m= new FL.Moods.FEM_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_p"  : m= new FL.Moods.FEM_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_mp" : m= new FL.Moods.FEM_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_pm" : m= new FL.Moods.FEM_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_b"  : m= new FL.Moods.FEM_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_"   : m= new FL.Moods.FEM_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_m"  : m= new FL.Moods.FEM_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_p"  : m= new FL.Moods.FEM_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_mp" : m= new FL.Moods.FEM_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_pm" : m= new FL.Moods.FEM_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_b"  : m= new FL.Moods.FEM_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_fem_sbj_p_"   : m= new FL.Moods.MAS_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_m"  : m= new FL.Moods.MAS_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_p"  : m= new FL.Moods.MAS_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_mp" : m= new FL.Moods.MAS_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_pm" : m= new FL.Moods.MAS_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_b"  : m= new FL.Moods.MAS_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_"   : m= new FL.Moods.MAS_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_m"  : m= new FL.Moods.MAS_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_p"  : m= new FL.Moods.MAS_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_mp" : m= new FL.Moods.MAS_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_pm" : m= new FL.Moods.MAS_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_b"  : m= new FL.Moods.MAS_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_fem_sbj_p_"   : m= new FL.Moods.mas_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_m"  : m= new FL.Moods.mas_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_p"  : m= new FL.Moods.mas_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_mp" : m= new FL.Moods.mas_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_pm" : m= new FL.Moods.mas_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_b"  : m= new FL.Moods.mas_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_"   : m= new FL.Moods.mas_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_m"  : m= new FL.Moods.mas_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_p"  : m= new FL.Moods.mas_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_mp" : m= new FL.Moods.mas_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_pm" : m= new FL.Moods.mas_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_b"  : m= new FL.Moods.mas_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_fem_sbj_p_"   : m= new FL.Moods.fem_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_m"  : m= new FL.Moods.fem_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_p"  : m= new FL.Moods.fem_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_mp" : m= new FL.Moods.fem_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_pm" : m= new FL.Moods.fem_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_b"  : m= new FL.Moods.fem_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_"   : m= new FL.Moods.fem_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_m"  : m= new FL.Moods.fem_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_p"  : m= new FL.Moods.fem_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_mp" : m= new FL.Moods.fem_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_pm" : m= new FL.Moods.fem_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_b"  : m= new FL.Moods.fem_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_fem_sbj_p_"   : m= new FL.Moods.FEM_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_m"  : m= new FL.Moods.FEM_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_p"  : m= new FL.Moods.FEM_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_mp" : m= new FL.Moods.FEM_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_pm" : m= new FL.Moods.FEM_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_b"  : m= new FL.Moods.FEM_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_"   : m= new FL.Moods.FEM_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_m"  : m= new FL.Moods.FEM_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_p"  : m= new FL.Moods.FEM_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_mp" : m= new FL.Moods.FEM_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_pm" : m= new FL.Moods.FEM_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_b"  : m= new FL.Moods.FEM_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_FEM_sbj_p_"   : m= new FL.Moods.MAS_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_m"  : m= new FL.Moods.MAS_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_p"  : m= new FL.Moods.MAS_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_mp" : m= new FL.Moods.MAS_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_pm" : m= new FL.Moods.MAS_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_b"  : m= new FL.Moods.MAS_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_"   : m= new FL.Moods.MAS_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_m"  : m= new FL.Moods.MAS_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_p"  : m= new FL.Moods.MAS_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_mp" : m= new FL.Moods.MAS_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_pm" : m= new FL.Moods.MAS_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_b"  : m= new FL.Moods.MAS_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_FEM_sbj_p_"   : m= new FL.Moods.mas_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_m"  : m= new FL.Moods.mas_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_p"  : m= new FL.Moods.mas_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_mp" : m= new FL.Moods.mas_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_pm" : m= new FL.Moods.mas_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_b"  : m= new FL.Moods.mas_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_"   : m= new FL.Moods.mas_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_m"  : m= new FL.Moods.mas_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_p"  : m= new FL.Moods.mas_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_mp" : m= new FL.Moods.mas_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_pm" : m= new FL.Moods.mas_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_b"  : m= new FL.Moods.mas_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_FEM_sbj_p_"   : m= new FL.Moods.fem_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_m"  : m= new FL.Moods.fem_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_p"  : m= new FL.Moods.fem_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_mp" : m= new FL.Moods.fem_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_pm" : m= new FL.Moods.fem_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_b"  : m= new FL.Moods.fem_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_"   : m= new FL.Moods.fem_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_m"  : m= new FL.Moods.fem_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_p"  : m= new FL.Moods.fem_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_mp" : m= new FL.Moods.fem_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_pm" : m= new FL.Moods.fem_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_b"  : m= new FL.Moods.fem_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_FEM_sbj_p_"   : m= new FL.Moods.FEM_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_m"  : m= new FL.Moods.FEM_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_p"  : m= new FL.Moods.FEM_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_mp" : m= new FL.Moods.FEM_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_pm" : m= new FL.Moods.FEM_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_b"  : m= new FL.Moods.FEM_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_"   : m= new FL.Moods.FEM_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_m"  : m= new FL.Moods.FEM_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_p"  : m= new FL.Moods.FEM_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_mp" : m= new FL.Moods.FEM_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_pm" : m= new FL.Moods.FEM_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_b"  : m= new FL.Moods.FEM_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m}}
function inhMd( mD,parent,arr){ /*if( parent) { mD.parent=parent.mDs.find(o => o.ni === mD.ni)}
								if( arr) 	{ arr.push( mD)}*/}
FL.Moods={ seed : [
	"MAS_MAS_obj_m_","MAS_MAS_obj_m_m","MAS_MAS_obj_m_p","MAS_MAS_obj_m_mp","MAS_MAS_obj_m_pm","MAS_MAS_obj_m_b",
	"MAS_MAS_obj_p_","MAS_MAS_obj_p_m","MAS_MAS_obj_p_p","MAS_MAS_obj_p_mp","MAS_MAS_obj_p_pm","MAS_MAS_obj_p_b",
	"MAS_mas_obj_m_","MAS_mas_obj_m_m","MAS_mas_obj_m_p","MAS_mas_obj_m_mp","MAS_mas_obj_m_pm","MAS_mas_obj_m_b",
	"MAS_mas_obj_p_","MAS_mas_obj_p_m","MAS_mas_obj_p_p","MAS_mas_obj_p_mp","MAS_mas_obj_p_pm","MAS_mas_obj_p_b",
	"MAS_fem_obj_m_","MAS_fem_obj_m_m","MAS_fem_obj_m_p","MAS_fem_obj_m_mp","MAS_fem_obj_m_pm","MAS_fem_obj_m_b",
	"MAS_fem_obj_p_","MAS_fem_obj_p_m","MAS_fem_obj_p_p","MAS_fem_obj_p_mp","MAS_fem_obj_p_pm","MAS_fem_obj_p_b",
	"MAS_FEM_obj_m_","MAS_FEM_obj_m_m","MAS_FEM_obj_m_p","MAS_FEM_obj_m_mp","MAS_FEM_obj_m_pm","MAS_FEM_obj_m_b",
	"MAS_FEM_obj_p_","MAS_FEM_obj_p_m","MAS_FEM_obj_p_p","MAS_FEM_obj_p_mp","MAS_FEM_obj_p_pm","MAS_FEM_obj_p_b",

	"mas_MAS_obj_m_","mas_MAS_obj_m_m","mas_MAS_obj_m_p","mas_MAS_obj_m_mp","mas_MAS_obj_m_pm","mas_MAS_obj_m_b",
	"mas_MAS_obj_p_","mas_MAS_obj_p_m","mas_MAS_obj_p_p","mas_MAS_obj_p_mp","mas_MAS_obj_p_pm","mas_MAS_obj_p_b",
	"mas_mas_obj_m_","mas_mas_obj_m_m","mas_mas_obj_m_p","mas_mas_obj_m_mp","mas_mas_obj_m_pm","mas_mas_obj_m_b",
	"mas_mas_obj_p_","mas_mas_obj_p_m","mas_mas_obj_p_p","mas_mas_obj_p_mp","mas_mas_obj_p_pm","mas_mas_obj_p_b",
	"mas_fem_obj_m_","mas_fem_obj_m_m","mas_fem_obj_m_p","mas_fem_obj_m_mp","mas_fem_obj_m_pm","mas_fem_obj_m_b",
	"mas_fem_obj_p_","mas_fem_obj_p_m","mas_fem_obj_p_p","mas_fem_obj_p_mp","mas_fem_obj_p_pm","mas_fem_obj_p_b",
	"mas_FEM_obj_m_","mas_FEM_obj_m_m","mas_FEM_obj_m_p","mas_FEM_obj_m_mp","mas_FEM_obj_m_pm","mas_FEM_obj_m_b",
	"mas_FEM_obj_p_","mas_FEM_obj_p_m","mas_FEM_obj_p_p","mas_FEM_obj_p_mp","mas_FEM_obj_p_pm","mas_FEM_obj_p_b",

	"fem_MAS_obj_m_","fem_MAS_obj_m_m","fem_MAS_obj_m_p","fem_MAS_obj_m_mp","fem_MAS_obj_m_pm","fem_MAS_obj_m_b",
	"fem_MAS_obj_p_","fem_MAS_obj_p_m","fem_MAS_obj_p_p","fem_MAS_obj_p_mp","fem_MAS_obj_p_pm","fem_MAS_obj_p_b",
	"fem_mas_obj_m_","fem_mas_obj_m_m","fem_mas_obj_m_p","fem_mas_obj_m_mp","fem_mas_obj_m_pm","fem_mas_obj_m_b",
	"fem_mas_obj_p_","fem_mas_obj_p_m","fem_mas_obj_p_p","fem_mas_obj_p_mp","fem_mas_obj_p_pm","fem_mas_obj_p_b",
	"fem_fem_obj_m_","fem_fem_obj_m_m","fem_fem_obj_m_p","fem_fem_obj_m_mp","fem_fem_obj_m_pm","fem_fem_obj_m_b",
	"fem_fem_obj_p_","fem_fem_obj_p_m","fem_fem_obj_p_p","fem_fem_obj_p_mp","fem_fem_obj_p_pm","fem_fem_obj_p_b",
	"fem_FEM_obj_m_","fem_FEM_obj_m_m","fem_FEM_obj_m_p","fem_FEM_obj_m_mp","fem_FEM_obj_m_pm","fem_FEM_obj_m_b",
	"fem_FEM_obj_p_","fem_FEM_obj_p_m","fem_FEM_obj_p_p","fem_FEM_obj_p_mp","fem_FEM_obj_p_pm","fem_FEM_obj_p_b",

	"FEM_MAS_obj_m_","FEM_MAS_obj_m_m","FEM_MAS_obj_m_p","FEM_MAS_obj_m_mp","FEM_MAS_obj_m_pm","FEM_MAS_obj_m_b",
	"FEM_MAS_obj_p_","FEM_MAS_obj_p_m","FEM_MAS_obj_p_p","FEM_MAS_obj_p_mp","FEM_MAS_obj_p_pm","FEM_MAS_obj_p_b",
	"FEM_mas_obj_m_","FEM_mas_obj_m_m","FEM_mas_obj_m_p","FEM_mas_obj_m_mp","FEM_mas_obj_m_pm","FEM_mas_obj_m_b",
	"FEM_mas_obj_p_","FEM_mas_obj_p_m","FEM_mas_obj_p_p","FEM_mas_obj_p_mp","FEM_mas_obj_p_pm","FEM_mas_obj_p_b",
	"FEM_fem_obj_m_","FEM_fem_obj_m_m","FEM_fem_obj_m_p","FEM_fem_obj_m_mp","FEM_fem_obj_m_pm","FEM_fem_obj_m_b",
	"FEM_fem_obj_p_","FEM_fem_obj_p_m","FEM_fem_obj_p_p","FEM_fem_obj_p_mp","FEM_fem_obj_p_pm","FEM_fem_obj_p_b",
	"FEM_FEM_obj_m_","FEM_FEM_obj_m_m","FEM_FEM_obj_m_p","FEM_FEM_obj_m_mp","FEM_FEM_obj_m_pm","FEM_FEM_obj_m_b",
	"FEM_FEM_obj_p_","FEM_FEM_obj_p_m","FEM_FEM_obj_p_p","FEM_FEM_obj_p_mp","FEM_FEM_obj_p_pm","FEM_FEM_obj_p_b",


	"MAS_MAS_sbj_m_","MAS_MAS_sbj_m_m","MAS_MAS_sbj_m_p","MAS_MAS_sbj_m_mp","MAS_MAS_sbj_m_pm","MAS_MAS_sbj_m_b",
	"MAS_MAS_sbj_p_","MAS_MAS_sbj_p_m","MAS_MAS_sbj_p_p","MAS_MAS_sbj_p_mp","MAS_MAS_sbj_p_pm","MAS_MAS_sbj_p_b",
	"MAS_mas_sbj_m_","MAS_mas_sbj_m_m","MAS_mas_sbj_m_p","MAS_mas_sbj_m_mp","MAS_mas_sbj_m_pm","MAS_mas_sbj_m_b",
	"MAS_mas_sbj_p_","MAS_mas_sbj_p_m","MAS_mas_sbj_p_p","MAS_mas_sbj_p_mp","MAS_mas_sbj_p_pm","MAS_mas_sbj_p_b",
	"MAS_fem_sbj_m_","MAS_fem_sbj_m_m","MAS_fem_sbj_m_p","MAS_fem_sbj_m_mp","MAS_fem_sbj_m_pm","MAS_fem_sbj_m_b",
	"MAS_fem_sbj_p_","MAS_fem_sbj_p_m","MAS_fem_sbj_p_p","MAS_fem_sbj_p_mp","MAS_fem_sbj_p_pm","MAS_fem_sbj_p_b",
	"MAS_FEM_sbj_m_","MAS_FEM_sbj_m_m","MAS_FEM_sbj_m_p","MAS_FEM_sbj_m_mp","MAS_FEM_sbj_m_pm","MAS_FEM_sbj_m_b",
	"MAS_FEM_sbj_p_","MAS_FEM_sbj_p_m","MAS_FEM_sbj_p_p","MAS_FEM_sbj_p_mp","MAS_FEM_sbj_p_pm","MAS_FEM_sbj_p_b",

	"mas_MAS_sbj_m_","mas_MAS_sbj_m_m","mas_MAS_sbj_m_p","mas_MAS_sbj_m_mp","mas_MAS_sbj_m_pm","mas_MAS_sbj_m_b",
	"mas_MAS_sbj_p_","mas_MAS_sbj_p_m","mas_MAS_sbj_p_p","mas_MAS_sbj_p_mp","mas_MAS_sbj_p_pm","mas_MAS_sbj_p_b",
	"mas_mas_sbj_m_","mas_mas_sbj_m_m","mas_mas_sbj_m_p","mas_mas_sbj_m_mp","mas_mas_sbj_m_pm","mas_mas_sbj_m_b",
	"mas_mas_sbj_p_","mas_mas_sbj_p_m","mas_mas_sbj_p_p","mas_mas_sbj_p_mp","mas_mas_sbj_p_pm","mas_mas_sbj_p_b",
	"mas_fem_sbj_m_","mas_fem_sbj_m_m","mas_fem_sbj_m_p","mas_fem_sbj_m_mp","mas_fem_sbj_m_pm","mas_fem_sbj_m_b",
	"mas_fem_sbj_p_","mas_fem_sbj_p_m","mas_fem_sbj_p_p","mas_fem_sbj_p_mp","mas_fem_sbj_p_pm","mas_fem_sbj_p_b",
	"mas_FEM_sbj_m_","mas_FEM_sbj_m_m","mas_FEM_sbj_m_p","mas_FEM_sbj_m_mp","mas_FEM_sbj_m_pm","mas_FEM_sbj_m_b",
	"mas_FEM_sbj_p_","mas_FEM_sbj_p_m","mas_FEM_sbj_p_p","mas_FEM_sbj_p_mp","mas_FEM_sbj_p_pm","mas_FEM_sbj_p_b",

	"fem_MAS_sbj_m_","fem_MAS_sbj_m_m","fem_MAS_sbj_m_p","fem_MAS_sbj_m_mp","fem_MAS_sbj_m_pm","fem_MAS_sbj_m_b",
	"fem_MAS_sbj_p_","fem_MAS_sbj_p_m","fem_MAS_sbj_p_p","fem_MAS_sbj_p_mp","fem_MAS_sbj_p_pm","fem_MAS_sbj_p_b",
	"fem_mas_sbj_m_","fem_mas_sbj_m_m","fem_mas_sbj_m_p","fem_mas_sbj_m_mp","fem_mas_sbj_m_pm","fem_mas_sbj_m_b",
	"fem_mas_sbj_p_","fem_mas_sbj_p_m","fem_mas_sbj_p_p","fem_mas_sbj_p_mp","fem_mas_sbj_p_pm","fem_mas_sbj_p_b",
	"fem_fem_sbj_m_","fem_fem_sbj_m_m","fem_fem_sbj_m_p","fem_fem_sbj_m_mp","fem_fem_sbj_m_pm","fem_fem_sbj_m_b",
	"fem_fem_sbj_p_","fem_fem_sbj_p_m","fem_fem_sbj_p_p","fem_fem_sbj_p_mp","fem_fem_sbj_p_pm","fem_fem_sbj_p_b",
	"fem_FEM_sbj_m_","fem_FEM_sbj_m_m","fem_FEM_sbj_m_p","fem_FEM_sbj_m_mp","fem_FEM_sbj_m_pm","fem_FEM_sbj_m_b",
	"fem_FEM_sbj_p_","fem_FEM_sbj_p_m","fem_FEM_sbj_p_p","fem_FEM_sbj_p_mp","fem_FEM_sbj_p_pm","fem_FEM_sbj_p_b",

	"FEM_MAS_sbj_m_","FEM_MAS_sbj_m_m","FEM_MAS_sbj_m_p","FEM_MAS_sbj_m_mp","FEM_MAS_sbj_m_pm","FEM_MAS_sbj_m_b",
	"FEM_MAS_sbj_p_","FEM_MAS_sbj_p_m","FEM_MAS_sbj_p_p","FEM_MAS_sbj_p_mp","FEM_MAS_sbj_p_pm","FEM_MAS_sbj_p_b",
	"FEM_mas_sbj_m_","FEM_mas_sbj_m_m","FEM_mas_sbj_m_p","FEM_mas_sbj_m_mp","FEM_mas_sbj_m_pm","FEM_mas_sbj_m_b",
	"FEM_mas_sbj_p_","FEM_mas_sbj_p_m","FEM_mas_sbj_p_p","FEM_mas_sbj_p_mp","FEM_mas_sbj_p_pm","FEM_mas_sbj_p_b",
	"FEM_fem_sbj_m_","FEM_fem_sbj_m_m","FEM_fem_sbj_m_p","FEM_fem_sbj_m_mp","FEM_fem_sbj_m_pm","FEM_fem_sbj_m_b",
	"FEM_fem_sbj_p_","FEM_fem_sbj_p_m","FEM_fem_sbj_p_p","FEM_fem_sbj_p_mp","FEM_fem_sbj_p_pm","FEM_fem_sbj_p_b",
	"FEM_FEM_sbj_m_","FEM_FEM_sbj_m_m","FEM_FEM_sbj_m_p","FEM_FEM_sbj_m_mp","FEM_FEM_sbj_m_pm","FEM_FEM_sbj_m_b",
	"FEM_FEM_sbj_p_","FEM_FEM_sbj_p_m","FEM_FEM_sbj_p_p","FEM_FEM_sbj_p_mp","FEM_FEM_sbj_p_pm","FEM_FEM_sbj_p_b"],

	MAS_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Peaceful Man Object")}, 	
	MAS_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Caring Man Object")}, 
	MAS_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Playful Man Object")},
	MAS_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Playfully Caring Man Object")}, 
	MAS_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Carefully Playful Man Object")},
	MAS_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Caring & Playful Man Object")},
	MAS_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Hostile Man Object")},
	MAS_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escaping Man Object")}, 
	MAS_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Fighting Man Object")},
	MAS_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Fightingly Escaping Man Object")},
	MAS_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escapingly Fighting Man Object")},
	MAS_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escaping & Fighting Man Object")},

	MAS_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Peaceful Boy")}, 	
	MAS_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Caring Boy")}, 
	MAS_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Playful Boy")},
	MAS_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Playfully Caring Boy")}, 
	MAS_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Carefully Playful Boy")},
	MAS_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Caring & Playful Boy")},
	MAS_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Hostile Boy")},
	MAS_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Escaping Boy")}, 
	MAS_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Fighting Boy")},
	MAS_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Fightingly Escaping Boy")},
	MAS_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Escapingly Fighting Boy")},
	MAS_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Man Object as Escaping & Fighting Boy")},

	MAS_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Peaceful Girl")}, 	
	MAS_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Caring Girl")}, 
	MAS_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Playful Girl")},
	MAS_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Playfully Caring Girl")}, 
	MAS_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Carefully Playful Girl")},
	MAS_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Caring & Playful Girl")},
	MAS_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Hostile Girl")},
	MAS_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Escaping Girl")}, 
	MAS_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Fighting Girl")},
	MAS_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Fightingly Escaping Girl")},
	MAS_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Escapingly Fighting Girl")},
	MAS_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Man Object as Escaping & Fighting Girl")},

	MAS_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Peaceful Woman")}, 	
	MAS_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Caring Woman")}, 
	MAS_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Playful Woman")},
	MAS_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Playfully Caring Woman")}, 
	MAS_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Carefully Playful Woman")},
	MAS_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Caring & Playful Woman")},
	MAS_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Hostile Woman")},
	MAS_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Escaping Woman")}, 
	MAS_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Fighting Woman")},
	MAS_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Fightingly Escaping Woman")},
	MAS_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Escapingly Fighting Woman")},
	MAS_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Man Object as Escaping & Fighting Woman")},

	mas_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Peaceful Man")},
	mas_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Caring Man")},
	mas_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Playful Man")},
	mas_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Playfully Caring Man")},
	mas_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Carefully Playful Man")},
	mas_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Caring & Playful Man")},
	mas_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Hostile Man")},
	mas_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Escaping Man")},
	mas_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Fighting Man")},
	mas_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Fightingly Escaping Man")},
	mas_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Escapingly Fighting Man")},
	mas_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Boy Object as Escaping & Fighting Man")},

	mas_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Peaceful Boy Object")},
	mas_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Caring Boy Object")},
	mas_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Playful Boy Object")},
	mas_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Playfully Caring Boy Object")},
	mas_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Carefully Playful Boy Object")},
	mas_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Caring & Playful Boy Object")},
	mas_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Hostile Boy Object")},
	mas_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escaping Boy Object")},
	mas_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Fighting Boy Object")},
	mas_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Fightingly Escaping Boy Object")},
	mas_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escapingly Fighting Boy Object")},
	mas_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escaping & Fighting Boy Object")},

	mas_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Peaceful Girl")},
	mas_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Caring Girl")},
	mas_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Playful Girl")},
	mas_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Playfully Caring Girl")},
	mas_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Carefully Playful Girl")},
	mas_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Caring & Playful Girl")},
	mas_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Hostile Girl")},
	mas_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Escaping Girl")},
	mas_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Fighting Girl")},
	mas_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Fightingly Escaping Girl")},
	mas_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Escapingly Fighting Girl")},
	mas_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Boy Object as Escaping & Fighting Girl")},

	mas_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Peaceful Woman")},
	mas_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Caring Woman")},
	mas_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Playful Woman")},
	mas_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Playfully Caring Woman")},
	mas_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Carefully Playful Woman")},
	mas_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Caring & Playful Woman")},
	mas_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Hostile Woman")},
	mas_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Escaping Woman")},
	mas_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Fighting Woman")},
	mas_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Fightingly Escaping Woman")},
	mas_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Escapingly Fighting Woman")},
	mas_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Boy Object as Escaping & Fighting Woman")},

	fem_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Peaceful Man")},
	fem_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Caring Man")},
	fem_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Playful Man")},
	fem_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Playfully Caring Man")},
	fem_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Carefully Playful Man")},
	fem_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Caring & Playful Man")},
	fem_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Hostile Man")},
	fem_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Escaping Man")},
	fem_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Fighting Man")},
	fem_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Fightingly Escaping Man")},
	fem_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Escapingly Fighting Man")},
	fem_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Girl Object as Escaping & Fighting Man")},

	fem_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Peaceful Boy")},
	fem_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Caring Boy")},
	fem_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Playful Boy")},
	fem_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Playfully Caring Boy")},
	fem_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Carefully Playful Boy")},
	fem_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Caring & Playful Boy")},
	fem_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Hostile Boy")},
	fem_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Escaping Boy")},
	fem_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Fighting Boy")},
	fem_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Fightingly Escaping Boy")},
	fem_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Escapingly Fighting Boy")},
	fem_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Girl Object as Escaping & Fighting Boy")},

	fem_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Peaceful Girl Object")},
	fem_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Caring Girl Object")},
	fem_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Playful Girl Object")},
	fem_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Playfully Caring Girl Object")},
	fem_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Carefully Playful Girl Object")},
	fem_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Caring & Playful Girl Object")},
	fem_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Hostile Girl Object")},
	fem_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escaping Girl Object")},
	fem_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Fighting Girl Object")},
	fem_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Fightingly Escaping Girl Object")},
	fem_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escapingly Fighting Girl Object")},
	fem_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escaping & Fighting Girl Object")},

	fem_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Peaceful Woman")},
	fem_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Caring Woman")},
	fem_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Playful Woman")},
	fem_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Playfully Caring Woman")},
	fem_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Carefully Playful Woman")},
	fem_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Caring & Playful Woman")},
	fem_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Hostile Woman")},
	fem_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Escaping Woman")},
	fem_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Fighting Woman")},
	fem_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Fightingly Escaping Woman")},
	fem_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Escapingly Fighting Woman")},
	fem_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Girl Object as Escaping & Fighting Woman")},

	FEM_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Peaceful Man")},
	FEM_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Caring Man")},
	FEM_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Playful Man")},
	FEM_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Playfully Caring Man")},
	FEM_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Carefully Playful Man")},
	FEM_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Caring & Playful Man")},
	FEM_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Hostile Man")},
	FEM_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Escaping Man")},
	FEM_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Fighting Man")},
	FEM_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Fightingly Escaping Man")},
	FEM_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Escapingly Fighting Man")},
	FEM_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Woman Object as Escaping & Fighting Man")},

	FEM_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Peaceful Boy")},
	FEM_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Caring Boy")},
	FEM_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Playful Boy")},
	FEM_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Playfully Caring Boy")},
	FEM_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Carefully Playful Boy")},
	FEM_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Caring & Playful Boy")},
	FEM_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Hostile Boy")},
	FEM_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Escaping Boy")},
	FEM_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Fighting Boy")},
	FEM_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Fightingly Escaping Boy")},
	FEM_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Escapingly Fighting Boy")},
	FEM_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Woman Object as Escaping & Fighting Boy")},

	FEM_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Peaceful Girl")},
	FEM_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Caring Girl")},
	FEM_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Playful Girl")},
	FEM_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Playfully Caring Girl")},
	FEM_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Carefully Playful Girl")},
	FEM_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Caring & Playful Girl")},
	FEM_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Hostile Girl")},
	FEM_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Escaping Girl")},
	FEM_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Fighting Girl")},
	FEM_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Fightingly Escaping Girl")},
	FEM_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Escapingly Fighting Girl")},
	FEM_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Woman Object as Escaping & Fighting Girl")},

	FEM_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Peaceful Woman Object")},
	FEM_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Caring Woman Object")},
	FEM_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Playful Woman Object")},
	FEM_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Playfully Caring Woman Object")},
	FEM_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Carefully Playful Woman Object")},
	FEM_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Caring & Playful Woman Object")},
	FEM_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Hostile Woman Object")},
	FEM_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escaping Woman Object")},
	FEM_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Fighting Woman Object")},
	FEM_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Fightingly Escaping Woman Object")},
	FEM_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escapingly Fighting Woman Object")},
	FEM_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escaping & Fighting Woman Object")},


	MAS_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Peaceful Man Subject")}, 	
	MAS_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Caring Man Subject")}, 
	MAS_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Playful Man Subject")},
	MAS_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Playfully Caring Man Subject")}, 
	MAS_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Carefully Playful Man Subject")},
	MAS_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Caring & Playful Man Subject")},
	MAS_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Hostile Man Subject")},
	MAS_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escaping Man Subject")}, 
	MAS_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Fighting Man Subject")},
	MAS_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Fightingly Escaping Man Subject")},
	MAS_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escapingly Fighting Man Subject")},
	MAS_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escaping & Fighting Man Subject")},

	MAS_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Peaceful Boy")}, 	
	MAS_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Caring Boy")}, 
	MAS_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Playful Boy")},
	MAS_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Playfully Caring Boy")}, 
	MAS_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Carefully Playful Boy")},
	MAS_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Caring & Playful Boy")},
	MAS_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Hostile Boy")},
	MAS_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Escaping Boy")}, 
	MAS_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Fighting Boy")},
	MAS_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Fightingly Escaping Boy")},
	MAS_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Escapingly Fighting Boy")},
	MAS_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Man Subject as Escaping & Fighting Boy")},

	MAS_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Peaceful Girl")}, 	
	MAS_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Caring Girl")}, 
	MAS_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Playful Girl")},
	MAS_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Playfully Caring Girl")}, 
	MAS_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Carefully Playful Girl")},
	MAS_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Caring & Playful Girl")},
	MAS_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Hostile Girl")},
	MAS_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Escaping Girl")}, 
	MAS_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Fighting Girl")},
	MAS_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Fightingly Escaping Girl")},
	MAS_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Escapingly Fighting Girl")},
	MAS_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Man Subject as Escaping & Fighting Girl")},

	MAS_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Peaceful Woman")}, 	
	MAS_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Caring Woman")}, 
	MAS_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Playful Woman")},
	MAS_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Playfully Caring Woman")}, 
	MAS_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Carefully Playful Woman")},
	MAS_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Caring & Playful Woman")},
	MAS_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Hostile Woman")},
	MAS_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Escaping Woman")}, 
	MAS_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Fighting Woman")},
	MAS_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Fightingly Escaping Woman")},
	MAS_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Escapingly Fighting Woman")},
	MAS_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Man Subject as Escaping & Fighting Woman")},

	mas_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Peaceful Man")},
	mas_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Caring Man")},
	mas_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Playful Man")},
	mas_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Playfully Caring Man")},
	mas_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Carefully Playful Man")},
	mas_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Caring & Playful Man")},
	mas_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Hostile Man")},
	mas_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Escaping Man")},
	mas_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Fighting Man")},
	mas_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Fightingly Escaping Man")},
	mas_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Escapingly Fighting Man")},
	mas_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Boy Subject as Escaping & Fighting Man")},

	mas_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Peaceful Boy Subject")},
	mas_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Caring Boy Subject")},
	mas_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Playful Boy Subject")},
	mas_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Playfully Caring Boy Subject")},
	mas_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Carefully Playful Boy Subject")},
	mas_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Caring & Playful Boy Subject")},
	mas_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Hostile Boy Subject")},
	mas_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escaping Boy Subject")},
	mas_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Fighting Boy Subject")},
	mas_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Fightingly Escaping Boy Subject")},
	mas_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escapingly Fighting Boy Subject")},
	mas_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escaping & Fighting Boy Subject")},

	mas_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Peaceful Girl")},
	mas_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Caring Girl")},
	mas_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Playful Girl")},
	mas_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Playfully Caring Girl")},
	mas_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Carefully Playful Girl")},
	mas_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Caring & Playful Girl")},
	mas_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Hostile Girl")},
	mas_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Escaping Girl")},
	mas_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Fighting Girl")},
	mas_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Fightingly Escaping Girl")},
	mas_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Escapingly Fighting Girl")},
	mas_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Boy Subject as Escaping & Fighting Girl")},

	mas_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Peaceful Woman")},
	mas_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Caring Woman")},
	mas_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Playful Woman")},
	mas_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Playfully Caring Woman")},
	mas_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Carefully Playful Woman")},
	mas_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Caring & Playful Woman")},
	mas_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Hostile Woman")},
	mas_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Escaping Woman")},
	mas_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Fighting Woman")},
	mas_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Fightingly Escaping Woman")},
	mas_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Escapingly Fighting Woman")},
	mas_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Boy Subject as Escaping & Fighting Woman")},

	fem_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Peaceful Man")},
	fem_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Caring Man")},
	fem_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Playful Man")},
	fem_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Playfully Caring Man")},
	fem_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Carefully Playful Man")},
	fem_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Caring & Playful Man")},
	fem_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Hostile Man")},
	fem_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Escaping Man")},
	fem_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Fighting Man")},
	fem_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Fightingly Escaping Man")},
	fem_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Escapingly Fighting Man")},
	fem_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Girl Subject as Escaping & Fighting Man")},

	fem_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Peaceful Boy")},
	fem_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Caring Boy")},
	fem_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Playful Boy")},
	fem_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Playfully Caring Boy")},
	fem_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Carefully Playful Boy")},
	fem_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Caring & Playful Boy")},
	fem_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Hostile Boy")},
	fem_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Escaping Boy")},
	fem_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Fighting Boy")},
	fem_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Fightingly Escaping Boy")},
	fem_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Escapingly Fighting Boy")},
	fem_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Girl Subject as Escaping & Fighting Boy")},

	fem_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Peaceful Girl Subject")},
	fem_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Caring Girl Subject")},
	fem_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Playful Girl Subject")},
	fem_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Playfully Caring Girl Subject")},
	fem_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Carefully Playful Girl Subject")},
	fem_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Caring & Playful Girl Subject")},
	fem_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Hostile Girl Subject")},
	fem_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escaping Girl Subject")},
	fem_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Fighting Girl Subject")},
	fem_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Fightingly Escaping Girl Subject")},
	fem_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escapingly Fighting Girl Subject")},
	fem_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escaping & Fighting Girl Subject")},

	fem_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Peaceful Woman")},
	fem_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Caring Woman")},
	fem_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Playful Woman")},
	fem_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Playfully Caring Woman")},
	fem_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Carefully Playful Woman")},
	fem_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Caring & Playful Woman")},
	fem_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Hostile Woman")},
	fem_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Escaping Woman")},
	fem_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Fighting Woman")},
	fem_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Fightingly Escaping Woman")},
	fem_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Escapingly Fighting Woman")},
	fem_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Girl Subject as Escaping & Fighting Woman")},

	FEM_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Peaceful Man")},
	FEM_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Caring Man")},
	FEM_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Playful Man")},
	FEM_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Playfully Caring Man")},
	FEM_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Carefully Playful Man")},
	FEM_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Caring & Playful Man")},
	FEM_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Hostile Man")},
	FEM_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Escaping Man")},
	FEM_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Fighting Man")},
	FEM_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Fightingly Escaping Man")},
	FEM_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Escapingly Fighting Man")},
	FEM_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Woman Subject as Escaping & Fighting Man")},

	FEM_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Peaceful Boy")},
	FEM_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Caring Boy")},
	FEM_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Playful Boy")},
	FEM_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Playfully Caring Boy")},
	FEM_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Carefully Playful Boy")},
	FEM_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Caring & Playful Boy")},
	FEM_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Hostile Boy")},
	FEM_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Escaping Boy")},
	FEM_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Fighting Boy")},
	FEM_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Fightingly Escaping Boy")},
	FEM_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Escapingly Fighting Boy")},
	FEM_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Woman Subject as Escaping & Fighting Boy")},

	FEM_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Peaceful Girl")},
	FEM_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Caring Girl")},
	FEM_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Playful Girl")},
	FEM_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Playfully Caring Girl")},
	FEM_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Carefully Playful Girl")},
	FEM_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Caring & Playful Girl")},
	FEM_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Hostile Girl")},
	FEM_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Escaping Girl")},
	FEM_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Fighting Girl")},
	FEM_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Fightingly Escaping Girl")},
	FEM_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Escapingly Fighting Girl")},
	FEM_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Woman Subject as Escaping & Fighting Girl")},

	FEM_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Peaceful Woman Subject")},
	FEM_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Caring Woman Subject")},
	FEM_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Playful Woman Subject")},
	FEM_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Playfully Caring Woman Subject")},
	FEM_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Carefully Playful Woman Subject")},
	FEM_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Caring & Playful Woman Subject")},
	FEM_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Hostile Woman Subject")},
	FEM_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escaping Woman Subject")},
	FEM_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Fighting Woman Subject")},
	FEM_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Fightingly Escaping Woman Subject")},
	FEM_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escapingly Fighting Woman Subject")},
	FEM_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escaping & Fighting Woman Subject")}}
function getObjByNi( ni,from){ var r =from.find(o => ni===o.ni); return r}
function mkMood2(o,ni,qua,MAS,KID,mas,kid,obj,nI){
	o.ni=ni; o.nI=nI; o.gForm =null; o.bForm =null; o.obj =obj; o.vQs=qua.vQs;
	if( MAS===mas &&  KID===kid){  	o.stereo =true} 	else{ o.stereo =false}
	if( MAS!==mas &&  KID===kid){ 	o.bQueer =true} 	else{ o.bQueer =false}
	if( MAS!==mas &&  KID!==kid){ 	o.gQueer =true} 	else{ o.gQueer =false}
	if( MAS===mas &&  KID && !kid){ o.gAge =true} 		else{ o.gAge =false}
	if( MAS===mas && !KID &&  kid){ o.bAge =true} 		else{ o.bAge =false}
	o.sex= ni.substr( 0,ni.indexOf( '_')); 					o.sex= getObjByNi( o.sex,AB.sXs);
	o.gnd= ni.split( '_')[1].substr( 0,ni.indexOf( '_'));	o.gnd= getObjByNi( o.gnd,AB.gNs);
	o.pM = ni.substr( ni.indexOf( '_') +1)
		.substr( ni.indexOf( '_') +1)
			.substr( ni.indexOf( '_')); o.pM ="G"+o.pM;		o.pM = getObjByNi( o.pM, AB.pMs);
	o =initModalForm( 		o, o.gnd.ni);
	o =manipulateModalForm( o);
	o =interpretModalForm( 	o);
	o =interpretMosaicForm( o);
	o.bG = mkModalXYPlane( 	o, FL.sQr);
	evalModalXYPlane( 		o, FL.sQr, FL.vQr);
	o.xY = mkMosaicXYPlane( o, FL.sQr, obj);
	evalMosaicXYPlane(  	o, FL.sQr, FL.vQr, o.gnd.mas)}
function initModalForm(m,ni){ switch(ni){ 
	case "MAS": m.gForm = ['a','b','c']; m.bForm =["a'","c'","b'"]; break;
	case "mas": m.gForm = ['a','b','c']; m.bForm =["c'","a'","b'"]; break;
	case "fem": m.gForm = ['b','a','c']; m.bForm =["a'","c'","b'"]; break;
	case "FEM": m.gForm = ['c','b','a']; m.bForm =["a'","c'","b'"]}return m}
function modalFlip(mf,f){ var ret=[];
	mf.forEach( function(mf){ ret.push(mf)});
	switch(f) { case 1: ret[0]=mf[1]; ret[1]=mf[0]; break;
				case 2: ret[1]=mf[2]; ret[2]=mf[1]; break;
				case 3: ret[0]=mf[2]; ret[2]=mf[0]} return ret}
function transModalFormIntoBadQueer(m){}
function transModalFormIntoGoodQueer(m){}
function transModalFormIntoComingToAge(m){}
function transModalFormIntoInfantilization(m){}
function turnModalFormBad(m){ for(let n=0; n < 3; n++){
	if(m.gForm[n]==="a" ){ m.gForm[n]="c'"}if(m.gForm[n]==="c" ){m.gForm[n]="a'"}}}
function turnModalFormGood(m){ for(let n=0; n < 3; n++){
	if(m.bForm[n]==="a'"){ m.bForm[n] ="c"}if(m.bForm[n]==="c'"){m.bForm[n] ="a" }}}
function manipulateModalForm(m){
	if(!m.pM.head){ m.gForm =modalFlip(m.gForm,2)}
	for(let n=0; n < m.pM.tail.length; n++){
		switch(m.pM.tail[n]){  	case "-": 	m.bForm =modalFlip(m.bForm,1); break;
								case "+": 	m.bForm =modalFlip(m.bForm,2); break;
								case "x": 	m.bForm =modalFlip(m.bForm,1);
								 			m.bForm =modalFlip(m.bForm,2);
								 			m.bForm =modalFlip(m.bForm,1)}}
	if 		(m.bQueer){ transModalFormIntoBadQueer(m)} 			//turnModalFormBad(m)
	else if (m.gQueer){ transModalFormIntoGoodQueer(m)} 		//turnModalFormBad(m); turnModalFormGood(m)}
	else if (m.gAge){ 	transModalFormIntoComingToAge(m)} 		//turnModalFormGood(m)}
	else if (m.bAge){ 	transModalFormIntoInfantilization(m)}
	return m}
function interpretModalForm(m){ var b=""; var g="";
	m.bForm.forEach( function(s){ b=b+s});
	m.gForm.forEach( function(s){ g=g+s});
	switch(b){case "a'b'c'":m.bMF = "α',β',γ'";		m.bAriV = "-X"; 		m.bAriK = "X - Y";		break;
			  case "a'c'b'":m.bMF = "α',γ',β'";		m.bAriV = "X - Y"; 		m.bAriK = "-X";			break;
			  case "b'a'c'":m.bMF = "β',α',γ'";		m.bAriV = "-X"; 		m.bAriK = "Y - r";		break;
			  case "b'c'a'":m.bMF = "β',γ',α'";		m.bAriV = "X - Y"; 		m.bAriK = "Y - r";		break;
			  case "c'a'b'":m.bMF = "γ',α',β'";		m.bAriV = "Y - r"; 		m.bAriK = "-X";			break;
			  case "c'b'a'":m.bMF = "γ',β',α'";		m.bAriV = "Y - r"; 		m.bAriK = "X - Y";		break;
			  case "ab'c": 	m.bMF = "α,β',γ";		m.bAriV = "X"; 			m.bAriK = "X - Y";		break;
			  case "acb'": 	m.bMF = "α,γ,β'";		m.bAriV = "Y - X"; 		m.bAriK = "-X";			break;
			  case "b'ac": 	m.bMF = "β',α,γ";		m.bAriV = "X"; 			m.bAriK = "Y - r";		break;
			  case "b'ca": 	m.bMF = "β',γ,α";		m.bAriV = "Y - X"; 		m.bAriK = "Y - r";		break;
			  case "cab'": 	m.bMF = "γ,α,β'";		m.bAriV = "r - Y"; 		m.bAriK = "-X";			break;
			  case "cb'a": 	m.bMF = "γ,β',α";		m.bAriV = "r - Y"; 		m.bAriK = "X - Y"}
	switch(g){case 'abc': 	m.gMF = "α,β,γ"; 		m.gAriV = "Y"; 			m.gAriK = "X - Y"; 		break;
			  case 'acb': 	m.gMF = "α,γ,β"; 		m.gAriV = "X - Y"; 		m.gAriK = "Y"; 			break;
			  case 'bac': 	m.gMF = "β,α,γ";		m.gAriV = "Y"; 			m.gAriK = "r - X";		break;
			  case 'bca': 	m.gMF = "β,γ,α";		m.gAriV = "X - Y"; 		m.gAriK = "r - X";		break;
			  case 'cab': 	m.gMF = "γ,α,β";		m.gAriV = "r - X"; 		m.gAriK = "Y";			break;
			  case 'cba': 	m.gMF = "γ,β,α";		m.gAriV = "r - X"; 		m.gAriK = "X - Y";		break;
			  case "a'bc'": m.gMF = "α',β,γ'"; 		m.gAriV = "-Y"; 		m.gAriK = "X - Y"; 		break;
			  case "a'c'b": m.gMF = "α',γ',β"; 		m.gAriV = "Y - X"; 		m.gAriK = "Y"; 			break;
			  case "ba'c'": m.gMF = "β,α',γ'";		m.gAriV = "-Y"; 		m.gAriK = "r - X";		break;
			  case "bc'a'": m.gMF = "β,γ',α'";		m.gAriV = "Y - X"; 		m.gAriK = "r - X";		break;
			  case "c'a'b": m.gMF = "γ',α',β";		m.gAriV = "X - r"; 		m.gAriK = "Y";			break;
			  case "c'ba'": m.gMF = "γ',β,α'";		m.gAriV = "X - r"; 		m.gAriK = "X - Y"}
	m.bFormL =m.bForm.length; m.bFormLs=[]; m.bForm.forEach( function(o){ m.bFormLs.push( o.length)});
	m.gFormL =m.gForm.length; m.gFormLs=[]; m.gForm.forEach( function(o){ m.gFormLs.push( o.length)});
	if( stereoSyms( m.bForm, m.bFormL, m.gForm, m.gFormL)) { m.sSym=true} else{ m.sSym=false}
	if( complexSyms(m.bForm, m.bFormL, m.bFormLs, m.gForm, m.gFormL, m.gFormLs)) { m.cSym=true} else{ m.cSym=false}
	return m}
function stereoSym(b,g){ g+="'"; if(g===b){ return true} else{ return false}}
function stereoSyms(bForm,bLen,gForm,gLen){
	if( bLen !==gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!stereoSym( bForm[n], gForm[m])){ return false}}}
		return true}}
function complexSym( bF1, bL1, gF1, gL1){
	if((bF1 ==="b" && gF1 ==="b'")||(bF1 ==="b'" && gF1 ==="b")){ return true}
	if((bL1 !==gL1)&&
		(((bF1 ==="a")&&(gF2 ==="a'"))||((bF1 ==="a'")&&(gF2 ==="a"))||
			((bF1 ==="c")&&(gF2 ==="c'"))||((bF1 ==="c'")&&(gF2 ==="c")))){ return true}
	else{ return false}}
function complexSyms(bForm,bLen,gForm,gLen){
	if( bLen !==gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!complexSym( bForm[n], bFormLs[n], gForm[m], gFormLs[m])){ return false}}}
		return true}}

/*
similarity determination algorithm for vQs:
completely different f.ex. wisdom vs dysphoria
least similar f.ex. wisdom vs belief, epiphany vs form, body vs beauty, norm vs success
less similar f.ex wisdom vs epiphany
rom and cla similarity separately
*/

function interpretMosaicForm(m){ 
	if(!m.gnd.mas){ 
		m.xForm=m.gForm; m.yForm=m.bForm;
		m.xMF=m.gMF; m.yMF=m.bMF; m.xAriV=m.gAriV; m.xAriK=m.gAriK; m.yAriV=m.bAriV; m.yAriK=m.bAriK}
	else{
		var x=""; var y="";
		m.xForm=m.bForm; m.yForm=m.gForm;
		m.yForm.forEach( function(s){ y=y+s});
		m.xForm.forEach( function(s){ x=x+s});
		switch(y){case "abc": 	m.yMF = "α,β,γ"; 		m.yAriV = "X"; 			m.yAriK = "Y - X"; 		break;
				  case "acb": 	m.yMF = "α,γ,β"; 		m.yAriV = "Y - X"; 		m.yAriK = "X"; 			break;
				  case "bac": 	m.yMF = "β,α,γ";		m.yAriV = "X"; 			m.yAriK = "r - Y";		break;
				  case "bca": 	m.yMF = "β,γ,α";		m.yAriV = "Y - X"; 		m.yAriK = "r - Y";		break;
				  case "cab": 	m.yMF = "γ,α,β";		m.yAriV = "r - Y"; 		m.yAriK = "X";			break;
				  case "cba": 	m.yMF = "γ,β,α";		m.yAriV = "r - Y"; 		m.yAriK = "Y - X";		break;
				  case "a'bc'": m.yMF = "α',β,γ'"; 		m.yAriV = "-X"; 		m.yAriK = "Y - X"; 		break;
				  case "a'c'b": m.yMF = "α',γ',β"; 		m.yAriV = "X - Y"; 		m.yAriK = "X"; 			break;
				  case "ba'c'": m.yMF = "β,α',γ'";		m.yAriV = "-X"; 		m.yAriK = "r - Y";		break;
				  case "bc'a'": m.yMF = "β,γ',α'";		m.yAriV = "X - Y"; 		m.yAriK = "r - Y";		break;
				  case "c'a'b": m.yMF = "γ',α',β";		m.yAriV = "Y - r"; 		m.yAriK = "X";			break;
				  case "c'ba'": m.yMF = "γ',β,α'";		m.yAriV = "Y - r"; 		m.yAriK = "Y - X";}
		switch(x){case "a'b'c'":m.xMF = "α',β',γ'";		m.xAriV = "-Y"; 		m.xAriK = "Y - X";		break;
				  case "a'c'b'":m.xMF = "α',γ',β'";		m.xAriV = "Y - X"; 		m.xAriK = "-Y";			break;
				  case "b'a'c'":m.xMF = "β',α',γ'";		m.xAriV = "-Y"; 		m.xAriK = "X - r";		break;
				  case "b'c'a'":m.xMF = "β',γ',α'";		m.xAriV = "Y - X"; 		m.xAriK = "X - r";		break;
				  case "c'a'b'":m.xMF = "γ',α',β'";		m.xAriV = "X - r"; 		m.xAriK = "-Y";			break;
				  case "c'b'a'":m.xMF = "γ',β',α'";		m.xAriV = "X - r"; 		m.xAriK = "Y - X";		break;
				  case "ab'c":	m.xMF = "α,β',γ";		m.xAriV = "Y"; 			m.xAriK = "Y - X";		break;
				  case "acb'": 	m.xMF = "α,γ,β'";		m.xAriV = "X - Y"; 		m.xAriK = "-Y";			break;
				  case "b'ac": 	m.xMF = "β',α,γ";		m.xAriV = "Y"; 			m.xAriK = "X - r";		break;
				  case "b'ca": 	m.xMF = "β',γ,α";		m.xAriV = "X - Y"; 		m.xAriK = "X - r";		break;
				  case "cab'": 	m.xMF = "γ,α,β'";		m.xAriV = "r - X"; 		m.xAriK = "-Y";			break;
				  case "cb'a": 	m.xMF = "γ,β',α";		m.xAriV = "r - X"; 		m.xAriK = "Y - X";}}return m}


function precalcPrimalMoods(seed,parent){ var pMs =[]; var pM =null;
	for(let n=0; n <AB.pMsL; n++){ pM=mkPm( seed[n],parent); pMs.push(pM)}return pMs}
function mkPm( ni,parent,subj){ var pM=null; switch(ni){
	case "G_p_"  : pM= new FL.PrimalMoods.G_p_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_p_m" : pM= new FL.PrimalMoods.G_p_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_p" : pM= new FL.PrimalMoods.G_p_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_mp": pM= new FL.PrimalMoods.G_p_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_pm": pM= new FL.PrimalMoods.G_p_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_b" : pM= new FL.PrimalMoods.G_p_b( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_"  : pM= new FL.PrimalMoods.G_m_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_m_m" : pM= new FL.PrimalMoods.G_m_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_p" : pM= new FL.PrimalMoods.G_m_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_mp": pM= new FL.PrimalMoods.G_m_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_pm": pM= new FL.PrimalMoods.G_m_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_b" : pM= new FL.PrimalMoods.G_m_b( ni);  inhPm( pM,parent,subj); return pM}}
function inhPm( pM,parent,subj){/*if( parent) { pM.parent =parent.pMs.find(o => o.ni === pM.ni)}
								if( subj) 	{ subj.pMs.push( pM)}*/}
FL.PrimalMoods={ seed : ["G_m_","G_m_m","G_m_p","G_m_mp","G_m_pm","G_m_b",
							"G_p_","G_p_m","G_p_p","G_p_mp","G_p_pm","G_p_b"],
	G_p_ 	:function(ni){ mkPm2(this,true, [],			ni,"", "G", "" 	)},
	G_p_m 	:function(ni){ mkPm2(this,true, ["-"],		ni,"", "G", "−" )},
	G_p_p 	:function(ni){ mkPm2(this,true, ["+"],		ni,"", "G", "+" )},
	G_p_mp 	:function(ni){ mkPm2(this,true, ["-","+"],	ni,"", "G", "−+")},
	G_p_pm 	:function(ni){ mkPm2(this,true, ["+","-"],	ni,"", "G", "+−")},
	G_p_b 	:function(ni){ mkPm2(this,true, ["x"],		ni,"", "G", "±" )},
	G_m_ 	:function(ni){ mkPm2(this,false,[],			ni,"−","G", "" 	)},
	G_m_m 	:function(ni){ mkPm2(this,false,["-"],		ni,"−","G", "−" )},
	G_m_p 	:function(ni){ mkPm2(this,false,["+"],		ni,"−","G", "+" )},
	G_m_mp 	:function(ni){ mkPm2(this,false,["-","+"],	ni,"−","G", "−+")},
	G_m_pm 	:function(ni){ mkPm2(this,false,["+","-"],	ni,"−","G", "+−")},
	G_m_b 	:function(ni){ mkPm2(this,false,["x"],		ni,"−","G", "±" )}}
function mkPm2(  				 o,   head, tail, 		ni,niH,niG, niT){
	o.head=head; o.tail=tail; o.ni=ni; o.niH=niH; o.niG=niG; o.niT=niT;}


function precalcGenders(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<AB.gNsL; n++){ b=mkGender( seed[n],parent);r.push(b)}return r}
function mkGender( ni,parent,subj){ var g=null; switch(ni){
	case "MAS": g= new FL.Genders.MAS( ni,subj); inhGender( g,parent);return g;
	case "mas": g= new FL.Genders.mas( ni,subj); inhGender( g,parent);return g;
	case "fem": g= new FL.Genders.fem( ni,subj); inhGender( g,parent);return g;
	case "FEM": g= new FL.Genders.FEM( ni,subj); inhGender( g,parent);return g}}
function inhGender( g,parent){ /*if(parent){ g.parent=parent.gNs.find(o => o.ni ===g.ni)}*/}
FL.Genders={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni,subj){ mkGender2(this,ni,true, false,"♂" ,subj)},
	mas:function( ni,subj){ mkGender2(this,ni,true, true, "*♂",subj)},
	fem:function( ni,subj){ mkGender2(this,ni,false,false,"*♀",subj)},
	FEM:function( ni,subj){ mkGender2(this,ni,false,true, "♀" ,subj)}}
function mkGender2( o,ni,mas,Ac,nI,subj){ var b=[];
	o.ni=ni;o.mas=mas;o.Ac=Ac;o.nI=nI; o.V =0; o.K =0;
	if( subj){ b=subj.nMs.filter(n =>
		n.Ac===subj.Ac && n.fin ===subj.fin && n.weird===subj.weird &&	n.last ===subj.last)}
	if(b !==[]){ o.name =b[0]} else{ b =mkName(mas,kid,subj.fin,subj.weird,subj.nM.last); o.name =b}}

function precalcSexes(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<AB.sXsL; n++){ b=mkSex( seed[n],parent);r.push(b)}return r}
function mkSex( ni,parent,subj){ var s =null; switch( ni){
	case "MAS": s= new FL.Sexes.MAS( ni); inhSex( s,parent,subj);return s;
	case "mas": s= new FL.Sexes.mas( ni); inhSex( s,parent,subj);return s;
	case "fem": s= new FL.Sexes.fem( ni); inhSex( s,parent,subj);return s;
	case "FEM": s= new FL.Sexes.FEM( ni); inhSex( s,parent,subj);return s}}
function inhSex( s,parent,subj){
	/*if(parent){ s.parent=parent.sXs.find(o => o.ni === s.ni)}
	if( subj) { subj.sXs.push ( s)}*/}
FL.Sexes={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni){ mkSex2(this,ni,true, false, "♂" )},
	mas:function( ni){ mkSex2(this,ni,true, true, "*♂")},
	fem:function( ni){ mkSex2(this,ni,false,false,"*♀")},
	FEM:function( ni){ mkSex2(this,ni,false,true, "♀" )}}
function mkSex2( o,ni,mas,Ac,nI){ o.ni=ni;o.Ac=Ac;o.mas=mas;o.nI=nI; o.V =0; o.K =0;}


function precalcSociotypes( seed,ab,parent,subj){ var tYs =[]; var b =null;
	for(let n=0; n <AB.tYsL; n++){ b =mkType( seed[n],ab,parent,subj); tYs.push( b)}return tYs}
function mkType(ni,ab,parent,subj){
	if( subj){ var t =subj.tYs.find( o => o.ni ===ni); if( t){ return t}}
	var t =null; switch( ni){
		case "iSFC": t =new FL.Sociotypes.iSFC( ni,ab,parent,subj); return t;
		case "iSFR": t =new FL.Sociotypes.iSFR( ni,ab,parent,subj); return t;
		case "iSTC": t =new FL.Sociotypes.iSTC( ni,ab,parent,subj); return t; 
		case "iSTR": t =new FL.Sociotypes.iSTR( ni,ab,parent,subj); return t;
		case "iNFC": t =new FL.Sociotypes.iNFC( ni,ab,parent,subj); return t;
		case "iNFR": t =new FL.Sociotypes.iNFR( ni,ab,parent,subj); return t;
		case "iNTC": t =new FL.Sociotypes.iNTC( ni,ab,parent,subj); return t;
		case "iNTR": t =new FL.Sociotypes.iNTR( ni,ab,parent,subj); return t;
		case "eSFC": t =new FL.Sociotypes.eSFC( ni,ab,parent,subj); return t;
		case "eSFR": t =new FL.Sociotypes.eSFR( ni,ab,parent,subj); return t;
		case "eSTC": t =new FL.Sociotypes.eSTC( ni,ab,parent,subj); return t;
		case "eSTR": t =new FL.Sociotypes.eSTR( ni,ab,parent,subj); return t;
		case "eNFC": t =new FL.Sociotypes.eNFC( ni,ab,parent,subj); return t;
		case "eNFR": t =new FL.Sociotypes.eNFR( ni,ab,parent,subj); return t;
		case "eNTC": t =new FL.Sociotypes.eNTC( ni,ab,parent,subj); return t;
		case "eNTR": t =new FL.Sociotypes.eNTR( ni,ab,parent,subj); return t;
		case "NaT" : t =new FL.Sociotypes.NaT(  ni,ab,parent,subj);	return t}}
function inhTy( tY,parent){ if( parent){ tY.parent =parent.tYs.find( o => o.ni ===tY.ni)}}
FL.Sociotypes={
	seed: [ "iSFC","iSFR","iSTC","iSTR","eSFC","eSFR","eSTC","eSTR",
			"iNFC","iNFR","iNTC","iNTR","eNFC","eNFR","eNTC","eNTR"],
	iSFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,false,true,
		"Dolphin", 		["Believer and","Descending Idealist"], 		"Romantic Believer", 	"ESFp","SEE","ESFP","gamma")},
	iSFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,false,false, 
		"Wolverine", 	"Ascending Idealist",		"Classical Believer", 	"ISFj","ESI","ISFP","gamma")},
	iSTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,true, true,
		"Anaconda",		"Descending Utopist", 		"Romantic Trendsetter", "ESTp","SLE","ESTP","beta")},
	iSTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,true, false, 
		"Alligator",	"Ascending Utopist", 		"Classical Trendsetter","ISTj","LSI","ISTP","beta")},
	iNFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, false,true,
		"Octopus",		"Ascending Time Traveler", "Romantic Healer", 		"ENFp","EIE","ENFP","delta")},	
	iNFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, false,false, 
		"Platypus", 	"Descending Time Traveler", "Classical Healer", 	"INFj","EII","INFP","delta")},
	iNTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, true, true,
		"Raven", 		"Ascending Wonderer", 		"Romantic Gardener", 	"ENTp","ILE","ENTP","alpha")},
	iNTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, true, false, 
		"Panda", 		"Descending Wonderer", 		"Classical Gardener", 	"INTj","LII","INTP","alpha")},
	eSFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,false,true,
		"Turtle", 		"Descending Host", 			"Romantic Defender", 	"ISFp","ESI","ISFJ","alpha")},
	eSFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,false,false, 
		"Zebra", 		"Ascending Host", 			"Classical Defender", 	"ESFj","ESE","ESFJ","alpha")},
	eSTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,true, true,
		"Monkey", 		"Descending Realist", 		"Romantic Artisan", 	"ISTp","SLI","ISTJ","delta")},
	eSTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,true, false, 
		"Hippo", 		"Ascending Realist", 		"Classical Artisan", 	"ESTj","LSE","ESTJ","delta")},
	eNFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, false,true,
		"Swan",	 		"Ascending Someone", 		"Romantic Performer", 	"INFp","IEI","INFJ","beta")},
	eNFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, false,false, 
		"Nightingale", 	"Descending Someone", 		"Classical Performer", 	"ENFj","EIE","ENFJ","beta")},
	eNTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, true,
		"Falcon", 		["Cleric and","Ascending Anyone."], 		"Romantic Cleric", 		"INTp","ILI","INTJ","gamma")},
	eNTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, false, 
		"Piranha", 		"Descending Anyone", 		"Classical Cleric", 	"ENTj","LIE","ENTJ","gamma")},
	NaT: function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, true,
		"", 		"", 		"", 	"","","")}}
/*function tYniTo4ModA( ni){ var ie, SN, FT, CR; var ret ="";
	ni.charAt(3)==="C" ? CR =false : CR =true;
	ni.charAt(2)==="F" ? FT =false : FT =true;
	ni.charAt(1)==="S" ? SN =false : SN =true;
	ni.charAt(0)==="i" ? ie =false : ie =true;
	CR ? ie =!ie;
	ie ? ret +="e" : ret += "i";
	SN ? ret +="N" : ret += "S";
	FT ? ret +="F" : ret += "S";
	CR ? ret +="p" : ret += "j";
		if( !CR){ if( ni.charAt(0)==="i"){ ie =false;}}}

	ni.charAt(3)==="C" ? ni.charAt(0)==="C" r ="j" : r ="p"; }*/
function mkSociotype( o,ni,ab,parent,s,ie,SN,FT,CR,zo,desc,call,modA4,modA3,MBTI,quadra){
							o.ni=ni; o.zo=zo; o.desc=desc; o.call=call; o.modA4=modA4; o.modA3=modA3; o.MBTI=MBTI; o.quadra=quadra;
							if(ni!=="NaT"){ o.nI=ni};
							o.ie=ie; o.SN=SN; o.FT=FT; o.CR=CR;
							//inhTy( 		o, parent);
							o.iEs 		= AB.iEs;
							o.fNs 		= precalcFunctions( 						FL.Functions.seed, 	parent);
							o.cRs 		= precalcCircuits( FL.Circuits.seed, 	parent);
							o.fAs 		= o.fNs.concat( 				o.cRs);
							o.absSpace 	= AB.absSpace;
							o.relSpace 	= orientRelSpace( o, precalcSocionicsEssence( o.fNs, o.cRs));
							o.cRs 		= orientCircuitsAbsolutely( o);
							o.mapSpace 	= precalcSocionicsMetaphysics( 	o.iEs);
							o.dirSpace 	= orientDirSpace( o, precalcSocionicsEssence( o.fNs, o.cRs));
							
						}

function connectNavigationSpaces( ctr,dir){
	function f(rZ,rY,rX){ dir[rZ][rY][rX].ctr =ctr[rZ][rY][rX];
		dir[rZ][rY][rX].rX=rX; 		dir[rZ][rY][rX].rY=rY; 		dir[rZ][rY][rX].rZ=rZ;
		dir[rZ][rY][rX].rx=rX-1; 	dir[rZ][rY][rX].ry=rY-1; 	dir[rZ][rY][rX].rz=rZ-1}
	f(0,0,0); f(0,0,2); f(0,2,0); f(0,2,2); f(2,2,0); f(2,2,2); f(2,0,0); f(2,0,2);	return dir}
function connectStudySpaces( abs,rel){
	function f(aZ,aY,aX){ rel[aZ][aY][aX].abs =abs[aZ][aY][aX];
		rel[aZ][aY][aX].aX=aX; 		rel[aZ][aY][aX].aY=aY; 		rel[aZ][aY][aX].aZ=aZ;
		rel[aZ][aY][aX].ax=aX-1; 	rel[aZ][aY][aX].ay=aY-1; 	rel[aZ][aY][aX].az=aZ-1}
	f(0,0,0); f(0,0,2); f(0,2,0); f(0,2,2); f(2,2,0); f(2,2,2); f(2,0,0); f(2,0,2);	return rel}
function tor(src){ var ret = mk3Space();
ret[0][2][0]=src[0][0][0];ret[2][2][0]=src[0][2][0];ret[2][0][0]=src[2][2][0];ret[0][0][0]=src[2][0][0];
ret[0][2][2]=src[0][0][2];ret[2][2][2]=src[0][2][2];ret[2][0][2]=src[2][2][2];ret[0][0][2]=src[2][0][2];
ret[1][2][2]=src[0][1][2];ret[2][1][2]=src[1][2][2];ret[1][0][2]=src[2][1][2];ret[0][1][2]=src[1][0][2];
ret[2][0][1]=src[2][2][1];ret[2][2][1]=src[0][2][1];ret[0][2][1]=src[0][0][1];ret[0][0][1]=src[2][0][1];
ret[1][2][0]=src[0][1][0];ret[2][1][0]=src[1][2][0];ret[1][0][0]=src[2][1][0];ret[0][1][0]=src[1][0][0];return ret}
function rot(src){ var ret = mk3Space();
ret[0][0][0]=src[0][2][0];ret[0][2][0]=src[2][2][0];ret[2][2][0]=src[2][0][0];ret[2][0][0]=src[0][0][0];
ret[0][0][2]=src[0][2][2];ret[0][2][2]=src[2][2][2];ret[2][2][2]=src[2][0][2];ret[2][0][2]=src[0][0][2];
ret[0][1][2]=src[1][2][2];ret[1][2][2]=src[2][1][2];ret[2][1][2]=src[1][0][2];ret[1][0][2]=src[0][1][2];
ret[0][0][1]=src[0][2][1];ret[2][0][1]=src[0][0][1];ret[2][2][1]=src[2][0][1];ret[0][2][1]=src[2][2][1];
ret[0][1][0]=src[1][2][0];ret[1][2][0]=src[2][1][0];ret[2][1][0]=src[1][0][0];ret[1][0][0]=src[0][1][0];return ret}
function ver(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][2-y][x] = src[z][y][x];}}}  return ret}
function lon(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[2-z][y][x] = src[z][y][x];}}}  return ret}
function lat(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][y][2-x] = src[z][y][x];}}}  return ret}
function orientDirSpace(t, dirSpace){ switch(t.ni){
	case "iSTR": dirSpace =connectNavigationSpaces( tor(lon(lat(t.mapSpace))), 	dirSpace); break;
	case "iSTC": dirSpace =connectNavigationSpaces( tor(lat(t.mapSpace)), 		dirSpace); break;
	case "eSTR": dirSpace =connectNavigationSpaces( tor(lon(t.mapSpace)), 		dirSpace); break;
	case "eSTC": dirSpace =connectNavigationSpaces( tor(t.mapSpace), 			dirSpace); break;
	case "iNFR": dirSpace =connectNavigationSpaces( rot(lon(lat(t.mapSpace))), 	dirSpace); break;
	case "iNFC": dirSpace =connectNavigationSpaces( rot(lat(t.mapSpace)), 		dirSpace); break;
	case "eNFR": dirSpace =connectNavigationSpaces( rot(lon(t.mapSpace)),  		dirSpace); break;
	case "eNFC": dirSpace =connectNavigationSpaces( rot(t.mapSpace), 			dirSpace); break;
	case "iSFR": dirSpace =connectNavigationSpaces( lon(lat(ver(t.mapSpace))), 	dirSpace); break;
	case "iSFC": dirSpace =connectNavigationSpaces( lat(ver(t.mapSpace)), 		dirSpace); break;
	case "eSFR": dirSpace =connectNavigationSpaces( lon(ver(t.mapSpace)),  		dirSpace); break;
	case "eSFC": dirSpace =connectNavigationSpaces( ver(t.mapSpace), 			dirSpace); break;
	case "iNTC": dirSpace =connectNavigationSpaces( lon(lat(t.mapSpace)), 		dirSpace); break;
	case "iNTR": dirSpace =connectNavigationSpaces( lat(t.mapSpace),  			dirSpace); break;
	case "eNTC": dirSpace =connectNavigationSpaces( lon(t.mapSpace), 			dirSpace); break;
	case "eNTR": dirSpace =connectNavigationSpaces( t.mapSpace, dirSpace)} return dirSpace}
function orientRelSpace(t, relSpace){ switch(t.ni){
	case "iSTR": relSpace =connectStudySpaces( t.absSpace, tor(lon(lat(relSpace)))); 	break;
	case "iSTC": relSpace =connectStudySpaces( t.absSpace, tor(lat(relSpace))); 		break;
	case "eSTR": relSpace =connectStudySpaces( t.absSpace, tor(lon(relSpace))); 		break;
	case "eSTC": relSpace =connectStudySpaces( t.absSpace, tor(relSpace)); 				break;
	case "iNFR": relSpace =connectStudySpaces( t.absSpace, rot(lon(lat(relSpace)))); 	break;
	case "iNFC": relSpace =connectStudySpaces( t.absSpace, rot(lat(relSpace))); 		break;
	case "eNFR": relSpace =connectStudySpaces( t.absSpace, rot(lon(relSpace))); 		break;
	case "eNFC": relSpace =connectStudySpaces( t.absSpace, rot(relSpace)); 				break;
	case "iSFR": relSpace =connectStudySpaces( t.absSpace, lon(lat(ver(relSpace)))); 	break;
	case "iSFC": relSpace =connectStudySpaces( t.absSpace, lat(ver(relSpace))); 		break;
	case "eSFR": relSpace =connectStudySpaces( t.absSpace, lon(ver(relSpace))); 		break;
	case "eSFC": relSpace =connectStudySpaces( t.absSpace, ver(relSpace)); 				break;
	case "iNTC": relSpace =connectStudySpaces( t.absSpace, lon(lat(relSpace))); 		break;
	case "iNTR": relSpace =connectStudySpaces( t.absSpace, lat(relSpace)); 				break;
	case "eNTC": relSpace =connectStudySpaces( t.absSpace, lon(relSpace)); 				break;
	case "eNTR": relSpace =connectStudySpaces( t.absSpace, relSpace)} return relSpace}
function orientCircuitsAbsolutely(t){ var c=null;
	if( t.ie){ 	c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi =  c.rDi})}
	else{ 		c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi = -c.rDi})}
	if( t.SN){ 	c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi =  c.rDi});
		if(!t.RC){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}
		else{		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}}
	else{		c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi = -c.rDi});
		if(!t.RC){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}
		else{ 		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}}return t.cRs}
// SAISINKO LAUTASELLISEN RETURNAMUUSSIA
function precalcSocionicsEssence( fNs,cRs){ var space =mk3Space();
	space[2][0][2] =fNs.find( o => o.ni ==="f1");	
	space[2][0][0] =fNs.find( o => o.ni ==="f2");	
	space[0][0][0] =fNs.find( o => o.ni ==="f3");	
	space[0][0][2] =fNs.find( o => o.ni ==="f4");	
	space[0][2][2] =fNs.find( o => o.ni ==="f5");	
	space[0][2][0] =fNs.find( o => o.ni ==="f6");	
	space[2][2][0] =fNs.find( o => o.ni ==="f7");	
	space[2][2][2] =fNs.find( o => o.ni ==="f8");
	space[2][0][1] =orientCircuitRelatively( space,2,0,1,cRs.find( o => o.ni ==="A"));
	space[1][0][0] =orientCircuitRelatively( space,1,0,0,cRs.find( o => o.ni ==="G"));
	space[0][0][1] =orientCircuitRelatively( space,0,0,1,cRs.find( o => o.ni ==="B"));
	space[0][1][2] =orientCircuitRelatively( space,0,1,2,cRs.find( o => o.ni ==="I"));
	space[0][2][1] =orientCircuitRelatively( space,0,2,1,cRs.find( o => o.ni ==="C"));
	space[1][2][0] =orientCircuitRelatively( space,1,2,0,cRs.find( o => o.ni ==="H"));
	space[2][2][1] =orientCircuitRelatively( space,2,2,1,cRs.find( o => o.ni ==="D"));
	space[1][2][2] =orientCircuitRelatively( space,1,2,2,cRs.find( o => o.ni ==="E"));
	space[1][0][2] =orientCircuitRelatively( space,1,0,2,cRs.find( o => o.ni ==="F"));
	space[2][1][0] =orientCircuitRelatively( space,2,1,0,cRs.find( o => o.ni ==="K"));
	space[2][1][2] =orientCircuitRelatively( space,2,1,2,cRs.find( o => o.ni ==="L"));
	space[0][1][0] =orientCircuitRelatively( space,0,1,0,cRs.find( o => o.ni ==="J"));return space}
function orientCircuitRelatively(space,x,y,z,c){ c.rX =x; c.rY =y; c.rZ =z; //c.tRx=x-1;c.tRy=y-1;c.tRz=z-1;
	if 		(c.lat)	{ c.acc =space[x][y][z -c.rDi]; c.pro =space[x][y][z +c.rDi]}
	else if (c.lon)	{ c.acc =space[x -c.rDi][y][z]; c.pro =space[x +c.rDi][y][z]}
	else 			{ c.acc =space[x][y -c.rDi][z]; c.pro =space[x][y +c.rDi][z]}return c}

/*

func i black
func e white
A brown
B red
C orange
D yellow
E lime
F green
G teal
H blue
I violet
J lilac
K silver
L grey

*/


function getDifferenceOfEssence(src,dst){ var r = {x: src.x -dst.x, y: src.y -dst.y, z: src.z -dst.z}; return r}
function getCoordinatesOfEssence(ni,src){
	for(var z=0; z<3; z++){
		for(var y=0; y<3; y++){
			for(var x=0; x<3; x++){
				if(src[x][y][z]){ if(src[x][y][z].ni === ni){ return { z:z, y:y, x:x}}}}}}}
function getNeighboursOfEssence(eX,eY,eZ,tY){ var r=[];
	var nX1 = eX+1; nX1 ===  3 ? nX1 = 0:true;
	var nX2 = eX-1; nX2 === -1 ? nX2 = 2:true;
	var nY1 = eY+1; nY1 ===  3 ? nY1 = 0:true;
	var nY2 = eY-1; nY2 === -1 ? nY2 = 2:true;
	//var nZ1 = eZ+1; nZ1 ===  3 ? nZ1 = 0:true;
	//var nZ2 = eZ-1; nZ2 === -1 ? nZ2 = 2:true;
	tY[nX1][eY][eZ] ? r.push(tY[nX1][eY][eZ]):true;
	tY[nX2][eY][eZ] ? r.push(tY[nX2][eY][eZ]):true;
	tY[eX][nY1][eZ] ? r.push(tY[eX][nY1][eZ]):true;
	tY[eX][nY2][eZ] ? r.push(tY[eX][nY2][eZ]):true;
	//tY[eX][eY][nZ1] ? r.push(tY[eX][eY][nZ1]):true;
	//tY[eX][eY][nZ2] ? r.push(tY[eX][eY][nZ2]):true;
	return r}


/*function Signal( subj){ mkSignal(this, subj, subj.presentSubjs, subj.awaySubjs, subj.presentPatts, subj.awayPatts)}
function mkSignal(o,subj,presentSubjs,awaySubjs,presentObjs,awayObjs){
	var subjs=sortByQuality( presentSubjs,awaySubjs);
	var patts=sortByQuality( presentPatts,awayPatts);
	var topic=maxByQuality() //äää
}*/


function precalcCircuits( seed,parent){ cRs =[]; var b =null;
	for(let n=0; n <AB.cRsL; n++){ b =mkCircuit( seed[n],parent);cRs.push( b)}return cRs}
function mkCircuit( ni,parent){ var c =null; switch( ni){
	case "A" : c =new FL.Circuits.A( ni); inhCircuit( c,parent);return c;
	case "B" : c =new FL.Circuits.B( ni); inhCircuit( c,parent);return c;
	case "C" : c =new FL.Circuits.C( ni); inhCircuit( c,parent);return c;
	case "D" : c =new FL.Circuits.D( ni); inhCircuit( c,parent);return c;
	case "E" : c =new FL.Circuits.E( ni); inhCircuit( c,parent);return c;
	case "F" : c =new FL.Circuits.F( ni); inhCircuit( c,parent);return c;
	case "G" : c =new FL.Circuits.G( ni); inhCircuit( c,parent);return c;
	case "H" : c =new FL.Circuits.H( ni); inhCircuit( c,parent);return c;
	case "I" : c =new FL.Circuits.I( ni); inhCircuit( c,parent);return c;
	case "J" : c =new FL.Circuits.J( ni); inhCircuit( c,parent);return c;
	case "K" : c =new FL.Circuits.K( ni); inhCircuit( c,parent);return c;
	case "L" : c =new FL.Circuits.L( ni); inhCircuit( c,parent);return c}}
function inhCircuit( c,parent){ if(parent){ c.parent = parent.cRs.find(o => o.ni === c.ni)}}
FL.Circuits={ seed:["A","B","C","D","E","F","G","H","I","J","K","L"],
	A:function( ni){ mkCircuit2( this,ni,false,true, false,-1,true, true, true ,"Love Det",/*"love\n detector"*/ 		"#732a2a")},
	B:function( ni){ mkCircuit2( this,ni,false,true, false, 1,false,true, false,"Daring",/*"daring" 				*/		"#ff0000")},
	C:function( ni){ mkCircuit2( this,ni,false,true, false,-1,false,true, true ,"Challeng",/*"challenge\n detector"*/ 	"#ff8888")},
	D:function( ni){ mkCircuit2( this,ni,false,true, false, 1,true, true, false,"Harvestr",/*"harvester" 			*/	"#ffa500")},
	E:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,true ,"Ego",/*"Ego" 				*/	 		"#ffff00")},
	F:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,true ,"SuperEgo",/*"Super-Ego" 			*/ 		"#a5a500")},
	G:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,false,"Super-Id",/*"Super-Id" 			*/	 	"#00ff00")},
	H:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,false,"Id",/*"Id" 					*/ 		"#00ffff")},
	I:function( ni){ mkCircuit2( this,ni,false,false,true,  1,true, false,false,"NeuroSom",/*"neuro-\n somatic" 	*/	 	"#8888ff")},
	J:function( ni){ mkCircuit2( this,ni,false,false,true, -1,false,false,true ,"MetaProg",/*"meta-\n program." 	*/	 	"#8800e1")},
	K:function( ni){ mkCircuit2( this,ni,false,false,true, -1,true, false,true ,"MorphoGn",/*"morpho-\n genetic" 	*/ 		"#ff00ff")},
	L:function( ni){ mkCircuit2( this,ni,false,false,true,  1,false,false,false,"Meta-Ego",/*"Meta-Ego" 			*/		"#888888")}}
function mkCircuit2( 			 c,   ni,lon,  lat,  ver, rDi,str,  val,  mnt,  nI, hex){
	c.lon=lon; c.lat=lat; c.ver=ver; c.rDi=rDi; c.ni=ni; c.ni2=ni; c.str=str; c.val=val; c.mnt=mnt; c.nI=nI; c.hex=hex;
	c.count=0; c.K=0; c.V=0; c.spd={lon:0,lat:0,ver:0}}

function precalcFunctions(seed,parent){ fNs =[]; var b =null;
	for(let n=0; n <AB.fNsL; n++){ b =mkFunc( seed[n],parent);fNs.push( b)}return fNs}
function mkFunc(ni,parent){ var f=null; switch( ni){
	case "f1" : f =new FL.Functions.f1( ni); inhFunc( f,parent);return f;
	case "f2" : f =new FL.Functions.f2( ni); inhFunc( f,parent);return f;
	case "f3" : f =new FL.Functions.f3( ni); inhFunc( f,parent);return f;
	case "f4" : f =new FL.Functions.f4( ni); inhFunc( f,parent);return f;
	case "f5" : f =new FL.Functions.f5( ni); inhFunc( f,parent);return f;
	case "f6" : f =new FL.Functions.f6( ni); inhFunc( f,parent);return f;
	case "f7" : f =new FL.Functions.f7( ni); inhFunc( f,parent);return f;
	case "f8" : f =new FL.Functions.f8( ni); inhFunc( f,parent);return f}}
function inhFunc(f,parent){ if(parent){ f.parent = parent.fNs.find(o => o.ni ===f.ni)}}
FL.Functions={ seed: ["f1","f2","f3","f4","f5","f6","f7","f8"],
	f1:function( ni){ mkFunc2(this,ni,"1",2,  2,  0,  false,false,true ,"Role\n Func." 	,"#000000")},
	f2:function( ni){ mkFunc2(this,ni,"2",2,  0,  0,  false,true, false,"Sugg.\n Func." ,"#ffffff")},
	f3:function( ni){ mkFunc2(this,ni,"3",0,  0,  0,  false,true, false,"Mobi.\n Func." ,"#ffffff")},
	f4:function( ni){ mkFunc2(this,ni,"4",0,  2,  0,  false,false,true ,"Vuln.\n Func." ,"#000000")},
	f5:function( ni){ mkFunc2(this,ni,"5",0,  2,  2,  true, true, true ,"Lead.\n Func." ,"#ffffff")},
	f6:function( ni){ mkFunc2(this,ni,"6",0,  0,  2,  true, false,false,"Igno.\n Func." ,"#000000")},
	f7:function( ni){ mkFunc2(this,ni,"7",2,  0,  2,  true, false,false,"Demo.\n Func." ,"#000000")},
	f8:function( ni){ mkFunc2(this,ni,"8",2,  2,  2,  true, true, true ,"Crea.\n Func." ,"#ffffff")}}
function mkFunc2( 			  f,   ni,ni2,rX, rZ, rY, str,  val,  mnt  ,nI,hex){
	f.rX=rX; f.rZ=rZ; f.rY=rY; //f.tRx=tRX-1;f.tRz=tRZ-1;f.tRy=tRY-1;
	f.ni=ni;f.ni2=ni2;f.nI=nI; f.str=str;f.val=val;f.mnt=mnt;f.hex=hex;
	f.count=0; f.V=0; f.K=0; f.spd={lon:0,lat:0,ver:0}}

function precalcSocionicsMetaphysics(iEs){ var s=mk3Space();
	s[0][0][0]=iEs.find(o=>o.ni==="Fi");	s[0][0][2]=iEs.find(o=>o.ni==="Fe");	
	s[2][0][0]=iEs.find(o=>o.ni==="Si");	s[2][0][2]=iEs.find(o=>o.ni==="Se");
	s[2][2][0]=iEs.find(o=>o.ni==="Ti");	s[2][2][2]=iEs.find(o=>o.ni==="Te");
	s[0][2][0]=iEs.find(o=>o.ni==="Ni");	s[0][2][2]=iEs.find(o=>o.ni==="Ne");return s}
function mk3Space(){ var space=[]; for(var z=0; z<=2;z++){space[z]=[];
										for(var y=0; y<=2; y++){space[z][y]=[];
											for(var x=0; x<=2; x++){space[z][y][x]=null}}} return space}



function precalcInformationElements( seed,parent){ var b =null; var iEs =[];
	for(let n=0; n <AB.iEsL; n++){
		/*if( s){ if(s.tY.iEs.length >0){ return s.tY.iEs}}
		else{*/ 	 b =mkIe( seed[n],parent); iEs.push( b)}
				/*if(s){ switch(seed[n]){ case "Fi" : s.Fi =b; break; case "Fe" : s.Fe =b; break;
										case "Si" : s.Si =b; break; case "Se" : s.Se =b; break;
										case "Ti" : s.Ti =b; break; case "Te" : s.Te =b; break;
										case "Ni" : s.Ni =b; break; case "Ne" : s.Ne =b; break}}}*/return iEs}
function mkIe(ni,parent){ var iE =null; switch( ni){
	case "Fi" : iE =new FL.InformationElements.Fi( ni); /*inhIe( iE,parent);*/ return iE;
	case "Fe" : iE =new FL.InformationElements.Fe( ni); /*inhIe( iE,parent);*/ return iE;
	case "Si" : iE =new FL.InformationElements.Si( ni); /*inhIe( iE,parent);*/ return iE;
	case "Se" : iE =new FL.InformationElements.Se( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ti" : iE =new FL.InformationElements.Ti( ni); /*inhIe( iE,parent);*/ return iE;
	case "Te" : iE =new FL.InformationElements.Te( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ni" : iE =new FL.InformationElements.Ni( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ne" : iE =new FL.InformationElements.Ne( ni); /*inhIe( iE,parent);*/ return iE}}
function inhIe(iE,parent){ if(parent){ iE.parent = parent.iEs.find(o => o.ni ===iE.ni)}}
FL.InformationElements={ seed: ["Fi","Fe","Si","Se","Ti","Te","Ni","Ne"],
	Fi:function( ni){ mkIe2(this,ni,false,false,false)},
	Fe:function( ni){ mkIe2(this,ni,false,false,true )},
	Si:function( ni){ mkIe2(this,ni,true, false,false)},
	Se:function( ni){ mkIe2(this,ni,true, false,true )},
	Ti:function( ni){ mkIe2(this,ni,true, true, false)},
	Te:function( ni){ mkIe2(this,ni,true, true, true )},
	Ni:function( ni){ mkIe2(this,ni,false,true, false)},
	Ne:function( ni){ mkIe2(this,ni,false,true, true )}}
/*function getSqs(a,s1,s2,s3,s4){ var ret=[]; var b=null;
	b=a.find(o => o.ni ===s1); ret.push(b);
	b=a.find(o => o.ni ===s2); ret.push(b);
	b=a.find(o => o.ni ===s3); ret.push(b);
	b=a.find(o => o.ni ===s4); ret.push(b); return ret}*/
// make also crosshair that intersects sircuits and not intersect functions
// pms and lps: peaceful iok uok, playful ino uno, caring ino uno, hostile iok uno, fight iok uno, escape ino uno
// there is no similar need to invoke a circuit from its accepting function? because? because the circuit overwrites the accepting function's state with the producing function's state? so the only reason to use it from the accepting function before the producing function has already been used would be to empty the data of the accepting function? which can be important but is a completely different reason to use the circuit.
function mkIe2( o,ni,mo,ul,ie){ o.mo=mo;o.ul=ul;o.ie=ie;o.ni=ni;
	/*console.log(qua);
	switch(ni){ case "Fi" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["FEEL_0i","FEEL_2i","FEEL_4i"],3);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"U").filter( v => v.i); break; 
		case "Fe" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["FEEL_1e","FEEL_3e"],2);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"U").filter( v => v.e); break;
		case "Si" : 
			o.rQs =getByNis(qua.sQs,AB.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["THINK_1i","THINK_3i"],2);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"O").filter( v => v.i); break;
		case "Se" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["THINK_0e","THINK_2e","THINK_4e"],3);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"O").filter( v => v.i); break;
		case "Ni" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["FEEL_0i","FEEL_2i","FEEL_4i"],3);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"M").filter( v => v.i); break;
		case "Ne" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["FEEL_1e","FEEL_3e"],2);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"M").filter( v => v.e); break;
		case "Ti" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["THINK_1i","THINK_3i"],2);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"L").filter( v => v.i); break;
		case "Te" :
			o.rQs =getByNis(qua.sQs,AB.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AB.sQsL,["THINK_0e","THINK_2e","THINK_4e"],3);
			o.vQs =getByNi1st(qua.vQs,AB.vQsL,"U").filter( v => v.e);}
	o.sQs =o.rQs.concat( o.cQs)*/}

/*
"R_0", "Si_4_PHEN_1", "Se_3_LOWN_2", "Si_2_HIGH_3", "Se_1_DLBR_4",	"Ni_4_HRMNY_1","Ne_3_SIGNI_2","Ni_2_AWARE_3","Ne_1_UNITY_4"
	"F_0i", 	"F_1e", 	"F_2i", 	"F_3e", 	"F_4i",	"T_0e", "T_1i", "T_2e", "T_3i", "T_4e"],
*/


/*
If femininity acquires a negative karma the result is neurosis?

Demiurge is a definable subject.

The attributes of demiurge approximate the attributes of the best subject known to the subject.

If the subject is always only the object of a better subject and has zero distance to the better subject, the attributes of demiurge for the subject turn identical to the attributes of the better subject unless an even better subject is known.

The demiurge is a container of perceptions with many forms, which may be called faces. The demiurge has a good face and a bad face.

The subject's selfishness is proportional to the subject's resemblance of the good face of the demiurge.
The subject's self-hate is proportional the the subject's resemblance of the bad face of the demiurge.
A perception associates to singular events.

The absolute minimum romantic complexity of good is 0 and absolute minimum classical complexity of good is 0 for females and 1 for males.
The absolute minimum romantic complexity of bad is 1 and absolute minimum classical complexity of bad is 0.

The subject's conception of God has a minimum and maximum romantic complexity and a minimum and maximum classical complexity. The minimums are negative and the maximums are positive. These are determined according to the subject's best experiences.

The subject's conception of the Devil also has minimum complexities which are determined according to worst experiences. 

If the subject believes God is definable, all singular events associate to the current faces of the demiurge.
If the subject believes God is undefinable, a singular event associates to the current faces of the demiurge only when the absolute amount of its value or karma equals resolution.
In the model, God contains the demiurge but also all sequences of events.
"God" and "demiurge" are absolute subjects. Their instances are constituents of the cognition of a relatively existing subject.
"Mother" and "father" are absolute subjects. For a relatively existing subject, "mother" is a personification of value and "father" a personification of karma.

Functions can iterate themselves without going via any circuit.

Several subsequent iterations of functions are the same mosaic event.

Using a func or circ costs 1 energy and using a reversed circ costs 2 energy.

Using a weak func or circ costs 1 energy.

Object display feature: show only one red-blue quadrant.

Dynamic Metaphysics

It's good if bad people start fearing the sound "Allah" because then they fwill dislike handling dinner table cutlery, so wealth won't make as happy as it otherwise woulnd.

Jos ei ymmärrä jotain mitä toinen sanoo, sen sanominen oli epäfem femi ilmentymä

If you have to wait in line with other people you will feel you are equal with them. If you've only waited in line with white people this will make the company of non-white people feel better.

If signal is in circuit the circuit is always reversed?

subjects make intension first, objects make extension first? accepting subject function makes extensions and producing subject fuction makes intensions? accepting object function makes intensions and producing object function makes extensions? circuit swaps intension and extension?

***
*/

FL.Origins ={ seed:["Allah",
					"Monad",
					"Yahweh",
					"Nothing",
					"Kali"],
	Allah 	:function(ni){ mkOrigin2( this,ni,true, false)},
	Monad 	:function(ni){ mkOrigin2( this,ni,true, false,"MAS","MAS")},
	Yahweh 	:function(ni){ mkOrigin2( this,ni,true, true)},
	Nothing :function(ni){ mkOrigin2( this,ni,false,false)},
	Kali 	:function(ni){ mkOrigin2( this,ni,true, true, "FEM","FEM")}};
function mkOrigin(ni,parent){ var O =null; switch(ni){
	case "Allah"  :O=new FL.Origins.Allah( ni); 	inhOrigin( O,parent);return O;
	case "Monad"  :O=new FL.Origins.Monad( ni); 	inhOrigin( O,parent);return O;
	case "Yahweh" :O=new FL.Origins.Yahweh( ni);	inhOrigin( O,parent);return O;
	case "Kali"   :O=new FL.Origins.Kali( ni); 		inhOrigin( O,parent);return O;
	case "Nothing":O=new FL.Origins.Nothing( ni); 	inhOrigin( O,parent);return O}}
function mkOrigin2(o,ni,subj,definable,sex,gnd){
	o.ni =ni; o.definable =definable; o.subj=subj;
	if( subj){ 		o.gnd =gnd; o.sex =sex}
	if( definable){ o.tYs =[]; o.mDs =[]; o.pMs =[]; o.gNs =[]; o.sXs =[]}
	else{ 			o.tYs=null;o.mDs=null;o.pMs=null;o.gNs=null;o.sXs=null}}
function precalcOrigins( seed,parent){ a =[]; var b =null;
	for(let n=0; n <AB.originsL; n++){ b =mkOrigin( seed[n],parent); a.push( b)}return a}
function inhOrigin(O,parent){ if(parent){ O.parent = parent.origins.find(o => o.ni ===O.ni)}}

FL.BinaryGenders ={ seed:["Feminine","Neutral","Masculine"],
	Feminine: 	function(ni){ mkBinaryGender2( this,ni,false)},
	Neutral: 	function(ni){ mkBinaryGender2( this,ni,undefined)},
	Masculine: 	function(ni){ mkBinaryGender2( this,ni,true)}}
function mkBinaryGender(ni){ var o =null; switch(ni){
	case "Feminine" :o =new FL.BinaryGenders.Feminine(ni); 	inhBinaryGender( o,parent);return o;
	case "Neutral" 	:o =new FL.BinaryGenders.Neutral(ni); 	inhBinaryGender( o,parent);return o;
	case "Masculine":o =new FL.BinaryGenders.Masculine(ni); inhBinaryGender( o,parent);return o}}
function mkBinaryGender2(o,ni,masculine){ this.ni=ni;switch(masculine){ case undefined 	:o.masculine =undefined;
																		case false 		:o.masculine =false;
																		case true 		:o.masculine =true}}






function precalcFeminineQualities( seed,parent){ var b =null; var a =[];
	for(var n=0; n <AB.fQsL; n++){	b =mkCq( seed[n],parent); a.push( b);}return a}
FL.FeminineQualities =["F Fis 0","F Fiw 1","F Fis 2","F Few 3","F Fes 4","F NIL 0","F Tew 0","F Tes 1","F Tew 2","F Tis 3","F Tiw 4"];
function precalcMasculineQualities( seed,parent){ var b =null; var a =[];
	for(var n=0; n <AB.mQsL; n++){	b =mkCq( seed[n],parent); a.push( b);}return a}
FL.MasculineQualities =["M Fis 0","M Fiw 1","M Fis 2","M Few 3","M Fes 4","M NIL 0","M Tew 0","M Tes 1","M Tew 2","M Tis 3","M Tiw 4"];
function mkCq( ni,parent){ var q=null; switch(ni){
	case "F Fis 0":q=new FL.ClassicalQualities.F_Fis_0(ni); inhSq( q,parent);return q;
	case "F Fiw 1":q=new FL.ClassicalQualities.F_Fiw_1(ni); inhSq( q,parent);return q;
	case "F Fis 2":q=new FL.ClassicalQualities.F_Fis_2(ni); inhSq( q,parent);return q;
	case "F Few 3":q=new FL.ClassicalQualities.F_Few_3(ni); inhSq( q,parent);return q;
	case "F Fes 4":q=new FL.ClassicalQualities.F_Fes_4(ni); inhSq( q,parent);return q;
	case "F NIL 0":q=new FL.ClassicalQualities.F_NIL_0(ni); inhSq( q,parent);return q;
	case "F Tew 0":q=new FL.ClassicalQualities.F_Tew_0(ni); inhSq( q,parent);return q;
	case "F Tes 1":q=new FL.ClassicalQualities.F_Tes_1(ni); inhSq( q,parent);return q;
	case "F Tew 2":q=new FL.ClassicalQualities.F_Tew_2(ni); inhSq( q,parent);return q;
	case "F Tis 3":q=new FL.ClassicalQualities.F_Tis_3(ni); inhSq( q,parent);return q;
	case "F Tiw 4":q=new FL.ClassicalQualities.F_Tiw_4(ni); inhSq( q,parent);return q;
	case "M Fis 0":q=new FL.ClassicalQualities.M_Fis_0(ni); inhSq( q,parent);return q;
	case "M Fiw 1":q=new FL.ClassicalQualities.M_Fiw_1(ni); inhSq( q,parent);return q;
	case "M Fis 2":q=new FL.ClassicalQualities.M_Fis_2(ni); inhSq( q,parent);return q;
	case "M Few 3":q=new FL.ClassicalQualities.M_Few_3(ni); inhSq( q,parent);return q;
	case "M Fes 4":q=new FL.ClassicalQualities.M_Fes_4(ni); inhSq( q,parent);return q;
	case "M NIL 0":q=new FL.ClassicalQualities.M_NIL_0(ni); inhSq( q,parent);return q;
	case "M Tew 0":q=new FL.ClassicalQualities.M_Tew_0(ni); inhSq( q,parent);return q;
	case "M Tes 1":q=new FL.ClassicalQualities.M_Tes_1(ni); inhSq( q,parent);return q;
	case "M Tew 2":q=new FL.ClassicalQualities.M_Tew_2(ni); inhSq( q,parent);return q;
	case "M Tis 3":q=new FL.ClassicalQualities.M_Tis_3(ni); inhSq( q,parent);return q;
	case "M Tiw 4":q=new FL.ClassicalQualities.M_Tiw_4(ni); inhSq( q,parent);return q}}
function inhSq( q,parent){ if( parent){ q.parent=parent.sQs.find(o => o.ni === q.ni)}}
FL.ClassicalQualities={ 
	F_NIL_0:function(ni){mkCq2(this,ni,false,false, 0,0,"♀ NIL 0","strength")},
	F_Fis_0:function(ni){mkCq2(this,ni,false,false,-1,0,"♀ Fis 0","no feeling")},
	F_Fiw_1:function(ni){mkCq2(this,ni,false,false,-1,1,"♀ Fiw 1","some feeling")},
	F_Fis_2:function(ni){mkCq2(this,ni,false,false,-1,2,"♀ Fis 2","feeling")},
	F_Few_3:function(ni){mkCq2(this,ni,false,true, -1,3,"♀ Few 3","expression")},
	F_Fes_4:function(ni){mkCq2(this,ni,false,true, -1,4,"♀ Fes 4","ritual")},
	F_Tew_0:function(ni){mkCq2(this,ni,false,true,  1,0,"♀ Tew 0","no thinking")},
	F_Tes_1:function(ni){mkCq2(this,ni,false,true,  1,1,"♀ Tes 1","some thinking")},
	F_Tew_2:function(ni){mkCq2(this,ni,false,true,  1,2,"♀ Tew 2","thinking")},
	F_Tis_3:function(ni){mkCq2(this,ni,false,false, 1,3,"♀ Tis 3","understanding")},
	F_Tiw_4:function(ni){mkCq2(this,ni,false,false, 1,4,"♀ Tiw 4","truth")},
	M_NIL_0:function(ni){mkCq2(this,ni,false,false, 0,0,"♂ NIL 0","weakness")},
	M_Fis_0:function(ni){mkCq2(this,ni,true, false,-1,0,"♂ Fis 0","no feeling")},
	M_Fiw_1:function(ni){mkCq2(this,ni,true, false,-1,1,"♂ Fiw 1","some feeling")},
	M_Fis_2:function(ni){mkCq2(this,ni,true, false,-1,2,"♂ Fis 2","feeling")},
	M_Few_3:function(ni){mkCq2(this,ni,true, true, -1,3,"♂ Few 3","expression")},
	M_Fes_4:function(ni){mkCq2(this,ni,true, true, -1,4,"♂ Fes 4","ritual")},
	M_Tew_0:function(ni){mkCq2(this,ni,true, true,  1,0,"♂ Tew 0","no thinking")},
	M_Tes_1:function(ni){mkCq2(this,ni,true, true,  1,1,"♂ Tes 1","some thinking")},
	M_Tew_2:function(ni){mkCq2(this,ni,true, true,  1,2,"♂ Tew 2","thinking")},
	M_Tis_3:function(ni){mkCq2(this,ni,true, false, 1,3,"♂ Tis 3","understanding")},
	M_Tiw_4:function(ni){mkCq2(this,ni,true, false, 1,4,"♂ Tiw 4","truth")}}
function mkCq2( o,ni,mas,ie,FT,mag,nI,desc){ o.ni=ni; o.mas=mas; o.ie=ie; o.FT=FT; o.mag=mag; o.nI=nI; o.desc=desc;}


function precalcAdultQualities( seed,parent){ var b =null; var a =[];
	for(let n=0; n <AB.aQsL; n++){	b =mkRq( seed[n],parent); a.push( b);}return a}
FL.AdultQualities =["A 4-Sew-1","A 3-Sew-2","A 2-Sew-3","A 1-Sew-4","A 0-Nis-0","A 4-Nis-1","A 3-Nis-2","A 2-Nis-3","A 1-Nis-4"];
function precalcChildQualities( seed,parent){ var b =null; var a =[];
	for(let n=0; n <AB.cQsL; n++){	b =mkRq( seed[n],parent); a.push( b);}return a}
FL.ChildQualities =["c 4-Sew-1","c 3-Sew-2","c 2-Sew-3","c 1-Sew-4","c 0-Nis-0","c 4-Nis-1","c 3-Nis-2","c 2-Nis-3","c 1-Nis-4"];
function mkRq( ni,par){ var q=null; switch(ni){
	case "c 0-Nis-0":q=new FL.RomanticQualities.c_0_Nis_0(ni); inhSq( q,par);return q;
	case "c 4-Sew-1":q=new FL.RomanticQualities.c_4_Sew_1(ni); inhSq( q,par);return q;
	case "c 3-Sew-2":q=new FL.RomanticQualities.c_3_Sew_2(ni); inhSq( q,par);return q;
	case "c 2-Sew-3":q=new FL.RomanticQualities.c_2_Sew_3(ni); inhSq( q,par);return q;
	case "c 1-Sew-4":q=new FL.RomanticQualities.c_1_Sew_4(ni); inhSq( q,par);return q;
	case "c 4-Nis-1":q=new FL.RomanticQualities.c_4_Nis_1(ni); inhSq( q,par);return q;
	case "c 3-Nis-2":q=new FL.RomanticQualities.c_3_Nis_2(ni); inhSq( q,par);return q;
	case "c 2-Nis-3":q=new FL.RomanticQualities.c_2_Nis_3(ni); inhSq( q,par);return q;
	case "c 1-Nis-4":q=new FL.RomanticQualities.c_1_Nis_4(ni); inhSq( q,par);return q;
	case "A 0-Nis-0":q=new FL.RomanticQualities.A_0_Nis_0(ni); inhSq( q,par);return q;
	case "A 4-Sew-1":q=new FL.RomanticQualities.A_4_Sew_1(ni); inhSq( q,par);return q;
	case "A 3-Sew-2":q=new FL.RomanticQualities.A_3_Sew_2(ni); inhSq( q,par);return q;
	case "A 2-Sew-3":q=new FL.RomanticQualities.A_2_Sew_3(ni); inhSq( q,par);return q;
	case "A 1-Sew-4":q=new FL.RomanticQualities.A_1_Sew_4(ni); inhSq( q,par);return q;
	case "A 4-Nis-1":q=new FL.RomanticQualities.A_4_Nis_1(ni); inhSq( q,par);return q;
	case "A 3-Nis-2":q=new FL.RomanticQualities.A_3_Nis_2(ni); inhSq( q,par);return q;
	case "A 2-Nis-3":q=new FL.RomanticQualities.A_2_Nis_3(ni); inhSq( q,par);return q;
	case "A 1-Nis-4":q=new FL.RomanticQualities.A_1_Nis_4(ni); inhSq( q,par);return q}}
FL.RomanticQualities={ 
	c_4_Sew_1:function(ni){mkRq2(this,ni,false,false,4,1,true, false,"c 4-S","-1", "phenomena")},
	c_3_Sew_2:function(ni){mkRq2(this,ni,false,false,3,2,true, false,"c 3-S","-2", "lower needs")},
	c_2_Sew_3:function(ni){mkRq2(this,ni,false,false,2,3,true, false,"c 2-S","-3", "higher needs")},
	c_1_Sew_4:function(ni){mkRq2(this,ni,false,false,1,4,true, false,"c 1-S","-4", "deliberation")},
	c_0_Nis_0:function(ni){mkRq2(this,ni,false,true, 0,0,false,true, "c 0-N","-0", "nothing")},
	c_4_Nis_1:function(ni){mkRq2(this,ni,false,true, 4,1,false,true, "c 4-N","-1", "harmony")},
	c_3_Nis_2:function(ni){mkRq2(this,ni,false,true, 3,2,false,true, "c 3-N","-2", "significance")},
	c_2_Nis_3:function(ni){mkRq2(this,ni,false,true, 2,3,false,true, "c 2-N","-3", "awareness")},
	c_1_Nis_4:function(ni){mkRq2(this,ni,false,true, 1,4,false,true, "c 1-N","-4", "unity")},
	A_4_Sew_1:function(ni){mkRq2(this,ni,true, false,4,1,true, false,"A 4-S","-1", "phenomena")},
	A_3_Sew_2:function(ni){mkRq2(this,ni,true, false,3,2,true, false,"A 3-S","-2", "lower needs")},
	A_2_Sew_3:function(ni){mkRq2(this,ni,true, false,2,3,true, false,"A 2-S","-3", "higher needs")},
	A_1_Sew_4:function(ni){mkRq2(this,ni,true, false,1,4,true, false,"A 1-S","-4", "deliberation")},
	A_0_Nis_0:function(ni){mkRq2(this,ni,true, true, 0,0,false,true, "A 0-N","-0", "nothing")},
	A_4_Nis_1:function(ni){mkRq2(this,ni,true, true, 4,1,false,true, "A 4-N","-1", "harmony")},
	A_3_Nis_2:function(ni){mkRq2(this,ni,true, true, 3,2,false,true, "A 3-N","-2", "significance")},
	A_2_Nis_3:function(ni){mkRq2(this,ni,true, true, 2,3,false,true, "A 2-N","-3", "awareness")},
	A_1_Nis_4:function(ni){mkRq2(this,ni,true, true, 1,4,false,true, "A 1-N","-4", "unity")}}
function mkRq2( o,ni,Ac,SN,F,T,ie,s,n1,n2,desc){ o.ni=ni; o.Ac=Ac; o.SN=SN; o.F=F; o.T=T; o.ie=ie; o.s=s; o.n1=n1; o.n2=n2; o.desc=desc;}









/*FL.Subjects ={ seed:["Allah","God","Yahweh","Satan", //the gender of allah is undefined, gender of yahweh is fluid
	"Femininity","Masculinity","Adults","Children","Pure","Hejssans","Islam","Kafirs","Culture","Logic","Subjectivity","Objectivity",
	"Best","Average","Median",
	"Best Human","Mr. Best","Mrs. Best","Best Adult","Best Child","Best Pure","Best Hejssan","Best Muslim","Best Kafir","Best Man","Best Woman","Best Boy","Best Girl", //cultural
	"Manhood","Womanhood","Boyhood","Girlhood", //logical
	"The Man","The Woman","The Boy","The Girl", //subjective
	"King of World","Queen of World","Prince of World","Princess of World", //objective
	"King of Muslims","Queen of Muslims","Prince of Muslims","Princess of Muslims", //objective
	"King of Kafir","Queen of Kafir","Prince of Kafir","Princess of Kafir", //objective
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",
	"Median Human","Median Muslim","Median Kafir","Median Man","Median Woman","Median Boy","Median Girl",
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",],
	}*/






function getAvailableMoves(subj){
	var moves=mkBoolMatrix( 4*subj.sex.reso+2);
}
function initTurn(sim){
	sim.keySubj.sMp = mkNullMatrix( 2*FL.vQr);
	sim.availableMoves = getAvailableMoves(sim.keySubj);
	//for(var n=0; n<sim.keySubj.subjs.length; n++){ populateMosaic(sim.keySubj, sim.keySubj.subjs[n])}
}
function attemptMove( mX, mY, preview){
	if( FL.keySubj.pGn.mas&&mX<2*FL.keySubj.pGn.reso+1&&mY<2*FL.keySubj.pGn.reso+1) {
		var mvX= mX -FL.keySubj.pGn.reso;
		var mvY= mY -FL.keySubj.pGn.reso;
		if( preview){ previewMove( FL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( FL.sim, mX, mY, mvX, mvY);return true }}
	else if(!FL.keySubj.pGn.mas&& mX<2*FL.keySubj.pGn.reso+1&&mY>2*FL.keySubj.pGn.reso){
		var mvX=mX -FL.keySubj.pGn.reso;
		var mvY=mY -((FL.keySubj.pGn.reso*3)+1);
		if( preview){ previewMove( FL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( FL.sim, mX, mY, mvX, mvY);return true }}
	return false}
function previewMove( sim, mX, mY, mvX, mvY){
	/*sim.personInTurn.mCpreview = sim.personInTurn.mCppl;*/
}
function moveAgents( sim, mX, mY, mvX, mvY){
	console.log("BREAK");
	sim.keySubj.agents.forEach(function(p){
		if(p.nI === sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*FL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*FL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*FL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*FL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*FL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*FL.keySubj.ni.bE.reso+2}}});
	sim.subjs.forEach(function(p){
		console.log(p.agents);
		if(p.nI === sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*FL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*FL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*FL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*FL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*FL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*FL.keySubj.ni.bE.reso+2}}
		//precalcOthers(sim.people);
		/*p.ppl.forEach(function(P){
			if(P.ni.in === sim.personInTurn.ni.in){ P.ni.mX =mX; P.ni.mY =mY}
			else{
				P.ni.mX+=mvX; while( P.ni.mX < 0){ P.ni.mX += 4*FL.personInTurn.ni.bE.reso+2}
				while( P.ni.mX>= 4*FL.personInTurn.ni.bE.reso+2){ P.ni.mX -= 4*FL.personInTurn.ni.bE.reso+2}
				P.ni.mY+=mvY; while( P.ni.mY < 0){ P.ni.mY += 4*FL.personInTurn.ni.bE.reso+2}
				while( P.ni.mY >= 4*FL.personInTurn.ni.bE.reso+2){ P.ni.mY -= 4*FL.personInTurn.ni.bE.reso+2}}});*/
		});
	//var vX= mvX; 	var vY= -mvY;
	initTurn( FL.sim);
	draw();}

function populateMosaic(subj,obj){
	if(!Array.isArray(subj.sMp[ obj.mPy][obj.mPx])) { subj.sMp[ obj.mPy][obj.mPx]=[]}
	subj.sMp[ obj.mPy][obj.mPx].push(obj)}
function processSubTurn(sim,mX,mY){
	if(sim.subTurn<sim.subjs.length-1){
		sim.subTurn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	else{
		sim.subTurn=0;
		sim.turn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	FL.keySubj = sim.keySubj;
	precalcObjs( FL.sim);
	initTurn( FL.sim);
	draw();}
function startTurn( sim){ 
	//var opt =getNeighboursOfEssence
	//var b =new Event( sim,)
	}


function initCleanSlate(){
				FL.touched 		=false;

				FL.pGn 			=null;
				FL.sGn 			=null;						
				FL.pPm 			=null;
				FL.sPm 			=null;
				FL.pMd 			=null;
				FL.sMd 			=null;
				FL.mos 			=null;
				FL.pln 			=null;

				FL.ni  			=null;
				FL.tY 			=AB.tY;
				FL.mD 			=null;
				FL.sex  		=null;
				FL.gnd  		=null;
				FL.pM 			=null;
				FL.tYl 			=null;

				FL.turn 		=null;
				FL.subTurn 		=null;
				FL.subjs 		=null;
				FL.subjsL 		=null;
				FL.keySubj 		=null;
				FL.subj 		=null;
				FL.queue 		=null;

				FL.sim=null;

				FL.sBTunes[2] 	=0;
				FL.sBTunes[3] 	=0;

				FL.statSim = FL.statSims[0];
}


function initUserInterface(){
				FL.touched 		=false;
				FL.mouseAct 	=false;
				FL.tYs 			=[];

				FL.fEfesL 		=FL.fEfes.length;
				FL.qZfesL 		=FL.qZfes.length;
				FL.quizL 		=FL.quiz.length;
				FL.sBToolsL 	=FL.sBTools.length;
				FL.sKMoodToolsL =FL.sKMoodTools.length;
				FL.sKTypeToolsL =FL.sKTypeTools.length;
				FL.sKQuizToolsL =FL.sKQuizTools.length;
				FL.tBToolsL 	=FL.tBTools.length;
				FL.statTabsL 	=FL.statTabs.length;
				FL.lIFesL 		=FL.lIFes.length;
				FL.lIToolsL 	=FL.lITools.length;
				FL.bPToolsL 	=FL.bPTools.length;

				FL.qZdoneP 		=false; 	FL.qZmoreP 		=false; 	FL.qZagainP		=false;
				FL.sBToolsP 	=[]; FL.sBTools.forEach(function(){ FL.sBToolsP.push(false)});
				FL.tBToolsP 	=[]; FL.tBTools.forEach(function(){ FL.tBToolsP.push(false)});
				FL.lIToolsP 	=[]; FL.lITools.forEach(function(){ FL.lIToolsP.push(false)});			
				FL.bPToolsP 	=[]; FL.bPTools.forEach(function(){ FL.bPToolsP.push(false)})}

function initDefaultState(){
				selectSim(RE.sims[0]);

				FL.sBTunes[2] 	=FL.sim.subjsL;
				FL.sBTunes[3] 	=FL.sim.subjsL+1;

				FL.statSim = FL.statSims[0];
				}


function mkQueue( sim,subTurn){ var q =[];
	for( var n =0; n <sim.subjs.length; n++){ q.push( subjs[ n])} q =shuffle( q);
	sim.subTurn =subTurn;return q}
function queueNext( sim){ var b=null;
	for( var n =sim.subTurn; n <sim.subjsL; n++){
		if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}
	if( b ===null){ sim.turn++; sim.subTurn =0; sim.queue =mkQueue( sim);
		for( var n =sim.subTurn; n <sim.subjsL; n++){
			if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}}
	if( b ===null){ b =[];
		for( var n =0; n <sim.subjsL; n++){ if(!sim.subjs[n].away){ b.push( sim.subjs[n])}}
		if( b.length >0){
			b =b[Math.floor(Math.random()*b.length)]; b.obj=false; sim.keySubj =b; //don't need to do this to turn objs into sbjs
			for( var n =0; n <sim.subjsL; n++){ if( sim.queue[n] ===b){ sim.subTurn =n}}}}}
/*function mkSim2(init, o,   subjs, 	 	subjsL, 	 evs, 	   evsL, 	  turn, 	 subTurn){
	if( init === true) {
						RE.simsL++;
						o.nI 		=RE.simsL;
						o.subjsL 	=0;
						o.subjs 	=[];
						o.queue 	=mkQueue( o.subjs);
						o.keySubj 	=o.queue[0];
						o.evs 		=[];
						o.turn 		=0;
						o.subTurn 	=0;
						o.day 		=0;
						o.hour 		=0;
						o.min 		=0;
						o.sec 		=0;
	}
	else{ 				
						RE.simsL++;
						o.nI 		=RE.simsL;
						o.subjsL 	=0;
						o.subjs 	=subjs.slice(0);
						o.queue 	=mkQueue( o.subjs, subTurn);
						o.evs 		=evs.slice(0);
						o.turn  	=turn;
						o.subTurn 	=subTurn;
	}
	RE.sims.push( o)}*/






function initSims(){
	mkSim( RE, "sim");
	//copySim( RE, RE.sims[0], 10);
}

// abstract value is always at least the same as abstract karma?
// maybe should scrap this hypothesis

function mkStatSim( to,ni){ var s =new StatSim( to,ni); to.statSims.push(s)}
function mkSim( to,ni,randModels,randGoals,randPpls,randFamis,randConts,randPlaces,randSubjs,randObjs){
var s =new Sim( to,ni,randModels,randGoals,randPpls,randFamis,randConts,randPlaces,randSubjs,randObjs);
	to.simsSrc.push(s); to.sims.push(s); }
function StatSim( to,ni){ mkStatSim2( this,to,ni)}
function Sim(   to,ni,randModels,randGoals,randPpls,randFamis,randConts,randPlaces,randSubjs,randObjs){
	mkSim2(this,to,ni,randModels,randGoals,randPpls,randFamis,randConts,randPlaces,randSubjs,randObjs)}
function mkStatSim2( s,to,ni){
	initQualities( s, AB); //need to add qualities to sims dynamically, like applyType function does. need to create parent objects according to their children
	to.statSimsL++;
	s.ni =ni;
	switch( ni){ case "tot" : s.nI="Σ";break;case "avg" : s.nI="x̄";break;case "med" : s.nI="µ"}
	mkResolution( 	s, 	 	FL.rXp);
	s.subjs =[]; 	s.subjsL =0;}
function mkSim2( s,to,ni,randModels,randGoals,randPpls,randFamis,randConts,randPlaces,randSubjs,randObjs){
	initQualities( s, AB);
	var rand=false; 
	if( !randModels){	s.models=mkDefaultModels( 	s, AB)}else{s.models=mkRandModels( 	 s, AB); rand=true} //s.modelsL =s.models.length;
	if( !randGoals){	s.goals =mkDefaultGoals( 	s, AB)}else{s.goals =mkRandGoals( 	 s, AB); rand=true} //s.goalsL =s.goals.length;
	if( !randPpls){		s.ppls 	=mkDefaultPeoples( 	s, AB)}else{s.ppls  =mkRandPeoples(  s, AB); rand=true} //s.pplsL =s.ppls.length;
	if( !randFamis){ 	s.famis =mkDefaultFamilies( s, AB)}else{s.famis =mkRandFamilies( s, AB); rand=true} //s.famisL =s.famis.length;
	if( !randConts){	s.conts =mkDefaultContexts( s, AB)}else{s.conts =mkRandContexts( s, AB); rand=true} //s.contsL =s.conts.length;
	if( !randPlaces){	s.places=mkDefaultPlaces( 	s, AB)}else{s.places=mkRandPlaces( 	 s, AB); rand=true} s.placesL =s.places.length;
	if( !randSubjs){	s.subjs =mkDefaultSubjects( s, AB)}else{s.subjs =mkRandSubjects( s, AB); rand=true} s.subjsL =s.subjs.length;
	if( !randObjs){		s.objs 	=mkDefaultObjects( 	s, AB)}else{s.objs  =mkRandObjects(  s, AB); rand=true} //s.objsL =s.objs.length;
	s.rand =rand;
	s.copies=null; s.copiesL=0;
	to.simsSrcL++; to.simsL++;
	if(rand){ 	to.simsSrcRand.push(s); to.simsSrcRandL++;s.nI=idOf(to.simsSrcRandL-1); s.ni=ni+"_"+idOf(to.simsSrcRandL-1);}
	else{ 		to.simsSrcDef.push(s); 	to.simsSrcDefL++; s.nI = to.simsSrcDefL; 		s.ni =ni+"_"+to.simsSrcDefL;}
	mkResolution( 	s, 	 	RE.rXp);
	s.evs =[]; 		s.evsL =0;
	s.turn =0; 		s.subTurn =0;

	putDefaultSubjsToDefaultPlaces( s.subjs, s.places);
	s.finSubjs 	=[]; 	s.finSubjsL =0;
	s.sweSubjs 	=[]; 	s.sweSubjsL =0;
	for( var i =0; i <s.subjsL; i++){
		if( s.subjs[i].fin){
			s.finSubjs.push( s.subjs[i]);
			s.finSubjsL++;
			s.subjs[i].nI =( s.finSubjsL +9).toString( 36).toUpperCase()}
		else{
			s.sweSubjs.push( s.subjs[i]);
			s.sweSubjsL++;
			s.subjs[i].nI =( s.sweSubjsL +9).toString( 36)}
		s.subjs[i].subjs =s.subjs;
		mkSignal( s.subjs[i],"f5","E",{x:0,y:0},{x:0,y:0});
		mkOptions(s.subjs[i]);}
	//sim.nI 	=FL.simsL +1;
	s.queue =s.subjs.slice();
	s.queue =shuffle( s.queue);
	s.keySubj =s.queue[0];

}
function copySim( to,s,n){
	if(!n){ var n=1}
	for(var i=0; i<n; i++){ 
		if(!s.copies){ s.copies =[]}
		var sim = _.clone(s);
		sim.copies=null;
		sim.copiesL=0;
		s.copies.push(sim);
		s.copiesL++;
		sim.ni = s.ni +"_copy" + s.copiesL;
		sim.nI = s.nI +"." + s.copiesL}
	to.sims =mkSimArr( to.simsSrc);
	to.simsL=to.sims.length}

function mkSimArr( sims){
	var r=[];
	for(var i=0; i<sims.length; i++){
		r.push( sims[i]);
		if(sims[i].copies){ includeCopies( r,sims[i])}}
	return r}
function includeCopies( arr,sim){
	for(var i=0; i<sim.copies.length;i++){
		arr.push( sim.copies[i]);
		if(sim.copies[i].copies){ includeCopies( arr,sim.copies[i])}}
	return arr}

/*o.sex= ni.substr( 0,ni.indexOf( '_')); 					o.sex= getObjByNi( o.sex,AB.sXs);
	o.gnd= ni.split( '_')[1].substr( 0,ni.indexOf( '_'));	o.gnd= getObjByNi( o.gnd,AB.gNs);
	o.pM = ni.substr( ni.indexOf( '_') +1)
		.substr( ni.indexOf( '_') +1)
			.substr( ni.indexOf( '_')); o.pM ="G"+o.pM;		o.pM = getObjByNi( o.pM, AB.pMs);
	*/

function countOntology(){
				AB.fQsL 		=FL.FeminineQualities.length;
				AB.mQsL 		=FL.MasculineQualities.length;
				AB.aQsL 		=FL.AdultQualities.length;
				AB.cQsL 		=FL.ChildQualities.length;

				//AB.rQsL 		=FL.RomanticQualities.seed.length;
				//AB.sQsL 		=FL.ScalarQualities.seed.length;
				//AB.vQsL 		=FL.VectorQualities.seed.length;
				AB.sXsL 		=FL.Genders.seed.length;
				AB.pMsL 		=FL.PrimalMoods.seed.length;
				AB.iEsL 		=FL.InformationElements.seed.length;
				AB.fNsL 		=FL.Functions.seed.length;
				AB.cRsL 		=FL.Circuits.seed.length;
	
				AB.tYsL 		=FL.Sociotypes.seed.length;
				AB.gNsL 		=FL.Sexes.seed.length;			
				AB.mDsL 		=FL.Moods.seed.length;
				AB.originsL  =FL.Origins.seed.length;

				FL.PlacesL 		=FL.Places.seed.length;
}


function initQualities(to,parent){
	to.fQs 		= precalcFeminineQualities( 	FL.FeminineQualities, 					parent);
	to.mQs 		= precalcMasculineQualities( 	FL.MasculineQualities, 					parent);
	to.aQs 		= precalcAdultQualities( 		FL.AdultQualities, 						parent);
	to.cQs 		= precalcChildQualities( 		FL.ChildQualities, 						parent);
	to.cla 		= to.fQs.concat( 				to.mQs);
	to.rom 		= to.aQs.concat( 				to.cQs);
	to.sQs 		= to.cla.concat( 				to.rom);

	to.sXs 		= []; 
	to.gNs 		= [];
	to.vQs 		= [];
	to.pMs 		= [];
	to.mDs 		= [];

	to.iEs 		= precalcInformationElements( 	FL.InformationElements.seed, 	to, 	parent);
	to.absSpace = precalcSocionicsMetaphysics( 	to.iEs);
	to.fNs 		= precalcFunctions( 			FL.Functions.seed, 						parent);
	to.cRs 		= precalcCircuits( 				FL.Circuits.seed, 						parent);
	to.fAs 		= to.fNs.concat( 				to.cRs);
	to.relSpace = precalcSocionicsEssence( 		to.fNs, to.cRs);
	to.tYs 		= precalcSociotypes( 			FL.Sociotypes.seed, 			to,		parent);
	to.tY 		= mkType("NaT", to, parent);
}

function mkQualities(to,parent){
	to.fQs 		= precalcFeminineQualities( 	FL.FeminineQualities, 					parent);
	to.mQs 		= precalcMasculineQualities( 	FL.MasculineQualities, 					parent);
	to.aQs 		= precalcAdultQualities( 		FL.AdultQualities, 						parent);
	to.cQs 		= precalcChildQualities( 		FL.ChildQualities, 						parent);
	to.cla 		= to.fQs.concat( 				to.mQs);
	to.rom 		= to.aQs.concat( 				to.cQs);
	to.sQs 		= to.cla.concat( 				to.rom);

	to.sXs 		= precalcSexes( 				FL.Sexes.seed, 							parent); 
	to.gNs 		= precalcGenders( 				FL.Genders.seed, 				 		parent);
	to.vQs 		= precalcVectorQualities( 		FL.VectorQualities.seed, 		to.sQs, parent);
	to.pMs 		= precalcPrimalMoods( 			FL.PrimalMoods.seed, 					parent);
	to.mDs 		= precalcMoods( 				FL.Moods.seed, 					to, 	parent);

	to.iEs 		= precalcInformationElements( 	FL.InformationElements.seed, 	to, 	parent);
	to.absSpace = precalcSocionicsMetaphysics( 	to.iEs);
	to.fNs 		= precalcFunctions( 			FL.Functions.seed, 						parent);
	to.cRs 		= precalcCircuits( 				FL.Circuits.seed, 						parent);
	to.fAs 		= to.fNs.concat( 				to.cRs);
	to.relSpace = precalcSocionicsEssence( 		to.fNs, to.cRs);
	to.tYs 		= precalcSociotypes( 			FL.Sociotypes.seed, 			to,		parent);
	to.tY 		= mkType("NaT", to, parent);
}
function mkResolution( to, rXp){ 
	to.rXp = rXp;
	to.sQr = Math.pow( 4, rXp);
	to.vQr = 2 * to.sQr + 1;
	to.mPr = 2 * to.vQr}

function initOntology(){
						countOntology();
						mkResolution( 	FL, 	1);
						mkResolution( 	AB, 	FL.rXp);
						mkResolution( 	RE, 	FL.rXp);							
						mkQualities( 	AB);
						FL.statTabsL = FL.statTabs.length;
						FL.statSims =[];
						FL.statSimsL=0;
						for(var i=0; i<FL.statTabsL; i++){ mkStatSim( FL, FL.statTabs[i])}	FL.statSimsL =FL.statSims.length;}

function precalc() { 
						

						initOntology();
					
						initSims();

						initUserInterface();
						initDefaultState();
						initTurn( FL.sim);

						console.log( RE);
						console.log( AB);
						console.log( FL);
}
precalc();

// Notes 2:

// falling asleep is masculine version of orgasm?
// people don't remember the moment they fall asleep because the masculine origin has neither value nor karma.
// if the masculine origin has neither value nor karma, how does it work at all?
// the model includes no concept of "rest". yet resting should be valuable when one is tired.
// the intention of resting should value qualities with low magnitude.
// children don't like to go to sleep because falling asleep has no value and this is difficult to comprehend for the child.

// non-heteronormative mood is caused by scalar qualities whose genders mismach. information elements have no gender or age, contrary to what is stated in Notes 1.
// consequently, it isn't enough to define about 384 different moods.
// scalar qualities have sex or age but no gender. non-heteronormativity is not possible at this level.
// vector qualities have sex, age and gender. non-heteronormativity is possible at this level.
// no, it's wrong. non-heteronormativity has to be an information element because a vector quality has sex and age but no gender.
// information elements are OVERLAPPING PAIRS OF VECTOR QUALITIES so that one vector quality is the intension of ie 1 and other, the extension of ie 1.
// the intension of ie 1 is the extension of ie 2 and the intension of ie 2 is a new vector quality (not either one of the previous two).
// 

// Notes 1:

//RE.sims should contain all true (not derived) simulations
//FL.sims should contain selected simulations
//FL.sim should contain the active simulation
//derived simulations are contained by AB.sims and cannot be selected but can be active (can be FL.sim)
//Apart from this, RE contains precalc settings of relative subjects and objects, and raw data collected from all simulations.
//It should be possible to copy the initial simulation and to create new simulations in which there are random factors within bounds specified by precalc values
//comparable subjects produced by precalc should associate to each other by ni
//This data is necessary for searching for objects.
//Data compiled from data collected from all simulations, such as averages or medians, belong to some simulation in AB.
//if there are both cloned and generated simulations, their averages or medians should be modeled both separately and together, meaning three instances of each tab defined in AB
//ni discrepancy makes it impossible to combine all aspects of cloned and generated simulations
//Data of absolute simulations is not updated at runtime unless that is specifically asked for (meaning the tab of the simulation is open or the data is used to search for an object)
//This data can be used for searching for objects but isn't necessary for that.
//AB contains also all archetypes. Archetypes can also be relevant for making statistics

//for brevity, resolution could perhaps be expressed as an attribute of the RE object even though it would technically belong to AB
//If resolution of the RE object were greater than the resolution of any simulation in RE then the program would need to break some tie in AB that wasn't actually broken, but this only makes sense if there is some a deterministic method for that.
//There would be a need to separate the resolution of RE and AB to improve performance if the simulation is continued after deriving data from it to AB
//It would be better to designate greatest resolution exponent of a relative simulation an attribute of the RE object even though the need to differentiate resolution in RE and AB is quite remote for now.
//The resolution that is currently relevant (resolution of the AL object) can be obtained from RE, AB or any individual simulation
//The resolution of the AL object would need to be changed whenever active simulation or active subject is changed
//There is always an active simulation but not always an active subject
//There is no need to precalc colours of quality vectors for resolution exponents greater than 1

//chains of scalar qualities are evaluated so that V(1) * V(2) * V(3) * ... * V(4ˆFL.rXp).
//only scalar qualities of the same type (ie THINK or FEEL or "SENSE" or "INTUIT" or ROMANTIC_0) may be chained
//qualities which have both intension and extension, and include ROMANTIC_0, can have an age but cannot have a gender
//because they cannot have a gender they cannot be feminine
//therefore the masculine origins are actually equivalent to the non-feminine origins.
//if the resolution of a value (length of the chain) is less than V(4ˆrXp) then it is evaluated so that
//f.ex FL.rXp = 4 and resolution of a particular value is 2 
// V(1) * V(2)
// so that V(x) returns a value from 0 to 4 (and 0 only when this is the first value of the chain or the chain is intuition)
// when the maximum is:
// 4 * 4 * 4 * 4
// which is why the user doesn't really need to manipulate the part of the program which deals with this
// after the user (developer) has verified that this part works

	// There are no relative instances of qualities.
	// qualities may be attributes of relatively existing things.
	// Information Elements are not qualities because they exist in time.
	// To exist in time is a relative form of existence even though Information Elements also have an absolute form.
	// Relative instances of forms must be sexed.
	// Relative instances of essences don't necessarily need to be sexed or have already been sexed.
	// Only one relative instance of each kind of essence needs to be precalculated for a subject.

// What would it mean to increase resolution from 4? The next possible resolution would be 16. In this case 16 base scalar qualities would be ordered pairs of 4 base scalar qualities.
// MYSTICAL QUALITY NEEDS NO MODEL if we can reduce mystical quality to a higher base resolution model of objectivity. <- bad idea
// subjectivity and logic can be modeled so that only the base resolution of intension or extension is higher? <- bad idea
// quality is the IDEAL value of something, not its actually experienced value which is sociotypal VALUE.
// sociotypal value is the same thing as subjective value. qualitative value is the same thing as objective value.
// sociotypal value is the same thing as feminine value? qualitative value is the same thing as masculine value?
// increasing the base from 4 is the only way to compare sequences of qualities in this model.
// researching sequences of qualities is probably the only way to discover how moods are changed to other moods.
// information about moods would be lost in a model with a resolution of 2.
// resolution of 16 does not seem to increase qualitatively the amount of information in any other way than by making it possible to compare the value of objects whose first quality is equal.
// the quality of an object is an arbitrarily long sequence of pairs of romantic and classical qualities.
// one half of the pair can be empty
// the quality of an object is a pair of sequences of romantic and classical qualities which also manifest as intensions and extensions
// the intensions and extensions are also sequences of qualities (arrays)
// the intensions and extensions are necessary for the function and circuit model
// romantic and classical qualities are necessary for the scalar, vector and mosaic plane quality model.
// there is no volition in the vector and mosaic plane model. nothing is left to chance.
// there is volition in the information element model
// there is volition in identifying scalar qualities because we don't have a method for that.
// scalar qualities are pairs of information elements? one is classical and one is romantic? this depends on the ie? one is also intension and other is extension. this does not depend on ie, it depends on the way how functions and circuits have been used.
// but information elements are neither strong nor weak. no pair of information elements decides weak/strong. yet scalar qualities are either weak or stong.
// scalar qualities are not pairs of information elements.
// information elements are pairs of scalar qualities
// pairs of scalar qualities are vector qualities
// information elements are generalizations of vector qualities.
// the sex of an information element can be determined according to constituent romantic qualities
// information elements may have chirality?
// romantic scalar qualities, including ROMANTIC_0, have a sex. classical scalar qualities don't.
// scalar qualities whose sex is different need to be modeled as different objects
// f.ex. needing attention for its own sake is a feminine scalar quality. it obviously is easier to define as a scalar quality than as an information element.
// associating scalar qualities to the self is to objectify the self
// to objectify the self decreases the feminine quality of the self
// to be objectified by another does not decrease the feminine quality of the self?
// pure classical qualities are always intensions and pure romantic qualities are always extensions
// feminine subjects gravitate towards feminine objects unless they are aroused. if they are aroused they don't want to create intensions.
// the gender of a romantic quality is feminine or neutral: FEM or GND
// pairing a masculine scalar quality with a romantic scalar quality is not possible because classical scalar qualities do not have gender
// pairing a masculine information element with a feminine information element is possible: this is the only possible cause of non-heteronormative mood.
// classical scalar qualities have an age: child or everyone: KID or AGE
// information elements are the only possible way to explain how is a mismatch of sex and gender generated
// if we were to teach an AI something by using a program like markover we would have to teach it in terms of scalar qualities.
// so scalar qualities are a way to input data into the program at precalc but information elements would be the only way to input data at runtime.
// we do not need information elements for inputting data at precalc?
// if we need scalar qualities at runtime we need them for inputting info that could in theory be done at precalc.
// we may still need to input scalar qualities at runtime anyway.
// if we had a program like markover we would need to input classical and romantic qualities separately and simultaneously.
// in symmetrical moods, the object automatically adds its multipolar location to itself, turning it back into a subject.
// in this case no intension is created
// life positions and subj obj positions are attributes of events whose values are subjects.
// in the scalar quality feature of the program, there is no need for any sequencer. there is also no need for a list of subjects. a list of objects would be needed.

// lp ip up 	gnostic						-> peaceful
// lp ino uno, 	subjective	ISBJ	UOBJ	-> caring
// lp ip up, 	gnostic 	iobj 	usubj 	-> playingly careful
// lp iok uok, 	mystical					-> playful
// lp ip up, 	gnostic		iobj 	uobj 	-> carefully playful
// lp ip up, 	gnostic 	isubj 	usubj 	-> playing & careful
// lp ip unp 	rational					-> hostile
// lp ino uok, 	objective 	 				-> escape
// lp ip unp 	rational 	iobj 	usubj 	-> fightingly escaping
// lp iok uno, 	logical 	ISBJ	UOBJ	-> fighting
// lp ip unp 	rational 	iobj 	uobj 	-> escapingly fighting
// lp ip unp, 	rational 	isubj 	usubj 	-> escaping & fighting

// functions have process positions?
// 5,8 isbj uobj
// 2,3 iobj usbj
// 1,4 isbj uobj
// 6,7 iobj usbj

// IEs have life positions?

// what if circuits DON'T have process positions?

// vector qualities have life positions derived from IE
// vector qualities have SVM derived from IE
// IEs have SVM

// lps and subj-obj-positions are attributes of relations.
// subj-obj positions are attributes of directed socionics relations. subj position is the "better" one
// subj-obj positions can be used to replace so-called process positions which i inveted. subj is busy position and obj is done position.
// self-sacrifice can only be done if much positive karma outweighs not-as-much negative value.
// positive value outweighs an equal amount of negative karma.
// the value of (shared) culture decides how much ip unp does one take from another before mood change from ip up to ip unp.

// so on faculty level we calc all mental value and call the result subjective value
// we calc all value and call the result quality
// we need the faculty model as an input to the vector quality model so that the vector quality model can be an input to the object model which is based on scalar quality.

// BottomBar is not needed in object feature

// signal consists of intension-extension (predicate) chain and romantic-classical (scalar quality) chain
// the information element chain is determined according to the predicate chain and scalar quality chain
// the information element chain is used to determine when the option for user input into the information element model is possible.
// inputting information to the model as information elements is a way to modify the state of the simulation without breaking its continuity.

// if there is information element of value in a mental faculty then signal needs to go there (to the associated faculty) in order for the subject to access this information.
// how does the signal go there? if it isn't in an adjanced faculty it will terminate a current process
// information element model is used for explaining processes in the context of episodic time. this is the difference between information elements and qualities. qualities do not exist longitudinally in time except as attributes of information elements.
// mental faculties are used for creating the subject's conception of time.
// there is no process aspect to qualities. qualities are only paired but not arranged into longer sequences.
// valued and mental faculties are a, c, 5, 8.

// if subject perceives another subject to have a lower resolution, the other subject appears infantile or feminine?
// differences of opinion can (only) be explained in a meta-model in which some choice appears to be arbitrary in the lower-resolution model but turns out to be deterministic in the higher-resolution model?
// the resolution of the entire simulation is the highest resolution of any subject in the model
// resolution exponent 1 is enough for generating all precalc data
// vector qualities can be connected into chains, too, but these chains do not exist in time.
// they also do not exist in a mood except when they are used for evaluating something.
// the value of a subject's evaluation of an object is determined primarily according to the last vector quality of the value and secondarily according to the resolution of the value
// increasing the resolution of a value is a method for breaking ties

// markover needs data input as romantic and classical scalar AND also as vector so that:
// if something is a reference to a valuable object the value of the referent is a vector
// ...and the reference is a pair of scalars so that...
// ...the scalars can be less valuable than the vector if the reference does not contain that which is valuable about the referent
// ...but merely refers to it.
// this is an extremely good way to refer to negative quality without reinforcing it via its feminine (performative) side.

// cognitive paths including information elements may be modeled as sequences of faculties whose resolution is 3^n in which n is the length of the path
// there is never a reason to use a circuit two times in a row, except to clear the mind when using the creative function
// if an accepting function has a vector it is by default the extension
// if a producing function has a vector it is by default the intension
// reversing a circuit overwrites the extension with the intension
// reversing a circuit corresponds to the relative direction -1 (or "2") whereas traversing the circuit corresponds to the relative direction 1
// the complexity of a chain is FAC1 * FAC2 * FAC3 ... in which FACn is either a circuit or a function so that being a function turns FACn into 7 and being a circuit turns FACn into 3.
// such models do not account for the possibility of external influence to the process
// in order to model maximum complexity of a sequence each instance of FACn could be interpreted as a 7 but this might produce a number that's greater than the actual maximum complexity
// because it can't be complex to use the same IE all the time but this is the only way to retain a theoretical maximum complexity of 7 for each link of the chain

// use of a circuit costs energy, not time

// in order to jump where there is absolute signal, the relative signal termines itself and automatically starts again at the position of greatest absolute value

// reversing the i circuit is the fastest way to clear the ego from its initial condition

// circuits and functions are constituents of subjects
// information elements are attributes of subjects
// scalar qualities are attributes of objects
// on the mosaic plane, scalar qualities are accumulated in domains of object and information elements in domains of subject?

// technically, in chains of scalar qualities the null value of JavaScript would mean "undefined/arbitrary" and ROMANTIC_0 specifically zero.
// orgasm only happens when ROMANTIC_0 is the most valuable scalar quality of the model
// orgasm lasts only until some other scalar quality accumulates more value
// time could perhaps be defined in relation to the length of an orgasm
// the default unit of measuring time would be in relation to the length of arousal? explaining why longer intercourses could make people more patient

// being an object does not happen in time because scalar qualities do not happen in time?
// scalar qualities have to happen in time, otherwise bad things can't happen in time
// vector qualities do not happen in time
// the value of an information element is determined on the subject domains of the mosaic plane
// orgasm is an Information Element of its own
// it represents the 0 value of the Information Element model
// ROMANTIC_0 with an intension means the orgasm of a subject's object
// the subject's object can also be the self if one refers to his own orgasm while not having it
// abstract (iNtuitive) scalar qualities and Information Elements are inherently weaker than Sensing scalar qualities.
// because strength means the ability to sustain itself, Thinking is inherently stronger than Feeling
// if objectivity were the ultimate ground of relevance reality would obviously contain too much information for making a complete model.
// there are two null Information Elements without orgasm:
// * ROMANTIC_0,FEEL_0i would be vector M_iNtuit_0i because Mysticality is the ultimate ground of relevance of this model.
// * a subject cannot notice ROMANTIC_0,THINK_0e = L_Think_0e in himself unless he is an object (in object domain of mosaic plane).
// to become an object of Buddhism so that Buddhism is a subject makes it possible to meditate indefinitely because Buddhism tells one to produce L_Think_0e
// M_iNtuit_0 is the weak zero and L_Think_0e is the strong zero
// "SENSE_0" could as well be called ROMANTIC_0 without an intension, which is orgasm
// Perhaps iNtuitions are echoes of Sensations anyway
// sensory deprivation creates hallucinations and hallucinations must be produced by intuition
// prolonged sensory deprivation is torture
// total sensory deprivation would cause anguish after the echoes would wear out
// in this sense intuition resembles karma whereas sensing resembles value
// karma could be more important than value for intuition!
// if so, the hostile man and boy would be most able to create intuitive worth.
// the fighting man would be better at evaluating negative karma objectively than the hostile man
// extreme intuitive scalar quality associates to bad karma more than medium intuitive scalar quality
// extreme sensory scalar quality associates to bad value more than medium sensory scalar quality
// 0 is the most karmic number
// classical quality is more relevant for intuition than romantic quality
// romantic quality is more relevant for sensing than classical quality
// non-negative romantic coordinate is domain of intuition and negative romantic coordinate is domain of sensing
// because weakness is more inherent to intuition strength associates to negative sign of r coordinate
// vector qualities can be said to have a primary and secondary value
// for intuition karma is primary and value secondary, for sensing value is primary and karma secondary
// projections of mood planes should be made so that primary value associates to high saturation of colour and K is above V when more valuable, ie. when the r coordinate has a non-negative value
// the size of the domain of sensing is smaller than the domain of intuition because intuition includes the c axis.
// sensory 0 is orgasm
// in order to attain sensory 0 it is necessary that FEEL_0i and THINK_0e are absent
// arousal means ROMANTIC_0 as intension
// orgasm means ROMANTIC_0 as extension and no intension
// attempting to overwrite ROMANTIC_0 as extension does not ruin an orgasm if it is began before the orgasm starts but after the orgasm has become inevitable. it it is began before the orgasm has become inevitable there will be no orgasm.
// feminine subjects and objects affect the location of masculine subjects on the multipolar plane
// if the domains weren't mirrored it would look like feminine subjects pull masculine subjects towards themselves
// masculine objects and subjects do not pull feminine objects towards themselves
// this way, in order to have sex the masculine subject needs to do (x,y) so that |x| = 4 and |y| = 4 while feminine subject does (-x,-y) so that |x| = 1 and |y| = 1. when the masculine subject does (x,y) again he reaches the origin of the feminine subject.
// arousal is created within subjective and logical domain
// orgasm is created within objective and mystical domain?
// only an aroused (symmetrical) mood lets the subjects do (x,y) or (-x,-y) again without creating an intension
// creating an intension affects the subject's own place on the multipolar plane. it places him back into his own domain.
// the value of arousal can exceed the value of orgasm
// the karma of arousal is relevant to courting
// there is no such thing as a masculine orgasm because the masculine origin never has value or karma
// in order not to hurt a feminine thing the feminine thing needs to be loved or to have a purpose
// which is an origin of the need for privacy
// but also an origin of the need for exhibitionism
// femininity isn't protected by having a purpose
// so females aren't restricted to behaving only femininely
// because non-feminine behavior may have a purpose
// if a subject can use a dialectic method to precalc his response to every stimulus he will experience the precalc is neither masculine nor feminine
// as such, on the mosaic plane it originates from the non-feminine origin
// on the multipolar plane, masculine subjects can access feminine vector qualities whose classical qualities are nonzero and romantic qualities are zero as descriptions of how females behave.
// these classical qualities are available only in feminine domains
// the same classical qualities cannot be found in masculine domains
// associating these classical qualities to nonzero feminine romantic quality causes corrective behaviour in case of negative romantic quality and feminine behaviour in case of positive romantic quality.
// it is pointless for men to associate positive feminine romantic quality to them because men cannot decide how women are
// if men behave like women or try to decide how women are they are being feminine
// these classical qualities are available to feminine subjects only via feminine objects
// these are not valued by aroused females
// the object of lesbian sex needs to be a masochist? or else the vectors wont find the origin on the mosaic plane
// beause every man has a feminine side male-female sex could be modeled as lesbian sex
// if the woman wants to stop before the man is done without an external (extroverted) cause for this (such as fear), this is caused by her modeling the intercourse as lesbian sex
// ie. she does not perceive the masculine aspect of the man regardless of what it is
// classical scalar quality has a gender only on the multipolar plane
// true gender neutrality on the multipolar plane is accomplished only by pairing romantic and classical qualities of mixed gender.
// which prevents arousal by creating an intension which is not ROMANTIC_0


</script></head>
<body>
	<!-- Google Tag Manager (noscript) -->
	<!--<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVWFS2"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>-->
	<!-- End Google Tag Manager (noscript) -->
	<script>(function() { predraw(); draw();})();</script>
	<script type="text/javascript">var sc_project=863932;var sc_invisible=1;var sc_security="0ed0c038";</script>
	<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
	<noscript><div class="statcounter"><a title="Web Analytics Made Easy - StatCounter" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="//c.statcounter.com/863932/0/0ed0c038/1/" alt="Web Analytics Made Easy - StatCounter"></a></div></noscript>
</body></html>
