<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google Tag Manager -->
<!--<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!=='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVWFS2');</script>-->
<!-- End Google Tag Manager -->
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type"/>
<title>Floresta v1526</title>
<link rel="icon" href="diodi/favicon.ico">
<link rel="stylesheet" type="text/css" href="diodi/fonts.css">
<style>svg text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}
	svg text::selection { background: none;} svg {display:block}
	/*.element::-webkit-scrollbar { display:none; }*/
	#fE{ position:absolute; 	top:0px; left:0px; height:100%; width:100%;}
	#qZ{ position:absolute; 	top:0px; left:0px; height:100%; overflow: auto;}
	#tB{ position:absolute; 	top:0px; 						overflow: auto; overflow-x:auto;}
	#tB::-webkit-scrollbar{ display:none; }
	#lI{ position:absolute; 			 left:0px; 				overflow:auto; overflow-x: auto;}
	#lK{ position:absolute; overflow:auto; left:120px; background-color: black; top:39px; z-index:10;
		border-bottom:1px solid #3c3c3c; border-right:1px solid #3c3c3c;
		-webkit-border-radius: 12px;-moz-border-radius: 12px;border-radius: 12px;}
	#sK{ position:absolute; overflow:auto; background-color: black;
		border-bottom:1px solid #3c3c3c; border-right:1px solid #3c3c3c;
		-webkit-border-radius: 12px;-moz-border-radius: 12px;border-radius: 12px;}
	#lI::-webkit-scrollbar{ display:none; }
	#sQ{ position:absolute; 									overflow:auto; }
	/*#sC{ position:absolute; background-color:black; z-index:20; width:0px; height:1px; top:39px;}*/
	html{height:100%;padding:0px;margin:0px;/*font-family:PF;*/font-size:13px;background-color:black;color:white;overflow:auto; overflow-x:auto;}
	body{height:100%;padding:0px;margin:0px;background-color:transparent; overflow:auto; overflow-x:auto;}
</style>
<script>
var RT =null; var AT =null;
function initTheRelative(){ RT ={ subjs:[], sims:[],simsL:0, simsSrc:[],simsSrcL:0, simsSrcRand:[],simsSrcRandL:0, simsSrcDef:[],simsSrcDefL:0}}
function initTheAbsolute(){ AT ={ sims:[], simsL:0}}
initTheRelative(); initTheAbsolute();
var AL={ 
	fe: "mood",
	fes: ["quiz","type","rels","mood","mosaic","scalar","marker"],
	statTabs:["tot","avg","med"],
	rXp: 1, liNarrowInMosaic:true, liNarrow:false, liS:0, fElIS:0, mPlIS:0, lIW:1, fElIW:1, mPlIW:0, sQW:false, bPH:0,
	mosaicForm :true, stage:false,
	lockSubj:false, lockSim:true,
	sBTools: ["play","fastForward","skip","skipForward"],
	sBTunes: [100, 	 100, 		   1, 	  1],
	sBMoved: false, sBPlay: false, 	sBSkipSims: true, 	sBFastForward:false,
	sBMoodTools: ["mosaicForm"],
	sBMoodTunes: [true], // before start away asks for delete?
//	tBTools: ["listContent","away","hide","copy","rand","make","tabContent","tabSort","tabHide"],
//	tBTunes: ["subjs", 	undefined,undefined,undefined,undefined,undefined,"sims",false,false],
	tBTools: ["cleanSlate","makeSim","randSim","copySim","lockSim","confStat"],
	tBTunes: [undefined, 	100, 		100,	100, 		true],
	lF:"subjects",
	lIFes: ["subjects","objects","places","contexts","families","peoples","goals","models"],
	lITools: ["confRand","confDef","defSort","confSort"],
	lITunes: [undefined,true, 		false, 		"val"],
	bPTools: ["sizeList","wideList","wideSeq","highFoot"],
	sKTypeTools: ["stage"],
	sKTypeToolsH:[16],
	sKTypeTunes: [undefined],
	sKMoodTools: ["mosaicForm",["Plane","Legend","Worth","infElem","I & U"],["TableMT","Total","Stereo.","Infant.","Raise","Queer-","Queer+"],["Bottom","Table","Stage"]],
	sKMoodTunes: [undefined, "Worth",			"Total", "Stage"],

// moods accumulate quality and karma. scalar qualities also do. vector qualities don't, they're just the gate.

	tBRoomTools:[undefined,"roomAway","roomHide","roomCopy","roomRand","roomMake"],
	tBRoomTunes:[undefined,false, 		false, 		10, 	false, 		10],
	tBSubjTools: [undefined,"subjAway","subjHide","subjCopy","subjRand","subjMake"],
	tBSubjTunes: [undefined,false, 		false, 		10, 	false, 		10],
	tBObjTools: [undefined,"objAway","objHide","objCopy","objRand","objMake"],
	tBObjTunes: [undefined,false, 		false, 		10, 	false, 	10],
// objs Cloth Key Money
// room Spot Seat Way
//	lITools: ["listSort"],
//	lITunes: [false],
	lISimTools: ["simResos","simRooms","simSpots","simSeats","simWays","simSubjs","simFins","simMascs","simKids","simObjs","simCloths","simKeys","simMoneys","simConts"],
	liSimTunes: [ [2,0], [10,0], [10,0], [10,0]],
	liRoomTools:["roomResos","roomSizes","roomPlaces"],
	lISubjTools: ["resos","pcFin","pcFem","pcKid","pcReso","pcTys","pcPms","pcStereo","pcPureBad","pcInvMor","pcPureGood","pcSubject","pcReso"],
	rePreset: "default", abPreset: "default",
	lIObjTools: ["delObj","makeObj","pcReso","pcSafe","pcPeaceful","pcSensitive","pcToy","pcHostile","pcDangerous","pcOverwhelming"],
	lISimTools: ["pcSubjs"],
	pcSubjs: 8, pcReso:4, pcFem:0.5, pcKid:0.5, pcTys:[], pcPms:[], pcFin:0.5,
	pcPureBad:0.2, pcInvMor:0.22, pcPureGood:0.25, pcObj:0.5};
</script>
<script src="diodi/diodi.js"></script>
<script src="diodi/lodash.js"></script>
<script>
//IEs should be bigger. V and K should be displayed on circs and funcs because IEs do not accommodate for circs. But there's not enough room. It should be possible to replace the stage with some other, more informative kind of display.
//It could be wrong to say IEs are an input to the model. It's possibly more right to say funcs and circs are an input to the model.

// This application has been developed on MacBook Pro and Chrome. It is meant to be used with the touchpad – please do not plug an external mouse on OS X. The application does not work on Safari. The back button of the browser has been disabled to prevent two-finger left swipe from unloading the page. This gesture is needed for horizonal scrolling.
var svgFe =null; var divFe =null; var nS ="http://www.w3.org/2000/svg";
var svgSk =null; var divSk =null;
var svgQz =null; var divQz =null;
var svgTb =null; var divTb =null;
var svgLi =null; var divLi =null;
var svgLk =null; var divLk =null;
var svgSq =null; var divSq =null;
//var divSc =null;
var ui ={winWid:0, winHei:0,
	sB:{disWid:66, disHei:0, disHrz:0, disVrt:0, rowHei:25,fesHei:0, btnBrd:4, bTOX:6, 	bTOY:2, fnt:15, HUDhei:25,
		btnTxt:"#cccccc",btnU:"#444444",	btnR:"#111111",		btnD:"#080808",		btnL:"#333333", 	sel:"#1c1c1c",
		selTxt:"#ffffff",selU:"#000000",	selR:"#333333",		selD:"#555555",		selL:"#080808", 	btn:"#333333",
		bG:"#222222", HUDbg:"#444444"},
	qZ:{bG:"#cccc88"},
	sK:{disWid:62,keyWid:58,tH:16},
	tB:{disHei: 40, disVrt:0, tooWid:40, tabGap:5, tabSep:10,
		abTabW:25, abTabsW:0, reTabW:40, reTabH:16,reTabV:45,reTabsW:0, tabHei:30,  
		bG:"#000000", strCol:"#444444"},
	lF:{kH:20,kW:80},
	lK:{},
	lI:{iteHei:0, fonSiz:0, svgHei:0,
		iHe: 0 ,tPF: 0 ,tTR: 0 ,tSF: 0 ,mDx:   0,kix: 0,mPx:   0,obx: 0,vQx:   0,nMx:   0,miW: 0,
		iHe0:16,tPF0:15,tTR0:14,tSF0:14,mDx0:100,kix0:7,mPx0:180,obx0:3,vQx0:240,nMx0:260,miW0:550,
		iHe1:25,tPF1:20,tTR1:20,tSF1:20,mDx1:100,kix1:4,mPx1:200,obx1:4,vQx1:240,nMx1:200,miW1:550,
		iHe2:0 ,tPF2: 0,tTR2: 0,tSF2: 0,mDx2:100,kix2:4,mPx2:200,obx2:4,vQx2:240,nMx2:200,miW1:550,},
	/*lI:{liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff"}*/
	sQ:{bG:"#333333", disHrz:0/*66*/, disWid:66, disWid2:66},
	tY:{disWid:0, disHei:0, disHrz:0, disVrt:0,
		cE:230, cuD:4, op2:0.7, c1x:0 ,c1y:40,/*40*/ c2x:0 ,c2y:40,/*40*/ cMarg:25, liY:0,
		base:"#234567", 	hilite:"#ff6600", area:"#345678", areaT:"#89abcd", selArea:"#6789ab",
		selAreaT:"#deefde", cShade:"#ffcccc", valNum:"#662525", shaNum:"#252566", plane:"#336688",
		selAreaB:"#6789ab", areaB:"#6789ab", shArea:"#012345", liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff", cIE:"#33d0aa"}, //ui.tY.cIE #95B388 #33d0aa
	rE:{bG:"#120a8f"},
	mD:{base:"#002200", key:"#083300", key2:"#0c4400", selKey:"#105500", selTxt:"#40ee00", dis:"#221900", disStr: "#110800", stroke:"#009900", stroke2:"#208800", hilTxt: "#30cc00", selKey2:"#1c7700", selKey3: "#0c4400", stroke3: "#002200"},
	sC:{bG:"#004040",öö:"#016648",hL:"#01796F",fX:"#00A693"},
	//ultramarine 120a8f

	mP:{liW:120},
	bP:{disHei: 173, tipHei:66},
	red: {l: { h:0  , s:25 , v:100}, f:{ h:0  , s:50 , v:50 }, h:{ h:0  , s:100, v:100}},
	cya: {l: { h:180, s:25 , v:100}, f:{ h:180, s:50 , v:50 }, h:{ h:180, s:100, v:100}},
	gre: {l: { h:135, s:25 , v:100}, f:{ h:135, s:50 , v:50 }, h:{ h:135, s:100, v:100}}, 
	lil: {l: { h:315, s:25 , v:100}, f:{ h:315, s:50 , v:50 }, h:{ h:315, s:100, v:100}}, 
	yel: {l: { h:70 , s:25 , v:100}, f:{ h:70 , s:50 , v:50 }, h:{ h:70 , s:100, v:100}}, 
	vio: {l: { h:275, s:25 , v:100}, f:{ h:275, s:50 , v:50 }, h:{ h:275, s:100, v:100}}, 
	blu: {l: { h:222, s:25 , v:100}, f:{ h:222, s:50 , v:50 }, h:{ h:222, s:100, v:100}}, 
	ora: {l: { h:30 , s:25 , v:100}, f:{ h:30 , s:50 , v:50 }, h:{ h:30 , s:100, v:100}}, 
	gra: {l: { h:1  , s:1  , v:100}, f:{ h:1  , s:1  , v:50 }, h:{ h:1  , s:1  , v:1}}}
function predraw(){
	ui.winHei =window.innerHeight;
	ui.winWid =window.innerWidth;

	if(AL.fe!=="mosaic"){ 	AL.lIS=AL.fElIS; AL.lIW=AL.fElIW; }
	else{ 					AL.lIS=AL.mPlIS; AL.lIW=AL.mPlIW; }

	if( AL.lIS===2){
		ui.lI.iHeL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tPFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tTRL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tSFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.mDx =ui.lI.iHeL*8;
		ui.lI.nMx =ui.lI.iHeL*14}

	ui.sB.disHrz =ui.winWid-ui.sB.disWid;
	ui.sB.fesHei =AL.fesL * ui.sB.rowHei;
	ui.sB.tooHei =AL.sBToolsL*ui.tB.tooWid;

	ui.qZ.disWid =Math.round((ui.winWid*(3/4))-ui.sB.disWid);
	ui.qZ.disHrz =Math.round((ui.winWid-ui.sB.disWid-ui.qZ.disWid)/2);
	ui.qZ.disVrt =Math.floor( ui.sB.rowHei/1.618); 	ui.qZ.rowHei=Math.floor( ui.winHei/5);
	ui.qZ.capVrt =Math.floor( ui.qZ.rowHei/1.618);
	ui.qZ.capFnt =Math.floor( ui.qZ.disWid/15); 	ui.qZ.capFntG=Math.floor( ui.qZ.capFnt*1.618);
	ui.qZ.fnt =Math.floor( ui.qZ.disWid/39); 		ui.qZ.fntG =Math.floor( ui.qZ.fnt/1.618);
	ui.qZ.disHei =ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFnt+(AL.quizLen * ui.qZ.rowHei);

	ui.tB.abTabH=(ui.tB.tooWid*AL.tBToolsL)+3;
	ui.tB.abTabsW=ui.tB.tabGap+(AL.statTabsL*(ui.tB.abTabW+ui.tB.tabGap));
	//ui.tB.reTabG=((ui.tB.reTabW-9.425)/Math.sqrt(2));
	//ui.tB.reTabG=((ui.tB.reTabW-9.433)/Math.sqrt(2));
	ui.tB.reTabG=Math.floor((ui.tB.reTabW-3)/1.618);
	//console.log(((ui.tB.reTabW+1)-ui.tB.reTabG)/2);
	ui.tB.disHrz=ui.tB.abTabH+ui.tB.abTabsW+ui.tB.tabSep;
	ui.tB.disWid=Math.max(ui.winWid-ui.sB.disWid-ui.tB.disHrz, (RT.simsL*ui.tB.reTabG)+30);
	ui.tB.skrHei=Math.floor(12);//3.236
	ui.tB.skrVrt=ui.tB.disHei-ui.tB.skrHei;

	ui.sQ.narVrt=ui.tB.disHei*4; 		ui.sQ.widVrt=ui.tB.disHei*2;

	ui.bP.disWid=ui.winWid-ui.sB.disWid;
	ui.bP.disHrz=0;
	ui.bP.disVrt=ui.winHei-Math.floor(ui.winHei/12);
	ui.bP.skrHei=Math.round((ui.tB.disHei-ui.tB.skrVrt)/1.618);
	ui.bP.rimHei=Math.round(ui.bP.skrHei/1.618);
	ui.bP.divWid=ui.winWid-Math.round((ui.winWid/1.618)-(ui.bP.skrHei/2));

	ui.lK.dW=300;
	ui.lK.dH=159;
	ui.lK.sW=300;
	ui.lK.sH=500;

	ui.tY.cE1 = Math.round(Math.min(ui.winWid,ui.winHei)/4);
	ui.tY.cE2 = Math.round(Math.min(ui.winWid,ui.winHei)/3);
	if(AL.lIW===2){ ui.tY.cE =ui.tY.cE1;}
	else{ 			ui.tY.cE =ui.tY.cE2;}
	if( AL.sQW){ ui.sQ.disWid = ui.tY.cE1;}
	else 		{ui.sQ.disWid = ui.sB.disWid}

	ui.tY.cMarg =Math.round(ui.tY.cE/10);
	ui.tY.bMarg =ui.tY.cMarg/1.618;
	ui.tY.aMarg =ui.tY.bMarg/1.618;
	ui.tY.dMarg =Math.round(ui.tY.cMarg*1.618);
	ui.mD.lineW=Math.round(ui.tY.cMarg/10); 	if(ui.mD.lineW<1){ ui.mD.lineW=1}
	ui.mD.LineW=Math.round(ui.mD.lineW*1.618); 	if(ui.mD.LineW<1){ ui.mD.LineW=1}
	ui.mD.linew=Math.round(ui.mD.lineW/1.618); 	if(ui.mD.linew<1){ ui.mD.linew=1}

	ui.tY.cuHrz =Math.round(ui.winWid-ui.sB.disWid-(2*(ui.tY.cE/ui.tY.cuD))-ui.tY.cE-ui.tY.cMarg);
	ui.tY.c2x= Math.round(-(1.5 * ui.tY.cE)-ui.tY.cMarg);
	ui.tY.liW= Math.round(ui.winWid-(1*ui.sB.disWid)-(4*(ui.tY.cE/ui.tY.cuD))-(2*ui.tY.cE)-(3*ui.tY.cMarg));
	ui.tY.disHrz =ui.tY.liW;

	ui.tY.lIW= ui.tY.liW-ui.sQ.disWid;
	ui.tY.disWid =ui.winWid-ui.sB.disWid-ui.tY.liW;
	ui.tY.disVrt =ui.tB.disHei;
	ui.tY.liY=ui.tB.disHei;
	ui.tY.keX=ui.tY.liW+ui.tY.cMarg+ui.mD.linew/2;
	//ui.tY.keW=Math.round((4*(ui.tY.cE/ui.tY.cuD))+(2*ui.tY.cE)+ui.tY.cMarg);
	ui.tY.keW = ui.tY.disWid-ui.tY.cMarg-ui.tY.cMarg-ui.mD.linew;//ääää
	ui.tY.keY=Math.round((2*(ui.tY.cE/ui.tY.cuD))+ui.tY.cE+(2*ui.tY.cMarg)+ui.tY.c1y);
	//ui.tY.keY =
	ui.tY.keyGap= Math.round(ui.tY.aMarg);
	ui.tY.keyWid= (ui.tY.keW-(15*ui.tY.keyGap))/16;
	ui.tY.stY=Math.round(ui.tY.keY+((3*ui.tY.cE)/5));
	ui.tY.lilStY =Math.round(ui.tY.keY+((3*ui.tY.cE1)/5)); 

	ui.mD.keY=Math.round((2*(ui.tY.cE/ui.tY.cuD))+ui.tY.cE+(2*ui.tY.cMarg)+ui.tY.c1y);
	ui.mD.plW=Math.min(ui.winWid,ui.winHei)/1.5; 	ui.mD.plX =ui.winWid-ui.sB.disWid-ui.tY.cMarg-ui.mD.plW;
	ui.mD.plH=Math.min(ui.winWid,ui.winHei)/2; 		ui.mD.plY =ui.tB.disHei+ui.tY.cMarg;
	ui.mD.kex=ui.tY.liW+ui.tY.cMarg; 	ui.mD.keX =ui.winWid-ui.sB.disWid-ui.tY.cMarg;
	ui.mD.KeW=ui.mD.keX-ui.mD.kex; 					ui.mD.keW =(ui.mD.KeW-(11*ui.tY.keyGap))/12;
	//ui.mD.kex2=ui.mD.kex+ui.mD.keW+ui.tY.keyGap; 	ui.mD.keX2=ui.mD.kex2+(2*ui.tY.keyGap)+(3*ui.mD.keW);
	//ui.mD.KeW2= -(ui.mD.kex2-ui.mD.keX2); 				ui.mD.keW2=(ui.mD.KeW2-(3*ui.tY.keyGap))/4;
	ui.mD.disWid=ui.mD.KeW-ui.mD.plW-ui.tY.cMarg;
	ui.mD.disHei = Math.floor(ui.mD.plY+((6*ui.tY.cMarg))+(2*ui.tY.cMarg*1.618) + 1.618*(2*ui.tY.cMarg)-ui.tB.disHei);
	ui.mD.keH = Math.floor(ui.mD.keW/1.618);
	ui.mD.taH = ui.mD.plH-ui.tY.keyWid-ui.tY.cMarg;
	ui.mD.tRH = Math.round(ui.mD.taH*(3/11));
	ui.mD.tRL = Math.round(ui.mD.taH*(2/11));
	ui.mD.fRH = Math.round(ui.mD.tRH/1.618);
	ui.mD.fRH2= Math.round(ui.mD.tRH/1.618/1.3);
	ui.mD.fRL = Math.round(ui.mD.tRL/1.618);
	ui.mD.fRL2= Math.round(ui.mD.tRL/1.618/1.3);
	//ui.mD.tRL = Math.round(ui.mD.taH*(1.618/11));

	ui.mP.disWid=ui.winWid-ui.sB.disWid-ui.mP.liW-ui.sQ.disWid;

	ui.midMinHei1 =Math.round(ui.tB.disHei+ui.tY.stY/*-(ui.tY.cE/12)*/+ui.tY.keyGap+(ui.mD.keH/3));
	ui.midMinHei2 =Math.round(ui.tB.disHei+ui.tY.lilStY/*-(ui.tY.cE/12)*/+ui.tY.keyGap+(ui.mD.keH/3));
	switch(AL.lIW){ case 1:	ui.midMinHei=ui.midMinHei1; break;
					case 2: ui.midMinHei=ui.midMinHei2; break;}
	ui.bP.minHei=173;
	switch(AL.bPH){ case 0: ui.bP.disHei=173; break;
					case 1: ui.bP.disHei=452; break;
					case 2: ui.bP.disHei=ui.winHei; break;}	

	if((ui.bP.disHei+ui.midMinHei)<ui.winHei){ ui.bP.disHei =ui.winHei-ui.midMinHei;}
	ui.bP.minVer=ui.midMinHei+ui.bP.minHei;
	if(ui.bP.minVer <ui.winHei){ ui.bP.minVer=ui.winHei}
	ui.feHei =ui.midMinHei+ui.bP.disHei;
	ui.tY.disHei=ui.midMinHei-ui.tB.disHei;
	ui.tY.liHe = ui.midMinHei-ui.tB.disHei;
	ui.sQ.disHei=ui.midMinHei-ui.tB.disHei;

	ui.bP.tooVer=ui.bP.minVer-(AL.bPToolsL*ui.tB.disHei);

	// sidebar feature tools
	ui.sK.disVrt =ui.sB.fesHei+ui.sB.HUDhei+ui.sB.tooHei;
	ui.sK.disHei =ui.midMinHei-ui.sK.disVrt;
	ui.sK.widMid =ui.sK.disWid/2;
	ui.sK.svgHei =2;
	AL.sKMoodTools.forEach(function(t){ if(Array.isArray(t)){ t.forEach(function(){ ui.sK.svgHei+=ui.sK.tH+2}); ui.sK.svgHei+=4}
										else{ 										ui.sK.svgHei+=ui.sK.tH+2}});

	// type stage or table
	ui.tY.stgf=Math.round(ui.tY.cE/6);
	ui.tY.stgy=Math.round(ui.tB.disHei+ui.tY.disHei-ui.tY.stgf-ui.tY.cMarg);
	ui.tY.stgF=Math.round((2*ui.tY.cE)/5);
	ui.tY.stgY=Math.round(((ui.tY.keY+ui.tY.keyWid+ui.tY.stgy+(ui.tY.stgf/3))/2)-ui.tY.stgF);

	ui.tY.tbY =Math.round(ui.tY.keY+ui.tY.keyWid+ui.tY.bMarg);
	ui.tY.tbH =Math.round(ui.tY.disHei-ui.tY.tbY-ui.tY.cMarg+ui.tB.disHei);
	ui.tY.tbW =Math.round(ui.tY.keW+ui.mD.linew);
	ui.tY.tbX =ui.tY.liW+ui.tY.cMarg;
	ui.tY.coW =ui.tY.tbW/5;
	ui.tY.cow =ui.tY.coW-ui.mD.linew;
	ui.tY.roH =ui.tY.tbH/4;
	ui.tY.roh =ui.tY.roH-ui.mD.linew;

	ui.tY.tY1 =Math.floor(-2/7*ui.tY.roh);
	ui.tY.tY2 =Math.floor(2/15*ui.tY.roh);
	ui.tY.tCO =ui.tY.cMarg;
	ui.tY.tCW =ui.tY.cMarg+2*ui.mD.lineW;
	ui.tY.tC2 =ui.tY.tCO+ui.tY.tCW;
	ui.tY.tC3 =ui.tY.tCO+ui.tY.tCW*2;
	ui.tY.tC4 =ui.tY.tCO+ui.tY.tCW*3;
	ui.tY.tCF =Math.floor(3/4*ui.tY.roh);
//	ui.tY.tC1
/*e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.mD.LineW+ui.tY.bMarg+ui.mD.LineW+(ui.tY.cMarg+ui.mD.LineW)*3, ui.tY.tbY+j*ui.tY.roH-1/5*ui.tY.roh,
 				undefined,"#0c0",undefined,3/4*ui.tY.roh,".000","CH"); E.push(e);
*/

// HUD needs to contain info of 1.0 sV = 2393042490 etc.

	// mood plane
	ui.mD.plFrW=Math.round(ui.tY.disWid/1.618-ui.tY.cMarg+ui.tY.bMarg);
	ui.mD.plFrX=Math.round(ui.tY.disHrz+ui.tY.disWid-(ui.tY.disWid/1.618)-ui.tY.bMarg);
	ui.mD.plFrY=ui.tB.disHei+ui.tY.cMarg;
	ui.mD.plDiW=Math.round(ui.tY.disWid/1.618-ui.tY.cMarg-ui.tY.bMarg);
	ui.mD.plDiX=Math.round(ui.tY.disHrz+ui.tY.disWid-(ui.tY.disWid/1.618));
	ui.mD.plDiH=Math.round(ui.tY.disHei/1.618-ui.tY.cMarg-ui.tY.bMarg);
	ui.mD.plFrH=Math.round(ui.mD.plDiH+2*ui.tY.bMarg);
	ui.mD.plDiY=Math.round(ui.mD.plFrY+ui.tY.bMarg);
	// mood keys
	ui.mD.keGaV=ui.mD.lineW/1.618;
	ui.mD.keGaH=ui.mD.LineW;
	ui.mD.keRoW=ui.tY.disWid-(2*ui.tY.cMarg)-ui.mD.linew;
	ui.mD.keRoX=ui.tY.disHrz+ui.tY.cMarg+ui.mD.linew/2;
	ui.mD.keFaH=ui.tY.keyWid/1.618-ui.mD.linew/2;
	ui.mD.keFnS=Math.round(ui.mD.keFaH/1.414);
	ui.mD.keFnY=Math.round(ui.mD.keFaH/7);
	ui.mD.keFaW=((ui.mD.keRoW-(12*ui.mD.keGaH))-ui.mD.linew/2)/13;
	ui.mD.pPmRY=Math.round(ui.mD.plFrY+ui.mD.plFrH+ui.tY.aMarg);
	ui.mD.sPmRY=ui.mD.pPmRY+ui.mD.keFaH+ui.mD.keGaV;
	ui.mD.obKeH=2*ui.mD.keFaH+ui.mD.keGaV;
	ui.mD.gndRY=ui.mD.pPmRY-ui.tY.cMarg-ui.mD.keFaH;
	ui.mD.sexRY=ui.mD.gndRY-ui.mD.keFaH-ui.mD.keGaV;
	// mood disp
	ui.mD.tbFrW=Math.round(ui.tY.disWid-ui.mD.plFrW-2*ui.tY.cMarg-ui.tY.aMarg);
	ui.mD.tbFrX=ui.tY.disHrz+ui.tY.cMarg;
	ui.mD.tbFrY=ui.mD.plFrY;
	ui.mD.tbFrH=ui.mD.sexRY-ui.tB.disHei-2*ui.tY.cMarg;
	ui.mD.tbDiW=(ui.mD.tbFrW-ui.mD.LineW*3);
	ui.mD.tbDiX=(ui.mD.tbFrX+ui.mD.LineW*1.5);
	ui.mD.tbDiH=(ui.mD.tbFrH-ui.mD.LineW*3);
	ui.mD.tbDiY=(ui.mD.tbFrY+ui.mD.LineW*1.5);
	ui.mD.tbHeW=Math.round(ui.mD.tbDiW/1.618);
	ui.mD.tbRoH=(ui.mD.tbDiH*(1/5));
	ui.mD.tbCeW=ui.mD.tbDiW/2;
	ui.mD.tbCeB=ui.mD.tbRoH/1.618;
	ui.mD.tbCeT=ui.mD.tbCeB/1.618-ui.mD.LineW/2;
	ui.mD.tbTxX=(ui.mD.tbCeW+ui.mD.tbCeT+ui.mD.LineW)/2;
	// stage or table
	ui.mD.tbY =Math.round(ui.mD.pPmRY+ui.mD.obKeH+ui.mD.linew/2+ui.tY.bMarg);
	ui.mD.tbH =Math.round(ui.tY.disHei+ui.tY.disVrt-ui.mD.tbY-ui.tY.cMarg);
	ui.mD.roH =ui.mD.tbH/5-ui.mD.linew;
	ui.mD.coW =ui.tY.tbW/13-ui.mD.linew;

	// scalar
	ui.sC.diX =ui.tY.disHrz+ui.tY.cMarg;
	ui.sC.diY =ui.tY.disVrt+ui.tY.cMarg;
	ui.sC.diW =ui.tY.disWid-2*ui.tY.cMarg;
	ui.sC.diH =Math.round(/*3/4**/ui.tY.disHei-2*ui.tY.cMarg);
	ui.sC.hDH =Math.round((ui.sC.diH-ui.tY.bMarg)/2);
	ui.sC.hDB =Math.round(ui.sC.diY+ui.sC.hDH+ui.tY.bMarg);
	ui.sC.roW =Math.round(ui.sC.diW-2*ui.tY.bMarg);
	ui.sC.roX =Math.round(ui.sC.diX+ui.tY.bMarg);
	ui.sC.mQY =Math.round(ui.sC.diY+ui.sC.hDH/2);
	ui.sC.cQY =Math.round(ui.sC.hDB+ui.sC.hDH/2);
	ui.sC.cQW =ui.sC.diW/AT.fQsL;
	ui.sC.rQW =ui.sC.diW/AT.aQsL;
	ui.sC.quH =ui.tY.dMarg;
	
// markover needs to print each line FOUR TIMES:
// line 1: intension's romantic quality
// line 2: intension's classical quality
// line 3: extension's romantic quality
// line 4: extension's classical quality	
}

function initDraw(){
	svgFe =document.createElementNS( nS,"svg");
	/*nS =svgFe.namespaceURI;*/ svgFe.appendChild( defs);
	divFe =document.createElement( 'div');divFe.setAttribute( 'id','fE');
	svgFe.setAttribute( 'width', ui.winWid);
	if(ui.winHei <ui.feHei){ svgFe.setAttribute( 'height',ui.feHei);
								divFe.style.height 			=ui.feHei+"px";
								document.body.style.height 	=ui.feHei+"px";}
	else { 						svgFe.setAttribute( 'height',ui.winHei);
								divFe.style.height 			=ui.winHei+"px";
								document.body.style.height 	=ui.winHei+"px";}
	divFe.appendChild( svgFe);

	switch( AL.fe){
		case "quiz" 	: 
			ui.sB.disHei=ui.winHei;	
			svgQz =document.createElementNS( nS,"svg");
			divQz =document.createElement( 'div');divQz.setAttribute( 'id','qZ');
			divQz.appendChild( svgQz);
			svgQz.setAttribute( 'width', ui.winWid-ui.sB.disWid);
			svgQz.setAttribute( 'height', ui.qZ.disHei+(2*ui.qZ.disVrt));
			break;
		case "type" : case "mood" : case "scalar" : case "mosaic" : case "rels" : case "marker" :
			ui.sB.disHei=ui.midMinHei;
			svgSk =document.createElementNS( nS,"svg");
			svgTb =document.createElementNS( nS,"svg");
			svgLi =document.createElementNS( nS,"svg");
			svgLk =document.createElementNS( nS,"svg");
			svgSq =document.createElementNS( nS,"svg");
			divSk =document.createElement( 'div');divSk.setAttribute( 'id','sK');
			divTb =document.createElement( 'div');divTb.setAttribute( 'id','tB');
			divLi =document.createElement( 'div');divLi.setAttribute( 'id','lI');
			divLk =document.createElement( 'div');divLk.setAttribute( 'id','lK');
			divSq =document.createElement( 'div');divSq.setAttribute( 'id','sQ');

			svgSk.setAttribute( 'width', ui.sB.disWid-2);
			svgSk.setAttribute( 'height',ui.sK.svgHei);
			divSk.style.width = ui.sB.disWid-4+'px';
			divSk.style.height =ui.sK.disHei+'px';
			divSk.style.top =ui.sK.disVrt+'px';
			divSk.style.left =ui.sB.disHrz+2+'px';
			divSk.appendChild( svgSk);

			svgTb.setAttribute( 'width', ui.tB.disWid); // modify later
			svgTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.width = ui.winWid-ui.sB.disWid-ui.tB.disHrz+'px';
			divTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.left =ui.tB.disHrz+"px";
			divTb.appendChild( svgTb);
			
			if(ui.tY.lIW>0){
				svgLi.setAttribute( 'width', ui.tY.lIW); // modify later
				svgLi.setAttribute( 'height', ui.lI.svgHei);
				divLi.appendChild( svgLi);
				if(ui.tY.lIW>120){
					svgLk.setAttribute( 'width', ui.lK.sW);
					svgLk.setAttribute( 'height',ui.lK.sH);
					divLk.style.width = ui.lK.dW+"px";
					divLk.style.height =ui.lK.dH+"px";
					divLk.appendChild( svgLk);
					divFe.appendChild( divLk)}
				else{
					divLk.style.display="none";
				}
				//if( AL.liNarrow) { 	divLk.style.width =(ui.mP.liW-122)+"px"}
				/*else{*/ 				divLk.style.width =(ui.tY.lIW-122)+"px";//}
				if( AL.lIW===0){ 	divLi.style.width =ui.mP.liW+'px'}
				else{				divLi.style.width =ui.tY.lIW+'px'}

				divLi.style.height = (ui.midMinHei-(5*ui.tB.disHei))+'px';
				divLi.style.top =ui.tB.disHei*5+"px";}
			else{
				divLi.style.display="none";
			}
		

			svgSq.setAttribute( 'width', ui.sQ.disWid); 
			svgSq.setAttribute( 'height',ui.sQ.disHei/*-ui.sQ.cH*/);
			divSq.style.width = ui.sQ.disWid+'px';
			divSq.setAttribute( 'height',ui.sQ.disHei/*-ui.sQ.cH*/);
			if( AL.lIW===0) { 	divSq.style.left =ui.mP.liW+"px"}
			else{ 				divSq.style.left =ui.tY.lIW+"px"}
			divSq.style.top =(ui.tB.disHei/*+ui.sQ.cH*/)+'px';
			divSq.appendChild( svgSq);

			/*if(!AL.liNarrow) {
				divSc.style.width = ui.sQ.disWid-20+"px";
			 	divSc.style.left =ui.tY.lIW+9+"px"}*/

}}


var defs 	=document.createElementNS( nS, "defs");

var filter  =document.createElementNS( nS, "filter");
filter.setAttribute( "id", "f1");		filter.setAttribute( "x", "-40%"); filter.setAttribute( "y", "0");
filter.setAttribute( "width", "180%");
var gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic");	gaussianFilter.setAttribute( "stdDeviation","6");
filter.appendChild(gaussianFilter);		defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'f2'); 		filter.setAttribute( "x", "-64%"); filter.setAttribute( "y", "-31%"); 	
filter.setAttribute( "width", "291%"); 	filter.setAttribute( "height", "162%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","16");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);

filter 		=document.createElementNS(nS, "filter");
filter.setAttribute( 'id', 'f3'); 		filter.setAttribute( "x", "-100%"); filter.setAttribute( "y", "-100%"); 	
filter.setAttribute( "width", "300%"); 	filter.setAttribute( "height", "300%");
gaussianFilter =document.createElementNS( nS, "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","8");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);


function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op){ var r=document.createElementNS( nS,'rect');
					 				r.setAttribute( 'x',x);
					 				r.setAttribute( 'y',y);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id){ 		r.setAttribute( 'id', 	id) }
					if( co){ 		r.setAttribute( 'fill', co) }
					if( cl){ 		r.setAttribute( 'class',cl) }
					if( sC){ 		r.setAttribute( 'stroke',sC); r.setAttribute( 'stroke-width',sW)}
					if( pE){ 		r.setAttribute( 'pointer-events', 'none')}
					if( rx){ 		r.setAttribute( 'rx',rx)}
					if( ry){ 		r.setAttribute( 'ry',ry)}
					if( op){ 		r.setAttribute( 'fill-opacity',op)}return r}
function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
					if( fonSiz){ 	t.setAttribute( 'font-size',fonSiz)}
					if( id){ 		t.setAttribute( 'id', 	id) }
					if( co){ 		t.setAttribute( 'fill', co) }
					if( cl){ 		t.setAttribute( 'class',cl) }
					if( fonFam){ switch( fonFam){
						case "PF" : 	t.setAttribute( 'font-family','ProFontWindows'); 			break;
						case "AI" : 	t.setAttribute( 'font-family','Aileron'); 					break;
						case "SF" : 	t.setAttribute( 'font-family','Steelfish Rg'); 				break;
						case "CH" : 	t.setAttribute( 'font-family','Chathura'); 					break;
						case "SR" : 	t.setAttribute( 'font-family','Strike Fighter');			break;
//						case "MP" : 	t.setAttribute( 'font-family','More Perfect DOS VGA');		break;
//						case "AB" : 	t.setAttribute( 'font-family','Aileron Bold');				break;
						case "TR" : 	t.setAttribute( 'font-family','times new roman'); 			break;
										t.setAttribute( 'font-family',fonFam)}}
									t.setAttribute( 'pointer-events', 'none');
					if( anc){ 		t.setAttribute( 'text-anchor',anc)}
					if( op){	 	t.setAttribute( 'opacity',op)}
					if( dB){	 	t.setAttribute( 'dominant-baseline',dB)}
									t.textContent =txt; return t}
function mkI(x,y,X,Y,id,co,st,op,d){var r=document.createElementNS( nS,'line');
									r.setAttribute( 'x1',x);r.setAttribute( 'x2',X);r.setAttribute( 'y1',y);r.setAttribute( 'y2',Y);
					if( id){ 		r.setAttribute( 'id',id)}
					if( op){ 		r.setAttribute( 'opacity',op)}
					if( d){ 		r.setAttribute( 'stroke-dasharray',d)}
					r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}
function mkS(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon');
									p.setAttribute("points", pt);
									p.setAttribute( 'fill',co);
					if(id){ 		p.setAttribute( 'id',id)}
					if(cl){ 		p.setAttribute( 'class',cl)}
					if(op){ 		p.setAttribute( 'opacity',op)}
									p.setAttribute( 'pointer-events', 'none');return p}
function mkE(x,y,w,h,c){ var e=document.createElementNS( nS,'ellipse');
									e.setAttribute('cx',x);e.setAttribute('cy',y);
									e.setAttribute( 'width',2*w);e.setAttribute( 'height',2*h);
									e.setAttribute( 'rx',w);e.setAttribute( 'ry',h);
									e.setAttribute( 'fill',c); return e}
function drS(v,l,id,cl,op,sC,sW){ var e=document.createElementNS( nS,'polygon'); e.setAttribute("points",v);
	e.setAttribute( 'fill',l); e.setAttribute('id',id); e.setAttribute('class',cl);
	if(op){ e.setAttribute( 'opacity',op);} if(sC){ e.setAttribute('stroke',sC)}if(sW){ e.setAttribute('stroke-width',sW)} return e}
function drA(x,y,w,h,l,id,cl,b,L,op){ var e=document.createElementNS( nS,'rect'); e.setAttribute( 'fill',l);
	e.setAttribute('x',x);e.setAttribute('y',y); e.setAttribute( 'width',w); e.setAttribute( 'height',h); 
	if(b > 0){ e.setAttribute( 'stroke',L); e.setAttribute( 'stroke-width',b)}
	if(op){ e.setAttribute( 'opacity',op)} e.setAttribute( 'id',id); e.setAttribute( 'class',cl); return e}
function drC(x,y,r,c,id,cl,sW,sC,d,fO,sO){var e=document.createElementNS( nS,'circle'); if(c){e.setAttribute( 'fill',c)}
	e.setAttribute('cx',x); e.setAttribute('cy',y); e.setAttribute('r',r); e.setAttribute('id',id);
	e.setAttribute('class',cl);	e.setAttribute('stroke',sC); e.setAttribute('stroke-width',sW);
	if(d){e.setAttribute('stroke-dasharray',d)} if(fO){ e.setAttribute( 'fill-opacity',fO)}
	if(sO){ e.setAttribute( 'stroke-opacity',sO)} return e}

// N and F are vital IEs, S and T are mental IEs

function mkFb( n,sB,ni){ var id="sB_btn-"+n; n = n * sB.rowHei;
	if( AL.fe !== ni){ var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.btn,"sB_btn")}
	else 			{ var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.sel,"sB_btn")}
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sidebarKey( e.id);break}}); return e }
function mkFt( n,sB,ni){ var id="sB_btT-"+n; n = n * sB.rowHei;
	if( AL.fe !== ni){ var e =mkT( ui.sB.disHrz+sB.bTOX+50, n+sB.bTOY+ui.sB.disVrt,	id, sB.btnTxt, "sB_btT",sB.fnt,ni,'PF',"end")}
	else 			{ var e =mkT( ui.sB.disHrz+sB.bTOX, n+sB.bTOY+ui.sB.disVrt,	id, sB.selTxt, "sB_btT",sB.fnt,ni,'PF')}return e }
function mkFr( n,sB,ni){ var et=[]; var yi=(n * sB.rowHei)+sB.disVrt; if( AL.fe !== ni) //mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
		{var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnU, "sB_btnBrd"); et.push( e);
		e=mkL(ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnR/*"#880000"*/,"sB_btnBrd",false); et.push( e)}
	else{ var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.selU, "sB_btnBrd"); et.push( e);
		e=mkL( ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid,sB.btnBrd, "sB_btnBrd-"+n, sB.selD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selR/*"#880000"*/,"sB_btnBrd",false); et.push( e)} return et}

function refreshSbTool( t){ 	var id ="sBTool-"+t; var e=document.getElementById( id); e.remove();
							   	var id ="sBToolT-"+t;var e=document.getElementById( id); e.remove();
								var T = mkSbTool( t,ui.sB); T.forEach( function(T){ svgFe.appendChild( T)})}
function sBToolMouseDown( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	AL.sBToolsP[t] =true; AL.moved =true; AL.playMouseDown =true;
							AL.fastForward =false; AL.prevFastForward =false;
							AL.skipForward =false; AL.prevSkipForward =false;
							AL.prevPlay =AL.play; AL.play =false;
							startTurn( AL.sim); console.log(t);refreshSbTool( t); 								break;
	case "fastForward" 	: 	AL.sBToolsP[t] =true; AL.moved =true; AL.fastForwardMouseDown =true;
							AL.play =false; AL.prevPlay =false;
							AL.skipForward =false; AL.prevSkipForward =false;
							AL.prevFastForward =AL.fastForward; AL.fastForward =false;
							startTurn( AL.sim); refreshSbTool( t); 								break;
	case "skip" 		: 	AL.sBToolsP[t] =true; AL.moved =true; AL.skipMouseDown =true;
							AL.play =false; AL.prevPlay =false; 
							AL.prevFastForward =false; AL.fastForward =false;
							AL.prevSkipForward =false; AL.skipForward =false;
							/*startSkip( AL.sim);*/ 												break;
	case "skipForward" 	: 	AL.sBToolsP[t] =true; AL.moved =true; AL.skipForwardMouseDown =true;
							AL.play =false; AL.prevPlay =false;
							AL.prevFastForward =false; AL.fastForward =false;
							AL.prevSkipForward =AL.skipForward; AL.skipForward =false;
							/*startSkip( AL.sim);*/ refreshSbTool( t)}}
function sBToolMouseUp  ( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevPlay){ 	AL.prevPlay =true; AL.play =true }
							else{ 				AL.prevPlay =false;AL.play =false}
							refreshSbTool( t); 													break;
	case "fastForward" 	: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevFastForward){ 	AL.prevFastForward =true; AL.fastForward =true }
							else 					{ 	AL.prevFastForward =false;AL.fastForward =false}
							refreshSbTool( t); 													break;
	case "skip" 		: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true} 							break;
	case "skipForward" 	: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevSkipForward){ 	AL.prevSkipForward =true; AL.skipForward =true }
							else 					{ 	AL.prevSkipForward =false;AL.skipForward =false}
							refreshSbTool( t)}}
function sBToolMouseLeave(e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.playMouseDown){ 			AL.playMouseDown =false;
								AL.prevPlay =false;		 /*undoStartTurn(AL.sim);*/refreshSbTool(t)}break;
	case "fastForward" 	: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.fastForwardMouseDown){ 	AL.fastForwardMouseDown =false;
								AL.prevFastForward=false;/*undoStartTurn(AL.sim);*/refreshSbTool(t)}break;
	case "skip" 		: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.skipMouseDown){ 			AL.skipMouseDown =false;
	 							/*undoStartSkip( AL.sims, AL.sim)*/}								break;
	case "skipForward" 	: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.skipForwardMouseDown){ 	AL.skipForwardMouseDown =false;
								AL.prevSkipForward =false; 	/*undoStartSkip( AL.sims, AL.sim);*/
								refreshSbTool(t)}}}
function sBTuneMoreMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									AL.sBTunes[t] +=AL.sBTunes[t]; 								}
function sBTuneLessMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									AL.sBTunes[t] -=AL.sBTunes[t]; 								}
function sBTuneMouseDown( e){	var t=parseInt(e.substr( e.indexOf('-')+1)); switch( t){
	case 0 : AL.sBTunes[t] =prompt("Set play delay in 1/100 seconds:", 			AL.sBTunes[t]); 	break;
	case 1 : AL.sBTunes[t] =prompt("Set fast forward delay in 1/100 seconds:", 	AL.sBTunes[t]); 	break;
	case 2 : AL.sBTunes[t] =prompt("Set skip length:", 							AL.sBTunes[t]); 	break;
	case 3 : AL.sBTunes[t] =prompt("Set skip fast forward length:",				AL.sBTunes[t])}}
function clearTool(n){var e=Array.from(document.querySelectorAll('sB')); e.forEach( function(e){ e.remove()})}
function mkSbTool( n, sB){ var r=[]; var b; var l; var s; var y; var x=sB.disWid-(ui.tB.tooWid/2);
	b=mkL( sB.disHrz+sB.disWid-ui.tB.tooWid, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1, ui.tB.tooWid-2, ui.tB.tooWid-2,
		"sBTool-"+n, "#555", "sBTool", undefined, 0, undefined, ui.tB.tooWid/3.236);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBToolMouseDown( b.id);break;
											case "mouseup" 	 : sBToolMouseUp(b.id);   break;
											case "mouseleave": sBToolMouseLeave(b.id)}});r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1, sB.disWid-ui.tB.tooWid-4, ui.tB.tooWid-2,
		"sBTune-"+n, "#555", undefined, undefined, 0, true, ui.tB.tooWid/3.236); r.push(b);
	b=mkI( sB.disHrz,sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/2),
		sB.disHrz+sB.disWid-ui.tB.tooWid, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/2),
		"sBTuneDeco"+n, sB.btnL, 3); r.push(b);
	b=mkT( sB.disHrz+Math.floor((sB.disWid-ui.tB.tooWid)/2), sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n),
		"sBTuneMoreT-"+n, "#888", undefined, ui.tB.tooWid/3.236, "▲", "arial", "middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+1,
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*2),
		"sBTuneMore-"+n, undefined,"sBTuneMore",undefined,undefined,undefined,undefined,undefined,"0");
	//sBTuneMoreMouseDown( e);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMoreMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-ui.tB.tooWid)/2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/1.618),
		"sBTuneLessT-"+n, "#888", undefined,ui.tB.tooWid/3.236, "▼","arial","middle"); r.push(b);
	//mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+Math.round(((ui.tB.tooWid-2)/5)*3),
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*3),
		"sBTuneLess-"+n, undefined,"sBTuneLess",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneLessMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-ui.tB.tooWid)/2+1, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+(ui.tB.tooWid/3.7),
		"sBTuneT-"+n, "#fff", undefined,ui.tB.tooWid/3, AL.sBTunes[n], "PF","middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+Math.round(((ui.tB.tooWid-2)/5)*2),
		sB.disWid-ui.tB.tooWid-4, Math.round(((ui.tB.tooWid-2)/5)*2),
		"sBTune-"+n, 	undefined,"sBTune",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMouseDown( b.id);break;}});
	r.push(b);
	switch( AL.sBTools[n]){ 	
		case "play": 		if( AL.play){ l="❚❚"}else { l="►"}
							s =Math.floor(ui.tB.tooWid/1.618); y =sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3; break;
		case "fastForward": if( AL.fastForward)	{ 	l ="❚❚"; s =Math.floor(ui.tB.tooWid/1.618);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3}
							else 				{ 	l ="►►"; s =Math.floor(ui.tB.tooWid/3.236);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n+3)+(ui.tB.tooWid/5)} break;
		case "skip": 		l ="❚►"; s =Math.floor(ui.tB.tooWid/1.618);
							y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3; break;
		case "skipForward": if( AL.skipForward) { 	l ="❚❚"; s =Math.floor(ui.tB.tooWid/1.618);
												y = sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)+3}
							else 				{ 	l="❚►►"; s =Math.floor(ui.tB.tooWid/3.236);
												y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n+3)+(ui.tB.tooWid/5); break;}}
		/*case "reso" 		: l="⊞"; 							s=ui.tB.tooWid;
			y=sB.fesHei+sB.HUDhei+(ui.tB.tooWid*n)-(ui.tB.tooWid/4)}*/
	t=mkT( sB.disHrz+x, y, "sBToolT-"+n, "#ffffff", undefined, s, l, "arial", "middle");r.push(t);
	return r}
function mkTurnCounter(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3, ui.sB.disWid, ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	if(AL.sim){ if(AL.subjsL>0){
			e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined,
			ui.sB.fnt,AL.sim.nI+":"+AL.sim.turn+AL.sim.keySubj.nI, "PF","end"); E.push(e)}
		else{
			e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined,
			ui.sB.fnt,AL.sim.nI+":"+AL.sim.turn, "PF","end"); E.push(e)}} return E}
function mkResoTool(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3+ui.sB.HUDhei+ui.sB.tooHei, Math.round(ui.sB.disWid/1.618), ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined, ui.sB.fnt,"reso", "PF"); E.push(e); return E}
function drSidebar(){ var obs=[];  var buf =null;
	buf =mkL(ui.sB.disHrz,ui.sB.disVrt,ui.sB.disWid,ui.sB.disHei,"sB",ui.sB.bG,"sB"); obs.push(buf);
	for( var i=0; i < AL.fesL; i++){
		buf =mkFb( i,ui.sB, AL.fes[i]); obs.push(buf);
		buf =mkFt( i,ui.sB, AL.fes[i]); obs.push(buf);
		buf =mkFr( i,ui.sB, AL.fes[i]); obs =obs.concat(buf)}
	obs.forEach( function(obs){ svgFe.appendChild( obs)}); obs=[];
	if(AL.fe !== "quiz"){ 
		buf=mkTurnCounter( AL.sim); obs =obs.concat(buf);
		for( var n=0; n < AL.sBToolsL;n++){ buf =mkSbTool( n, ui.sB); obs=obs.concat(buf)}
		obs.forEach( function(obs){ svgFe.appendChild( obs)}); obs=[];
		switch(AL.fe){ 
			case "mood": 	for( var n=0; n <AL.sKMoodToolsL;n++){ buf =mkSkMoodTool( n); obs=obs.concat(buf)} break;
			case "type": 	for( var n=0; n <AL.sKTypeToolsL;n++){ buf =mkSkTypeTool( n); obs=obs.concat(buf)} break;}
		obs.forEach( function(obs){ svgSk.appendChild( obs)});}}
function sidebarKey( e){ var tab= parseInt(e.split("-").pop()); AL.fe=AL.fes[tab]; draw();}


//scalar qualities acquire positive and negative quality separately?

// detach --> shock ååå
// dysphoria --> terror?

//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)

//stattab summa 0–1

function sKTypeToolMouseDown( n){
	switch( AL.sKTypeTools[n]){
		case "stage"  		: AL.stage=  	 	!AL.stage;  	draw(); break;}
	if( AL.sKTypeToolsP[n]){ 	AL.sKTypeToolsP[n] 	=false; refreshSkTypeTool( n)}}
function mkSkTypeSubTool( n,yO,t,f){ var e=null; var E=[]; var l=t.length; var h=(AL.sKTypeToolsH[n]-2)/l; var bG, tC, sT; 
	switch(AL.sKTypeTools[n]){ case "moodViewSelector": for(var i=0; i<l; i++){
		if(AL.sKTypeTunes[n]===i){  sT=ui.mD.selTxt; 	bG="#00aa00"; 	tC="#000"}
		else{ 						sT=ui.mD.selTxt; 	bG="#000"; 		tC=ui.mD.selTxt;	}
 	 	e =mkL( 4,yO+(h*i)+2, 54, h-2, undefined, bG, "sKTypeTool-"+n, sT,1,true,12,12); E.push(e);
 	 	e =mkT( ui.sK.widMid,yO+(h*i)+(l/2), undefined, tC, "sKTypeTool-"+n, f, t[i], "PF","middle"); E.push(e);}
	}
	return E}
function mkSkTypeTool( n){ var E =[]; var e =null; var tC=ui.tY.areaT; var yO=2; var t,f,y,T,F,Y,bG;
	if((AL.stage && AL.sKTypeTools[n]==="stage")){ AL.sKTypeToolsP[n]=true}
	else{ AL.sKTypeToolsP[n]=false}
	for(var i=0; i<n; i++){ console.log(i); yO=yO+AL.sKTypeToolsH[i]+2}
	if(!AL.sKTypeToolsP[n]){
		e =mkL( 2, yO, ui.sK.keyWid, AL.sKTypeToolsH[n], 	undefined, bG, "sKTypeTool-"+n,
			ui.tY.areaB,1,true, 		12,12);E.push( e)}
	else{ tC="#000";
		e =mkL( 2, yO, ui.sK.keyWid, AL.sKTypeToolsH[n], undefined, ui.tY.areaB, "sKTypeTool-"+n, //area=ui.tY.area; areaB=ui.tY.areaB; areaT=ui.tY.areaT;
			ui.tY.areaT,1,true, 		12,12);E.push( e)}
	if( AL.feInit){
		e =mkL( 2, yO, ui.sK.keyWid, AL.sKTypeToolsH[n], undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0")}
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKTypeToolMouseDown( n);break}});E.push(e);
	switch( AL.sKTypeTools[n]){
		case "stage": 						T="Stage";	 	  Y=-2; 	  F=14;		break;
		case "moodViewSelector": 	e=mkSkTypeSubTool( n,yO, ["Stage", "Legend",  "Quanta", 	"Binary"], 14); E=E.concat(e);break;
		case "mosaicForm": 					T="Compare"; 	  Y=-2; 	  F=14;		break;
		}
	if(t){e	=mkT( ui.sK.widMid, yO+y, undefined,tC,"sKTypeTool-"+n,f,t,"PF","middle");E.push(e)}
	if(T){e =mkT( ui.sK.widMid, yO+Y, undefined,tC,"sKTypeTool-"+n,F,T,"PF","middle");E.push(e)}
	return E}
function refreshSkTypeTool( n){ var t ="sKTypeTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkSkTypeTool( n); t.forEach( function( e){ svgSk.appendChild( e)})}


// split obj subj button
// Legend should disable stage, not compare
// ["Plane","Legend","Worth","infElem","I & U"],["TableMT","Total","Infant.","Raise","Queer-","Queer+"],["Bottom","Table","Stage"]],

function sKMoodToolFade(str){ if( !AL.sKMoodToolsD.includes(str)){AL.sKMoodToolsD.push(str)}}
function sKMoodToolUnfade(str){	var index =AL.sKMoodToolsD.indexOf(str); if(index > -1){ AL.sKMoodToolsD.splice(index, 1)}}
function sKMoodToolApply(n,str){ AL.sKMoodTunes[n]=str; AL.moodFeature =str;
	switch(str){
		case "Legend" 	: 	sKMoodToolFade("Bottom"); sKMoodToolFade("TableMT"); break;
		case "Stage" 	: 	sKMoodToolFade("TableMT"); break;
		default 		: 	sKMoodToolUnfade("TableMT"); sKMoodToolUnfade("Bottom");}}
function sKMoodMultiToolMouseDown( n,str){  console.log(AL.sKMoodToolsD); sKMoodToolApply(n,str); console.log(AL.sKMoodToolsD); draw();}
//this fails because draw triggers feinit
function mkSkMoodMultiToolKey( n,i,yO,low,mid,high,none){ var E=[]; var e=null; var T,b,s,t;
	if( AL.sKMoodTunes[n]===AL.sKMoodTools[n][i]){ 	b=mid; s=high; t=none; 
													if(AL.feInit){sKMoodToolApply(n,AL.sKMoodTools[n][i])}}
	else{ 											b=low; s=mid; t=high }
	switch(AL.sKMoodTools[n][i]){ 	case "Legend" 	: 	T="Legend"; break;
									case "Worth" 	: 	T="Worth"; 	break;
									case "infElem" 	: 	T="infElem";break;
									case "I & U" 	: 	T="I & U"; 	break;
									case "Total" 	: 	T="Total"; 	break;
									case "Stereo." 	: 	T="Stereo.";break;
									case "Infant." 	: 	T="Age-"; 	break;
									case "Raise" 	: 	T="Age+"; 	break;
									case "Queer-" 	: 	T="Queer-"; break;
									case "Queer+" 	: 	T="Queer+"; break;
									case "Complex" 	: 	T="Complex";break;
									case "Table" 	: 	T="Table"; 	break;
									case "Stage" 	: 	T="Stage"; 	break;}
	e =mkL( 4,yO+(ui.sK.tH+2)*i+2, 54, ui.sK.tH, undefined, b, "sKMoodTool-"+n, s,1,undefined,7,7);E.push(e);
	bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKMoodMultiToolMouseDown( n, AL.sKMoodTools[n][i]); 	break}});
	e =mkT( ui.sK.widMid,yO+(ui.sK.tH+2)*i-1, undefined, t, "sKMoodTool-"+n,14,T,"PF","middle"); E.push(e);return E}
function mkSkMoodMultiTool( n,yO,DLow,DMid,DHigh,dLow,dMid,dHigh,none){ var E=[];var e=null; var T,b,s,t,low,mid,high;
	var l=AL.sKMoodTools[n].length; var h=l*(ui.sK.tH+2)+2;
	console.log( AL.sKMoodToolsD);
	if( AL.sKMoodToolsD.includes(AL.sKMoodTools[n][0])){if(AL.sKMoodToolsP[n]){ b=DMid; t=DLow;	s=DHigh}
														else{ 					b=DLow; t=DHigh;s=DMid}
														low="#3e3e3e"; mid=DMid; high=DHigh}
	else{ 												if(AL.sKMoodToolsP[n]){ b=dMid; t=dLow; s=dHigh}
														else{ 					b=dLow; t=dHigh;s=dMid}
														low=ui.mD.key2; mid=dMid; high=dHigh} // NOTICE BACKGROUD COLOR
	e =mkL(2, yO, ui.sK.keyWid, h, undefined, low, "sKMoodTool-"+n, s,1, true,7,7); E.push(e);
	switch(AL.sKMoodTools[n][0]){ 	case "Plane" 	: T="plane"; break;
									case "TableMT" 	: T="table"; break;
									case "Bottom" 	: T="bottom";break}
	e =mkT( ui.sK.widMid,yO, undefined, t, "sKMoodTool-"+n,14,T,"AI","middle"); E.push(e);
	for(var i=1; i<l; i++){ e =mkSkMoodMultiToolKey( n,i,yO,low,mid,high,none); E=E.concat(e)} return E}
function sKMoodSingleToolMouseDown( n){	switch( AL.sKMoodTools[n]){
		case "stage"  		: 	AL.stage=  	 	!AL.stage; 		draw(); break;
		case "mosaicForm" 	: 	AL.mosaicForm=  !AL.mosaicForm; draw(); break;}}
function mkSkMoodSingleTool( n,yO,dLow,DMid,DHigh,dLow,dMid,dHigh){ var E =[]; var e =null; var T,F,Y,b,s,t;
	if((!AL.mosaicForm && AL.sKMoodTools[n]==="mosaicForm")||(AL.stage && AL.sKMoodTools[n]==="stage")){ AL.sKMoodToolsP[n]=true}
	else{ AL.sKMoodToolsP[n]=false}
	if( AL.sKMoodToolsD.includes(AL.sKMoodTools[n])){ 	if(AL.sKMoodToolsP[n]){ b=DMid; t=DLow;	s=DHigh}
														else{ 					b=DLow; t=DHigh;s=DMid}}
	else{ 												if(AL.sKMoodToolsP[n]){ b=dMid; t=dLow; s=dHigh}
														else{ 					b=dLow; t=dHigh;s=dMid}}
	e =mkL( 2, yO, ui.sK.keyWid,ui.sK.tH,undefined,b,"sKMoodTool-"+n,s,1,true,7,7);E.push(e);
	if( AL.feInit){
		e =mkL( 2, yO, ui.sK.keyWid, ui.sK.tH, undefined,undefined,undefined,undefined,undefined,undefined,7,7,"0");
		bindE( e, function(ev,e) { switch( ev){ case "mousedown" : sKMoodSingleToolMouseDown( n);break}});E.push(e)}
	switch( AL.sKMoodTools[n]){ case "stage": 		T="Stage";	 Y=-2; F=14; break;
								case "mosaicForm": 	T="Compare"; Y=-2; F=14; break;}
	e =mkT( ui.sK.widMid, yO+Y, undefined,t,"sKMoodTool-"+n,F,T,"PF","middle");E.push(e); return E}
function mkSkMoodTool( n){ var yO=2.5;
	for(var i=0; i<n; i++){	if(Array.isArray(AL.sKMoodTools[i])){ AL.sKMoodTools[i].forEach(function(){ yO+=ui.sK.tH+2}); yO+=4}
							else{ 																		yO+=ui.sK.tH+2}}
	if( Array.isArray( AL.sKMoodTools[n])){ var E =mkSkMoodMultiTool( n,yO,"#000","#888","#ccc","#000","#33aa00",ui.mD.selTxt,"#000")}
	else{ 									var E =mkSkMoodSingleTool(n,yO,"#000","#888","#ccc","#000","#33aa00",ui.mD.selTxt)} return E}
function refreshSkMoodTool( n){ var t ="sKMoodTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkSkMoodTool( n); t.forEach( function( e){ svgSk.appendChild( e)})}



function selectSubj(s){
	AL.subj =s;
	AL.tY 	=s.tY;
	AL.tYl 	=s.tYl;
	AL.opts =s.opts; // this only tY opts?
	AL.mD 	=s.mD;
	AL.pMd 	=s.pMd;
	AL.sMd 	=s.sMd;
	AL.fMd 	=s.fMd;
	AL.mMd 	=s.mMd;
	AL.sex 	=s.sex;
	AL.nM 	=s.nM;
	AL.gnd 	=s.gnd;
	AL.pGn 	=s.pGn;
	AL.sGn 	=s.fGn;
	AL.mGn 	=s.mGn;
	AL.fGn 	=s.fGn;
	AL.pM 	=s.pM;
	AL.pPm 	=s.pPm;
	AL.sPm 	=s.sPm;
	AL.mPm 	=s.mPm;
	AL.fPm 	=s.fPm;
	AL.mSb 	=s.mSb;
	AL.fSb 	=s.fSb;
	AL.mOb 	=s.mOb;
	AL.fOb 	=s.fOb;

	AL.ntR 	=s.ntR;
	AL.ntC 	=s.ntC;
	AL.ntn 	=s.ntn;
	AL.xtR 	=s.xtR;
	AL.xtC 	=s.xtC;
	AL.xtn 	=s.xtn;
}

function deselectSubj(s){
	AL.tY 	=AT.tYs.find(o =>o.ni ===s.tY.ni);
	AL.tYl 	=null;
	AL.opts =null;
	AL.mD 	=AT.mDs.find(o =>o.ni ===s.mD.ni);
	AL.pMd 	=AT.mDs.find(o =>o.ni ===s.pMd.ni);
	AL.sMd 	=AT.mDs.find(o =>o.ni ===s.sMd.ni);
	AL.fMd 	=AT.mDs.find(o =>o.ni ===s.fMd.ni);
	AL.mMd 	=AT.mDs.find(o =>o.ni ===s.mMd.ni);
	AL.sex 	=AT.sXs.find(o =>o.ni ===s.sex.ni);
	AL.nM 	=null;
	AL.gnd 	=AT.gNs.find(o =>o.ni ===s.gnd.ni);
	AL.pGn 	=AT.gNs.find(o =>o.ni ===s.pGn.ni);
	AL.sGn 	=AT.gNs.find(o =>o.ni ===s.sGn.ni);
	AL.mGn 	=AT.gNs.find(o =>o.ni ===s.mGn.ni);
	AL.fGn 	=AT.gNs.find(o =>o.ni ===s.fGn.ni);
	AL.pM 	=AT.pMs.find(o =>o.ni ===s.pM.ni);
	AL.pPm 	=AT.pMs.find(o =>o.ni ===s.pPm.ni);
	AL.sPm 	=AT.pMs.find(o =>o.ni ===s.sPm.ni);
	AL.mPm 	=AT.pMs.find(o =>o.ni ===s.mPm.ni);
	AL.fPm 	=AT.pMs.find(o =>o.ni ===s.fPm.ni);
	AL.mSb 	=AT.mDs.find(o =>o.ni ===s.mSb.ni);
	AL.fSb 	=AT.mDs.find(o =>o.ni ===s.fSb.ni);
	AL.mOb 	=AT.mDs.find(o =>o.ni ===s.mOb.ni);
	AL.fOb 	=AT.mDs.find(o =>o.ni ===s.fOb.ni);

	AL.ntR 	=null;//to-do
	AL.ntC 	=null;//to-do
	AL.ntn 	=null;//to-do
	AL.xtR 	=null;//to-do
	AL.xtC 	=null;//to-do
	AL.xtn 	=null;//to-do

	AL.subj =null;
	AL.tYl  =null;
	AL.opts =null;
}

function deselectSim(s){
	AL.tY 	=AT.tY;
	AL.tYl 	=null;
	AL.opts =null;
	AL.mD 	=AT.mD;
	AL.pMd 	=AT.fOb;
	AL.sMd 	=AT.mSb;
	AL.fMd 	=AT.fOb;
	AL.mMd 	=AT.mSb;
	AL.sex 	=AT.sex;
	AL.nM 	=null;
	AL.gnd 	=AT.gN;
	AL.pGn 	=AT.fGn;
	AL.sGn 	=AT.mGn;
	AL.mGn 	=AT.mGn;
	AL.fGn 	=AT.fGn;
	AL.pM 	=AT.pM;
	AL.pPm 	=AT.fPm;
	AL.sPm 	=AT.mPm;
	AL.mPm 	=AT.mPm;
	AL.fPm 	=AT.fPm;
	AL.mSb 	=AT.mSb;
	AL.fSb 	=AT.fSb;
	AL.mOb 	=AT.mOb;
	AL.fOb 	=AT.fOb;

	AL.ntR 	=null;//to-do
	AL.ntC 	=null;//to-do
	AL.ntn 	=null;//to-do
	AL.xtR 	=null;//to-do
	AL.xtC 	=null;//to-do
	AL.xtn 	=null;//to-do

	AL.subj =null;
	AL.tYl  =null;
	AL.opts =null;

	AL.sim 	=AT.sim;
}

function selectSim(sim){
	if(AL.lockSubj){ AL.subj =sim.subjs.find(s => s.ni===AL.subj.ni); if(!AL.subj){ AL.subj =sim.keySubj}}
	else{ AL.subj =sim.keySubj}

	AL.sim 	=s;
	AL.subj =AL.subj;
	AL.tYl 	=AL.subj.tYl;
	AL.opts =AL.subj.opts;

	AL.tY 	=AL.subj.tY;
	AL.mD 	=AL.subj.mD;
	AL.pMd 	=AL.subj.pMd;
	AL.sMd 	=AL.subj.sMd;
	AL.fMd 	=AL.subj.fMd;
	AL.mMd 	=AL.subj.mMd;
	AL.sex 	=AL.subj.sex;
	AL.nM 	=AL.subj.nM;
	AL.gnd 	=AL.subj.gnd;
	AL.pGn 	=AL.subj.pGn;
	AL.sGn 	=AL.subj.sGn;
	AL.mGn 	=AL.subj.mGn;
	AL.fGn 	=AL.subj.fGn;
	AL.pM 	=AL.subj.pM;
	AL.pPm 	=AL.subj.pPm;
	AL.sPm 	=AL.subj.sPm;
	AL.mPm 	=AL.subj.mPm;
	AL.fPm 	=AL.subj.fPm;
	AL.mSb 	=AL.subj.mSb;
	AL.fSb 	=AL.subj.fSb;
	AL.mOb 	=AL.subj.mOb;
	AL.fOb 	=AL.subj.fOb;

	AL.ntR 	=AL.subj.ntR;
	AL.ntC 	=AL.subj.ntC;
	AL.ntn 	=AL.subj.ntn;
	AL.xtR 	=AL.subj.xtR;
	AL.xtC 	=AL.subj.xtC;
	AL.xtn 	=AL.subj.xtn;	
}


function subjListKey( e){var s =e.split("-").pop(); s =AL.sim.subjs.find(o => o.nI ===s); 
 	if(AL.subj ===s){ deselectSubj(s)} else{ selectSubj(s)}	draw()}

function clearScreen(){
	var e=Array.from(document.querySelectorAll('div, svg, rect, text, polygon, line, circle, ellipse'));
 	e.forEach( function(e){ e.remove()})}
function draw(){
	AL.feInit =true;
	if( AL.fe==='mosaic'){ AL.liNarrow =AL.liNarrowInMosaic}else{ AL.liNarrow =false}
	clearScreen(); initDraw(); drSidebar(); 
	switch( AL.fe){ 
		case "quiz": 	drawQuiz(); 	break;
		case "type": 	drawType(); 	break;
		case "mood": 	drawMood(); 	break;
		case "scalar": 	drawScalar(); 	break;
		case "mosaic": 	drawMosaic(); 	break;
		case "rels": 	drawRels(); 	break;
		case "marker": 	drawMarker(); 	break;}
	AL.feInit =false}
function bindK( e,c){
	e.addEventListener("mousedown", function(){ c("mousedown", e)});
	e.addEventListener("mouseup", 	function(){ c("mouseup", e)});
	e.addEventListener("mouseleave",function(){ c("mouseleave", e)})}
function bindE( e,c){
	e.addEventListener("mousedown", function(){ c("mousedown", e)})}

function bindMosaic( sel,c){ var e=Array.from(document.querySelectorAll( sel));
	e.forEach( function(e){ e.addEventListener("mouseover", function(){ 	c( "mouseover",	e)})});
	e.forEach( function(e){ e.addEventListener("mouseleave", function(){ 	c( "mouseleave",e)})});
	e.forEach( function(e){ e.addEventListener("mouseup", function(){ 		c( "mouseup",	e)})});
	e.forEach( function(e){ e.addEventListener("mousedown", function(){ 	c( "mousedown", e)})})}

AL.quiz = [
	{ l:"I want to be innocent.", r:"I like peace.", m:{}},
	{ l:"I cooperate.", r:"I understand.", m:{}},
	{ l:"I seek happiness.", r:"I seek freedom.", m:{}},
	{ l:"Cats", r:"Dogs", m:{}}]; AL.quizLen =AL.quiz.length;
function drawQuiz(){ var b =null; var B=[];
	//document.body.setAttribute( 'height', ui.qZ.disHei+(2*ui.qZ.disVrt))+"px";
	b =mkL(0,0,ui.winWid-ui.sB.disWid, ui.qZ.disHei+(2*ui.qZ.disVrt),
		undefined,ui.qZ.bG,undefined); B.push(b);
	b =mkL(ui.qZ.disHrz, ui.qZ.disVrt, ui.qZ.disWid, ui.qZ.disHei,undefined,"#fff",undefined,"#000"); B.push(b);
/*b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#0df",undefined,ui.qZ.capFnt,"Personality Test","StrikeFighter","middle",0.66); b.setAttribute( 'text-decoration', 'underline');*/ // #bbc
	b =mkE(ui.qZ.disHrz+(ui.qZ.disWid/2), ui.qZ.disVrt+ui.qZ.capFntG, (ui.qZ.disWid/2)-ui.qZ.capFnt,ui.qZ.capFnt,"#8df");
	b.setAttribute("filter","url(#f2)");B.push(b);
	b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#fff",undefined,ui.qZ.capFnt,"Personality Test","SR","middle",0.75); b.setAttribute( 'text-decoration', 'underline'); B.push(b);
	for(var n=0; n<AL.quizLen; n++){ b=mkQuiz( AL.quiz[n], n); B=B.concat(b)}
	B.forEach( function(B){ svgQz.appendChild(B)});
	document.body.appendChild( divFe); 
	document.body.appendChild( divQz)}
function mkQuiz( q,n){ var b =null; var B=[];
	b =mkT( ui.qZ.disHrz+(ui.qZ.disWid*(2/6)), 	ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFntG+(n*ui.qZ.rowHei),
			undefined,"#000",undefined,ui.qZ.fnt, 	q.l,"TR","end"); 	B.push(b);
	b =mkT( ui.qZ.disHrz+(ui.qZ.disWid*(4/6)), 	ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFntG+(n*ui.qZ.rowHei),
			undefined,"#000",undefined,ui.qZ.fnt, 	q.r,"TR","start"); B.push(b);

 	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)-(ui.qZ.disWid/10),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_-2",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)-(ui.qZ.disWid/18),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_-1",undefined,2,"#000"); B.push(b);
	b =drC(ui.qZ.disHrz+(ui.qZ.disWid/2),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_0",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)+(ui.qZ.disWid/10),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_1",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)+(ui.qZ.disWid/18),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_2",undefined,2,"#000"); B.push(b);
	return B}

function drawType(){ var b =null;
	drTopBar();
	drList();
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.tY.base,"tY"); svgFe.appendChild( b);
	drTypeCube(ui.tY.c1x, ui.tY.c1y, "tYC1"); 	
	drTypeCage(ui.tY.c2x, ui.tY.c2y, "tYC2"); 	
	drSequencer( );						
	drTypeKeys();
	AL.stage ? drTypeStage() : drTypeTable();					
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq); 
	//document.body.appendChild( divSc);
}
//function mkI(x,y,X,Y,id,co,st,op,d)
//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){ 

function bPToolMouseDown( n){ 	AL.bPToolsP[n] 	=true; 	refreshBpTool( n)}
function bPToolMouseLeave( n){ if( AL.bPToolsP[n]){ 	AL.bPToolsP[n] 	=false; refreshBpTool( n)}}
function bPToolMouseUp( n){ switch( AL.bPTools[n]){
	case "sizeList":if(AL.fe!=="mosaic"){ 	AL.fElIS++; if(AL.fElIS>2){ AL.fElIS=0}} 
					else{ 					AL.mPlIS++; if(AL.mPlIS>2){ AL.mPlIS=0}}
					predraw(); draw();  break;
	case "wideList":var scrollY =window.pageYOffset; var oldMiV =ui.bP.minVer;
					if(AL.fe!=="mosaic"){ 	AL.fElIW++; if(AL.fElIW>2){ AL.fElIW=1}} 
					else{ 					AL.mPlIW++; if(AL.mPlIW>2){ AL.mPlIW=0}}
					predraw(); draw();
					//console.log("oldFeH: "+oldFeH+", oldMiV: "+oldMiV+", newFeH: "+newFeH+", newMiV: "+newMiV+", winHei: "+ui.winHei);
					if((oldMiV===ui.winHei)||(ui.bP.minVer>ui.winHei)){
						document.documentElement.scrollTop = document.body.scrollTop = ui.bP.minVer-ui.winHei+scrollY; }
					if((oldMiV>ui.winHei)||(ui.bP.minVer===ui.winHei)){
						document.documentElement.scrollTop = document.body.scrollTop = scrollY-(oldMiV-ui.bP.minVer); }
					break;
	case "wideSeq": AL.sQW= !AL.sQW; predraw(); draw();  break;
	case "highFoot":AL.bPH++; if(AL.bPH>2){AL.bPH=0} predraw(); draw();  break; }
	bPToolMouseLeave( n)}
function mkBpTool(n){ var E=[]; var e=null; var t,f,T,F,y,Y; var p =0; var P=4;
	if((AL.sQW && AL.bPTools[n]==="wideSeq")){ AL.bPToolsP[n]=true}
	if(!AL.bPToolsP[n]){
		e =mkL( ui.bP.divWid-20+2, ui.tB.tooWid*n+ui.bP.tooVer,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.bP.divWid-20+2, ui.tB.tooWid*n+ui.bP.tooVer,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.bP.divWid-20+2, P+(ui.tB.tooWid*n)+ui.bP.tooVer,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "bPTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( AL.feInit){
		e =mkL( ui.bP.divWid-20+2, (ui.tB.tooWid*n)+ui.bP.tooVer, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0");
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": bPToolMouseLeave(n);break;
												case "mouseup"   : bPToolMouseUp  ( n);break;
												case "mousedown" : bPToolMouseDown( n);break}});E.push(e)}
	//"preCalc","defSort","turnSort","confSort"
	switch( AL.bPTools[n]){
		case "sizeList": 	t="size";	T="List";	y=-1; Y=11; 	f=14; F=14;		break;
		case "wideList": 	t="wide";	T="List";	y=-1; Y=11; 	f=14; F=14;		break;
		case "wideSeq": 	t="wide";	T="Seq";	y=-1; Y=11; 	f=14; F=14;		break;
		case "highFoot": 	t="high";	T="Foot";	y=-1; Y=11; 	f=14; F=14;		break;
		//case "confSort": 	t="conf";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		}
	e 		=mkT( ui.bP.divWid-20+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+y+p+ui.bP.tooVer, undefined,"#ccc","bPTool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.bP.divWid-20+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+Y+p+ui.bP.tooVer, undefined,"#ccc","bPTool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshBpTool( n){ var t ="bPTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkBpTool( n); t.forEach( function( e){ svgFe.appendChild( e)})}
function drBottomPanel(){ var E=[]; var e=null; var t="";
	e=mkL(0,ui.midMinHei,ui.winWid,ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	//e=mkL(ui.bP.divWid-20,midMinHei+ui.bP.skrHei,ui.tB.disHei,ui.bP.disHei-ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkL(ui.bP.divWid-20,ui.midMinHei+ui.bP.skrHei,ui.tB.disHei,ui.bP.disHei-ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	for(var i=0; i<AL.bPToolsL; i++){ e =mkBpTool(i); E=E.concat(e)}
	e=mkL(0,ui.midMinHei+ui.bP.tipHei,ui.bP.divWid-20,ui.bP.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkT(ui.bP.rimHei,ui.midMinHei1+ui.bP.skrHei+ui.bP.rimHei,undefined,"#fff",undefined,20,"ntn:","SF"); E.push(e);
	e=mkT(ui.bP.rimHei,Math.round(ui.midMinHei1+ui.bP.tipHei/2+ui.bP.skrHei),undefined,"#fff",undefined,20,"xtn:","SF"); E.push(e);
	//if(AL.subj){ t="("+AL.subj.xtR.nP+","+AL.subj.xtC.nP+") = "+AL.subj.xtn.ni}
	//e=mkT(25,Math.round(ui.midMinHei+ui.bP.tipHei/2+ui.bP.skrHei),undefined,"#fff",undefined,20,t,"AI"); E.push(e);

	//e=mkT(75,Math.round(ui.midMinHei+ui.bP.tipHei/2+ui.bP.skrHei),undefined,"#fff",undefined,25,,"AI"); E.push(e);
	E.forEach( function(e){ svgFe.appendChild(e)})}

// it is not so that abstract karma would be more valuable than abstract value
// it is so that abstract value is in the axial position whereas abstract karma is in the diagonal position
// what does this mean?
// probably need to rewrite mood system. modal and mosaic forms are different for abstract value.
// maybe should scrap this hypothesis anyway

/*I got a solution to the problem of induction as Part III of this book. I should try to publish this on arXiv math.LO because it's so easy. Can someone recommend me? If you can, please visit: https://arxiv.org/auth/endorse?x=CUAERM*/

function cleanSlate(){ initTheRelative(); initTheAbsolute(); initOntology(); initCleanSlate(); predraw(); draw(); }
function tBToolMouseDown( n){ if(!(!AL.sim && AL.tBTools[n]==="copySim")){	AL.tBToolsP[n] 	=true; 	refreshTbTool( n)}}
function tBToolMouseLeave( n){ if( AL.tBToolsP[n]){ 	AL.tBToolsP[n] 	=false; refreshTbTool( n)}}
function tBToolMouseUp( n){ switch( AL.tBTools[n]){
	case "cleanSlate" : if( !AL.touched){ 	cleanSlate()}
						else{ var v =confirm("Delete all data?"); if(v){ cleanSlate()}}break;
	case "copySim" : 	if( AL.sim){ var N =prompt("How many copies of Simulation "+AL.sim.nI+"?", AL.tBTunes[n]);
							if(N){ AL.touched=true; AL.tBTunes[n]=N; copySim(RT,AL.sim,N); predraw(); draw();}} break;
	case "makeSim" : 	var N =prompt("How many default Simulations shall be made?", AL.tBTunes[n]);
						if(N){ AL.touched=true; AL.tBTunes[n]=N; for(var i=0; i<N; i++){	mkSim( RT, "sim", false)}
							if(!AL.sim){ AL.sim=RT.sims[0]; AL.subjs=AL.sim.subjs; AL.subjsL=AL.sim.subjsL;
								AL.keySubj=AL.sim.keySubj; AL.subj=AL.keySubj; AL.tYl=AL.subj.tYl; AL.tY=AL.subj.tY; }
							predraw(); draw();} break;
	case "randSim" : 	var N =prompt("How many randomized Simulations shall be made?", AL.tBTunes[n]);
						if(N){ AL.touched=true; AL.tBTunes[n]=N; for(var i=0; i<N; i++){	mkSim( RT, "sim", true)}
							if(!AL.sim){ AL.sim=RT.sims[0]; AL.subjs=AL.sim.subjs; AL.subjsL=AL.sim.subjsL;
								AL.keySubj=AL.sim.keySubj; AL.subj=AL.keySubj} //expand
							predraw(); draw();} break;
	case "lockSim" : 	AL.lockSim= !AL.lockSim; draw(); break;
	case "confStat" : 	if(AL.lF!=="confStat"){ AL.prevLf=AL.lF; AL.lF="confStat"}
						else{ AL.lF=AL.prevLf} draw(); break;
	/*case "delSim" : 	if( RT.simsL >1){ var v =confirm("Delete this simulation?");
							if(v){ 			tBToolDelSim( AL.sim)}}break;
	case "delSims" : 	if( RT.simsL >1){ var v =confirm("Delete all untagged simulations?");
 							if(v){ 			tBToolDelSim( AL.sim)}}*/}
	tBToolMouseLeave( n)}
// mentality causes a bonus for acc function, vitality bonus for prod function.
// this explains why neurosoma is so strong as to be overwhelming because the leading function is already strongest.
// mobi func turns "3-dimensional" (lol?) in metaprogramming circuit
function mkTbTool( n){ var E =[]; var e =null; var t,f,T,F,y,Y; var p =0; var P=4;
	if((AL.lockSim && AL.tBTools[n]==="lockSim")||(AL.lF==="confStat"&&AL.tBTools[n]==="confStat")){ AL.tBToolsP[n]=true}
	if(!AL.tBToolsP[n]){
		e =mkL( ui.tB.tooWid*n+2, 0/*2*/,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.tB.tooWid*n+2, 0,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.tB.tooWid*n+2, 0+P,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( AL.feInit){
		e =mkL( ui.tB.tooWid*n+2, 0, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0");
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": tBToolMouseLeave(n);break;
												case "mouseup"   : tBToolMouseUp  ( n);break;
												case "mousedown" : tBToolMouseDown( n);break}});E.push(e)}
	switch( AL.tBTools[n]){
		case "cleanSlate":t="cln";		T="Slate";	y=-1; Y=11; 	f=14; F=14;		break;
//		case "clearSubjs":t="clr"; 		T="subjs";	y=0; Y=12; 	f=15; F=15;		break;
		case "copySim" 	: t="copy"; 	T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "makeSim" 	: t="norm";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "randSim" 	: t="rand";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "lockSim" 	: t="lock";		T="Sim"; 	y=-1; Y=11; 	f=14; F=14;		break;
		case "confStat" : t="conf";		T="Stat"; 	y=-1; Y=11; 	f=14; F=14;		break;
//		case "delSim" 	: t="del"; 		T="Sim";	y=0; Y=12; 	f=15; F=15; 	break;
//		case "delSims" 	: t="del"; 		T="Sims";   y=0; Y=12;  f=15; F=15; 	break;
		}
	e 		=mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), y+p, undefined,"#ccc","tBTool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), Y+p, undefined,"#ccc","tBTool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshTbTool( n){ var t ="tBTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkTbTool( n); t.forEach( function( e){ svgFe.appendChild( e)})}

function tabKey(n){
	if(AL.sim===RT.sims[n]){ AL.sim=null; predraw();draw()}
	else{ 	AL.sim =RT.sims[n]; AL.subjs =AL.sim.subjs; AL.subjsL=AL.sim.subjsL;
			if(!AL.lockSubj){
				if(AL.subjsL>0){ 
					AL.subj=AL.sim.keySubj; AL.keySubj=AL.subj; AL.tY=AL.subj.tY; AL.tYl=AL.subj.tYl}
				else{
					AL.subj=null; AL.keySubj=null; AL.tY=AT.tY; AL.tYl=null}}
			predraw(); draw()}}
function mkTab(n){ var E=[]; var e=null;
	var c="#888"; if( RT.sims[n] === AL.sim){ c = "#fff"}	
	e = mkL( 3+(n*ui.tB.reTabG), 0,	ui.tB.reTabW, ui.tB.reTabH,
		undefined, ui.sB.bG, undefined, "#3c3c3c"/*ui.tB.strCol*/, 1);
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : 		tabKey( n); 	break}});	E.push(e);
	var t = (3+(n*ui.tB.reTabG)+(ui.tB.reTabW)-1)+"px "+(0+(ui.tB.reTabH)-1)+"px";
	e.style.transformOrigin = t; e.style.transform = "rotate(-45deg)";	E.push(e);	
	e = mkT( 3+(n*ui.tB.reTabG)+ui.tB.reTabW-2, 0,
		undefined, c, undefined, 13, RT.sims[n].nI, "SF","end");
	e.style.transformOrigin = t; e.style.transform = "rotate(-45deg)";	E.push(e);
	return E}
function statTabKey(n){ AL.statSim =AL.statSims[n]; draw();}
function mkStatTab(n){ var E=[]; var e=null;
	var c="#888"; if( AL.statSims[n] === AL.statSim){ c = "#fff"}
		e = mkL( ui.tB.tabGap+ui.tB.abTabH+(n*ui.tB.tabGap)+(n*ui.tB.abTabW), 3, ui.tB.abTabW, ui.tB.tabHei,
		undefined, ui.sB.bG, undefined, ui.tB.strCol, 1,undefined,6,6);
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : 		statTabKey( n); 	break}});	E.push(e);
	e = mkT( ui.tB.tabGap+ui.tB.abTabH+(n*ui.tB.tabGap)+(n*ui.tB.abTabW)+Math.floor(ui.tB.abTabW/2)+1, 3,
		undefined, c, undefined, 20, AL.statSims[n].nI, "TR","middle"); E.push(e);
	return E}
function drTopBar(){ var E=[]; var e=null; var T=[]; var t=null;
	e=mkL(0,0,ui.tB.disHrz,ui.tB.disHei,undefined,ui.sB.bG); E.push(e);
	for(var n=0; n<AL.tBToolsL; n++){ e =mkTbTool(n); E=E.concat(e)}
	e=mkL(ui.tB.abTabH,-10,ui.tB.abTabsW,ui.tB.disHei,undefined,"#3c3c3c", undefined,
		ui.tB.strCol,1,undefined,10,10); E.push(e);
	for(var i=0; i<AL.statTabsL; i++){ e =mkStatTab(i); E=E.concat(e); }
	e=mkL(ui.tB.abTabH,ui.tB.skrVrt,ui.tB.abTabsW,ui.tB.skrHei,undefined,ui.sB.bG); E.push(e);
	E.forEach( function(e){svgFe.appendChild(e)}); 

	t=mkL(0, 0, ui.tB.disWid, ui.tB.skrVrt, "tB_bg", ui.tB.bG, "tB"); T.push(t);
	t=mkL(0, 0, 10, ui.tB.skrVrt+1, undefined, ui.sB.bG); T.push(t);
	t=mkL(0, -ui.tB.skrHei, 20, ui.tB.disHei, undefined, ui.tB.bG, undefined,undefined,undefined,undefined,10,10); T.push(t);

	t=mkI(7, ui.tB.skrVrt, ui.tB.disWid, ui.tB.skrVrt,undefined,"#3c3c3c",1); T.push(t);
	for(var n=0; n<RT.simsL; n++){ t =mkTab(n); T=T.concat(t);}
	//if(RT.simsL > 1){ t =mkTab(-1); T=T.concat(t); }
	t=mkL(0, ui.tB.skrVrt, ui.tB.disWid, ui.tB.skrHei,undefined,ui.sB.bG); T.push(t);
	T.forEach( function(t){svgTb.appendChild(t)})}



function lIToolMouseDown( n){ 	AL.lIToolsP[n] 	=true; 	refreshLiTool( n)}
function lIToolMouseLeave( n){ if( AL.lIToolsP[n]){ 	AL.lIToolsP[n] 	=false; refreshLiTool( n)}}
function lIToolMouseUp( n){ switch( AL.lITools[n]){
	case "cleanSlate" : if( !AL.touched){ 	cleanSlate()}
						else{ var v =confirm("Delete all data?"); if(v){ cleanSlate()}}break;}
	lIToolMouseLeave( n)}
function mkLiTool(n){ var E=[]; var e=null; var t,f,T,F,y,Y; var p =0; var P=4;
	if(!AL.lIToolsP[n]){
		e =mkL( ui.lF.kW+2, ui.tB.tooWid*n+ui.tB.disHei,  ui.tB.tooWid-4, ui.tB.disHei-4, 	undefined, "#3c3c3c", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);
		e =mkL( ui.lF.kW+2, ui.tB.tooWid*n+ui.tB.disHei,  ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e);}
	else{ p =P;
		e =mkL( ui.lF.kW+2, P+(ui.tB.tooWid*n)+ui.tB.disHei,ui.tB.tooWid-4, ui.tB.disHei-4-P, undefined, "#555555", "lITool-"+n,
			undefined,undefined,true, 		12,12);E.push( e)}
	if( AL.feInit){
		e =mkL( ui.lF.kW+2, (ui.tB.tooWid*n)+ui.tB.disHei, ui.tB.tooWid-4, ui.tB.disHei-4, undefined,undefined,undefined,
			undefined,undefined,undefined,12,12,"0")
		bindK( e, function(ev,e) { switch( ev){ case "mouseleave": lIToolMouseLeave(n);break;
												case "mouseup"   : lIToolMouseUp  ( n);break;
												case "mousedown" : lIToolMouseDown( n);break}});E.push(e)}
	//"preCalc","defSort","turnSort","confSort"
	switch( AL.lITools[n]){
		case "confRand": 	t="conf";	T="Rand";	y=-1; Y=11; 	f=14; F=13;		break;
		case "confDef": 	t="conf";	T="Norm";	y=-1; Y=11; 	f=14; F=13;		break;
		case "defSort": 	t="def";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		case "confSort": 	t="conf";	T="Sort";	y=-1; Y=11; 	f=14; F=14;		break;
		}
	e 		=mkT( ui.lF.kW+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+y+p+ui.tB.disHei, undefined,"#ccc","lITool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.lF.kW+(ui.tB.tooWid/2), (ui.tB.tooWid*n)+Y+p+ui.tB.disHei, undefined,"#ccc","lITool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshLiTool( n){ var t ="lITool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkLiTool( n); t.forEach( function( e){ svgLi.appendChild( e)})}

function listFeatureKey(e){ var f= parseInt(e.split("-").pop()); AL.lF=AL.lIFes[f]; draw();}
function mkLiFb( n,ni){ var id="lIFe-"+n;
	if( AL.lF !== ni){ 	var e =mkL( 0, n*ui.lF.kH+ui.tB.disHei, ui.lF.kW, ui.lF.kH, id, ui.sB.btn)}
	else 			{ 	var e =mkL( 0, n*ui.lF.kH+ui.tB.disHei, ui.lF.kW, ui.lF.kH, id, ui.sB.sel)}
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : listFeatureKey( e.id);break}}); return e }
function mkLiFt( n,ni){ 
	if( AL.lF !== ni){ 	var e =mkT( 8, (n*ui.lF.kH)-2+ui.tB.disHei, undefined, ui.sB.btnTxt, undefined, ui.sB.fnt, ni, 'PF')}
	else 			{ 	var e =mkT( 76, (n*ui.lF.kH)-2+ui.tB.disHei, undefined, ui.sB.selTxt, undefined, ui.sB.fnt, ni, 'PF',"end")}return e }
function mkLiFr( n,sB,ni){ var et=[]; var v; // NO "FORM", NO "SUBSTANCE"!
	if( AL.lF !== ni) { 
		var e=mkL( 0, n*ui.lF.kH+ui.tB.disHei, 			ui.lF.kW, 3, undefined, ui.sB.btnU); et.push( e);
		var e=mkL( 0, ((n+1)*ui.lF.kH)-3+ui.tB.disHei, 	ui.lF.kW, 3, undefined, ui.sB.btnD); et.push( e);
		v = "0,"+(n*ui.lF.kH+ui.tB.disHei)+" 3,"+((n*ui.lF.kH)+3+ui.tB.disHei)+" 3,"+(((n+1)*ui.lF.kH+ui.tB.disHei)-3)+" 0,"+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.btnL,undefined,false); et.push(e);
		v = ui.lF.kW+","+(n*ui.lF.kH+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+((n*ui.lF.kH)+3+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" "+ui.lF.kW+","+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.btnR,undefined,false); et.push(e);}
	else{
		var e=mkL( 0, n*ui.lF.kH+ui.tB.disHei, 			ui.lF.kW, 3, undefined, ui.sB.selU); et.push( e);
		var e=mkL( 0, ((n+1)*ui.lF.kH)-3+ui.tB.disHei, 	ui.lF.kW, 3, undefined, ui.sB.selD); et.push( e);
		v = "0,"+(n*ui.lF.kH+ui.tB.disHei)+" 3,"+((n*ui.lF.kH)+3+ui.tB.disHei)+" 3,"+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" 0,"+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.selL,undefined,false); et.push(e);
		v = ui.lF.kW+","+(n*ui.lF.kH+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+((n*ui.lF.kH)+3+ui.tB.disHei)+" "+(ui.lF.kW-3)+","+(((n+1)*ui.lF.kH)-3+ui.tB.disHei)+" "+ui.lF.kW+","+((n+1)*ui.lF.kH+ui.tB.disHei);
		e=mkS( v,undefined,ui.sB.selR,undefined,false); et.push(e);
	} return et}

function mkSubjMoodCode(subj){ var r=subj.sex.nI; if(subj.mD.obj){ r +="'"}	r=r+"("+subj.pPm.niH+subj.pGn.nI+subj.pPm.niT+")"; return r	}

function drList(){ var E=[]; var e=null; var liI="";liT="";liB=""; var off; var absB; var F=[];var G=[];
	e =mkL( 0, ui.tB.disHei, ui.tY.liW, ui.tY.liHe,"tY_L",ui.sB.bG,"tY_L_bg");											svgFe.appendChild( e);
	for( var i=0; i < AL.lIFesL; i++){ 	e =mkLiFb( i, AL.lIFes[i]); E.push(e);
										e =mkLiFt( i, AL.lIFes[i]); E.push(e);
										e =mkLiFr( i, ui.sB, AL.lIFes[i]); E =E.concat(e)}
	for(var i=0; i<AL.lIToolsL; i++){ e =mkLiTool(i); E=E.concat(e)}
	switch( AL.liS){
		case 0: ui.lI.iHe=ui.lI.iHe0; ui.lI.tPF=ui.lI.tPF0; ui.lI.tTR=ui.lI.tTR0; ui.lI.tSF=ui.lI.tSF0;	ui.lI.mDx=ui.lI.mDx0;
				ui.lI.kix=ui.lI.kix0; ui.lI.mPx=ui.lI.mPx0; ui.lI.obx=ui.lI.obx0; ui.lI.vQx=ui.lI.vQx0; ui.lI.nMx=ui.lI.nMx0;
				ui.lI.miW=ui.lI.miW0; break;
		case 1: ui.lI.iHe=ui.lI.iHe1; ui.lI.tPF=ui.lI.tPF1; ui.lI.tTR=ui.lI.tTR1; ui.lI.tSF=ui.lI.tSF1;
				ui.lI.mDx=ui.lI.mDx1; ui.lI.nMx=ui.lI.nMx1; break;
		case 2: ui.lI.iHe=ui.lI.iHe2; ui.lI.tPF=ui.lI.tPF2; ui.lI.tTR=ui.lI.tTR2; ui.lI.tSF=ui.lI.tSF2;
				ui.lI.mDx=ui.lI.mDx2; ui.lI.nMx=ui.lI.nMx2; break;}
	var ctrHei=0;
	ui.lI.svgHei =(AL.subjsL*ui.lI.iHe+2); svgLi.setAttribute( 'height', ui.lI.svgHei);
	svgLi.setAttribute( 'width', ui.lI.miW);
	var lisLen=18;
	var lisHei=ui.midMinHei -ui.tB.disHei*5;
	var lisY =ctrHei;
	var width = ui.lI.miW;
	E.forEach( function(E){svgFe.appendChild(E)}); var E=null;
	if(AL.sim){for(var n=0; n <AL.sim.subjsL; n++){
		if( 	AL.sim.subjs[n]===AL.subj)	{ liI="#ffffff"; liT="#000000"; liB="#000000"; 	E=G}
		else if(AL.sim.subjs[n]===AL.keySubj){ liI=ui.tY.sLiI;liT=ui.tY.sLiT;liB=ui.tY.sLiB; E=G}
		else 								{ liI=ui.tY.liI; liT=ui.tY.liT; liB=ui.tY.liB; 	E=F}					
		e =mkL(1, ui.lI.iHe*n+ctrHei+1,width-2,ui.lI.iHe,"tY_Li-"+AL.sim.subjs[n].nI,liI,"tY_Li",liB,1);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : subjListKey( e.id);break}});									E.push(e);
		e =mkT(4,(ui.lI.iHe*n)-1+ctrHei,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tPF,//ååå
			AL.sim.subjs[n].nI+" "+AL.sim.subjs[n].tY.nI+"("+AL.sim.subjs[n].tYl.ni2+","+AL.sim.subjs[n].tYl.ab.ni+")","PF"); 	E.push(e);
		if(AL.sim.subjs[n].pMd.symm){ var liT2="#ffff00"} else{ var liT2=liT}
		if(!AL.sim.subjs[n].sex.fem){ if(!AL.sim.subjs[n].sex.kid){ off=ui.lI.mDx+ui.lI.kix; absB="♂("} else{ off=ui.lI.mDx; absB="*♂("}}
		else 						{ if(!AL.sim.subjs[n].sex.kid){ off=ui.lI.mDx+ui.lI.kix; absB="♀("} else{ off=ui.lI.mDx; absB="*♀("}}
		e =mkT(off, (ui.lI.iHe*n)-1+ctrHei,"tY_LiB-"+n,liT2,"tY_LiB",ui.lI.tTR,
			absB+AL.sim.subjs[n].pPm.niH+AL.sim.subjs[n].pGn.nI+AL.sim.subjs[n].pPm.niT+")","TR");								E.push(e);
		if(!AL.sim.subjs[n].gnd.fem){ if(!AL.sim.subjs[n].obj){ off=ui.lI.mPx; absB="♂"} else{ off=ui.lI.mPx-ui.lI.obx; absB="'♂"}}
		else 						{ if(!AL.sim.subjs[n].obj){ off=ui.lI.mPx; absB="♀"} else{ off=ui.lI.mPx-ui.lI.obx; absB="'♀"}}
		if(AL.sim.subjs[n].i){ absB+="i"} if(AL.sim.subjs[n].e){ absB+="e"} absB+="(";
		e =mkT(off, (ui.lI.iHe*n)-1+ctrHei+1,"tY_LiP-"+n,liT2,"tY_LiP",ui.lI.tTR,
			absB+AL.sim.subjs[n].x+","+AL.sim.subjs[n].y+")","TR");															E.push(e);
		/*e =mkT(ui.lI.vQx, (ui.lI.iHe*n)-1+ctrHei+1,"tY_LiP-"+n,liT2,"tY_LiP",ui.lI.tTR,
			"= "+AL.sim.subjs[n].xtn.ni,"AI");*/
		///*"= ("+*//*AL.sim.subjs[n].ntn.nI+*/"("+/*AL.sim.subjs[n].xtn.nI+*/"))","AI");	
		E.push(e);
		e =mkT(ui.lI.nMx,(ui.lI.iHe*n)-1+ctrHei+1,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tSF,AL.sim.subjs[n].nM.full,"SF"); 			E.push(e)}
	E=F.concat(G);	E.forEach( function(E){svgLi.appendChild(E)})}}

// function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
function drSequencer(){ var E=[]; var e=null; var l=120;
	if(AL.lIW>0) { 	l =ui.tY.lIW}
//	e= mkL(l,ui.tB.disHei-1,ui.sQ.cW-2,ui.sQ.cH,undefined,"#3c3c3c",undefined,undefined,undefined,undefined,12,12); E.push(e);
//	e= mkL(l,ui.tB.disHei-1,ui.sQ.cW-3,ui.sQ.cH-1,undefined,"#000000",undefined,undefined,undefined,undefined,12,12); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); E=[];
	e= mkL(0,0,ui.sQ.disWid,ui.sB.disHei-ui.tB.disHei,"tY_sQ",ui.sQ.bG,"tY_sQ");				E.push(e);
	E.forEach( function(E){svgSq.appendChild(E)})}

// adjust cube, middle zy 1x2, middle xz 2x1
function drTypeCube(cX,cY,cl){ var e; var E=[]; var v; var w=ui.tY.cE; var h=ui.tY.cE; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane; var x=cX+h/d+ui.tY.cuHrz; var y=cY+h/d+ui.tY.cMarg; //"#002d33"
	v =  x -(w/d)+","+(y + (h/d)) +" "+			(x +(w/d)+","+(y - (h/d)))+" "+
		(x + (w/d))+","+(y+h-(h/d))+" "+			(x -(w/d)+","+(y+h+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-vrt", cl, "0.236"); 		E.push(e);
	/*v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+			(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+w-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, ui.tY.cShade, id+"-cU-hrz", cl, op); 		E.push(e);*/
	v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+			(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, ui.tY.cShade, id+"-cU-hrzL", cl, "0.382"); 		E.push(e);
	v =  x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)) +" "+			(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+w-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, "#002d33", id+"-cU-hrzR", cl, "0.146"); 		E.push(e);

	v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-top", cl, op);		E.push(e);
/*	v =  x+(w/2)+(w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-btm", cl, op/1.618);E.push(e);*/
	v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-btmL", cl, op/1.618);E.push(e);
	v =  x+(w/2)-(w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x+(w/2)+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, "#002d33", id+"-cU-btmR", cl, "0.382");E.push(e);

/*	v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+			(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+			(x + (w/2)-(w/d)+","+(y+h+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-vrt", cl, op); 		E.push(e);*/
	v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+			(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+(h/2)-(h/d)))+" "+		(x + (w/2)-(w/d)+","+(y+(h/2)+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-zyMT", cl, op); 		E.push(e);
	v =  x + (w/2)-(w/d)+","+(y+(w/2)+(h/d)) +" "+		(x + (w/2)+(w/d)+","+(y+(w/2)-(h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+ h -(h/d)))+" "+		(x + (w/2)-(w/d)+","+(y+ h +(h/d)));		
	e =drS(v, "#002d33", id+"-cU-zyMB", cl, "0.236"); 		E.push(e);

	e =drA(x+(w/d),	y-(h/d),w,h,co,id+"-btm",cl+"-btm pAIU",0,undefined,op); 		E.push(e);

	var p=(w/32)-2;
	v = x+(w/4)-p+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4)-p)+" "+
		(x+(w/2)+p)+","+(y+(h/8))+" "+ 					(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-npp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)+(w/2)-p+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4)-p)+" "+
		(x+(w/2)+(w/2)+p)+","+(y+(h/8))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-ppp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)+(w/2)-p+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4)+(h/2)-p)+" "+
		(x+(w/2)+(w/2)+p)+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-pnp", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/4)-p+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4)+(h/2)-p)+" "+
		(x+(w/2)+p)+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-nnp", cl, undefined, "#8fc",1); E.push(e);

/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2)+(w/d),	y+(h/2)-(h/d),	undefined,"#ccff66",1,"0.382");E.push(e);  
	//e.setAttribute("marker-end","url(#triangle)");
	//marker.appendChild(e); E.push(e);
	/*e.marker('start', 10, 10, function(add) {
  add.circle(10).fill('#f06')
})*/
//	var f = mkM("triangle","0 0 10 10",x,y,"strokeWidth","4","3","auto"); 
	//e.markerEnd ="url(#marker)";
	//e.setAttribute("class","path");
	//E.push(f);
	//f.appendChild(e); E.push(f);
	e =mkI(x+(w/2),			y+h,			x+(w/2)+(w/d),	y+h-(w/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+h-(h/d),		x,				y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+(h/d),		x,				y+(h/2),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =drA(x, 		y, 		w,h,co,id+"-mid",cl+"-mid pAIU",0,undefined,op/1.618/1.618);	E.push(e);
	e =mkI(x-(w/d),			y+(h/2)+(h/d),	x,				y+(h/2),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x,				y+h,			x-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x,				y,				x,				y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/2),			y+h,			x+(w/2)-(w/d),	y+h+(w/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2)-(w/d),	y+(h/2)+(h/d),	undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2),		y+(h/d),		undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+(w/2),			y,				x+(w/2),		y+(h/d),		undefined,"#ccff66",1,"0.236"); E.push(e);
/*a*/e=mkI(x+(w/2),			y+(h/2),		x+(w/2),		y+h,			undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x,				y+(h/2),		x+w-(w/d),		y+(h/2),		undefined,"#ccff66",1,"0.382"); E.push(e);
/*a*/e=mkI(x+w,				y+(h/2),		x+w-(w/d),		y+(h/2),		undefined,"#ccff66",1,"0.236"); E.push(e);


	e =mkI(x+w+(w/d),		y+(h/d),		x+w-(w/d),		y+(h/d),		undefined,"#ffffff",1,"0.146"); E.push(e);
	e =mkI(x+w+(w/d),		y+h-(h/d),		x+w-(w/d),		y+h-(h/d),		undefined,"#ffffff",1,"0.146"); E.push(e);

	e =mkI(x,				y+h,			x+w-(w/d),		y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w,				y+h,			x+w-(w/d),		y+h,			undefined,"#ffffff",1,"0.146"); E.push(e);

	v = x-p+	","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8))+","+(y+(w/4)-p)+" "+
		(x+(w/4)+p)+","+(y+(h/4)+(h/8))+" "+ 		(x+(w/8))+","+(y+(w/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-npn", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/2)-p+","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4)-p)+" "+
		(x+(w/4)+(w/2)+p)+","+(y+(h/4)+(h/8))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-ppn", cl, undefined, "#8fc",1); E.push(e);
	v = x+(w/2)-p+","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4)+(h/2)-p)+" "+
		(x+(w/4)+(w/2)+p)+","+(y+(h/4)+(h/8)+(h/2))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-pnn", cl, undefined, "#8fc",1); E.push(e);
	v = x-p+	","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8))+","+(y+(w/4)+(h/2)-p)+" "+
		(x+(w/4)+p)+","+(y+(h/4)+(h/8)+(h/2))+" "+ 		(x+(w/8))+","+(y+(w/2)+(h/2)+p);
	e =drS(v, ui.tY.cIE, cl+"_IE-nnn", cl, undefined, "#8fc",1); E.push(e);

	/*v =  x + (w/2)+(w/d)+","+(y + (h/d)) +" "+			(x + w+(w/d)+","+(y - (h/d)))+" "+
		(x + w+(w/d)+","+(y+h-(h/d)))+" "+				(x + w-(w/d)+","+(y+h+(h/d)));		
	e =drS(v, "#002d33", id+"-cU-vrtR", cl, "0.236"); 		E.push(e); */
	v =  x + (w/2)+(w/d)+","+(y+(h/d)) +" "+		(x + w+(w/d)+","+(y-(h/d)))+" "+
		(x + w+(w/d)+","+(y+(h/2)-(h/d)))+" "+		(x + w-(w/d)+","+(y+(h/2)+(h/d)));	
	e =drS(v, ui.tY.cShade, id+"-cU-zyRT", cl, "0.146"); 		E.push(e);
	v =  x + (w/2)+(w/d)+","+(y+(w/2)+(h/d)) +" "+		(x + w+(w/d)+","+(y+(w/2)-(h/d)))+" "+
		(x + w+(w/d)+","+(y+ h -(h/d)))+" "+		(x + w-(w/d)+","+(y+ h +(h/d)));		
	e =drS(v, "#002d33", id+"-cU-zyRB", cl, "0.146"); 		E.push(e);

	e =drA(x-(w/d),	y+(h/d),w,h,co,id+"-top",cl+"-top pAIU",0,undefined,"0.146");		E.push(e);

	e =mkI(x+(w/d), 		y-(h/d), 		(x+w)+(w/d), 	y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x, 				y, 				(x+w), 			y, 				undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+(h/d), 		(x+w)-(w/d), 	y+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+(h/2)+(h/d),	(x+w)-(w/d), 	y+(h/2)+(h/d),	undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d), 		y+h+(h/d),		(x+w)-(w/d), 	y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	e =mkI(x-(w/d), 		y+(h/d), 		x+(w/d), 		y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d), 		y+(h/d), 		x+(w/2)+(w/d), 	y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+(h/d), 		x+w+(w/d), 		y-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+(w/2)+(h/d), 	x+w+(w/d), 		y+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d), 		y+w+(h/d), 		x+w+(w/d), 		y+w-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	e =mkI(x+w+(w/d), 		y-(h/d), 		x+w+(w/d), 		y+w-(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w, 			y, 				x+w, 			y+h,			undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+w-(w/d),		y+(h/d),		x+w-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x+(w/d),			y+(h/d),		x+(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);
	e =mkI(x-(w/d),			y+(h/d),		x-(w/d),		y+h+(h/d),		undefined,"#ffffff",1,"0.236"); E.push(e);

	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)+(h/2)-p),cl+"_IET-nnn","#ffffff",cl+"_IET",
		w/11,AT.abSpace[0][0][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-nnn","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[0][0][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)+(h/2)-p),cl+"_IET-pnn","#ffffff",cl+"_IET",
		w/11,AT.abSpace[2][0][0].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-pnn","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[2][0][0].val,"tahoma","middle");E.push(e);*/

	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)-p),cl+"_IET-ppn","#ffffff",cl+"_IET",
		w/11,AT.abSpace[2][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)),cl+"_IEN-ppn","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[2][2][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)-p),cl+"_IET-npn","#ffffff",cl+"_IET",
		w/11,AT.abSpace[0][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)),cl+"_IEN-npn","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[0][2][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)+(h/2)-p),cl+"_IET-nnp","#ffffff",cl+"_IET",
		w/11,AT.abSpace[0][0][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/2)+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[0][0][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)-p),cl+"_IET-npp","#ffffff",cl+"_IET",
		w/11,AT.abSpace[0][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[0][2][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)-p),cl+"_IET-ppp","#ffffff",cl+"_IET",
		w/11,AT.abSpace[2][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/8)),cl+"_IEN-ppp","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[2][2][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)+(h/2)-p),cl+"_IET-pnp","#ffffff",cl+"_IET",
		w/11,AT.abSpace[2][0][2].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/2)+(h/8)),cl+"_IEN-pnp","#ffffff",cl+"_IEN",
		w/22,AT.abSpace[2][0][2].val,"tahoma","middle");E.push(e);*/

	E.forEach( function(E){svgFe.appendChild(E)}); }

function drTypeCage(cX,cY,cl){

	function drAr(x,y,X,Y,lx,ly,lz){

		function drCr(cx,cy,x,y,X,Y){ var crR;
			if(AL.subj){
				if(AL.subj.tYl.ni ===o.ni){
					crR=Math.round((w/13));
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.236"); F.push(e); 
					crR=Math.round((w/13)/1.618);
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.381"); F.push(e);
					e=mkI(x,y,X,Y,undefined,"#ffffff",1,0.236,dash); F.push(e);}
				else if(AL.subj.opts.includes(o)){
					crR=Math.round((w/13)/1.618/1.618);
					e=drC(cx,cy,(w/13)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.236"); F.push(e);
					e=mkI(x,y,X,Y,undefined,"#ffffff",1,0.236,dash); F.push(e);}}}

		var o =AL.tY.reSpace[lx][ly][lz];
		var cNi=o.ni; var col,stC,tCo; var cSD, cVD, cMD; var dash; var stW=w/65;
		if(!AL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}}
		else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}
			if(AL.tYl.ni ===o.ni){ var fil ="url(#f3)"; var fr=w/13+5; var fCo="#ffffff"
				if(o.val){ 	col="#ffffff"; stC="#ff8888"; tCo ="#000000";}
				else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
			if(AL.subj.opts.includes(o)){ var fil ="url(#f3)"; var fr=w/15+5;
				if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
				else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}
		var cS =o.str; if(cS){ cSD="S"} else{ cSD="s"}
		var cV =o.val; if(cV){ cVD="V"} else{ cVD="v"}
		var cM =o.mnt; if(cM){ cMD="M"} else{ cMD="m"}
		if(!cM){ dash=w/105+","+w/105}
		var E=[];var e=null;var id="_cUC-";var dx=false;var dy=false;var dz=false;var st;
		if(lx===2){ id+="p"} else if(lx===1){ id+="t"; dx=true;}else if(lx===0){ id+="n"}
		if(ly===2){ id+="p"} else if(ly===1){ id+="t"; dy=true;}else if(ly===0){ id+="n"}
		if(lz===2){ id+="p"} else if(lz===1){ id+="t"; dz=true;}else if(lz===0){ id+="n"}
		switch(o.str){ case true: st=Math.round(w/8); break; case false: st=Math.round(w/13)}
		if(dx){
			if( o.aDi=== 1){ x += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/6))+","+y+" "+x+","+(y+(w/14))+" "+x+","+(y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC);  										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x+(w/13),y,X-(w/10),Y)}
			else if( o.aDi=== -1){ X -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/6))+","+Y+" "+X+","+(Y+(w/14))+" "+X+","+(Y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}}
		if(dy){
			if( o.aDi=== 1){ y += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/14))+","+y+" "+(x+(w/14))+","+y+" "+x+","+(y-(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x,y,X,Y)}
			else if( o.aDi=== -1){ Y -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X-(w/14))+","+Y+" "+(X+(w/14))+","+Y+" "+X+","+(Y+(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}}
		if(dz){
			if( o.aDi=== -1){ x += w/6; y-= w/6;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/18))+","+(y-(w/18))+" "+(x-(w/9))+","+(y+(w/9))+" "+(x+(w/18))+","+(y+(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(x,y,x,y,X,Y)}
			else if( o.aDi=== 1){ Y += w/6; X -= w/6;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/18))+","+(Y+(w/18))+" "+(X+(w/9))+","+(Y-(w/9))+" "+(X-(w/18))+","+(Y-(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(X,Y,x,y,X,Y)}
			else if( o.aDi=== 0){ cY = Y+ w/4.5; cX = X- w/4.5;
				if(fil){ e=drC(cX,cY,fr,fCo); e.setAttribute("filter",fil); 					E.push(e)}
				e =drC(cX,cY,w/13,col,"jou","jou",stW,stC); 									F.push(e);
				e =mkT(cX+1,cY-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(cX+1,cY-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e);
				drCr(cX,cY,x,y,X,Y)}}
		e=mkI(x,y,X,Y,id,stC,st,undefined,dash); E.push(e);
		return E}

	function drFu(cx,cy,lx,ly,lz,o){ var E=[];var e=null;var cSD,cVD,cMD,col,co,stC,dash,crR;
		if(!AL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}}
		else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}
			if(AL.tYl.ni ===o.ni){ var fil ="url(#f3)"; var fr=w/10+8; var fCo="#ffffff"
				if(o.val){ 	col="#ffffff"; stC="#ffacac"; tCo ="#000000";}
				else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
			if(AL.subj.opts.includes(o)){ var fil ="url(#f3)"; var fr=w/12+8;
				if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
				else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}
		var st=w/65;var cl1="_cUF";var id1=cl1+"-";var cl2="_fuT";var id2=cl2+"-";var cl3="_fuN";var id3=cl3+"-"; 
		if(o.str){ cSD="S"; st=w/25}else{ cSD="s"}
		if(o.val){ cVD="V"} 		else{ cVD="v"}
		if(o.mnt){ cMD="M"} 		else{ cMD="m"; dash=w/105+","+w/105}
		if(lx===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(ly===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(lz===2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		//function drC(x,y,r,c,id,cl,sW,sC,d,fO,sO)
		if(AL.subj){
			if(AL.subj.tYl.ni ===o.ni){
				e=drC(cx,cy,fr,fCo); e.setAttribute("filter",fil); 					E.push(e);
				crR=Math.round((w/10));
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.236"); F.push(e); 
				crR=Math.round((w/10)/1.618/1.618);
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.381"); F.push(e);}
			else if(AL.subj.opts.includes(o)){
				e=drC(cx,cy,fr,fCo); e.setAttribute("filter",fil); 					E.push(e);
				crR=Math.round((w/10)/1.618/1.618);
				e=drC(cx,cy,(w/10)+crR,undefined,undefined,undefined,1,"#ffffff",undefined,"0","0.236"); F.push(e)}}	 
		e=drC(cx,cy,w/10,col,cl1,id1,st,stC,dash); 									E.push(e);
		e=mkT(cx+1,cy-(w/11),id2,tCo,cl2,w/11,o.ni2,"PF","middle"); 		E.push(e);
		e=mkT(cx+1,cy-(w/60),id3,tCo,cl3,w/17,cVD+cSD+cMD,"PF","middle");E.push(e); return E}

	var e; var E=[]; var F=[]; var v; var w=ui.tY.cE; var h=ui.tY.cE; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane; var x=cX+h/d+ui.tY.cuHrz; var y=cY+h/d+ui.tY.cMarg;

	e =drAr(x+(w/4)+w/16,	y-(w/8),			x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,1,2);E=E.concat(e);
	e =drAr(x+w+(w/8),		y-(w/8),			x+w+(w/8),		y-(w/4)-(w/16)+h,	2,1,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/16,	y-(w/8),			x+w+(w/8),		y-(w/8),			1,2,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	x+w+(w/8),		y-(w/4)-(w/16)+h,	1,0,2);E=E.concat(e);

	e =drAr(x-(w/8),		y+(w/4)+(w/16), 	x+(w/4)+w/16,	y-(w/8), 			0,2,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	x+w+(w/8),		y-(w/8), 			2,2,1);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,0,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/16)+w,y+(w/8)+h,			x+w+(w/8),		y-(w/4)-(w/16)+h,	2,0,1);E=E.concat(e);

	e =drAr(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	x-(w/4)-(w/16)+w,y+w/8+h,			2,1,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/16),		x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	1,2,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x-(w/4)-(w/16)+w,y+(w/8)+h,			1,0,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/16),		x-(w/8),		y+w/8+h,			0,1,0);E=E.concat(e);

	e =drFu(x-(w/8),		y+(w/4)+(w/16), 	0,2,0,AL.tY.reSpace[0][2][0]); E=E.concat(e);
	e =drFu(x-(w/8),		y+(w/8)+h,			0,0,0,AL.tY.reSpace[0][0][0]); E=E.concat(e);
	e =drFu(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	2,2,0,AL.tY.reSpace[2][2][0]); E=E.concat(e);
	e =drFu(x-(w/4)-(w/16)+w,y+(w/8)+h,			2,0,0,AL.tY.reSpace[2][0][0]); E=E.concat(e);
	e =drFu(x+(w/4)+w/16,	y-(w/8),			0,2,2,AL.tY.reSpace[0][2][2]); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/8),			2,2,2,AL.tY.reSpace[2][2][2]); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/4)-(w/16)+h,	2,0,2,AL.tY.reSpace[2][0][2]); E=E.concat(e);
	e =drFu(x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,0,2,AL.tY.reSpace[0][0][2]); E=E.concat(e); E=E.concat(F);
	E.forEach( function(E){svgFe.appendChild(E)})}

function applyType( t,s){ var tY =s.tYs.find(o => o.ni===t); if(tY){ s.tY=tY}else{ tY=mkType( t,AT); s.tYs.push(tY); s.tY=tY}}
function typeKeyMouseDown( e){ var tY= parseInt(e.split("-").pop()); tY=AL.Sociotypes.seed[tY];	
	if( AL.subj){ applyType( tY,AL.subj); AL.tY =AL.subj.tY; mkSignal( AL.subj,"f5",0,0); mkOptions( AL.subj); draw()}
	else{ 	if(AL.tY.ni===tY){ 	AL.tY =AT.tY; 						draw()}
		 	else{ 				AL.tY =AT.tYs.find(o => o.ni===tY); draw()}}}
function drTypeKeys(){ var E=[]; var e=null; var area, areaB, areaT;
	for(var n=0; n<16; n++){
		if((AL.tY===null)||(AT.tYs[n].ni !== AL.tY.ni)){ area=ui.tY.area; areaB=ui.tY.areaB; areaT=ui.tY.areaT; }
		else 							{ area=ui.tY.selArea; areaB=ui.tY.selAreaB; areaT=ui.tY.selAreaT; }
		e =mkL(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap)),ui.tY.keY,
			ui.tY.keyWid-ui.mD.linew/2,ui.tY.keyWid-ui.mD.linew/2,"tY_Keys-"+n,area,"tY_Keys",areaB,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : typeKeyMouseDown( e.id);break}}); E.push(e);
		e=mkT(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap))+(ui.tY.keyWid/2)-1,ui.tY.keY+(ui.tY.keyWid/7)-1,
		undefined,areaT,undefined,ui.tY.keyWid/1.6,AL.Sociotypes.seed[n],"SF","middle"); E.push(e)}
	E.forEach( function(E){svgFe.appendChild(E)}); }
function drTypeStage(){ var E=[]; var e=null;
	var x=Math.round(ui.tY.disHrz+(ui.tY.disWid/2));
	e=mkT(x, ui.tY.stgY, "-stg", "#ffffff", "stg", ui.tY.stgF, AL.tY.zo, "SR","middle");
	e.setAttribute("filter","url(#f1)"); e.setAttribute("dominant-baseline","middle"); E.push(e);
	e=mkT(x, ui.tY.stgY, "-stg", "#ffffff", "stg", ui.tY.stgF, AL.tY.zo, "SR","middle");
	e.setAttribute('opacity',0.62); e.setAttribute("dominant-baseline","middle"); E.push(e);
	if(AL.subj){ 
		e=mkT(ui.tY.keX, ui.tY.stgy,
		"-stg", "#ffffff", "stg", ui.tY.stgf,AL.subj.nI+". "+AL.subj.nM.full, "PF","left");
		//e.setAttribute("alignment-baseline","hanging");
		E.push(e)}
	e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stgy,
		undefined,"#fff",undefined,ui.tY.stgf,AL.tY.nI,"PF","end");E.push(e)
	E.forEach( function(E){svgFe.appendChild(E)})}
function drTypeTable(){ var e=null; var E=[]; var t,b;
	for(var i=0; i<5; i++){
		for(var j=0; j<4; j++){
			if(AL.subj){
				if( AL.tYl && AL.tYl.ni2 ===AL.tY.fAs[ i*4+j].ni2){ t="#fff"; 		b=ui.tY.areaB}
				else if(AL.subj.opts.includes(AL.tY.fAs[ i*4+j])){ 	t=ui.tY.base; 	b=ui.tY.areaB}
				else{ 												t=ui.tY.areaT;	b=ui.tY.area}}
			else{ 												t=ui.tY.areaT;	b=ui.tY.area}
 			e =mkL( ui.tY.tbX+i*ui.tY.coW, ui.tY.tbY+j*ui.tY.roH,
 				ui.tY.cow, ui.tY.roh, undefined, b); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.mD.LineW+1, ui.tY.tbY+j*ui.tY.roH-1/5*ui.tY.roh,//-ui.tY.aMarg,
 				undefined,t,undefined,ui.tY.roh,AL.tY.fAs[i*4+j].ni2,"PF"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tCO, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#fff",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC2, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#fff",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC3, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#ccc",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC4, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY1,
 				undefined,"#ccc",undefined,ui.tY.tCF,".000","CH"); E.push(e);

 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tCO, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#000",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC2, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#000",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC3, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#333",undefined,ui.tY.tCF,".000","CH"); E.push(e);
 			e =mkT( ui.tY.tbX+i*ui.tY.coW+ui.tY.tC4, ui.tY.tbY+j*ui.tY.roH+ui.tY.tY2,
 				undefined,"#333",undefined,ui.tY.tCF,".000","CH"); E.push(e);

		}
	}
	//e= mkL(ui.tY.tbX, ui.tY.tbY, ui.tY.tbW, ui.tY.tbH, undefined, "#000"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}

// wovels/consonants for male/female, upper/lower for child adult?
// include big mood plane with descriptions and nothing else

function mosaicTextColor(c){ if(c.v > 68){ return "#000000"} else{ return "#ffffff"}}
function drMoodPlane(){ var e; var E=[];
	if(AL.mD){ 
		var pL =null;
		AL.mosaicForm ? pL =AL.mD.xY : pL =AL.mD.bG;
		var w =ui.mD.plDiW/AL.vQr; var h=ui.mD.plDiH/AL.vQr;
		var X =ui.mD.plDiX; var Y =ui.mD.plDiY;
		e =mkL(ui.mD.plFrX, ui.mD.plFrY, ui.mD.plFrW, ui.mD.plFrH,"mD_plane-","#000000","mD_plane"); E.push(e);
		var mD =mkNullMatrix( AL.vQr,AL.vQr);
		for(var y =0; y <AL.vQr; y++){
			for(var x =0; x <AL.vQr; x++){
				mD[y][x] = hsvToRgb(pL[y][x].h, pL[y][x].s, pL[y][x].v);
				mD[y][x] = rgbToHex(mD[y][x].r, mD[y][x].g, mD[y][x].b);
				e=mkL( w*x+X, h*y+Y, w, h, "test", mD[y][x]);	E.push(e);
				e=mkT(w*x+X+3, h*y+Y-h/8, false, mosaicTextColor( pL[y][x]),false,h/2,"V: "+pL[y][x].V,
					"PF", false, 0.618); E.push(e);
				//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op)
				e=mkT(w*x+X+3, h*y+Y-(h/8)+(h/2), "test", mosaicTextColor(pL[y][x]), "test",h/2,"K: "+pL[y][x].K,
					"PF", false, 0.618); E.push(e);
				/*e=mkT(w*x+X+1, h*y+Y-5+(h/3), "test", mosaicTextColor(q[y][x]), "test",h*(2/3),AL.pE.mo.qU[y][x].Q ,"StrikeFighter");*/ E.push(e);}}}
		E.forEach( function(E){svgFe.appendChild(E)})}
function moodKey( e,prim){
	if(AL.subj){
		var pM= parseInt(e.split("-").pop()); pM=AL.PrimalMoods.seed[pM];
		var b = AL.subj.pMs.find(o => o.ni===pM); b ? pM =b : pM =mkPm( pM,AT,AL.subj.pMs);
		if(prim){ 	//var gnd= mkBeing(AL.pE.pGn.ni);
				//AL.subj.pMd =combineMoodAndBeing(pM, bE);
				//function getMood( sex,gnd,pM,from)
				//åöä
				//if( o.mDs)
				AL.subj.pMd =copyMood( AL.subj.sex, AL.subj.pGn, AL.subj.pPm, AL.ab.mDs, AT);
				AL.mD = AL.subj.pMd;  	AL.pMd =AL.subj.pMd; 		
				AL.pGn= AL.subj.pGn;		AL.gnd =AL.subj.pGn; 		
				AL.pPm= AL.subj.pMd.pM;	AL.pM  =AL.subj.pMd.pM}
		else { 	//var bE= mkBeing(AL.subj.sGn.ni);
				//AL.subj.sMd=combineMoodAndBeing( pM, bE);
				AL.subj.sMd =copyMood( AL.subj.sex, AL.subj.sGn, AL.subj.sPm, AL.ab.mDs, AT);
				AL.mD = AL.subj.sMd; 		AL.sMd= AL.subj.sMd;	
				AL.sGn= AL.subj.sGn; 		AL.gnd= AL.subj.sGn;
				AL.sPm= AL.subj.sMd.pM; 	AL.pM = AL.subj.sMd.pM}
		draw();}}
function sexKey( e){
	var sex =parseInt(e.split("-").pop()); sex =AL.Sexes.seed[sex];
	if(AL.subj){
		sex =getObjByNi( sex,AL.subj.sXs);
		if( sex.fem !== AL.subj.sex.fem){ var bu=null;
			bu 			=AL.subj.sMd;
			AL.subj.sMd =AL.subj.pMd;
			AL.subj.pMd =bu;
			AL.mD  		=AL.subj.pMd;
			AL.pMd 		=AL.subj.pMd;
			AL.sMd 		=AL.subj.sMd;

			bu 			=AL.subj.sGn;
			AL.sex 		=AL.subj.sex;
			AL.gnd 		=AL.subj.pGn;
			AL.pGn 		=AL.subj.pGn;
			AL.sGn 		=AL.subj.sGn;

			bu 		 	=AL.subj.sMd.pM;
			AL.sPm 		=AL.subj.sMd.pM;
			AL.pM 		=AL.subj.pMd.pM;
			AL.pPm 		=AL.subj.pMd.pM;
			}
		AL.subj.sex =sex;
		draw()}
	else{
		sex =getObjByNi( sex,AT.sXs);
		if(AL.sex===sex){AL.sex =null}
		else{ 			AL.sex =sex }
		draw()}}
function genderKey( e){
	var gnd =parseInt(e.split("-").pop()); gnd =AL.Genders.seed[gnd];
	if(AL.subj){
		gnd =getObjByNi( gnd,AL.subj.gNs);
		if(gnd.fem === AL.subj.sex.fem){
			//var pM= mkPrimalMood(AL.pE.pMd.pM.ni);
			//AL.subj.pMd =combineMoodAndBeing(pM, bE);
			AL.mD =AL.subj.pMd; 		AL.pMd =AL.subj.pMd;
			AL.gnd=AL.subj.pGn; 		AL.pGn =AL.subj.pGn;
			AL.pM =AL.subj.pMd.pM;	AL.pPm =AL.subj.pMd.pM}
		else{
			//var pM= mkPrimalMood(AL.pE.sMd.pM.ni);
			//AL.subj.sMd=combineMoodAndBeing(pM, bE);
			AL.mD = AL.subj.sMd; 		AL.sMd = AL.subj.sMd;
			AL.gnd= AL.subj.sGn; 		AL.sGn = AL.subj.sGn;
			AL.pM = AL.subj.sPm;		AL.sPm = AL.subj.sPm}	
		draw(); }
	else if( AL.bE===null){ AL.bE=bE;} else if(AL.bE!==bE){AL.bE=bE} else { AL.bE=null}}
function drMoodKeys(){ var e; var E=[]; var keyC, keyS, symC; var p;
	for(let n=0; n<AT.sXsL; n++){
		if(( AL.sex ===null)||( AT.sXs[n].ni !== AL.sex.ni)){
			keyC =ui.mD.key2; keyS =ui.mD.stroke2; keyF =ui.mD.selTxt}
		//else if(AT.sXs[n].ni === AL.sBe.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(AT.sXs[n].ni ===AL.sex.ni) 	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.keRoX+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sexRY, ui.mD.keFaW, ui.mD.keFaH,
			"mD_sexKey-"+n,keyC,"mD_sexKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sexKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sexRY-ui.mD.keFnY,//+(ui.mD.keFaH/2),
			"mD_sexKeyTxt",keyF,"mD_sexKeyTxt-",ui.mD.keFnS,
			AT.sXs[n].nI+"( )","TR","middle",undefined,"middle"); E.push(e); }

	for(let n=0; n<AT.gNsL; n++){
		if((AL.gnd===null)||((AT.gNs[n].ni !== AL.pGn.ni)&&(AT.gNs[n].ni !== AL.sGn.ni)))
												{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; keyF=ui.mD.selTxt; }
		else if(AT.gNs[n].ni ===AL.sGn.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(AT.gNs[n].ni ===AL.pGn.ni)	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.keRoX+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.gndRY, ui.mD.keFaW, ui.mD.keFaH,
			"mD_gndKey-"+n,keyC,"mD_gndKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : genderKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+(n*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.gndRY-ui.mD.keFnY,
			"mD_gndKeyTxt",keyF,"mD_gndKeyTxt-",ui.mD.keFnS,
			AT.gNs[n].nI,"TR","middle",undefined,"middle");E.push(e);}
// ååå 
	for(let n=0; n <AT.pMsL; n++){
		//var m=combineMoodAndBeing(AT.pMs[n], AL.pE.pGn );
		var m =getMood( AL.sex, AL.gnd, AL.obj, AL.pM, AT.mDs);
		if((AL.pM===null)||(AT.pMs[n].ni !== AL.pPm.ni)){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt }
		else if(AL.pM.ni ===AT.pMs[n].ni && AL.gnd.ni === AL.pGn.ni)
														{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(AL.pE.sMo.pM.ni === AT.pMs[n].ni)*/		{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	symC=ui.mD.selTxt}
		if(m.sSym){ symC = "#ffff00"; } else if(m.cSym){ symC = "#ff00ff"}
		//if(AL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.keRoX+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.pPmRY, ui.mD.keFaW,ui.mD.keFaH,
			"mD_pMdKey-"+n,keyC,"mD_pMdKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,true);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.pPmRY-ui.mD.keFnY,
			"mD_pMdKeyTxt",symC,"mD_pMdKeyTxt-",ui.mD.keFnS,
			AT.pMs[n].niH+AL.pGn.nI+AT.pMs[n].niT,"TR","middle",undefined,"middle"); E.push(e);}

	for(let n=0; n<AT.pMsL; n++){
		//var m=combineMoodAndBeing(AT.pMs[n], AL.pE.sGn );
		if((AL.pM===null)||(AT.pMs[n].ni !== AL.sPm.ni))
													{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
		else if(AL.pM.ni ===AT.pMs[n].ni && AL.gnd.ni === AL.sGn.ni)	
													{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(AL.pE.sMo.pM.ni === AT.pMs[n].ni)*/	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt;  symC=ui.mD.selTxt;}
		if(m.symm){ symC = "#ffff00"; }
		//if(AL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.keRoX+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sPmRY, ui.mD.keFaW,ui.mD.keFaH,
			"mD_sMdKey-"+n,keyC,"mD_sMdKeys",keyS,ui.mD.linew);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,false);break}});E.push(e);
		e=mkT(ui.mD.keRoX+(ui.mD.keFaW/2)+((n+1)*(ui.mD.keFaW+ui.mD.keGaH)), ui.mD.sPmRY-ui.mD.keFnY,
			"mD_mKeyTxt",symC,"mD_sMdKeyTxt-",ui.mD.keFnS,
			AT.pMs[n].niH+AL.sGn.nI+AT.pMs[n].niT,"TR","middle",undefined,"middle"); E.push(e);}

	if(!AL.mD.obj){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
	else { keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2;}
	e=mkL(ui.mD.keRoX, ui.mD.pPmRY/*-Math.floor(ui.tY.aMarg)*/, ui.mD.keFaW-Math.floor(ui.tY.bMarg),ui.mD.keFaH,
		"mD_objKey",keyC,"mD_objKeys",keyS,ui.mD.linew); E.push(e);
	e=mkT(ui.mD.keRoX+((ui.mD.keFaW-Math.floor(ui.tY.bMarg))/2), ui.mD.pPmRY-ui.mD.keFnY/*-Math.floor(ui.tY.aMarg)*/,
		"mD_objKeyTxt",symC,"mD_objKeyTxt-",ui.mD.keFnS,
		"¬"+AL.gnd.nI+"'","TR","middle",undefined,"middle"); E.push(e);
	if( AL.mD.obj){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
	else { keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2;}
	e=mkL(ui.mD.keRoX, ui.mD.sPmRY/*-Math.floor(ui.tY.aMarg)*/, ui.mD.keFaW-Math.floor(ui.tY.bMarg),ui.mD.keFaH,
		"mD_objKey",keyC,"mD_objKeys",keyS,ui.mD.linew); E.push(e);
	e=mkT(ui.mD.keRoX+((ui.mD.keFaW-Math.floor(ui.tY.bMarg))/2), ui.mD.sPmRY-ui.mD.keFnY/*-Math.floor(ui.tY.aMarg)*/,
		"mD_objKeyTxt",symC,"mD_objKeyTxt-",ui.mD.keFnS,
		AL.gnd.nI+"'","TR","middle",undefined,"middle"); E.push(e);

	E.forEach( function(E){svgFe.appendChild(E)})}

function drMoodDisp(){ 

// CV CK TV TK
//IE are classical binary
//FT are classical scalar
//SN are romantic non-binary non-scalar
//1. CR 2. IE 3. FT 4. SN

/*
ui.mD.tbFrW
ui.mD.tbFrX
ui.mD.tbFrY
ui.mD.tbFrH
*///function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op) // ööö
//function mkI(x,y,X,Y,id,co,st,op,d)
//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op,dB){ v

/*if we have a notation in which we always begin with a positive variable if possible and never use brackets
we will be able to express value and karma quantification arithmetic as an array of strings like ["X","-Y"]
and if we encounter something like ["Y","-r","+r"] it will be easy to algorithmically simplify that to ["Y"]*/

// STEREOTYPICAL MOOD 	GENDER ALIGNED 			AGE ALIGNED
// COMING TO AGE		GENDER ALIGNED 			SEX KID GENDER ADULT 											BAD V -> GOOD V w/ OFFSET
// INFANTILIZATION 		GENDER ALIGNED 			SEX ADULT GENDER KID 	GOOD V -> BAD V w/ OFFSET
// FEMALE-TO-MALE QUEER SEX FEMALE GENDER MALE 	AGE ALIGNED 			INTRO GOOD V -> INTRO BAD V w/ OFFSET
// MALE-TO-FEMALE QUEER SEX MALE GENDER FEMALE 	AGE ALIGNED 			EXTRO GOOD V -> EXTRO BAD V w/ OFFSET
// INVERSE MORALITY 	GENDER MISMATCH  		AGE MISMATCH 			GOOD V -> BAD V w/ OFFSET 				BAD V -> GOOD V w/ OFFSET

// 3 screens:
// Value/Karma
// LifeP/ProcessP
// Sex/Gender
	
	var e; var E=[];
	//frame
	e=mkL(ui.mD.tbFrX,ui.mD.tbFrY,ui.mD.tbFrW,ui.mD.tbFrH,"tY",ui.mD.key,"tY"); E.push(e);
	e=mkL(ui.mD.tbDiX,ui.mD.tbDiY,ui.mD.tbDiW,ui.mD.tbDiH,"tY",ui.mD.key,"tY",ui.mD.base,ui.mD.LineW); E.push(e); 
	//grid
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*2, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*2,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*3, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*3,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX,ui.mD.tbDiY+ui.mD.tbRoH*4, ui.mD.tbDiX+ui.mD.tbDiW,ui.mD.tbDiY+ui.mD.tbRoH*4,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	e=mkI(ui.mD.tbDiX+ui.mD.tbCeW,ui.mD.tbDiY, ui.mD.tbDiX+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbDiH,
		undefined,ui.mD.base,ui.mD.LineW); E.push(e);
	//left label containers
	e=mkL(ui.mD.tbDiX, 				ui.mD.tbDiY, ui.mD.tbCeT+ui.mD.LineW,ui.mD.tbDiH, undefined,ui.mD.base); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeW, 	ui.mD.tbDiY, ui.mD.tbCeT+ui.mD.LineW,ui.mD.tbDiH, undefined,ui.mD.base); E.push(e);
	//top label containers
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.linew/2,  			ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH+ui.mD.linew/2, 	ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*2+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*3+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.linew/2,ui.mD.tbDiY+ui.mD.tbRoH*4+ui.mD.linew/2,ui.mD.tbDiW-ui.mD.linew, ui.mD.tbCeT-ui.mD.linew,
		undefined, ui.mD.key, undefined, ui.mD.base, ui.mD.lineW); E.push(e);
	//left labels
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"X:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"Y:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"I:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"U:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW, 			ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"I:","PF","middle",undefined,"middle");E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeT/2+ui.mD.LineW+ui.mD.tbCeW,ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4,
		undefined,ui.mD.hilTxt,undefined,ui.mD.tbCeT,"U:","PF","middle",undefined,"middle");E.push(e);
	//cell frames
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT, ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.selKey,undefined,ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.bMarg); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW, 	ui.mD.tbDiY+ui.mD.tbCeT, ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.selKey,undefined,ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.bMarg); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*2, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*3, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT, 				ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	e=mkL(ui.mD.tbDiX+ui.mD.tbCeT+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT+ui.mD.tbRoH*4, 	ui.mD.tbCeW-ui.mD.tbCeT, ui.mD.tbCeB,
		undefined,ui.mD.dis,undefined,ui.mD.disStr,1); E.push(e);
	//variables
	/*var r1="";
	var lAriV="N/A";var rAriV="N/A";var lAriK="N/A";var rAriK="N/A";var lCmp="N/A"; var rCmp="N/A";var lMF="N/A";var rMF="N/A";
	var mFDC;
	var lHead="GOOD";
	var rHead="BAD";
	var moF="Modal Form:"; 			if(AL.mosaicForm){ 	moF 	="Mosaic Form:"} 		 
	var cmp="Mood Complexity"; 		if(AL.mD.stereo){ 	cmp 	="Stereotypical Mood"; 	cmpL="NORMAL"; cmpR="NORMAL"}
								else if(AL.mD.invMor){ 	cmp 	="Inverse Morality"; 	cmpL="V - r"}
								else if(AL.mD.pureBad){ cmp 	="Pure Bad"}*/
	var mFDC, lHead, rHead, moF, cmplx, lMF, rMF, lAriV, rAriV, lAriK, rAriK;
	var moF="Modal Form:"; 			if(AL.mosaicForm){ 	moF 	="Mosaic Form:"}
	if( AL.mD.sSym){ mFDC="#ffff00"} else if( AL.mD.cSym){ MFDC="#ff00ff"} else{ mFDC="#00ff00"}
	if(!AL.mosaicForm){ lHead="Bad"; rHead="Good"; lMF=AL.mD.bMF; rMF=AL.mD.gMF;
		lAriV=AL.mD.bAriV; rAriV=AL.mD.gAriV; lAriK=AL.mD.bAriK; rAriK=AL.mD.gAriK;}
	else{ if( !AL.gnd.fem){ lHead="Bad"; rHead="Good"; lMF=AL.mD.xMF; rMF=AL.mD.yMF;
		lAriV=AL.mD.xAriV; rAriV=AL.mD.yAriV; lAriK=AL.mD.xAriK, rAriK=AL.mD.yAriK;}
	else{ lHead="Good"; rHead="Bad"; lMF=AL.mD.xMF; rMF=AL.mD.yMF;
		lAriV=AL.mD.xAriV; rAriV=AL.mD.yAriV; lAriK=AL.mD.xAriK, rAriK=AL.mD.yAriK;}}
	//row labels
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW, 				undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,moF,"PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Value:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*2, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Karma:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*3, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Life Position:","PF","middle",undefined); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbCeW, ui.mD.tbDiY-ui.mD.LineW+ui.mD.tbRoH*4, 	undefined, ui.mD.hilTxt,undefined,
		ui.mD.tbCeT*0.9,"Process Position:","PF","middle",undefined); E.push(e);
	//cell content
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW,
		undefined, mFDC, undefined, 	ui.mD.tbCeB*0.8, lMF, "TR", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW, 	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW,
		undefined, mFDC, undefined, 	ui.mD.tbCeB*0.8, rMF, "TR", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, lAriV, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, rAriV, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX, 				ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH*2,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, lAriK, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.tbDiX+ui.mD.tbTxX+ui.mD.tbCeW,	ui.mD.tbDiY+ui.mD.tbCeT-ui.mD.LineW+ui.mD.tbRoH*2,
		undefined,"#ffff00", undefined,	0.8*ui.mD.tbCeB, rAriK, "PF", "middle"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); }

//can subject exist without tYl? for example when sleeping? or does this default to iNtuition?

function drMoodStage(){ 
if(AL.subj){ var E=[]; var e=null; var x=Math.round(ui.tY.disHrz+(ui.tY.disWid/2)); var mFS;
	if(AL.mD.symm){ mFS="#ffff00"} else{ mFS="#88ff88"}
	var mDisp = mkSubjMoodCode(AL.subj);
	if(AL.subj.pMd.ni === AL.mD.ni){
		e=mkT(x, ui.tY.stgY+ui.tY.cE/6, // not right
			"-stg", mFS, "stg", (ui.tY.cE)/4, AL.mD.nI, "SF","middle",undefined,"middle");
		e.setAttribute("filter","url(#f1)"); E.push(e);}
	e=mkT(x, ui.tY.stgY+ui.tY.cE/6,
		"-stg", mFS, "stg", (ui.tY.cE)/4, AL.mD.nI, "SF","middle",undefined,"middle");
	e.setAttribute('opacity',0.62);E.push(e);
		e=mkT(ui.tY.keX, ui.tY.stgy,
		"-stg", mFS, "stg", ui.tY.cE/6,AL.subj.nI+". "+AL.subj.nM.full, "PF","start");E.push(e);
	e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stgy,
		undefined,mFS,undefined,ui.tY.cE/6, mDisp, "TR","end"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); }}
/*
function drTypeTable(){ var e=null; var E=[]; var t,b;
	for(var i=0; i<5; i++){
		for(var j=0; j<4; j++){
			if( AL.tYl && AL.tYl.ni2 ===AL.tY.fAs[ i*4+j].ni2){ t="#fff"; 		b=ui.tY.areaB}
			else if(AL.subj.opts.includes(AL.tY.fAs[ i*4+j])){ 	t=ui.tY.base; 	b=ui.tY.areaB}
			else{ 												t=ui.tY.areaT;	b=ui.tY.area;}
 			e =mkL( ui.tY.tbX+i*(ui.tY.coW+ui.mD.linew), ui.tY.tbY+j*(ui.tY.roH+ui.mD.linew),
 				ui.tY.coW, ui.tY.roH, undefined, b); E.push(e);
 			e =mkT( ui.tY.tbX+i*(ui.tY.coW+ui.mD.linew)+ui.mD.LineW+1, ui.tY.tbY+j*(ui.tY.roH+ui.mD.linew)-1/5*ui.tY.roH,//-ui.tY.aMarg,
 				undefined,t,undefined,ui.tY.roH,AL.tY.fAs[i*4+j].ni2,"PF"); E.push(e);
		}
	}
	//e= mkL(ui.tY.tbX, ui.tY.tbY, ui.tY.tbW, ui.tY.tbH, undefined, "#000"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}
*/
function drMoodTable(){ var e=null; var E=[];
	/*		if((AL.pM===null)||(AT.pMs[n].ni !== AL.sPm.ni))
													{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
		else if(AL.pM.ni ===AT.pMs[n].ni && AL.gnd.ni === AL.sGn.ni)	
													{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else 	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt;  symC=ui.mD.selTxt;}
	*/
	for(var i=0; i<13; i++){
		for(var j=0; j<5; j++){
			e =mkL( ui.tY.tbX+i*(ui.mD.coW+ui.mD.linew), ui.mD.tbY+j*(ui.mD.roH+ui.mD.linew),
				ui.mD.coW, ui.mD.roH, undefined, ui.mD.key2); E.push(e);
		}
	}
	//e= mkL(ui.tY.tbX, ui.mD.tbY, ui.tY.tbW, ui.mD.tbH, undefined, ui.mD.key2); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)})}
function drawMood(){var b =null;
	drTopBar();
	drList();
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.mD.base,"tY"); svgFe.appendChild( b);
	drMoodPlane();
	drMoodKeys();
	drMoodDisp();
	switch( AL.moodFeature){
		case "Stage" 	: drMoodStage(); 	break;
		case "Worth" 	: drMoodTable(); 	break;	}
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
	//document.body.appendChild( divSc);
}

function mosaicKeyMouseOver(mX,mY) 	{ previewMove( mX, mY)}
function mosaicKeyMouseDown(mX,mY) 	{ AL.moved =attemptMove( mX, mY)}
function mosaicKeyMouseUp(mX,mY) 	{ if(AL.moved){ processSubTurn( AL.sim, mX, mY); AL.moved=false}}

function drMosaicDisp(){
	var pC, tC;	var r =2*AL.vQr; var pRow=2; var pCol=1;
	if(AL.sim.subjs.length > 2){ pRow=4; pCol=2}
	if(AL.sim.subjs.length > 8){ pRow=6; pCol=3}
	var w= Math.floor(ui.mP.disWid/r); // tile width
	var h= Math.floor((ui.winHei-ui.bP.tipHei-ui.tB.disHei)/r); // tile height
	var X= Math.round((ui.mP.disWid-(r*w))/2)+ui.mP.liW+ui.sQ.disWid; // screen offset x
	var Y= Math.round(((ui.winHei-ui.bP.tipHei+ui.tB.disHei)-(r*h))/2); // screen offset y
	var pW=Math.floor((w-pRow)/pRow); // person width
	var pH=Math.floor((h-pCol)/pCol); // person height
	var fOff=2; if(pH < 12){ fOff=0}
	var c; var e; var E=[]; var E2=[];
	for(var y=0; y <r; y++){ for(var x=0; x <r; x++){
		c =AL.keySubj.mP[y][x];
		c = hsvToRgb(c.h, c.s, c.v);
		c = rgbToHex(c.r, c.g, c.b);
		e=mkL(w*x+X, h*y+Y, w, h, "mP_"+x+"-"+y, c, "mP", "#666", 1); E.push(e);
		if(AL.keySubj.sMp[y][x]){
			var subjs =chunkArray(AL.keySubj.sMp[y][x],pRow);
			for(var i=0; i<subjs.length;i++){
				for(var j=0; j<subjs[i].length;j++){
					pC=subjs[i][j].mP[y][x];
					tC=mosaicTextColor(pC);
					pC=hsvToRgb( pC.h, pC.s, pC.v);
					pC=rgbToHex( pC.r, pC.g, pC.b);
					e=mkL(w*x+X+(j*(pW))+j+1, h*y+Y+(i*(pH))+1, pW, pH,
						undefined,pC, "mP_P",tC,undefined,false,3,3);
					E2.push(e);
					e=mkT(w*x+X+(j*(pW))+(pW/2)+j+1, h*y+Y+(i*(pH))-fOff-1,
						undefined,tC,"mP_PT",pH,subjs[i][j].nI,"PF","middle");
					E2.push(e);	}}}}}
	E=E.concat(E2);
	E.forEach( function(E){svgFe.appendChild(E)});
	bindMosaic( '.mP', function(ev,e) {
		var mX=e.id.split("_").pop(); var mY=parseInt(mX.split("-").pop()); mX=parseInt(mX.split("-")[0]);
		switch(ev){ case "mouseover" 	: mosaicKeyMouseOver( mX,mY); 				break;
					case "mousedown" 	: mosaicKeyMouseDown( mX,mY); 				break;
					case "mouseup" 		: mosaicKeyMouseUp( mX,mY); 				break;
					case "mouseleave" 	: mosaicKeyMouseUp( mX,mY); 				break;}})}
function drawMosaic(){
	drTopBar();
	drList();
	drSequencer();
	drMosaicDisp();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
}

//rom cla tool sel
function drawScalar(){ var e=null; var E=[];
	drTopBar();
	drList();
	drSequencer();
	e =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.sC.bG,"tY"); E.push(e);
	e =mkL(ui.sC.diX,ui.sC.diY,ui.sC.diW,ui.sC.hDH,"tY",ui.sC.hL,"tY"); E.push(e);
	for(var i=0; i<AT.fQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.cQW, ui.sC.diY, ui.sC.cQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.cQW+ui.tY.bMarg, ui.sC.diY+ui.sC.quH,
			ui.sC.cQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.fX); E.push(e);
	}
	for(var i=0; i<AT.mQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.cQW, ui.sC.mQY, ui.sC.cQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.cQW+ui.tY.bMarg, ui.sC.mQY+ui.sC.quH,
			ui.sC.cQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.fX); E.push(e);
	}
	e =mkL(ui.sC.diX,ui.sC.hDB,ui.sC.diW,ui.sC.hDH,"tY",ui.sC.fX,"tY"); E.push(e);
	for(var i=0; i<AT.aQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.rQW, ui.sC.hDB, ui.sC.rQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.rQW+ui.tY.bMarg, ui.sC.hDB+ui.sC.quH,
			ui.sC.rQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.hL); E.push(e);
	}
	for(var i=0; i<AT.cQsL; i++){
		e =mkL(ui.sC.diX+i*ui.sC.rQW, ui.sC.cQY, ui.sC.rQW, ui.sC.quH, undefined, "#fff"); E.push(e);
		e =mkL(ui.sC.diX+i*ui.sC.rQW+ui.tY.bMarg, ui.sC.cQY+ui.sC.quH,
			ui.sC.rQW-ui.tY.bMarg, ui.sC.hDH/2-ui.sC.quH-ui.tY.aMarg, undefined, ui.sC.hL); E.push(e);
	}
	E.forEach( function(e){ svgFe.appendChild(e)})
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}

function drawRels(){ var b=null;
	drTopBar();
	drList();
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}

function drawMarker(){ var b=null;
	drTopBar();
	drList();
	drSequencer();
	drBottomPanel();
	document.body.appendChild( divFe);
	document.body.appendChild( divSk);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);	
}


function resizeWindow(){ predraw();draw()}
window.addEventListener("resize", resizeWindow, true);




window.oncontextmenu = function ()
{
    console.log("JOU");
    return false;     // cancel default menu
}



function coinToss() { return ( Math.floor( Math.random() * 2) === 0)}
function isEven(n){ n =Number(n); return n === 0 || !!(n && !(n%2))}
function isOdd(n) { return isEven(Number(n) + 1)}
function union (x, y) { var obj = {}; var res = [];
	for (var i = x.length-1; i >= 0; -- i) obj[x[i]] = x[i];
	for (var i = y.length-1; i >= 0; -- i) obj[y[i]] = y[i];
	for (var k in obj) { if (obj.hasOwnProperty(k))/*<-optional*/res.push(obj[k])}return res}
function shuffle(a) { var j, x, i;
    for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1));
        x = a[i]; 	a[i] = a[j]; 	a[j] = x}return a}
function chunkArray(arr, chunkL){ var index=0; var arrL=arr.length; var ret=[];    
	for (index =0; index <arrL; index +=chunkL){
		chunk =arr.slice(index, index+chunkL); ret.push(chunk)}return ret}
function idOf(i) {
    return (i >= 52 ? idOf((i / 52 >> 0) - 1) : '') +  'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'[i % 52 >> 0];
}





function mkAbsSubj(ni,sim,pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj){}
function Subj( 	   ni,sim,pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj){
	mkSubj2(  this,ni,sim,pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj)}
function mkSubj2(s,ni,sim,reso,  fem,  kid,  fin,  tY ,pM,   pureBad,  invMor,  pureGood,  obj){
	s.ni=ni; s.ab={}; s.re={};
	var b=null;s.sex=null;s.gnd=null;s.nM =null;s.weird=false;s.away=false;
	s.pMd=null;s.pGn=null;s.pPm=null;s.sMd=null;s.sGn=null;s.sPm=null;
	s.mMd=null;s.mPm=null;s.fMd=null;s.fPm=null;s.mGn=null;s.fGn=null;
	s.mSb=null;s.fSb=null;s.mOb=null;s.fOb=null;
	s.tYl=null;s.opts=null;
	s.ntR=null;s.ntC=null;s.ntn=null;s.xtR=null;s.xtC=null;s.xtn=null;
	s.tYs =[]; s.nMs=[]; s.mDs =[]; s.pMs =[]; s.gNs =[]; s.sXs =[];
	s.reso =reso;			s.fem =fem; 			s.kid =kid; 			s.fin =fin; 			s.obj =obj;
	s.pureBad=pureBad;		s.invMor=invMor;		s.pureGood=pureGood; 	if( pureBad||invMor){ s.weird=true}

	if 		( !s.fem &&!s.kid){ s.height=175; s.radius=25}
	else if ( !s.fem && s.kid){ s.height=130; s.radius=15}
	else if (  s.fem &&!s.kid){ s.height=165; s.radius=25}
	else if ( !s.fem && s.kid){ s.height=130; s.radius=15}

	//mkQualities(s.ab, sim.ab);
	//mkForms( 	s.ab, s.ab, sim.ab, s);

	//s.tY =mkType( 	tY, sim.ab, sim, s); 	
	applyType( tY, s);
	s.fAs =s.tY.fAs;

	s.pMd =AT.mDs.filter( mD => mD.sex.fem ===s.fem)
						.filter( mD => mD.sex.kid ===s.kid)
							.filter( mD => mD.obj ===s.obj);
	s.pMd =rmMoods( s.pMd, pM, fin, pureBad, invMor, pureGood); 
	s.pMd =mkMood( 	s.pMd[Math.floor(Math.random()*s.pMd.length)].ni, sim, s.mDs); 			s.mD =s.pMd;

	if( !s.pMd.sex.fem) { 	if(!s.pMd.obj){ s.mSb =s.mD;
											s.mOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mOb =mkMood( s.mOb, sim, s.mDs)}
							else{  			s.mOb =s.mD;
											s.mSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mSb =mkMood( s.mSb, sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fOb =mkMood( s.fOb, sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fSb =mkMood( s.fSb, sim, s.mDs)}}

	s.nM =mkName( 	s.pMd.gnd.fem, s.pMd.gnd.kid, s.fin, s.weird, undefined, s);

	s.sex =mkSex( 	s.pMd.sex.ni, sim, s);

	s.pGn =mkGender(s.pMd.gnd.ni, sim, s); s.gnd =s.pGn;
	s.pPm =mkPm( 	s.pMd.pM.ni,  sim, s); s.pM =s.pPm;
	if( !s.pMd.sex.fem){ s.mMd=s.pMd; s.mPm=s.pPm} else { s.fMd=s.pMd; s.fPm=s.pPm}

	s.sMd =AT.mDs.filter(mD=>mD.sex.fem!==s.fem);
	s.sMd =rmMoods( s.sMd, pM, fin, pureBad, invMor, pureGood);
	s.sMd =mkMood( 	s.sMd[Math.floor(Math.random()*s.sMd.length)].ni, sim, s.mDs);

	if( !s.sMd.sex.fem) { 	if(!s.sMd.obj){ s.mSb =s.sMd;
											s.mOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mOb =mkMood( s.mOb, sim, s.mDs)}
							else{  			s.mOb =s.sMd;
											s.mSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mSb =mkMood( s.mSb, sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fOb =mkMood( s.fOb, sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fSb =mkMood( s.fSb, sim, s.mDs)}}

	s.sGn =mkGender(s.sMd.gnd.ni, sim, s);
	s.sPm=mkPm( 	s.sMd.pM.ni,  sim, s);
	if( !s.sMd.gnd.fem){ s.mMd=s.sMd; s.mPm=s.sPm} else{ s.fMd=s.sMd; s.fPm=s.sPm}

	if( !s.pGn.fem){ s.mGn=s.pGn; s.fGn=s.sGn} else{ s.mGn=s.sGn; s.fGn=s.pGn}

	s.mP =mkMp( s);
	
//mkSq( ni,iEs,parent)
	RT.subjs.push( s); RT.subjsL++;
}
function rmMoods( a, pM, fin, pureBad, invMor, pureGood){ var b =[]; var B =false;
	for( var i =0; i <a.length; i++){ B =pM.includes( a[i].pM.ni); if(B){ b.push( a[i])}}
	if( fin){ 	b =b.filter( o => !o.pureBad && !o.invMor)}return b}
function mkInputs( s){
	o.PHEN_4_1 = mkSq("PHEN_4_1", AT, )//
}
function mkSignal(s,fac){ s.tYl =s.fAs.find( f =>f.ni===fac);
	s.tAx=s.tYl.tAx;s.tAy=s.tYl.tAy;s.tAz=s.tYl.tAz;s.tRx=s.tYl.tRx;s.tRy=s.tYl.tRy;s.tRz=s.tYl.tRz;
	s.tAX=s.tYl.tAX;s.tAY=s.tYl.tAY;s.tAZ=s.tYl.tAZ;s.tRX=s.tYl.tRX;s.tRY=s.tYl.tRY;s.tRZ=s.tYl.tRZ;
	//if(!s.xtR){ s.xtR=initXtR( s); s.xtC=initXtC( s); s.xtn=initXtn( s); }
	var x=0; var y=0; s.x=x; s.y=y;
	s.gnd.fem ? 		s.mPy = y +s.reso 		: s.mPy = y +(s.reso*3)+1; 
	s.gnd.fem ? s.obj ? s.mPx = x +(s.reso*3)+1 : s.mPx = x +s.reso :
				s.obj ? s.mPx = x +(s.reso*3)+1 : s.mPx = x +s.reso;
	if( 	s.gnd.fem&&  s.obj){if(x <1){isOdd(x) ? s.e=true : s.i=true}if(x>-1){isOdd(x) ? s.i=true : s.e=true}}
	else if(s.gnd.fem&& !s.obj){if(x>-1){isOdd(x) ? s.e=true : s.i=true}if(x <1){isOdd(x) ? s.i=true : s.e=true}}
	else{ 						if(y <1){isOdd(y) ? s.e=true : s.i=true}if(y>-1){isOdd(y) ? s.i=true : s.e=true}}
	while( s.mPx >((s.reso*4)+2)){ s.mPx -=((s.reso*4)+2)}while( s.mPx <0){ s.mPx +=((s.reso*4)+2)}
	while( s.mPy >((s.reso*4)+2)){ s.mPy -=((s.reso*4)+2)}while( s.mPy <0){ s.mPy +=((s.reso*4)+2)}
	//console.log(s.tYl);
	/*if(!s.rom){ s.rom =m( s.tYl.ab)}
	if(!s.xtn){ s.xtn =initXtn( s.tYl.ab, s.ntn)}*/}
function mkOptions(s){ s.opts=[];
	function getOpts( x,y,z,d){ switch(d){
		case "x" : 	if(s.tY.reSpace[z][y][0] !== s.tYl){ s.opts.push(s.tY.reSpace[z][y][0])}
					if(s.tY.reSpace[z][y][1] !== s.tYl){ s.opts.push(s.tY.reSpace[z][y][1])}
					if(s.tY.reSpace[z][y][2] !== s.tYl){ s.opts.push(s.tY.reSpace[z][y][2])}break;
		case "y" : 	if(s.tY.reSpace[z][0][x] !== s.tYl){ s.opts.push(s.tY.reSpace[z][0][x])}
					if(s.tY.reSpace[z][1][x] !== s.tYl){ s.opts.push(s.tY.reSpace[z][1][x])}
					if(s.tY.reSpace[z][2][x] !== s.tYl){ s.opts.push(s.tY.reSpace[z][2][x])}break;
		case "z" : 	if(s.tY.reSpace[0][y][x] !== s.tYl){ s.opts.push(s.tY.reSpace[0][y][x])}
					if(s.tY.reSpace[1][y][x] !== s.tYl){ s.opts.push(s.tY.reSpace[1][y][x])}
					if(s.tY.reSpace[2][y][x] !== s.tYl){ s.opts.push(s.tY.reSpace[2][y][x])}}}
	if(!s.tYl.hasOwnProperty('lon')){
		getOpts( s.tAX,s.tAY,s.tAZ,"x");getOpts( s.tAX,s.tAY,s.tAZ,"y");getOpts( s.tAX,s.tAY,s.tAZ,"z")}
	else if(s.tYl.lon){ getOpts( s.tAX,s.tAY,s.tAZ,"x")}
	else if(s.tYl.ver){ getOpts( s.tAX,s.tAY,s.tAZ,"y")}
	else if(s.tYl.lat){ getOpts( s.tAX,s.tAY,s.tAZ,"z")}}
/*	if(!s.tYl.hasOwnProperty('lon')){
		x =tYl.tRx;

	}
}*/


/*	if(!s.tYl.hasOwnProperty('lon')){
		if(!s.ntn){	s.ntn=mkVectorByInformationElement(s.tYl.ab);

					s.opt=mkOptionsByInformationElement(s.ntn)}
		else{ 		s.xtn=mkVectorByInformationElement(s.tYl.ab);
					s.prd=mkPredicate( s.ntn,s.xtn);
					s.opt=mkOptionsByInformationElement(s.ntn,s.xTn)}
	}
*/


	/*loc=fNs.find(f=>f.ni===loc); console.log(loc);
	dir=cRs.find(c=>c.ni===dir); console.log(dir);
	return s}
*/				
/*function awaySubj( sims,nIs,subj){
	for( var i =0; i <sims.length; i++){ //
		sims[i].
	}
	subj.away =true}*/


function mkMoodNi( sex,gnd,obj,pM){ var mD;
	obj ? mD ="obj" : mD ="sbj";
	mD =sex.ni+"_"+gnd.ni+"_"+mD+"_";
	pM.head ? mD+="p_" : mD+="m_";
	for(let n=0; n < pM.tail.length; n++){
		switch(pM.tail[n]){ case "+" : mD = mD + "p"; break;
							case "-" : mD = mD + "m"; break;
							case "x" : mD = mD + "b"; break}}
	return mD}
function getMood( sex,gnd,obj,pM,from){ 
	var mD =mkMoodNi( sex,gnd,obj,pM);
	mD =getObjByNi( mD,from); return mD}

/*function getMoodOld(pm,be){ var mood ="_";
	if(pm.head){ mood = "n"+mood }
	mood = mood + be.ni + "_";
	for(let n=0; n < pm.tail.length; n++){
		switch(pm.tail[n]){ case "+" : mood = mood + "p"; break;
							case "-" : mood = mood + "n"; break;
							case "x" : mood = mood + "b"; break;}}
	var mo = mkMood(mood, AT); return mo}*/

function interleaveDomains(R,lM,rM) { var r = (2*R)+1; var X = 2*r; var Y = r; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<r) { m[y][x] = lM[y][x] }
													 else 	 { m[y][x] = rM[y][x-r] }}} return m }
function mkMp( subj){ 
	var uL =null, uR =null, dR =null, dL =null, u =null, d =null, mP =null;
	uL =subj.mOb.xY;
	uR =subj.mSb.xY;
	dR =subj.fSb.xY;
	dL =subj.fOb.xY;
	u =interleaveDomains( AL.sQr, uL, uR);
	d =interleaveDomains( AL.sQr, dL, dR);
	mP =u.concat( d); return mP
	/*if 		(!projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, false)}
	else if (!projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, true )}
	else if ( projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  false)}
	else if ( projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  true )}*/
	}
function mkMpTemplate( r){
	var uL=null, uR=null, dL=null, dR=null, u=null, d =null, mP =null;
	uL =mkMosaicXYPlaneTemplate( r,true, true );
	uR =mkMosaicXYPlaneTemplate( r,true, false);
	dR =mkMosaicXYPlaneTemplate( r,false,true );
	dL =mkMosaicXYPlaneTemplate( r,false,true );
	u =interleaveDomains( r, uL, uR);
	d =interleaveDomains( r, dL, dR);
	mP =u.concat( d); return mP
}
function evalQuantity(ari){ var ret=null;
	switch( ari ) { case "-X" 	: ret =function(r,X,Y){ return -X 	};break;
					case "X" 	: ret =function(r,X,Y){ return X 	};break;
					case "-Y" 	: ret =function(r,X,Y){ return -Y 	};break;
					case "Y" 	: ret =function(r,X,Y){ return Y 	};break;
					case "X - Y": ret =function(r,X,Y){ return X - Y};break;
					case "Y - X": ret =function(r,X,Y){ return Y - X};break;
					case "X - r": ret =function(r,X,Y){ return X - r};break;
					case "r - X": ret =function(r,X,Y){ return r - X};break;
					case "Y - r": ret =function(r,X,Y){ return Y - r};break;
					case "r - Y": ret =function(r,X,Y){ return r - Y};break;} return ret}
function evalModalXYPlane(m,r,R){ m.bV=null; m.bK=null; m.gK=null; m.gV=null;
	m.bK=evalQuantity(m.bAriK);m.gK=evalQuantity(m.gAriK);m.bV=evalQuantity(m.bAriV);m.gV=evalQuantity(m.gAriV);
	for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.bG[y][x].Y <= m.bG[y][x].X ) {  m.bG[y][x].V = m.gV( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.bG[y][x].V === -0}
														else 					{ m.bG[y][x].V === +0}}
													m.bG[y][x].K = m.gK( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].K === 0){ m.bG[y][x].K === +0}}
	 	else if ( m.bG[y][x].Y  > m.bG[y][x].X ) {  m.bG[y][x].V = m.bV( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.bG[y][x].V === +0}
	 													else 					{ m.bG[y][x].V === -0}}
	 												m.bG[y][x].K = m.bK( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].K === 0){ m.bG[y][x].K === -0}}}}}
function evalMosaicXYPlane(m,r,R,fem){ m.xV=null; m.xK=null; m.yK=null; m.yV=null;
	m.xK=evalQuantity(m.xAriK);m.yK=evalQuantity(m.yAriK);m.xV=evalQuantity(m.xAriV);m.yV=evalQuantity(m.yAriV);
	if(!fem){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].X <= m.xY[y][x].Y ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V === -0}
														else 					{ m.xY[y][x].V === +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K === 0){ m.xY[y][x].K === +0}}
	 	else if ( m.xY[y][x].X  > m.xY[y][x].Y ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V === +0}
	 													else 					{ m.xY[y][x].V === -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K === 0){ m.xY[y][x].K === -0}}}}}
	else 		 { for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].Y <= m.xY[y][x].X ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V === 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V === -0}
														else 					{ m.xY[y][x].V === +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K === 0){ m.xY[y][x].K === +0}}
	 	else if ( m.xY[y][x].Y  > m.xY[y][x].X ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V === 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V === +0}
	 													else 					{ m.xY[y][x].V === -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K === 0){ m.xY[y][x].K === -0}}}}}}
function mapXYPlane(q,r,R){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
	q[y][x].x =x-r; q[y][x].y =y-r; q[y][x].X=Math.abs(q[y][x].x); q[y][x].Y=Math.abs(q[y][x].y);}}}
//lane( 	m, 	xY, AL.sQr, m.gnd.fem, obj);
function idnXYPlane(m,xY,r,R,fem,obj){
	if 		( fem &&  obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AT.vQsL, y-r, x-r)   }}}
	else if ( fem && !obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AT.vQsL, y-r,-(x-r)) }}}
	else if (!fem &&  obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AT.vQsL, x-r, y-r)   }}}
	else if (!fem && !obj){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){ xY[y][x].vQ =getVq( m.vQs, AT.vQsL, x-r,-(y-r)) }}}}

function hsvToRgb(h, s, v) {
	var r, g, b;	var i;	var f, p, q, t;
	h = Math.max(0, Math.min(360, h));	s = Math.max(0, Math.min(100, s));	v = Math.max(0, Math.min(100, v));
	s /= 100;	v /= 100;
	if(s === 0) { r = g = b = v;	return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];}
	h /= 60; // sector 0 to 5
	i = Math.floor(h);
	f = h - i; // factorial part of h
	p = v * (1 - s);
	q = v * (1 - s * f);
	t = v * (1 - s * (1 - f));
	switch(i) {		case 0:			r = v;			g = t;			b = p;			break;
					case 1:			r = q;			g = v;			b = p;			break;
					case 2:			r = p;			g = v;			b = t;			break;
					case 3:			r = p;			g = q;			b = v;			break;
					case 4:			r = t;			g = p;			b = v;			break;
					default:/*case 5*/r = v;		g = p;			b = q;	}
	return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255)}}
function RGBtoHSV(r, g, b) { if (arguments.length === 1) { g = r.g, b = r.b, r = r.r; }
    var max = Math.max(r, g, b), min = Math.min(r, g, b), d = max - min, h, s = (max === 0 ? 0 : d / max), v = max / 255;
    switch (max) { case min: h = 0; break; case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;
        case g: h = (b - r) + d * 2; h /= 6 * d; break; case b: h = (r - g) + d * 4; h /= 6 * d; break}
    return { h: h, s: s, v: v }}
function componentToHex(c) { var hex = c.toString(16); return hex.length === 1 ? "0" + hex : hex}
function rgbToHex(r, g, b) { return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);}
function hexToRgb(hex) { var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
	return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16)} : null}

function blendColours2(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify2(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify2(src,dst,r){ 	var min =Math.max(src,dst);	var max =Math.min(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function blendColours(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify(src,dst,r){ 	var min =Math.min(src,dst);	var max =Math.max(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function mkBoolMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(false)}}
		else { for(var m=0; m<y; m++){	q[n].push(false)}}} return q}
function mkNullMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(null)}}
		else { for(var m=0; m<y; m++){	q[n].push(null)}}} return q}

function interleaveQuadrants(R,l,v,r) { var X = (2*R)+1; var Y = R; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<R)  { m[y][x] = l[y][x] }
												else if(x===R) { m[y][x] = v[y][0] }
												else 		  { m[y][x] = m[y][x] = r[y][x-R-1] }}} return m }

function flipHor(m){ var M=mkNullMatrix(m.length);
	for(var n=0; n<M.length; n++){ M[n] = m[n].reverse()} return M}
function flipVer(m){
	var M=mkNullMatrix(m.length); var len=M.length;
	for(var n=0; n<len; n++){ M[len-1-n]=m[n]} return M}
//(ui.ora, true, false, m.bE.reso, m.goodForm);
function rotate(matrix,n) {	var r=Math.ceil(n/2); if(n%2===1) { r--; }
    for (var i = 0; i < n/2; i++) { for (var j = 0; j < r; j++) {
            var temp = matrix[i][j]; matrix[i][j] = matrix[n-1-j][i]; matrix[n-1-j][i] = matrix[n-1-i][n-1-j];
            matrix[n-1-i][n-1-j] = matrix[j][n-1-i]; matrix[j][n-1-i] = temp; }} return matrix }
function flipDiagonal(matrix,n) { for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) {
        	if(j < i) {	var temp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = temp; }}} return matrix }

function fillHalfQuadrant(q,r,reverse,blend2){
	var from; var to; var L; var len;
	for(var y=0; y<r; y++){ L =[]; from=null; to=null;
		for(var x=0; x<r; x++){ if(q[x][y]!==null){
			if(from===null){ from = {y:y, x:x, c:q[x][y] }} else{ to ={ y:y, x:x, c:q[x][y]}}}
		if(from&&to){
			if(blend2){ L=blendColours2(from.c, to.c, to.x-from.x+1);}
			else{ L=blendColours(from.c, to.c, to.x-from.x+1);}
			if(reverse){ L.reverse();}
			for(var n=1; n<to.x; n++){ q[n][y] = L[n]}
			break}}}}
function mkHalfQuadrantTemplate(c,g,r){
	if(!g){ r--}
	var q=mkNullMatrix(r);
	for(var y=0; y<r; y++){
		for(var x=0; x<r-y; x++){
			q[y][x] =c }}
	return q}
function mkHalfQuadrant(c,kc,r,mF){
	var q=mkNullMatrix(r);
	if(c===kc) { var fToL=blendColours2(c.f, c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (c.f, c.h, r)}
	else 	  { var fToL=blendColours2(kc.f,c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (kc.f,c.h, r)}
	switch(mF[0]){ 
		case "a" : case "a'" :
			switch(mF[1]){ 
				case "b" : case "b'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[n];
					q[n][0] 	= fToH[n];
					q[n][r-n-1] = lToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[r-n-1];
					q[n][0] 	= fToH[r-n-1];
					q[n][r-n-1] = fToL[r-n-1]}
					fillHalfQuadrant(q,r,true);
					} break;
		case "b" : case "b'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[r-n-1];
					q[n][0] 	= lToH[n];
					q[n][r-n-1] = fToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[r-n-1];
					q[n][0] 	= lToH[r-n-1];
					q[n][r-n-1] = fToL[n]}
					fillHalfQuadrant(q,r,false,true);
					} break;
		case "c" : case "c'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[n];
					q[n][0] 	= fToL[r-n-1];
					q[n][r-n-1] = fToH[r-n-1]}
					fillHalfQuadrant(q,r,true,true);
					break;
				case "b" : case "b'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[n];
					q[n][0] 	= fToL[n];
					q[n][r-n-1] = lToH[r-n-1]}
					fillHalfQuadrant(q,r,false,true);
					} break} return q}
function mkXYCol(c,r){ 	var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push([b])} 	return a}
function mkXYRow(c,r){ 		var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push(b)} 	return a}
function offsetDownwards(m,r){	var a=[]; 	for(var n=0; n<r; n++){ a.push(null)}	m.unshift(a);}
function offsetRightwards( m,r){			for(var n=0; n<r; n++){					m[n].unshift(null)}}
function offsetUpwards( m,r){	var a=[];	for(var n=0; n<r; n++){	a.push(null)}	m.push(a);}
function offsetLeftwards( m,r) { 			for(var n=0; n<r; n++){ 				m[n].push(null)}}
function connectHalfQuadrants(master,slave,r){
	for(var y=0; y<r; y++){	for(var x=0; x<r; x++){	if(master[x][y]===null){ master[x][y] =slave[x][y]}}} return master}
function mkModalXYPlane(m,r){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null, l:null,c:null,r:null,
		dLX:null,dLY:null,d:null,dRX:null,dRY:null,uL:null, uR:null, dL:null, dR:null};
	if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm)}

	else 					  { xY.uLX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.red, ui.red, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.gForm)}

	if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.bForm)}

	else 					  { xY.uLY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.bForm)}

	/*console.log("DEBUT mkModalXYPlane I");
	console.log("DEBUT uLX");console.log(xY.uLX);
	console.log("DEBUT uLY");console.log(xY.uLY);
	console.log("DEBUT uRY");console.log(xY.uRY);
	console.log("DEBUT uRX");console.log(xY.uRX);
	console.log("DEBUT dRX");console.log(xY.dRX);
	console.log("DEBUT dRY");console.log(xY.dRY);
	console.log("DEBUT dLX");console.log(xY.dLX);
	console.log("DEBUT dLY");console.log(xY.dLY);*/

	xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

	xY.uLY =rotate( xY.uLY, r-1);
	offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

	xY.uRY =flipDiagonal( xY.uRY, r-1);
	offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

	xY.uRX =rotate(rotate( xY.uRX, r), r);

	xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

	xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
	offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

	xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
	offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

	xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
	xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
	xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
	xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

	xY.u = mkXYCol( ui.gra.h, r);
	xY.d = mkXYCol( ui.gra.h, r);
	xY.l = mkXYRow( ui.gra.l, r);
	xY.r = mkXYRow( ui.gra.l, r);
	xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

	xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
	xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
	xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

	xY = xY.U.concat( xY.C).concat( xY.D);

	mapXYPlane( 		xY, AL.sQr, AL.vQr);
	//idnXYPlane( 	 	xY, true, true);
	//idnXYPlane( 	m, 	xY, AL.sQr, AL.vQr, true, true);

	return xY}

function mkMosaicXYPlaneTemplate(r,fem,obj){
	var qU={ };
	if(!fem){
		qU.uLV = mkHalfQuadrantTemplate(ui.ora.l, true, r);
		 	qU.uLV=rotate(qU.uLV, r);
		qU.uLH = mkHalfQuadrantTemplate(ui.blu.l, false,r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r-1), r-1);
			offsetDownwards( qU.uLH, r-1);	offsetLeftwards( qU.uLH, r);
		qU.uRV = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.uRV=flipDiagonal(qU.uRV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.cya.l, false,r);
			qU.uRH =rotate(rotate(qU.uRH, r-1), r-1);
			offsetDownwards( qU.uRH, r-1); offsetRightwards( qU.uRH, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.dLV =flipDiagonal(rotate(rotate(qU.dLV, r), r), r);
		qU.dLH = mkHalfQuadrantTemplate(ui.vio.l, false,r);
			offsetUpwards( qU.dLH, r-1); offsetLeftwards( qU.dLH, r);
		qU.dRV = mkHalfQuadrantTemplate(ui.lil.l, true, r);
			qU.dRV =rotate(rotate(rotate(qU.dRV, r), r), r);
		qU.dRH = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r-1), r-1), r-1), r-1);
			offsetUpwards( qU.dRH, r-1); offsetRightwards( qU.dRH, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYCol( ui.gra.l, r);
		qU.d = mkXYCol( ui.gra.l, r);
		qU.l = mkXYRow( ui.gra.h, r);
		qU.r = mkXYRow( ui.gra.h, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}
	else {
		qU.uLH = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r), r);
		qU.uLV = mkHalfQuadrantTemplate(ui.vio.l, false, r);
			qU.uLV =rotate( qU.uLV,r-1);
			offsetRightwards( qU.uLV, r-1); offsetUpwards( qU.uLV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.ora.l, true, r);
			qU.uRH =rotate(rotate( qU.uRH, r), r);
		qU.uRV = mkHalfQuadrantTemplate(ui.blu.l, false, r);
			qU.uRV =flipDiagonal( qU.uRV, r-1);
			offsetLeftwards( qU.uRV, r-1); offsetUpwards( qU.uRV, r);
		qU.dLH = mkHalfQuadrantTemplate(ui.lil.l, true, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dLV =flipDiagonal(rotate(rotate( qU.dLV, r-1), r-1), r-1);
			offsetRightwards( qU.dLV, r-1); offsetDownwards( qU.dLV, r);
		qU.dRH = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r), r), r), r);
		qU.dRV = mkHalfQuadrantTemplate(ui.cya.l, false, r);
			qU.dRV =rotate(rotate(rotate( qU.dRV, r-1), r-1), r-1);
			offsetLeftwards( qU.dRV, r-1); offsetDownwards( qU.dRV, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYCol( ui.gra.h, r);
		qU.d = mkXYCol( ui.gra.h, r);
		qU.l = mkXYRow( ui.gra.l, r);
		qU.r = mkXYRow( ui.gra.l, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}

	if( obj){ qU.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		qU, AL.sQr, AL.vQr);
	//idnXYPlane( 	m, 	qU, AL.vQr, fem, obj);

	return qU}
function mkMosaicXYPlane(m,r,obj){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null,l:null,c:null,r:null,dLX:null,dLY:null,d:null,dRX:null,dRY:null,
		uL:null, uR:null, dL:null, dR:null};
	if(!m.gnd.fem){
		if( m.invMor||m.pureGood) { xY.uLX = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.red, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.xForm)}

		if( m.invMor||m.pureBad)  { xY.uLY = mkHalfQuadrant(ui.blu, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.cya, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.vio, ui.yel, r,   m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.ora, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.red, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.yel, ui.yel, r,   m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r-1), r-1);
		offsetDownwards( xY.uLX, r-1); offsetLeftwards( xY.uLX, r);

		xY.uLY=rotate( xY.uLY, r);
		
		xY.uRY=flipDiagonal( xY.uRY, r);

		xY.uRX =rotate(rotate(xY.uRX, r-1), r-1);
		offsetDownwards( xY.uRX, r-1); offsetRightwards( xY.uRX, r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r-1), r-1), r-1), r-1);
		offsetUpwards( xY.dRX, r-1); offsetRightwards( xY.dRX, r);

		xY.dRY =rotate(rotate(rotate(xY.dRY, r), r), r);

		xY.dLY =flipDiagonal(rotate(rotate(xY.dLY, r), r), r);
		offsetUpwards( xY.dLX, r-1); offsetLeftwards( xY.dLX, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.l, r);
		xY.d = mkXYCol( ui.gra.l, r);
		xY.l = mkXYRow( ui.gra.h, r);
		xY.r = mkXYRow( ui.gra.h, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}
	else{
		if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.red, ui.red, r,   m.xForm)}

		if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

		xY.uLY =rotate( xY.uLY, r-1);
		offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

		xY.uRY =flipDiagonal( xY.uRY, r-1);
		offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

		xY.uRX =rotate(rotate( xY.uRX, r), r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

		xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
		offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

		xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
		offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.h, r);
		xY.d = mkXYCol( ui.gra.h, r);
		xY.l = mkXYRow( ui.gra.l, r);
		xY.r = mkXYRow( ui.gra.l, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}

	if( obj){ xY.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		xY, AL.sQr, AL.vQr);
 	//idnXYPlane( 	m, 	xY, AL.vQr, m.gnd.fem, obj);

	return xY}



function combineMoodAndBeing(pM,bE){
	var mD = pM.ni.substr(0, pM.ni.indexOf('B'));
	mD = mD + "_" + bE.ni + "_";
	mD = mD + pM.ni.split("B").pop();
	mD = mkMood(mD, AT);
	return mD}
function mkMoodOld(mo){
	var primalMood= mo.ni.substr(0, mo.ni.indexOf('_'));
	var being= mo.ni.split('_')[1]; 					
	var tail= mo.ni.split("_").pop(); 					
	primalMood = primalMood+"B"+tail;
	mo.bE = mkBeing(being, AT.gender);
	mo.pM = mkPrimalMood(primalMood, AT);
	getModalFormByBeing(mo, mo.bE.ni);
	getModalFormByPrimalMood(mo);
	parseModalForm(mo);
	mo.qU =mkXYPlane(mo);
	mapXYPlane(mo.qU, mo.bE.reso);
	evalXYPlane(mo)}



function mkVqByScalars( rom,cla,parent,s){ var q=null; switch(rom.ni){
	case "SENSE_0" 	: switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.Origin 		("Origin", 		rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.Feel_1e 		("Feel_1e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.Feel_2i 		("Feel_2i", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.Feel_3e 		("Feel_3e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.Feel_4i 		("Feel_4i", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.Origin  		("Origin", 	 	rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.Think_1e 		("Think_1i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.Think_2i 		("Think_2e",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.Think_1e 		("Think_3i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.Think_1e 		("Think_4e",	rom,cla);inhVq( q,parent,s);return q}
	case "PHEN_4_1" : switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.Sense_4 		("Sense_4", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.U_dysphoria	("U_dysphoria",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.U_defeat 		("U_defeat", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.U_fake 		("U_fake", 		rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.U_epiphany		("U_epihpany", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.Sense_1 		("Sense_1", 	rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.O_body 		("O_body", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.O_need 		("O_need", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.O_tool 		("O_tool", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.O_method 		("O_method", 	rom,cla);inhVq( q,parent,s);return q}
 	case "LOWN_3_2" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.Sense_3 		("Sense_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_detach 		("U_detach", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_burden 		("U_burden", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_happiness 	("U_happiness", rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_fun 			("U_fun", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.Sense_2 		("Sense_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_pain 		("O_pain", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_life 		("O_life", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_order 		("O_order", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_should 		("O_should", 	rom,cla);inhVq( q,parent,s);return q}
 	case "HIGH_2_3" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.Sense_2 		("Sense_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_fear 		("U_fear", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_love 		("U_love", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_style 		("U_style", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_can 			("U_can", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.Sense_3 		("Sense_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_shame 		("O_shame", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_problem 		("O_problem", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_social 		("O_social", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_right 		("O_right", 	rom,cla);inhVq( q,parent,s);return q}
 	case "DLBR_1_4" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.Sense_1 		("Sense_1", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_belief 		("U_belief", 	rom,cla);inhVq( q,parent,ss);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_like 		("U_like", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_motive 		("U_motive", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_peace 		("U_peace", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.Sense_4 		("Sense_4", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_fail 		("O_fail", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_loss 		("O_loss", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_wrong 		("O_wrong", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_success 		("O_success", 	rom,cla);inhVq( q,parent,s);return q}

 	case "INTUIT_0" 	: switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.Origin 		("Origin", 		rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.Feel_1e 		("Feel_1e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.Feel_2i 		("Feel_2i", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.Feel_3e 		("Feel_3e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.Feel_4i 		("Feel_4i", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.Origin 		("Origin", 		rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.Think_1e 		("Think_1i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.Think_2i 		("Think_2e",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.Think_1e 		("Think_3i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.Think_1e 		("Think_4e",	rom,cla);inhVq( q,parent,s);return q}
	case "HRMNY_4_1" : switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.iNtuit_4 		("iNtuit_4", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.M_destroy		("M_destroy",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.M_confusion	("M_confusion",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.M_apathy 		("M_apathy", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.M_beauty		("M_beauty", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.iNtuit_1		("iNtuit_1", 	rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.L_form 		("L_form", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.L_meaning 		("L_meaning",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.L_kind 		("L_kind", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.L_reason 		("L_reason", 	rom,cla);inhVq( q,parent,s);return q}
 	case "SIGNI_3_2" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.iNtuit_3 		("iNtuit_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_hate 		("M_hate", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_awkward		("M_awkward", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_freedom 		("M_freedom", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_event 		("M_event", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.iNtuit_2		("iNtuit_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_exclude 		("L_exclude",	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_purpose 		("L_purpose", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_use 			("L_use", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_would 		("L_would", 	rom,cla);inhVq( q,parent,s);return q}
 	case "AWARE_2_3" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.iNtuit_2 		("iNtuit_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_greed 		("M_greed", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_culture 		("M_culture", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_join 		("M_join", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_could		("M_could", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.iNtuit_3 		("iNtuit_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_impose 		("L_impose", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_reject 		("L_reject", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_metalevel	("L_metalevel",	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_relevance 	("L_relevance",	rom,cla);inhVq( q,parent,s);return q}
 	case "UNITY_1_4" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.iNtuit_1 		("iNtuit_1", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_norm 		("M_norm", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_want 		("M_want", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_integrity 	("M_integrity",	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_innocence	("M_innocence", rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.iNtuit_4 		("iNtuit_4", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_condemn 		("L_condemn", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_deceive 		("L_deceive", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_withhold 	("L_withhold", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_wisdom 		("L_wisdom", 	rom,cla);inhVq( q,parent,s);return q}}}
 
 /*
 function precalcScalarQualities( seed,iEs,parent,s){ var b =null;
	for(let n=0; n <AT.sQsL; n++){
		if( s){ if(s.sQs.length >0){ return s.sQs}}
		else{ 	var sQs =[]; b =mkSq( seed[n],iEs,parent); sQs.push( b);
				if(s){ switch(seed[n]){ case "FEEL_0i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;
										case "FEEL_1e" 	: s.FEEL_1e =b; break; case "THINK_1i" : s.THINK_1i =b; break;
										case "FEEL_2i" 	: s.FEEL_2i =b; break; case "THINK_2e" : s.THINK_2e =b; break;
										case "FEEL_3e" 	: s.FEEL_3e =b; break; case "THINK_3i" : s.THINK_3i =b; break;
										case "FEEL_4i" 	: s.FEEL_4i =b; break; case "THINK_4e" : s.THINK_4e =b; break;
										case "SENSE_0" 	: s.SENSE_0 =b; break; case "INTUIT_0" : s.INTUIT_0 =b; break;
										case "PHEN_4_1"	: s.PHEN_4_1=b; break; case "HRMNY_4_1": s.HRMNY_4_1=b; break;
										case "LOWN_3_2"	: s.LOWN_3_2=b; break; case "SIGNI_3_2": s.SIGNI_3_2=b; break;
										case "HIGH_2_3" : s.HIGH_2_3=b; break; case "AWARE_2_3": s.AWARE_2_3=b; break;
										case "DLBR_1_4"	: s.DLBR_1_4=b; break; case "UNITY_1_4": s.UNITY_1_4=b; break}}}}return sQs}
										*/
function precalcVectorQualities( seed,sQs,parent,s){ //if( s){ if(s.vQs.length >0){ return s.vQs}}
 	var b =null; var vQs =[];
 	for(let n=0; n <AT.vQsL; n++){ b =mkVq( seed[n],sQs,parent); vQs.push( b);} return vQs}
				/*if(s){ switch(seed[n]){ case "U_origin_i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;*/
	//for(let n=0; n <AT.vQsL; n++){ b =mkVq( seed[n],sQs,parent,s); a.push( b)}return a}

 function mkVq( ni,sQs,parent,s){ var q=null; switch(ni){
	case "Origin"  		: q = new AL.VectorQualities.Origin 		("Origin", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Feel_1e" 		: q = new AL.VectorQualities.Feel_1e 		("Feel_1e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Feel_2i" 		: q = new AL.VectorQualities.Feel_2i 		("Feel_2i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Feel_3e" 		: q = new AL.VectorQualities.Feel_3e 		("Feel_3e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Feel_4i" 		: q = new AL.VectorQualities.Feel_4i 		("Feel_4i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Think_1i" 	: q = new AL.VectorQualities.Think_1i 		("Think_1i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Think_2e" 	: q = new AL.VectorQualities.Think_2e 		("Think_2e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Think_3i" 	: q = new AL.VectorQualities.Think_3i 		("Think_3i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Think_4e" 	: q = new AL.VectorQualities.Think_4e 		("Think_4e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "Sense_4" 		: q = new AL.VectorQualities.Sense_4 		("Sense_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_dysphoria" 	: q = new AL.VectorQualities.U_dysphoria 	("U_dysphoria", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_defeat" 	: q = new AL.VectorQualities.U_defeat 		("U_defeat", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_fake" 		: q = new AL.VectorQualities.U_fake 		("U_fake", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_epiphany" 	: q = new AL.VectorQualities.U_epiphany 	("U_epiphany", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Sense_1" 		: q = new AL.VectorQualities.Sense_1 		("Sense_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_body" 		: q = new AL.VectorQualities.O_body 		("O_body", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_need" 		: q = new AL.VectorQualities.O_need 		("O_need", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_tool" 		: q = new AL.VectorQualities.O_tool 		("O_tool", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_method" 	: q = new AL.VectorQualities.O_method 		("O_method", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "Sense_3" 		: q = new AL.VectorQualities.Sense_3 		("Sense_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_detach" 	: q = new AL.VectorQualities.U_detach 		("U_detach", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_burden" 	: q = new AL.VectorQualities.U_burden 		("U_burden", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_happiness" 	: q = new AL.VectorQualities.U_happiness 	("U_happiness", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_fun" 		: q = new AL.VectorQualities.U_fun 			("U_fun", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "Sense_2" 		: q = new AL.VectorQualities.Sense_2 		("Sense_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_pain" 		: q = new AL.VectorQualities.O_pain 		("O_pain", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_life" 		: q = new AL.VectorQualities.O_life 		("O_life", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_order" 		: q = new AL.VectorQualities.O_order 		("O_order", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_should" 	: q = new AL.VectorQualities.O_should 		("O_should", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_fear" 		: q = new AL.VectorQualities.U_fear 		("U_fear", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_love" 		: q = new AL.VectorQualities.U_love 		("U_love", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_style" 		: q = new AL.VectorQualities.U_style 		("U_style", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_can" 		: q = new AL.VectorQualities.U_can 			("U_can", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_shame" 		: q = new AL.VectorQualities.O_shame 		("O_shame", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_problem" 	: q = new AL.VectorQualities.O_problem 		("O_problem", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_social" 	: q = new AL.VectorQualities.O_social 		("O_social", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_right" 		: q = new AL.VectorQualities.O_right 		("O_right", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_belief" 	: q = new AL.VectorQualities.U_belief 		("U_belief", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_like" 		: q = new AL.VectorQualities.U_like 		("U_life", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_motive" 	: q = new AL.VectorQualities.U_motive 		("U_motive", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_peace" 		: q = new AL.VectorQualities.U_peace 		("U_peace", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_fail" 		: q = new AL.VectorQualities.O_fail 		("O_fail", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_loss" 		: q = new AL.VectorQualities.O_loss 		("O_loss", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_wrong" 		: q = new AL.VectorQualities.O_wrong 		("O_wrong", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_success" 	: q = new AL.VectorQualities.O_success 		("O_success", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "iNtuit_4" 	: q = new AL.VectorQualities.iNtuit_4 		("iNtuit_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_destroy" 	: q = new AL.VectorQualities.M_destroy 		("M_destroy", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_confusion" 	: q = new AL.VectorQualities.M_confusion 	("M_confusion", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_apathy" 	: q = new AL.VectorQualities.M_apathy 		("M_apathy", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_beauty" 	: q = new AL.VectorQualities.M_beauty 		("M_beauty", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "iNtuit_1" 	: q = new AL.VectorQualities.iNtuit_1 		("iNtuit_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_form" 		: q = new AL.VectorQualities.L_form 		("L_form", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_meaning" 	: q = new AL.VectorQualities.L_meaning 		("L_meaning", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_kind" 		: q = new AL.VectorQualities.L_kind 		("L_kind", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_reason" 	: q = new AL.VectorQualities.L_reason 		("L_reason", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "iNtuit_3" 	: q = new AL.VectorQualities.iNtuit_3 		("iNtuit_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_hate" 		: q = new AL.VectorQualities.M_hate 		("M_hate", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_awkward" 	: q = new AL.VectorQualities.M_awkward 		("M_awkward", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_freedom" 	: q = new AL.VectorQualities.M_freedom 		("M_freedom", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_event" 		: q = new AL.VectorQualities.M_event 		("M_event", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "iNtuit_2" 	: q = new AL.VectorQualities.iNtuit_2 		("iNtuit_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_exclude" 	: q = new AL.VectorQualities.L_exclude 		("L_exclude", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_purpose" 	: q = new AL.VectorQualities.L_purpose 		("L_purpose", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_use" 		: q = new AL.VectorQualities.L_use 			("L_use", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_would" 		: q = new AL.VectorQualities.L_would 		("L_would", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_greed" 		: q = new AL.VectorQualities.M_greed 		("M_greed", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_culture" 	: q = new AL.VectorQualities.M_culture 		("M_culture", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_join" 		: q = new AL.VectorQualities.M_join 		("M_join", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_could" 		: q = new AL.VectorQualities.M_could 		("M_could", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_impose" 	: q = new AL.VectorQualities.L_impose 		("L_impose", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_reject" 	: q = new AL.VectorQualities.L_reject 		("L_reject", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_metalevel" 	: q = new AL.VectorQualities.L_metalevel 	("L_metalevel", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_relevance" 	: q = new AL.VectorQualities.L_relevance 	("L_relevance", undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_norm" 		: q = new AL.VectorQualities.M_norm 		("M_norm", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_want" 		: q = new AL.VectorQualities.M_want 		("M_want", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_integrity" 	: q = new AL.VectorQualities.M_integrity 	("M_integrity", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_innocence" 	: q = new AL.VectorQualities.M_innocence 	("M_innocence", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_condemn" 	: q = new AL.VectorQualities.L_condemn 		("L_condemn", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_deceive" 	: q = new AL.VectorQualities.L_deceive 		("L_deceive", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_withhold" 	: q = new AL.VectorQualities.L_withhold 	("L_wihhold", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_wisdom" 	: q = new AL.VectorQualities.L_wisdom 		("L_wisdom", 	undefined,undefined,sQs); inhVq( q,parent,s);return q}}
function inhVq( v,parent,s){ if(parent){ v.parent=parent.vQs.find(o => o.ni ===v.ni)}}
/*							 if()

	if(!parent){ var q=v.ni.charAt(0); switch(q){
		case "M" : AT.vQsM.push( v);break; 	case "L" : AT.vQsL.push( v);break;
		case "U" : AT.vQsU.push( v);break; 	case "O" : AT.vQsO.push( v)}}}*/

AL.VectorQualities = { seed:[ "Origin",
	"Feel_1e", "Feel_2i", "Feel_3e", "Feel_4i", "Think_1i","Think_2e","Think_3i","Think_4e",
	"Sense_1", "Sense_2", "Sense_3", "Sense_4", "iNtuit_1", "iNtuit_2", "iNtuit_3", "iNtuit_4",

	"U_dysphoria","U_defeat","U_fake","U_epiphany","U_detach","U_burden","U_happiness","U_fun",
	"U_fear","U_love","U_style","U_can","U_belief","U_like","U_motive","U_peace",
	"O_body","O_need","O_tool","O_method","O_pain","O_life","O_order","O_should",
	"O_shame","O_problem","O_social","O_right","O_fail","O_loss","O_wrong","O_success",
	"M_norm","M_want","M_integrity","M_innocence","M_greed","M_culture","M_join","M_could",
	"M_hate","M_awkward","M_freedom","M_event","M_destroy","M_confusion","M_apathy","M_beauty",
	"L_form","L_meaning","L_kind","L_reason","L_exclude","L_purpose","L_use","L_would",
	"L_impose","L_reject","L_metalevel","L_relevance","L_condemn","L_deceive","L_withhold","L_wisdom"],
	Origin 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 0,true, true, "Origin" 										)},
	Feel_1e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-1,false,true, "Weak \n extroverted \n Feeling" 				)},
	Feel_2i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-2,true, false,"Weak \n introverted \n Feeling" 				)},
	Feel_3e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-3,false,true, "Strong \n extroverted \n Feeling" 				)},
	Feel_4i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-4,true, false,"Strong \n introverted \n Feeling" 				)},
	Think_1i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 1,true, false, "Weak \n extroverted \n Thinking" 				)},
	Think_2e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 2,false,true, "Weak \n introverted \n Thinking" 				)},
	Think_3i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 3,true, false,"Strong \n extroverted \n Thinking" 			)},
	Think_4e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 4,false,true, "Strong \n introverted \n Thinking" 			)},
	Sense_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 0,true, true, "Weakest \n Sensing" 							)},
	Sense_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 0,true, true, "Weak \n Sensing" 								)},
	Sense_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 0,true, true, "Strong \n Sensing" 							)},
	Sense_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 0,true, true, "Strongest \n Sensing" 							)},
	iNtuit_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 0,true, true, "Weakest \n iNtuition" 							)},
	iNtuit_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 0,true, true, "Weak \n iNtuition" 							)},
	iNtuit_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 0,true, true, "Strong \n iNtuition" 							)},
	iNtuit_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 0,true, true, "Strongest \n iNtuition" 						)},


	U_dysphoria 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-1,false,true, "Something \n bad happens \n to us." 			)},
	U_defeat 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-2,true, false,"That isn't \n possible \n for us." 			)},
	U_fake 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-3,false,true, "That \n makes us \n pretentious." 				)},
	U_epiphany 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-4,true, false,"Something \n good happens \n to us." 			)},
	U_detach 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-1,false,true, "That breaks \n us apart." 		 				)},
	U_burden 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-2,true, false,"That makes us \n feel bad about \n ourselves." )},
	U_happiness 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-3,false,true, "That keeps \n us together." 					)},
	U_fun 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-4,true, false,"That makes \n us attractive." 					)},
	U_fear 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-1,false,true, "That \n makes us \n feel bad." 				)},
	U_love 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-2,true, false,"That brings \n us together." 					)},
	U_style 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-3,false,true, "That \n distinguishes \n us." 					)},
	U_can 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-4,true, false,"That is \n possible \n for us." 				)},
	U_belief 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-1,false,true, "That matters \n to us." 		 				)},
	U_like 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-2,true, false,"That makes \n us feel good."					)},
	U_motive 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-3,false,true, "That \n unites us." 							)},
	U_peace 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-4,true, false,"What \n happens \n to us?" 					)},

	O_fail 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 1,true, false,"I do \n something \n bad." 					)},
	O_loss 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 2,false,true, "I need this \n but don't \n preserve it." 		)},
	O_wrong 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 3,true, false,"I harm \n someone for \n no reason." 			)},
	O_success 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 4,false,true, "I do \n something \n good." 					)},
	O_shame 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 1,true, false,"Others need \n help because \n of me." 		)},
	O_problem 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 2,false,true, "I need help \n with this." 					)},
	O_social 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 3,true, false,"I cooperate." 									)},
	O_right 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 4,false,true, "This makes \n me a priority." 					)},
	O_pain 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 1,true, false,"This makes \n me not whole." 					)},
	O_life 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 2,false,true, "I preserve \n this." 							)},
	O_order 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 3,true, false,"This puts me \n in control." 					)},
	O_should 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 4,false,true, "This puts me \n in charge." 					)},
	O_body 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 1,true, false,"I perceive \n this." 		 					)},
	O_need 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 2,false,true, "This makes \n me whole."						)},
	O_tool 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 3,true, false,"This \n makes me \n independent." 				)},
	O_method 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 4,false,true, "How do I \n do this?" 							)},
//
	M_destroy 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-1,false,true, "We do \n something \n bad." 					)},
	M_confusion 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-2,true, false,"We don't \n know what \n we want." 			)},
	M_apathy 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-3,false,true, "We don't \n want \n anything." 				)},
	M_beauty 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-4,true, false,"We do \n something \n good." 					)},
	M_hate 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-1,false,true, "We don't \n want them." 			 			)},
	M_awkward 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-2,true, false,"We don't \n want to do \n this together." 		)},
	M_freedom 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-3,false,true, "We let this \n happen."						)},
	M_event 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-4,true, false,"We pay \n attention \n to this."				)},
	M_greed 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-1,false,true, "We don't \n want this." 						)},
	M_culture 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-2,true, false,"We want to \n do things \n this way."			)},
	M_join 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-3,false,true, "We do this \n together." 						)},
	M_could 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-4,true, false,"We prepare \n for this." 						)},
	M_norm 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-1,false,true, "We do this." 				 					)},
	M_want 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-2,true, false,"We want this."									)},
	M_integrity 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-3,false,true, "We are \n these people."						)},
	M_innocence 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-4,true, false,"Who does \n this, when \n and where?" 			)},

	L_condemn 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 1,true, false,"You are bad."									)},
	L_deceive 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 2,false,true, "You shall \n falsely relate \n to that." 		)},
	L_withhold 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 3,true, false,"You would \n harm that."						)},
	L_wisdom 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 4,false,true, "You are good." 								)},
	L_impose		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 1,true, false,"You aren't \n like that." 						)},
	L_reject 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 2,false,true, "You don't \n relate to that." 					)},
	L_metalevel 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 3,true, false,"You can \n relate \n like that."				)},
	L_relevance		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 4,false,true, "You would \n contribute \n to that." 			)},
	L_exclude		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 1,true, false,"You can't \n be that." 						)},
	L_purpose		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 2,false,true, "You relate \n like that." 						)},
	L_use			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 3,true, false,"You relate \n to that." 						)},
	L_would 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 4,false,true, "You would \n relate to that."					)},
	L_form			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 1,true, false,"You are that." 				 				)},
	L_meaning		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 2,false,true, "You can \n be that."							)},
	L_kind			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 3,true, false,"You are \n like that." 						)},
	L_reason 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 4,false,true, "Why are you \n like that?"						)}};
//Fi.invoke : function(){}
function getVq(a,l,r,c){ var v=null; for(var i=0; i<l; i++){ if((a[i].r===r)&&(a[i].c===c)){ v=a[i]}}return v}
function getByNis(a,l,nis,nisL){ var b=null; var q=[];
	for(var i=0; i<l; i++){ for(var j=0; j<nisL; j++) { if(nis[j]===a[i].ni){ q.push(a[i])}}}return q}
function getByNi1st(a,l,c){ var b=null; var q=[];
	for(var i=0; i<l; i++){ if((a[i].ni.charAt(0)===c)&&(a[i].ni.charAt(1)==='_')){ q.push(a[i])}}return q}
function mkVq2(o,ni,rQs,cQs,sQs,r,c,i,e,desc){ o.ni=ni; o.r=r; o.c=c; o.i=i; o.e=e; o.desc=desc;
	var v=ni.charAt(0); switch(v){
		case "M" : o.lPI=true; o.lPU=true; break; case "L" : o.lPI=true; o.lPU=false;break;
		case "U" : o.lPI=false;o.lPU=false;break; case "O" : o.lPI=false;o.lPU=true}
	o.rQs=null; if(rQs){ o.rQs=rQs} else{ o.rQs=getRomanticQualities( ni, sQs, AT.sQsL)}
	o.cQs=null; if(cQs){ o.cQs=cQs} else{ o.cQs=getClassicalQualities(ni, sQs, AT.sQsL)}}
function getRomanticQualities(ni,sQs,l){ var q=null; switch( ni){
case "Origin"  :q=getByNis(sQs,l,["ROMANTIC_0"] 																					,1);return q;
case "Feel_1e" :q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Feel_2i" :q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Feel_3e" :q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Feel_4i" :q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Think_1i":q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Think_2e":q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Think_3i":q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Think_4e":q=getByNis(sQs,l,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);return q;
case "Sense_1" :q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "Sense_2" :q=getByNis(sQs,l,["LOWN_2_3", "HIGH_3_2"] 																		,2);return q;
case "Sense_3" :q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "Sense_4" :q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "iNtuit_1":q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "iNtuit_2":q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "iNtuit_3":q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;
case "iNtuit_4":q=getByNis(sQs,l,["PHEN_4_1", "DLBR_1_4"] 																		,2);return q;

	case "U_dysphoria" 	:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q; 
	case "U_defeat" 	:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "U_fake" 		:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "U_epiphany" 	:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "U_detach" 	:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "U_burden" 	:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "U_happiness" 	:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "U_fun" 		:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "U_fear" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "U_love" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "U_style" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "U_can" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "U_belief" 	:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "U_like" 		:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "U_motive" 	:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "U_peace" 		:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "O_fail" 		:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "O_loss" 		:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "O_wrong" 		:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "O_success" 	:q=getByNis(sQs,l,["DLBR_1_4" ],1);return q;
	case "O_shame" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "O_problem" 	:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "O_social" 	:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "O_right" 		:q=getByNis(sQs,l,["HIGH_2_3" ],1);return q;
	case "O_pain" 		:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "O_life" 		:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "O_order" 		:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "O_should" 	:q=getByNis(sQs,l,["LOWN_3_2" ],1);return q;
	case "O_body" 		:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "O_need" 		:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "O_tool" 		:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "O_method" 	:q=getByNis(sQs,l,["PHEN_4_1" ],1);return q;
	case "M_destroy" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "M_confusion" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "M_apathy" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "M_beauty" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "M_hate" 		:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "M_awkward" 	:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "M_freedom" 	:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "M_event" 		:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "M_greed" 		:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "M_culture" 	:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "M_join" 		:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "M_could" 		:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "M_norm" 		:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "M_want" 		:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "M_integrity" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "M_innocence" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "L_condemn" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "L_deceive" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "L_withhold" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "L_wisdom" 	:q=getByNis(sQs,l,["UNITY_1_4"],1);return q;
	case "L_impose" 	:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "L_reject" 	:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "L_metalevel" 	:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "L_relevance" 	:q=getByNis(sQs,l,["SIGNI_3_2"],1);return q;
	case "L_exclude" 	:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "L_purpose" 	:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "L_use" 		:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "L_would" 		:q=getByNis(sQs,l,["AWARE_2_3"],1);return q;
	case "L_form" 		:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "L_meaning" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "L_kind" 		:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q;
	case "L_reason" 	:q=getByNis(sQs,l,["HRMNY_4_1"],1);return q}}
function getClassicalQualities(ni,sQs,l){ var q=null; switch( ni){

	case "Origin"  :q=getByNis(sQs,l,["FEEL_0i", "THINK_0e"]		,2);return q;
	case "Feel_1e" :q=getByNis(sQs,l,["FEEL_1e"] 					,1);return q;
	case "Feel_2i" :q=getByNis(sQs,l,["FEEL_2i"] 					,1);return q;
	case "Feel_3e" :q=getByNis(sQs,l,["FEEL_3e"] 					,1);return q;
	case "Feel_4i" :q=getByNis(sQs,l,["FEEL_4i"] 					,1);return q;
	case "Think_1i":q=getByNis(sQs,l,["THINK_1i"] 				,1);return q;
	case "Think_2e":q=getByNis(sQs,l,["THINK_2e"] 				,1);return q;
	case "Think_3i":q=getByNis(sQs,l,["THINK_3i"] 				,1);return q;
	case "Think_4e":q=getByNis(sQs,l,["THINK_4e"] 				,1);return q;
	case "Sense_1" :q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "Sense_2" :q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "Sense_3" :q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "Sense_4" :q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "iNtuit_1":q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "iNtuit_2":q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "iNtuit_3":q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;
	case "iNtuit_4":q=getByNis(sQs,l,["FEEL_1e", "FEEL_2i", "FEEL_3e", "FEEL_4i", "THINK_1i","THINK_2e","THINK_3i","THINK_4e"] 	,8);return q;

	case "U_dysphoria" 	:q=getByNis(sQs,l,["FEEL_1e"] ,1);return q; 
	case "U_defeat" 	:q=getByNis(sQs,l,["FEEL_2i"] ,1);return q;
	case "U_fake" 		:q=getByNis(sQs,l,["FEEL_3e"] ,1);return q;
	case "U_epiphany" 	:q=getByNis(sQs,l,["FEEL_4i"] ,1);return q;
	case "U_detach" 	:q=getByNis(sQs,l,["FEEL_1e"] ,1);return q;
	case "U_burden" 	:q=getByNis(sQs,l,["FEEL_2i"] ,1);return q;
	case "U_happiness" 	:q=getByNis(sQs,l,["FEEL_3e"] ,1);return q;
	case "U_fun" 		:q=getByNis(sQs,l,["FEEL_4i"] ,1);return q;
	case "U_fear" 		:q=getByNis(sQs,l,["FEEL_1e"] ,1);return q;
	case "U_love" 		:q=getByNis(sQs,l,["FEEL_2i"] ,1);return q;
	case "U_style" 		:q=getByNis(sQs,l,["FEEL_3e"] ,1);return q;
	case "U_can" 		:q=getByNis(sQs,l,["FEEL_4i"] ,1);return q;
	case "U_belief" 	:q=getByNis(sQs,l,["FEEL_1e"] ,1);return q;
	case "U_like" 		:q=getByNis(sQs,l,["FEEL_2i"] ,1);return q;
	case "U_motive" 	:q=getByNis(sQs,l,["FEEL_3e"] ,1);return q;
	case "U_peace" 		:q=getByNis(sQs,l,["FEEL_4i"] ,1);return q;
	case "O_fail" 		:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "O_loss" 		:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "O_wrong" 		:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "O_success" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "O_shame" 		:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "O_problem" 	:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "O_social" 	:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "O_right" 		:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "O_pain" 		:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "O_life" 		:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "O_order" 		:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "O_should" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "O_body" 		:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "O_need" 		:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "O_tool" 		:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "O_method" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "M_destroy" 	:q=getByNis(sQs,l,["FEEL_1e"], 1);return q;
	case "M_confusion" 	:q=getByNis(sQs,l,["FEEL_2i"], 1);return q;
	case "M_apathy" 	:q=getByNis(sQs,l,["FEEL_3e"], 1);return q;
	case "M_beauty" 	:q=getByNis(sQs,l,["FEEL_4i"], 1);return q;
	case "M_hate" 		:q=getByNis(sQs,l,["FEEL_1e"], 1);return q;
	case "M_awkward" 	:q=getByNis(sQs,l,["FEEL_2i"], 1);return q;
	case "M_freedom" 	:q=getByNis(sQs,l,["FEEL_3e"], 1);return q;
	case "M_event" 		:q=getByNis(sQs,l,["FEEL_4i"], 1);return q;
	case "M_greed" 		:q=getByNis(sQs,l,["FEEL_1e"], 1);return q;
	case "M_culture" 	:q=getByNis(sQs,l,["FEEL_2i"], 1);return q;
	case "M_join" 		:q=getByNis(sQs,l,["FEEL_3e"], 1);return q;
	case "M_could" 		:q=getByNis(sQs,l,["FEEL_4i"], 1);return q;
	case "M_norm" 		:q=getByNis(sQs,l,["FEEL_1e"], 1);return q;
	case "M_want" 		:q=getByNis(sQs,l,["FEEL_2i"], 1);return q;
	case "M_integrity" 	:q=getByNis(sQs,l,["FEEL_3e"], 1);return q;
	case "M_innocence" 	:q=getByNis(sQs,l,["FEEL_4i"], 1);return q;
	case "L_condemn" 	:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "L_deceive" 	:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "L_withhold" 	:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "L_wisdom" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "L_impose" 	:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "L_reject" 	:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "L_metalevel" 	:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "L_relevance" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "L_exclude" 	:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "L_purpose" 	:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "L_use" 		:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "L_would" 		:q=getByNis(sQs,l,["THINK_4e"],1);return q;
	case "L_form" 		:q=getByNis(sQs,l,["THINK_1i"],1);return q;
	case "L_meaning" 	:q=getByNis(sQs,l,["THINK_2e"],1);return q;
	case "L_kind" 		:q=getByNis(sQs,l,["THINK_3i"],1);return q;
	case "L_reason" 	:q=getByNis(sQs,l,["THINK_4e"],1);return q}}


function precalcScalarQualities( seed,parent){ var b =null; var sQs =[];
	for(let n=0; n <AT.sQsL; n++){
		/*if( s){ if(s.sQs.length >0){ return s.sQs}}
		else{ */ b =mkSq( seed[n],parent); sQs.push( b);}/*
				if(s){ switch(seed[n]){ case "FEEL_0i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;
										case "FEEL_1e" 	: s.FEEL_1e =b; break; case "THINK_1i" : s.THINK_1i =b; break;
										case "FEEL_2i" 	: s.FEEL_2i =b; break; case "THINK_2e" : s.THINK_2e =b; break;
										case "FEEL_3e" 	: s.FEEL_3e =b; break; case "THINK_3i" : s.THINK_3i =b; break;
										case "FEEL_4i" 	: s.FEEL_4i =b; break; case "THINK_4e" : s.THINK_4e =b; break;
										case "SENSE_0" 	: s.SENSE_0 =b; break; case "INTUIT_0" : s.INTUIT_0 =b; break;
										case "PHEN_4_1"	: s.PHEN_4_1=b; break; case "HRMNY_4_1": s.HRMNY_4_1=b; break;
										case "LOWN_3_2"	: s.LOWN_3_2=b; break; case "SIGNI_3_2": s.SIGNI_3_2=b; break;
										case "HIGH_2_3" : s.HIGH_2_3=b; break; case "AWARE_2_3": s.AWARE_2_3=b; break;
										case "DLBR_1_4"	: s.DLBR_1_4=b; break; case "UNITY_1_4": s.UNITY_1_4=b; break}}}}*/return sQs}
function mkSq( ni,parent){ var q=null; switch(ni){
	case "ROMANTIC_0" 	:q=new AL.ScalarQualities.ROMANTIC_0 	(ni); inhSq( q,parent);return q;
	case "4_PHEN_1"  	:q=new AL.ScalarQualities.PHEN_4_1		(ni); inhSq( q,parent);return q;
	case "3_LOWN_2"  	:q=new AL.ScalarQualities.LOWN_3_2 		(ni); inhSq( q,parent);return q;
	case "2_HIGH_3"  	:q=new AL.ScalarQualities.HIGH_2_3 		(ni); inhSq( q,parent);return q;
	case "1_DLBR_4"  	:q=new AL.ScalarQualities.DLBR_1_4 		(ni); inhSq( q,parent);return q;
	case "4_HRMNY_1" 	:q=new AL.ScalarQualities.HRMNY_4_1 	(ni); inhSq( q,parent);return q;
	case "3_SIGNI_2" 	:q=new AL.ScalarQualities.SIGNI_3_2 	(ni); inhSq( q,parent);return q;
	case "2_AWARE_3" 	:q=new AL.ScalarQualities.AWARE_2_3 	(ni); inhSq( q,parent);return q;
	case "1_UNITY_4" 	:q=new AL.ScalarQualities.UNITY_1_4 	(ni); inhSq( q,parent);return q;
	case "FEEL_0i" 		:q=new AL.ScalarQualities.FEEL_0i 		(ni); inhSq( q,parent);return q;
	case "FEEL_1e" 		:q=new AL.ScalarQualities.FEEL_1e 		(ni); inhSq( q,parent);return q;
	case "FEEL_2i" 		:q=new AL.ScalarQualities.FEEL_2i 		(ni); inhSq( q,parent);return q;
	case "FEEL_3e" 		:q=new AL.ScalarQualities.FEEL_3e 		(ni); inhSq( q,parent);return q;
	case "FEEL_4i" 		:q=new AL.ScalarQualities.FEEL_4i 		(ni); inhSq( q,parent);return q;
	case "THINK_0e" 	:q=new AL.ScalarQualities.THINK_0e 		(ni); inhSq( q,parent);return q;
	case "THINK_1i" 	:q=new AL.ScalarQualities.THINK_1i 		(ni); inhSq( q,parent);return q;
	case "THINK_2e" 	:q=new AL.ScalarQualities.THINK_2e 		(ni); inhSq( q,parent);return q;
	case "THINK_3i" 	:q=new AL.ScalarQualities.THINK_3i 		(ni); inhSq( q,parent);return q;
	case "THINK_4e" 	:q=new AL.ScalarQualities.THINK_4e 		(ni); inhSq( q,parent);return q}}
function inhSq( q,parent){ if( parent){ q.parent=parent.sQs.find(o => o.ni === q.ni)}}
AL.ScalarQualities={ seed : [
	"ROMANTIC_0", "4_PHEN_1", "3_LOWN_2", "2_HIGH_3", "1_DLBR_4",	"4_HRMNY_1","3_SIGNI_2","2_AWARE_3","1_UNITY_4",
	"FEEL_0i", 	"FEEL_1e", 	"FEEL_2i", 	"FEEL_3e", 	"FEEL_4i",	"THINK_0e", "THINK_1i", "THINK_2e", "THINK_3i", "THINK_4e"],
ROMANTIC_0 	: function(ni){mkSq2(this,ni,0,0,true, true, false,false,"0R0","Empty \n romantic \n quality")},
PHEN_4_1 	: function(ni){mkSq2(this,ni,4,1,true, true, false,false,"4S1","Sensory \n introverted \n phenomena")},
LOWN_3_2 	: function(ni){mkSq2(this,ni,3,2,true, true, false,false,"3S2","Sensory \n extroverted \n lower needs")},
HIGH_2_3 	: function(ni){mkSq2(this,ni,2,3,true, true, false,true, "2S3","Sensory \n introverted \n higher needs")},
DLBR_1_4 	: function(ni){mkSq2(this,ni,1,4,true, true, false,true, "1S4","Sensory \n extroverted \n deliberation")},
HRMNY_4_1	: function(ni){mkSq2(this,ni,4,1,true, true, false,false,"4N1","iNtuitive \n introverted \n harmony")},
SIGNI_3_2	: function(ni){mkSq2(this,ni,3,2,true, true, false,false,"3N2","iNtuitive \n extroverted \n significance")},
AWARE_2_3	: function(ni){mkSq2(this,ni,2,3,true, true, false,true, "2N3","iNtuitive \n introverted \n awareness")},
UNITY_1_4	: function(ni){mkSq2(this,ni,1,4,true, true, false,true, "1N4","iNtuitive \n extroverted \n unity")},
FEEL_0i		: function(ni){mkSq2(this,ni,0,0,true, false,true, false,"F0i","Empty \n introverted \n Feeling")},
FEEL_1e		: function(ni){mkSq2(this,ni,1,1,false,true, true, false,"F1e","Extroverted \n weak Feeling")},
FEEL_2i		: function(ni){mkSq2(this,ni,2,3,true, false,true, false,"F2i","Introverted \n weak Feeling")},
FEEL_3e		: function(ni){mkSq2(this,ni,3,3,false,true, true, true, "F3e","Extroverted \n strong Feeling")},
FEEL_4i		: function(ni){mkSq2(this,ni,4,4,true, false,true, true, "F4i","Introverted \n strong Feeling")},
THINK_0e	: function(ni){mkSq2(this,ni,0,0,false,true, true, false,"T0e","Empty \n extroverted \n Thinking")},
THINK_1i	: function(ni){mkSq2(this,ni,1,1,true, false,true, false,"T1i","Introverted \n weak Thinking")},
THINK_2e	: function(ni){mkSq2(this,ni,2,2,false,true, true, false,"T2e","Extroverted \n weak Thinking")},
THINK_3i	: function(ni){mkSq2(this,ni,3,3,true, false,true, true, "T3i","Introverted \n strong Thinking")},
THINK_4e	: function(ni){mkSq2(this,ni,4,4,false,true, true, true, "T4e","Extroverted \n strong Thinking")}}
function mkSq2( o,ni,max,min,i,e,rc,str,nI,desc){ o.iEs=[];
	o.ni=ni; o.max=max; o.min=min; o.i=i; o.e=e; o.rc=rc; o.str=str; o.nI=nI; o.desc=desc;}

function evalRom(s){ if(s.at.ni==="Sandbox"){}}


function initXtR( s){ var b=null; switch(s.tYl.ab.ni){
	case "Fi" : s.safe ? b =mkSq("HIGH_2_3", s.tY.iEs, s.ab) : b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) 	;return b;
	case "Fe" : s.safe ? b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) : b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) 	;return b;
	case "Si" : s.safe ? b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) : b =mkSq("HIGH_2_3", s.tY.iEs, s.ab)  ;return b;
	case "Se" : s.safe ? b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) : b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) 	;return b;
	case "Ni" : s.safe ? b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) : b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) 	;return b;
	case "Ne" : s.safe ? b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) : b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) 	;return b;
	case "Ti" : s.safe ? b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) : b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) 	;return b;
	case "Te" : s.safe ? b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) : b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) 	;return b}}
function initXtC( s){ var b=null; console.log(s); switch(s.tYl.ab.ni){ 
	case "Fi":case "Ni": s.xtR.str ? b=mkSq("FEEL_4i", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_2i", s.tY.iEs, s.ab) ;return b;
	case "Fe":case "Ne": s.xtR.str ? b=mkSq("FEEL_3e", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_1i", s.tY.iEs, s.ab) ;return b; 
	case "Si":case "Ti": s.xtR.str ? b=mkSq("THINK_3i", s.tY.iEs, s.ab) : b=mkSq("THINK_1i", s.tY.iEs, s.ab);return b; 
	case "Se":case "Te": s.xtR.str ? b=mkSq("THINK_4e", s.tY.iEs, s.ab) : b=mkSq("THINK_2e", s.tY.iEs, s.ab);return b}}
function initXtn( s){ var b=mkVqByScalars( s.xtR,s.xtC,s.ab,s); console.log(b);return b}

/*function initNtn(iE){ var b=null; switch(iE.ni){
		case "Fi" : case "Ni" : b = mkSq("FEEL_0i"); 	return b;
		case "Fe" : case "Ne" : b = mkSq("FEEL_1e"); 	return b;
		case "Si" : case "Ti" : b = mkSq("THINK_0e"); 	return b;
		case "Se" : case "Te" : b = mkSq("THINK_1i"); 	return b}}
function initXtn(iE,ntn){ var b=null; switch(ntn.ni){
		case "FEEL_0i"  	: if(iE.ni==="Fi"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "FEEL_1e"  	: if(iE.ni==="Fe"){ b =mkSq("DLBR_1_4")}	else{b =mkSq("UNITY_1_4")}return b;
		case "THINK_0e"  	: if(iE.ni==="Se"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "THINK_1i"  	: if(iE.ni==="Si"){ b =mkSq("PHEN_4_1")}	else{b =mkSq("HRMNY_4_1")}return b}}*/
//replace sense 0 and intuit 0 with inspection of environment


function precalcMoods(seed,qua,parent){ var ms=[]; var m=null;
	for(let n=0; n<AT.mDsL; n++){ m=mkMood(seed[n],qua,parent); ms.push(m);} return ms}
function mkMood( ni,qua,parent,arr){ var m=null; switch(ni){
	case "MAS_MAS_obj_p_"   : m= new AL.Moods.MAS_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_m" 	: m= new AL.Moods.MAS_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_p" 	: m= new AL.Moods.MAS_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_mp"	: m= new AL.Moods.MAS_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_pm"	: m= new AL.Moods.MAS_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_b" 	: m= new AL.Moods.MAS_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_"   : m= new AL.Moods.MAS_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_m" 	: m= new AL.Moods.MAS_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_p" 	: m= new AL.Moods.MAS_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_mp" : m= new AL.Moods.MAS_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_pm" : m= new AL.Moods.MAS_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_b" 	: m= new AL.Moods.MAS_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "mas_MAS_obj_p_"   : m= new AL.Moods.mas_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_m" 	: m= new AL.Moods.mas_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_p" 	: m= new AL.Moods.mas_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_mp"	: m= new AL.Moods.mas_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_pm"	: m= new AL.Moods.mas_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_b" 	: m= new AL.Moods.mas_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_"   : m= new AL.Moods.mas_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_m" 	: m= new AL.Moods.mas_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_p" 	: m= new AL.Moods.mas_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_mp" : m= new AL.Moods.mas_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_pm" : m= new AL.Moods.mas_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_b" 	: m= new AL.Moods.mas_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "fem_MAS_obj_p_"   : m= new AL.Moods.fem_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_m" 	: m= new AL.Moods.fem_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_p" 	: m= new AL.Moods.fem_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_mp"	: m= new AL.Moods.fem_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_pm"	: m= new AL.Moods.fem_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_b" 	: m= new AL.Moods.fem_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_"   : m= new AL.Moods.fem_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_m" 	: m= new AL.Moods.fem_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_p" 	: m= new AL.Moods.fem_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_mp" : m= new AL.Moods.fem_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_pm" : m= new AL.Moods.fem_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_b" 	: m= new AL.Moods.fem_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_MAS_obj_p_"   : m= new AL.Moods.FEM_MAS_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_m" 	: m= new AL.Moods.FEM_MAS_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_p" 	: m= new AL.Moods.FEM_MAS_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_mp"	: m= new AL.Moods.FEM_MAS_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_pm"	: m= new AL.Moods.FEM_MAS_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_b" 	: m= new AL.Moods.FEM_MAS_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_"   : m= new AL.Moods.FEM_MAS_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_m" 	: m= new AL.Moods.FEM_MAS_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_p" 	: m= new AL.Moods.FEM_MAS_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_mp" : m= new AL.Moods.FEM_MAS_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_pm" : m= new AL.Moods.FEM_MAS_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_b" 	: m= new AL.Moods.FEM_MAS_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_mas_obj_p_"   : m= new AL.Moods.MAS_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_m" 	: m= new AL.Moods.MAS_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_p" 	: m= new AL.Moods.MAS_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_mp" : m= new AL.Moods.MAS_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_pm" : m= new AL.Moods.MAS_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_b" 	: m= new AL.Moods.MAS_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_"   : m= new AL.Moods.MAS_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_m" 	: m= new AL.Moods.MAS_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_p" 	: m= new AL.Moods.MAS_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_mp" : m= new AL.Moods.MAS_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_pm" : m= new AL.Moods.MAS_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_b" 	: m= new AL.Moods.MAS_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_mas_obj_p_"   : m= new AL.Moods.mas_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_m" 	: m= new AL.Moods.mas_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_p" 	: m= new AL.Moods.mas_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_mp" : m= new AL.Moods.mas_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_pm" : m= new AL.Moods.mas_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_b" 	: m= new AL.Moods.mas_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_"   : m= new AL.Moods.mas_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_m" 	: m= new AL.Moods.mas_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_p" 	: m= new AL.Moods.mas_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_mp" : m= new AL.Moods.mas_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_pm" : m= new AL.Moods.mas_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_b" 	: m= new AL.Moods.mas_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_mas_obj_p_"   : m= new AL.Moods.fem_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_m" 	: m= new AL.Moods.fem_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_p" 	: m= new AL.Moods.fem_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_mp" : m= new AL.Moods.fem_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_pm" : m= new AL.Moods.fem_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_b" 	: m= new AL.Moods.fem_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_"   : m= new AL.Moods.fem_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_m" 	: m= new AL.Moods.fem_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_p" 	: m= new AL.Moods.fem_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_mp" : m= new AL.Moods.fem_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_pm" : m= new AL.Moods.fem_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_b" 	: m= new AL.Moods.fem_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_mas_obj_p_"   : m= new AL.Moods.FEM_mas_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_m" 	: m= new AL.Moods.FEM_mas_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_p" 	: m= new AL.Moods.FEM_mas_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_mp" : m= new AL.Moods.FEM_mas_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_pm" : m= new AL.Moods.FEM_mas_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_b" 	: m= new AL.Moods.FEM_mas_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_"   : m= new AL.Moods.FEM_mas_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_m" 	: m= new AL.Moods.FEM_mas_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_p" 	: m= new AL.Moods.FEM_mas_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_mp" : m= new AL.Moods.FEM_mas_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_pm" : m= new AL.Moods.FEM_mas_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_b" 	: m= new AL.Moods.FEM_mas_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_fem_obj_p_"   : m= new AL.Moods.MAS_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_m" 	: m= new AL.Moods.MAS_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_p" 	: m= new AL.Moods.MAS_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_mp" : m= new AL.Moods.MAS_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_pm" : m= new AL.Moods.MAS_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_b" 	: m= new AL.Moods.MAS_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_"   : m= new AL.Moods.MAS_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_m" 	: m= new AL.Moods.MAS_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_p" 	: m= new AL.Moods.MAS_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_mp" : m= new AL.Moods.MAS_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_pm" : m= new AL.Moods.MAS_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_b" 	: m= new AL.Moods.MAS_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_fem_obj_p_"   : m= new AL.Moods.mas_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_m" 	: m= new AL.Moods.mas_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_p" 	: m= new AL.Moods.mas_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_mp" : m= new AL.Moods.mas_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_pm" : m= new AL.Moods.mas_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_b" 	: m= new AL.Moods.mas_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_"   : m= new AL.Moods.mas_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_m" 	: m= new AL.Moods.mas_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_p" 	: m= new AL.Moods.mas_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_mp" : m= new AL.Moods.mas_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_pm" : m= new AL.Moods.mas_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_b" 	: m= new AL.Moods.mas_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_fem_obj_p_"   : m= new AL.Moods.fem_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_m" 	: m= new AL.Moods.fem_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_p" 	: m= new AL.Moods.fem_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_mp" : m= new AL.Moods.fem_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_pm" : m= new AL.Moods.fem_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_b" 	: m= new AL.Moods.fem_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_"   : m= new AL.Moods.fem_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_m" 	: m= new AL.Moods.fem_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_p" 	: m= new AL.Moods.fem_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_mp" : m= new AL.Moods.fem_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_pm" : m= new AL.Moods.fem_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_b" 	: m= new AL.Moods.fem_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_fem_obj_p_"   : m= new AL.Moods.FEM_fem_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_m" 	: m= new AL.Moods.FEM_fem_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_p" 	: m= new AL.Moods.FEM_fem_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_mp" : m= new AL.Moods.FEM_fem_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_pm" : m= new AL.Moods.FEM_fem_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_b" 	: m= new AL.Moods.FEM_fem_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_"   : m= new AL.Moods.FEM_fem_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_m" 	: m= new AL.Moods.FEM_fem_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_p" 	: m= new AL.Moods.FEM_fem_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_mp" : m= new AL.Moods.FEM_fem_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_pm" : m= new AL.Moods.FEM_fem_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_b" 	: m= new AL.Moods.FEM_fem_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_FEM_obj_p_"   : m= new AL.Moods.MAS_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_m" 	: m= new AL.Moods.MAS_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_p" 	: m= new AL.Moods.MAS_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_mp" : m= new AL.Moods.MAS_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_pm" : m= new AL.Moods.MAS_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_b" 	: m= new AL.Moods.MAS_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_"   : m= new AL.Moods.MAS_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_m" 	: m= new AL.Moods.MAS_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_p" 	: m= new AL.Moods.MAS_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_mp" : m= new AL.Moods.MAS_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_pm" : m= new AL.Moods.MAS_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_b" 	: m= new AL.Moods.MAS_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_FEM_obj_p_"   : m= new AL.Moods.mas_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_m" 	: m= new AL.Moods.mas_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_p" 	: m= new AL.Moods.mas_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_mp" : m= new AL.Moods.mas_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_pm" : m= new AL.Moods.mas_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_b" 	: m= new AL.Moods.mas_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_"   : m= new AL.Moods.mas_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_m" 	: m= new AL.Moods.mas_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_p" 	: m= new AL.Moods.mas_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_mp" : m= new AL.Moods.mas_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_pm" : m= new AL.Moods.mas_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_b" 	: m= new AL.Moods.mas_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_FEM_obj_p_"   : m= new AL.Moods.fem_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_m" 	: m= new AL.Moods.fem_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_p" 	: m= new AL.Moods.fem_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_mp" : m= new AL.Moods.fem_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_pm" : m= new AL.Moods.fem_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_b" 	: m= new AL.Moods.fem_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_"   : m= new AL.Moods.fem_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_m" 	: m= new AL.Moods.fem_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_p" 	: m= new AL.Moods.fem_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_mp" : m= new AL.Moods.fem_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_pm" : m= new AL.Moods.fem_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_b" 	: m= new AL.Moods.fem_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_FEM_obj_p_"   : m= new AL.Moods.FEM_FEM_obj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_m" 	: m= new AL.Moods.FEM_FEM_obj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_p" 	: m= new AL.Moods.FEM_FEM_obj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_mp" : m= new AL.Moods.FEM_FEM_obj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_pm" : m= new AL.Moods.FEM_FEM_obj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_b" 	: m= new AL.Moods.FEM_FEM_obj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_"   : m= new AL.Moods.FEM_FEM_obj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_m" 	: m= new AL.Moods.FEM_FEM_obj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_p" 	: m= new AL.Moods.FEM_FEM_obj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_mp" : m= new AL.Moods.FEM_FEM_obj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_pm" : m= new AL.Moods.FEM_FEM_obj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_b" 	: m= new AL.Moods.FEM_FEM_obj_m_b ( ni,qua); inhMd( m,parent,arr);return m;


	case "MAS_MAS_sbj_p_"   : m= new AL.Moods.MAS_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_m"  : m= new AL.Moods.MAS_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_p"  : m= new AL.Moods.MAS_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_mp" : m= new AL.Moods.MAS_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_pm" : m= new AL.Moods.MAS_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_b"  : m= new AL.Moods.MAS_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_"   : m= new AL.Moods.MAS_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_m"  : m= new AL.Moods.MAS_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_p"  : m= new AL.Moods.MAS_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_mp" : m= new AL.Moods.MAS_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_pm" : m= new AL.Moods.MAS_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_b"  : m= new AL.Moods.MAS_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "mas_MAS_sbj_p_"   : m= new AL.Moods.mas_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_m"  : m= new AL.Moods.mas_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_p"  : m= new AL.Moods.mas_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_mp" : m= new AL.Moods.mas_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_pm" : m= new AL.Moods.mas_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_b"  : m= new AL.Moods.mas_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_"   : m= new AL.Moods.mas_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_m"  : m= new AL.Moods.mas_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_p"  : m= new AL.Moods.mas_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_mp" : m= new AL.Moods.mas_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_pm" : m= new AL.Moods.mas_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_b"  : m= new AL.Moods.mas_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr); return m;

	case "fem_MAS_sbj_p_"   : m= new AL.Moods.fem_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_m"  : m= new AL.Moods.fem_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_p"  : m= new AL.Moods.fem_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_mp" : m= new AL.Moods.fem_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_pm" : m= new AL.Moods.fem_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_b"  : m= new AL.Moods.fem_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_"   : m= new AL.Moods.fem_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_m"  : m= new AL.Moods.fem_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_p"  : m= new AL.Moods.fem_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_mp" : m= new AL.Moods.fem_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_pm" : m= new AL.Moods.fem_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_b"  : m= new AL.Moods.fem_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_MAS_sbj_p_"   : m= new AL.Moods.FEM_MAS_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_m"  : m= new AL.Moods.FEM_MAS_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_p"  : m= new AL.Moods.FEM_MAS_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_mp" : m= new AL.Moods.FEM_MAS_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_pm" : m= new AL.Moods.FEM_MAS_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_b"  : m= new AL.Moods.FEM_MAS_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_"   : m= new AL.Moods.FEM_MAS_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_m"  : m= new AL.Moods.FEM_MAS_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_p"  : m= new AL.Moods.FEM_MAS_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_mp" : m= new AL.Moods.FEM_MAS_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_pm" : m= new AL.Moods.FEM_MAS_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_b"  : m= new AL.Moods.FEM_MAS_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_mas_sbj_p_"   : m= new AL.Moods.MAS_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_m"  : m= new AL.Moods.MAS_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_p"  : m= new AL.Moods.MAS_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_mp" : m= new AL.Moods.MAS_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_pm" : m= new AL.Moods.MAS_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_b"  : m= new AL.Moods.MAS_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_"   : m= new AL.Moods.MAS_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_m"  : m= new AL.Moods.MAS_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_p"  : m= new AL.Moods.MAS_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_mp" : m= new AL.Moods.MAS_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_pm" : m= new AL.Moods.MAS_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_b"  : m= new AL.Moods.MAS_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_mas_sbj_p_"   : m= new AL.Moods.mas_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_m"  : m= new AL.Moods.mas_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_p"  : m= new AL.Moods.mas_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_mp" : m= new AL.Moods.mas_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_pm" : m= new AL.Moods.mas_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_b"  : m= new AL.Moods.mas_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_"   : m= new AL.Moods.mas_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_m"  : m= new AL.Moods.mas_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_p"  : m= new AL.Moods.mas_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_mp" : m= new AL.Moods.mas_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_pm" : m= new AL.Moods.mas_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_b"  : m= new AL.Moods.mas_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_mas_sbj_p_"   : m= new AL.Moods.fem_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_m"  : m= new AL.Moods.fem_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_p"  : m= new AL.Moods.fem_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_mp" : m= new AL.Moods.fem_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_pm" : m= new AL.Moods.fem_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_b"  : m= new AL.Moods.fem_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_"   : m= new AL.Moods.fem_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_m"  : m= new AL.Moods.fem_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_p"  : m= new AL.Moods.fem_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_mp" : m= new AL.Moods.fem_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_pm" : m= new AL.Moods.fem_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_b"  : m= new AL.Moods.fem_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_mas_sbj_p_"   : m= new AL.Moods.FEM_mas_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_m"  : m= new AL.Moods.FEM_mas_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_p"  : m= new AL.Moods.FEM_mas_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_mp" : m= new AL.Moods.FEM_mas_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_pm" : m= new AL.Moods.FEM_mas_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_b"  : m= new AL.Moods.FEM_mas_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_"   : m= new AL.Moods.FEM_mas_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_m"  : m= new AL.Moods.FEM_mas_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_p"  : m= new AL.Moods.FEM_mas_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_mp" : m= new AL.Moods.FEM_mas_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_pm" : m= new AL.Moods.FEM_mas_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_b"  : m= new AL.Moods.FEM_mas_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_fem_sbj_p_"   : m= new AL.Moods.MAS_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_m"  : m= new AL.Moods.MAS_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_p"  : m= new AL.Moods.MAS_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_mp" : m= new AL.Moods.MAS_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_pm" : m= new AL.Moods.MAS_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_b"  : m= new AL.Moods.MAS_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_"   : m= new AL.Moods.MAS_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_m"  : m= new AL.Moods.MAS_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_p"  : m= new AL.Moods.MAS_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_mp" : m= new AL.Moods.MAS_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_pm" : m= new AL.Moods.MAS_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_b"  : m= new AL.Moods.MAS_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_fem_sbj_p_"   : m= new AL.Moods.mas_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_m"  : m= new AL.Moods.mas_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_p"  : m= new AL.Moods.mas_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_mp" : m= new AL.Moods.mas_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_pm" : m= new AL.Moods.mas_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_b"  : m= new AL.Moods.mas_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_"   : m= new AL.Moods.mas_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_m"  : m= new AL.Moods.mas_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_p"  : m= new AL.Moods.mas_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_mp" : m= new AL.Moods.mas_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_pm" : m= new AL.Moods.mas_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_b"  : m= new AL.Moods.mas_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_fem_sbj_p_"   : m= new AL.Moods.fem_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_m"  : m= new AL.Moods.fem_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_p"  : m= new AL.Moods.fem_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_mp" : m= new AL.Moods.fem_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_pm" : m= new AL.Moods.fem_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_b"  : m= new AL.Moods.fem_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_"   : m= new AL.Moods.fem_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_m"  : m= new AL.Moods.fem_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_p"  : m= new AL.Moods.fem_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_mp" : m= new AL.Moods.fem_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_pm" : m= new AL.Moods.fem_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_b"  : m= new AL.Moods.fem_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_fem_sbj_p_"   : m= new AL.Moods.FEM_fem_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_m"  : m= new AL.Moods.FEM_fem_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_p"  : m= new AL.Moods.FEM_fem_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_mp" : m= new AL.Moods.FEM_fem_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_pm" : m= new AL.Moods.FEM_fem_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_b"  : m= new AL.Moods.FEM_fem_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_"   : m= new AL.Moods.FEM_fem_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_m"  : m= new AL.Moods.FEM_fem_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_p"  : m= new AL.Moods.FEM_fem_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_mp" : m= new AL.Moods.FEM_fem_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_pm" : m= new AL.Moods.FEM_fem_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_b"  : m= new AL.Moods.FEM_fem_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "MAS_FEM_sbj_p_"   : m= new AL.Moods.MAS_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_m"  : m= new AL.Moods.MAS_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_p"  : m= new AL.Moods.MAS_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_mp" : m= new AL.Moods.MAS_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_pm" : m= new AL.Moods.MAS_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_b"  : m= new AL.Moods.MAS_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_"   : m= new AL.Moods.MAS_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_m"  : m= new AL.Moods.MAS_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_p"  : m= new AL.Moods.MAS_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_mp" : m= new AL.Moods.MAS_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_pm" : m= new AL.Moods.MAS_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_b"  : m= new AL.Moods.MAS_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "mas_FEM_sbj_p_"   : m= new AL.Moods.mas_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_m"  : m= new AL.Moods.mas_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_p"  : m= new AL.Moods.mas_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_mp" : m= new AL.Moods.mas_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_pm" : m= new AL.Moods.mas_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_b"  : m= new AL.Moods.mas_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_"   : m= new AL.Moods.mas_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_m"  : m= new AL.Moods.mas_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_p"  : m= new AL.Moods.mas_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_mp" : m= new AL.Moods.mas_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_pm" : m= new AL.Moods.mas_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_b"  : m= new AL.Moods.mas_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "fem_FEM_sbj_p_"   : m= new AL.Moods.fem_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_m"  : m= new AL.Moods.fem_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_p"  : m= new AL.Moods.fem_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_mp" : m= new AL.Moods.fem_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_pm" : m= new AL.Moods.fem_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_b"  : m= new AL.Moods.fem_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_"   : m= new AL.Moods.fem_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_m"  : m= new AL.Moods.fem_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_p"  : m= new AL.Moods.fem_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_mp" : m= new AL.Moods.fem_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_pm" : m= new AL.Moods.fem_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_b"  : m= new AL.Moods.fem_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m;

	case "FEM_FEM_sbj_p_"   : m= new AL.Moods.FEM_FEM_sbj_p_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_m"  : m= new AL.Moods.FEM_FEM_sbj_p_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_p"  : m= new AL.Moods.FEM_FEM_sbj_p_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_mp" : m= new AL.Moods.FEM_FEM_sbj_p_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_pm" : m= new AL.Moods.FEM_FEM_sbj_p_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_b"  : m= new AL.Moods.FEM_FEM_sbj_p_b ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_"   : m= new AL.Moods.FEM_FEM_sbj_m_  ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_m"  : m= new AL.Moods.FEM_FEM_sbj_m_m ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_p"  : m= new AL.Moods.FEM_FEM_sbj_m_p ( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_mp" : m= new AL.Moods.FEM_FEM_sbj_m_mp( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_pm" : m= new AL.Moods.FEM_FEM_sbj_m_pm( ni,qua); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_b"  : m= new AL.Moods.FEM_FEM_sbj_m_b ( ni,qua); inhMd( m,parent,arr);return m}}
function inhMd( mD,parent,arr){ /*if( parent) { mD.parent=parent.mDs.find(o => o.ni === mD.ni)}
								if( arr) 	{ arr.push( mD)}*/}
AL.Moods={ seed : [
	"MAS_MAS_obj_m_","MAS_MAS_obj_m_m","MAS_MAS_obj_m_p","MAS_MAS_obj_m_mp","MAS_MAS_obj_m_pm","MAS_MAS_obj_m_b",
	"MAS_MAS_obj_p_","MAS_MAS_obj_p_m","MAS_MAS_obj_p_p","MAS_MAS_obj_p_mp","MAS_MAS_obj_p_pm","MAS_MAS_obj_p_b",
	"MAS_mas_obj_m_","MAS_mas_obj_m_m","MAS_mas_obj_m_p","MAS_mas_obj_m_mp","MAS_mas_obj_m_pm","MAS_mas_obj_m_b",
	"MAS_mas_obj_p_","MAS_mas_obj_p_m","MAS_mas_obj_p_p","MAS_mas_obj_p_mp","MAS_mas_obj_p_pm","MAS_mas_obj_p_b",
	"MAS_fem_obj_m_","MAS_fem_obj_m_m","MAS_fem_obj_m_p","MAS_fem_obj_m_mp","MAS_fem_obj_m_pm","MAS_fem_obj_m_b",
	"MAS_fem_obj_p_","MAS_fem_obj_p_m","MAS_fem_obj_p_p","MAS_fem_obj_p_mp","MAS_fem_obj_p_pm","MAS_fem_obj_p_b",
	"MAS_FEM_obj_m_","MAS_FEM_obj_m_m","MAS_FEM_obj_m_p","MAS_FEM_obj_m_mp","MAS_FEM_obj_m_pm","MAS_FEM_obj_m_b",
	"MAS_FEM_obj_p_","MAS_FEM_obj_p_m","MAS_FEM_obj_p_p","MAS_FEM_obj_p_mp","MAS_FEM_obj_p_pm","MAS_FEM_obj_p_b",

	"mas_MAS_obj_m_","mas_MAS_obj_m_m","mas_MAS_obj_m_p","mas_MAS_obj_m_mp","mas_MAS_obj_m_pm","mas_MAS_obj_m_b",
	"mas_MAS_obj_p_","mas_MAS_obj_p_m","mas_MAS_obj_p_p","mas_MAS_obj_p_mp","mas_MAS_obj_p_pm","mas_MAS_obj_p_b",
	"mas_mas_obj_m_","mas_mas_obj_m_m","mas_mas_obj_m_p","mas_mas_obj_m_mp","mas_mas_obj_m_pm","mas_mas_obj_m_b",
	"mas_mas_obj_p_","mas_mas_obj_p_m","mas_mas_obj_p_p","mas_mas_obj_p_mp","mas_mas_obj_p_pm","mas_mas_obj_p_b",
	"mas_fem_obj_m_","mas_fem_obj_m_m","mas_fem_obj_m_p","mas_fem_obj_m_mp","mas_fem_obj_m_pm","mas_fem_obj_m_b",
	"mas_fem_obj_p_","mas_fem_obj_p_m","mas_fem_obj_p_p","mas_fem_obj_p_mp","mas_fem_obj_p_pm","mas_fem_obj_p_b",
	"mas_FEM_obj_m_","mas_FEM_obj_m_m","mas_FEM_obj_m_p","mas_FEM_obj_m_mp","mas_FEM_obj_m_pm","mas_FEM_obj_m_b",
	"mas_FEM_obj_p_","mas_FEM_obj_p_m","mas_FEM_obj_p_p","mas_FEM_obj_p_mp","mas_FEM_obj_p_pm","mas_FEM_obj_p_b",

	"fem_MAS_obj_m_","fem_MAS_obj_m_m","fem_MAS_obj_m_p","fem_MAS_obj_m_mp","fem_MAS_obj_m_pm","fem_MAS_obj_m_b",
	"fem_MAS_obj_p_","fem_MAS_obj_p_m","fem_MAS_obj_p_p","fem_MAS_obj_p_mp","fem_MAS_obj_p_pm","fem_MAS_obj_p_b",
	"fem_mas_obj_m_","fem_mas_obj_m_m","fem_mas_obj_m_p","fem_mas_obj_m_mp","fem_mas_obj_m_pm","fem_mas_obj_m_b",
	"fem_mas_obj_p_","fem_mas_obj_p_m","fem_mas_obj_p_p","fem_mas_obj_p_mp","fem_mas_obj_p_pm","fem_mas_obj_p_b",
	"fem_fem_obj_m_","fem_fem_obj_m_m","fem_fem_obj_m_p","fem_fem_obj_m_mp","fem_fem_obj_m_pm","fem_fem_obj_m_b",
	"fem_fem_obj_p_","fem_fem_obj_p_m","fem_fem_obj_p_p","fem_fem_obj_p_mp","fem_fem_obj_p_pm","fem_fem_obj_p_b",
	"fem_FEM_obj_m_","fem_FEM_obj_m_m","fem_FEM_obj_m_p","fem_FEM_obj_m_mp","fem_FEM_obj_m_pm","fem_FEM_obj_m_b",
	"fem_FEM_obj_p_","fem_FEM_obj_p_m","fem_FEM_obj_p_p","fem_FEM_obj_p_mp","fem_FEM_obj_p_pm","fem_FEM_obj_p_b",

	"FEM_MAS_obj_m_","FEM_MAS_obj_m_m","FEM_MAS_obj_m_p","FEM_MAS_obj_m_mp","FEM_MAS_obj_m_pm","FEM_MAS_obj_m_b",
	"FEM_MAS_obj_p_","FEM_MAS_obj_p_m","FEM_MAS_obj_p_p","FEM_MAS_obj_p_mp","FEM_MAS_obj_p_pm","FEM_MAS_obj_p_b",
	"FEM_mas_obj_m_","FEM_mas_obj_m_m","FEM_mas_obj_m_p","FEM_mas_obj_m_mp","FEM_mas_obj_m_pm","FEM_mas_obj_m_b",
	"FEM_mas_obj_p_","FEM_mas_obj_p_m","FEM_mas_obj_p_p","FEM_mas_obj_p_mp","FEM_mas_obj_p_pm","FEM_mas_obj_p_b",
	"FEM_fem_obj_m_","FEM_fem_obj_m_m","FEM_fem_obj_m_p","FEM_fem_obj_m_mp","FEM_fem_obj_m_pm","FEM_fem_obj_m_b",
	"FEM_fem_obj_p_","FEM_fem_obj_p_m","FEM_fem_obj_p_p","FEM_fem_obj_p_mp","FEM_fem_obj_p_pm","FEM_fem_obj_p_b",
	"FEM_FEM_obj_m_","FEM_FEM_obj_m_m","FEM_FEM_obj_m_p","FEM_FEM_obj_m_mp","FEM_FEM_obj_m_pm","FEM_FEM_obj_m_b",
	"FEM_FEM_obj_p_","FEM_FEM_obj_p_m","FEM_FEM_obj_p_p","FEM_FEM_obj_p_mp","FEM_FEM_obj_p_pm","FEM_FEM_obj_p_b",


	"MAS_MAS_sbj_m_","MAS_MAS_sbj_m_m","MAS_MAS_sbj_m_p","MAS_MAS_sbj_m_mp","MAS_MAS_sbj_m_pm","MAS_MAS_sbj_m_b",
	"MAS_MAS_sbj_p_","MAS_MAS_sbj_p_m","MAS_MAS_sbj_p_p","MAS_MAS_sbj_p_mp","MAS_MAS_sbj_p_pm","MAS_MAS_sbj_p_b",
	"MAS_mas_sbj_m_","MAS_mas_sbj_m_m","MAS_mas_sbj_m_p","MAS_mas_sbj_m_mp","MAS_mas_sbj_m_pm","MAS_mas_sbj_m_b",
	"MAS_mas_sbj_p_","MAS_mas_sbj_p_m","MAS_mas_sbj_p_p","MAS_mas_sbj_p_mp","MAS_mas_sbj_p_pm","MAS_mas_sbj_p_b",
	"MAS_fem_sbj_m_","MAS_fem_sbj_m_m","MAS_fem_sbj_m_p","MAS_fem_sbj_m_mp","MAS_fem_sbj_m_pm","MAS_fem_sbj_m_b",
	"MAS_fem_sbj_p_","MAS_fem_sbj_p_m","MAS_fem_sbj_p_p","MAS_fem_sbj_p_mp","MAS_fem_sbj_p_pm","MAS_fem_sbj_p_b",
	"MAS_FEM_sbj_m_","MAS_FEM_sbj_m_m","MAS_FEM_sbj_m_p","MAS_FEM_sbj_m_mp","MAS_FEM_sbj_m_pm","MAS_FEM_sbj_m_b",
	"MAS_FEM_sbj_p_","MAS_FEM_sbj_p_m","MAS_FEM_sbj_p_p","MAS_FEM_sbj_p_mp","MAS_FEM_sbj_p_pm","MAS_FEM_sbj_p_b",

	"mas_MAS_sbj_m_","mas_MAS_sbj_m_m","mas_MAS_sbj_m_p","mas_MAS_sbj_m_mp","mas_MAS_sbj_m_pm","mas_MAS_sbj_m_b",
	"mas_MAS_sbj_p_","mas_MAS_sbj_p_m","mas_MAS_sbj_p_p","mas_MAS_sbj_p_mp","mas_MAS_sbj_p_pm","mas_MAS_sbj_p_b",
	"mas_mas_sbj_m_","mas_mas_sbj_m_m","mas_mas_sbj_m_p","mas_mas_sbj_m_mp","mas_mas_sbj_m_pm","mas_mas_sbj_m_b",
	"mas_mas_sbj_p_","mas_mas_sbj_p_m","mas_mas_sbj_p_p","mas_mas_sbj_p_mp","mas_mas_sbj_p_pm","mas_mas_sbj_p_b",
	"mas_fem_sbj_m_","mas_fem_sbj_m_m","mas_fem_sbj_m_p","mas_fem_sbj_m_mp","mas_fem_sbj_m_pm","mas_fem_sbj_m_b",
	"mas_fem_sbj_p_","mas_fem_sbj_p_m","mas_fem_sbj_p_p","mas_fem_sbj_p_mp","mas_fem_sbj_p_pm","mas_fem_sbj_p_b",
	"mas_FEM_sbj_m_","mas_FEM_sbj_m_m","mas_FEM_sbj_m_p","mas_FEM_sbj_m_mp","mas_FEM_sbj_m_pm","mas_FEM_sbj_m_b",
	"mas_FEM_sbj_p_","mas_FEM_sbj_p_m","mas_FEM_sbj_p_p","mas_FEM_sbj_p_mp","mas_FEM_sbj_p_pm","mas_FEM_sbj_p_b",

	"fem_MAS_sbj_m_","fem_MAS_sbj_m_m","fem_MAS_sbj_m_p","fem_MAS_sbj_m_mp","fem_MAS_sbj_m_pm","fem_MAS_sbj_m_b",
	"fem_MAS_sbj_p_","fem_MAS_sbj_p_m","fem_MAS_sbj_p_p","fem_MAS_sbj_p_mp","fem_MAS_sbj_p_pm","fem_MAS_sbj_p_b",
	"fem_mas_sbj_m_","fem_mas_sbj_m_m","fem_mas_sbj_m_p","fem_mas_sbj_m_mp","fem_mas_sbj_m_pm","fem_mas_sbj_m_b",
	"fem_mas_sbj_p_","fem_mas_sbj_p_m","fem_mas_sbj_p_p","fem_mas_sbj_p_mp","fem_mas_sbj_p_pm","fem_mas_sbj_p_b",
	"fem_fem_sbj_m_","fem_fem_sbj_m_m","fem_fem_sbj_m_p","fem_fem_sbj_m_mp","fem_fem_sbj_m_pm","fem_fem_sbj_m_b",
	"fem_fem_sbj_p_","fem_fem_sbj_p_m","fem_fem_sbj_p_p","fem_fem_sbj_p_mp","fem_fem_sbj_p_pm","fem_fem_sbj_p_b",
	"fem_FEM_sbj_m_","fem_FEM_sbj_m_m","fem_FEM_sbj_m_p","fem_FEM_sbj_m_mp","fem_FEM_sbj_m_pm","fem_FEM_sbj_m_b",
	"fem_FEM_sbj_p_","fem_FEM_sbj_p_m","fem_FEM_sbj_p_p","fem_FEM_sbj_p_mp","fem_FEM_sbj_p_pm","fem_FEM_sbj_p_b",

	"FEM_MAS_sbj_m_","FEM_MAS_sbj_m_m","FEM_MAS_sbj_m_p","FEM_MAS_sbj_m_mp","FEM_MAS_sbj_m_pm","FEM_MAS_sbj_m_b",
	"FEM_MAS_sbj_p_","FEM_MAS_sbj_p_m","FEM_MAS_sbj_p_p","FEM_MAS_sbj_p_mp","FEM_MAS_sbj_p_pm","FEM_MAS_sbj_p_b",
	"FEM_mas_sbj_m_","FEM_mas_sbj_m_m","FEM_mas_sbj_m_p","FEM_mas_sbj_m_mp","FEM_mas_sbj_m_pm","FEM_mas_sbj_m_b",
	"FEM_mas_sbj_p_","FEM_mas_sbj_p_m","FEM_mas_sbj_p_p","FEM_mas_sbj_p_mp","FEM_mas_sbj_p_pm","FEM_mas_sbj_p_b",
	"FEM_fem_sbj_m_","FEM_fem_sbj_m_m","FEM_fem_sbj_m_p","FEM_fem_sbj_m_mp","FEM_fem_sbj_m_pm","FEM_fem_sbj_m_b",
	"FEM_fem_sbj_p_","FEM_fem_sbj_p_m","FEM_fem_sbj_p_p","FEM_fem_sbj_p_mp","FEM_fem_sbj_p_pm","FEM_fem_sbj_p_b",
	"FEM_FEM_sbj_m_","FEM_FEM_sbj_m_m","FEM_FEM_sbj_m_p","FEM_FEM_sbj_m_mp","FEM_FEM_sbj_m_pm","FEM_FEM_sbj_m_b",
	"FEM_FEM_sbj_p_","FEM_FEM_sbj_p_m","FEM_FEM_sbj_p_p","FEM_FEM_sbj_p_mp","FEM_FEM_sbj_p_pm","FEM_FEM_sbj_p_b"],

	MAS_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Peaceful Object Man")}, 	
	MAS_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Caring Object Man")}, 
	MAS_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Playful Object Man")},
	MAS_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Playfully Caring Object Man")}, 
	MAS_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Carefully Playful Object Man")},
	MAS_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Caring & Playful Object Man")},
	MAS_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Hostile Object Man")},
	MAS_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escaping Object Man")}, 
	MAS_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Fighting Object Man")},
	MAS_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Fightingly Escaping Object Man")},
	MAS_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escapingly Fighting Object Man")},
	MAS_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, true, "Escaping & Fighting Object Man")},

	MAS_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Peaceful Boy")}, 	
	MAS_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Caring Boy")}, 
	MAS_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Playful Boy")},
	MAS_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Playfully Caring Boy")}, 
	MAS_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Carefully Playful Boy")},
	MAS_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Caring & Playful Boy")},
	MAS_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Hostile Boy")},
	MAS_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Escaping Boy")}, 
	MAS_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Fighting Boy")},
	MAS_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Fightingly Escaping Boy")},
	MAS_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Escapingly Fighting Boy")},
	MAS_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,true, "Object Man as Escaping & Fighting Boy")},

	MAS_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Peaceful Girl")}, 	
	MAS_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Caring Girl")}, 
	MAS_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Playful Girl")},
	MAS_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Playfully Caring Girl")}, 
	MAS_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Carefully Playful Girl")},
	MAS_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Caring & Playful Girl")},
	MAS_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Hostile Girl")},
	MAS_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Escaping Girl")}, 
	MAS_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Fighting Girl")},
	MAS_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Fightingly Escaping Girl")},
	MAS_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Escapingly Fighting Girl")},
	MAS_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,true, "Object Man as Escaping & Fighting Girl")},

	MAS_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Peaceful Woman")}, 	
	MAS_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Caring Woman")}, 
	MAS_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Playful Woman")},
	MAS_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Playfully Caring Woman")}, 
	MAS_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Carefully Playful Woman")},
	MAS_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Caring & Playful Woman")},
	MAS_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Hostile Woman")},
	MAS_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Escaping Woman")}, 
	MAS_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Fighting Woman")},
	MAS_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Fightingly Escaping Woman")},
	MAS_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Escapingly Fighting Woman")},
	MAS_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, true, "Object Man as Escaping & Fighting Woman")},

	mas_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Peaceful Man")},
	mas_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Caring Man")},
	mas_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Playful Man")},
	mas_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Playfully Caring Man")},
	mas_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Carefully Playful Man")},
	mas_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Caring & Playful Man")},
	mas_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Hostile Man")},
	mas_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Escaping Man")},
	mas_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Fighting Man")},
	mas_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Fightingly Escaping Man")},
	mas_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Escapingly Fighting Man")},
	mas_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, true, "Object Boy as Escaping & Fighting Man")},

	mas_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Peaceful Object Boy")},
	mas_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Caring Object Boy")},
	mas_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Playful Object Boy")},
	mas_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Playfully Caring Object Boy")},
	mas_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Carefully Playful Object Boy")},
	mas_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Caring & Playful Object Boy")},
	mas_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Hostile Object Boy")},
	mas_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escaping Object Boy")},
	mas_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Fighting Object Boy")},
	mas_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Fightingly Escaping Object Boy")},
	mas_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escapingly Fighting Object Boy")},
	mas_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,true, "Escaping & Fighting Object Boy")},

	mas_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Peaceful Girl")},
	mas_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Caring Girl")},
	mas_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Playful Girl")},
	mas_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Playfully Caring Girl")},
	mas_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Carefully Playful Girl")},
	mas_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Caring & Playful Girl")},
	mas_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Hostile Girl")},
	mas_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Escaping Girl")},
	mas_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Fighting Girl")},
	mas_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Fightingly Escaping Girl")},
	mas_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Escapingly Fighting Girl")},
	mas_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,true, "Object Boy as Escaping & Fighting Girl")},

	mas_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Peaceful Woman")},
	mas_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Caring Woman")},
	mas_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Playful Woman")},
	mas_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Playfully Caring Woman")},
	mas_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Carefully Playful Woman")},
	mas_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Caring & Playful Woman")},
	mas_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Hostile Woman")},
	mas_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Escaping Woman")},
	mas_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Fighting Woman")},
	mas_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Fightingly Escaping Woman")},
	mas_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Escapingly Fighting Woman")},
	mas_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, true, "Object Boy as Escaping & Fighting Woman")},

	fem_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Peaceful Man")},
	fem_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Caring Man")},
	fem_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Playful Man")},
	fem_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Playfully Caring Man")},
	fem_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Carefully Playful Man")},
	fem_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Caring & Playful Man")},
	fem_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Hostile Man")},
	fem_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Escaping Man")},
	fem_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Fighting Man")},
	fem_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Fightingly Escaping Man")},
	fem_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Escapingly Fighting Man")},
	fem_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, true, "Object Girl as Escaping & Fighting Man")},

	fem_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Peaceful Boy")},
	fem_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Caring Boy")},
	fem_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Playful Boy")},
	fem_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Playfully Caring Boy")},
	fem_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Carefully Playful Boy")},
	fem_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Caring & Playful Boy")},
	fem_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Hostile Boy")},
	fem_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Escaping Boy")},
	fem_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Fighting Boy")},
	fem_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Fightingly Escaping Boy")},
	fem_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Escapingly Fighting Boy")},
	fem_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,true, "Object Girl as Escaping & Fighting Boy")},

	fem_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Peaceful Object Girl")},
	fem_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Caring Object Girl")},
	fem_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Playful Object Girl")},
	fem_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Playfully Caring Object Girl")},
	fem_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Carefully Playful Object Girl")},
	fem_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Caring & Playful Object Girl")},
	fem_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Hostile Object Girl")},
	fem_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escaping Object Girl")},
	fem_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Fighting Object Girl")},
	fem_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Fightingly Escaping Object Girl")},
	fem_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escapingly Fighting Object Girl")},
	fem_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,true, "Escaping & Fighting Object Girl")},

	fem_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Peaceful Woman")},
	fem_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Caring Woman")},
	fem_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Playful Woman")},
	fem_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Playfully Caring Woman")},
	fem_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Carefully Playful Woman")},
	fem_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Caring & Playful Woman")},
	fem_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Hostile Woman")},
	fem_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Escaping Woman")},
	fem_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Fighting Woman")},
	fem_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Fightingly Escaping Woman")},
	fem_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Escapingly Fighting Woman")},
	fem_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, true, "Object Girl as Escaping & Fighting Woman")},

	FEM_MAS_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Peaceful Man")},
	FEM_MAS_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Caring Man")},
	FEM_MAS_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Playful Man")},
	FEM_MAS_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Playfully Caring Man")},
	FEM_MAS_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Carefully Playful Man")},
	FEM_MAS_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Caring & Playful Man")},
	FEM_MAS_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Hostile Man")},
	FEM_MAS_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Escaping Man")},
	FEM_MAS_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Fighting Man")},
	FEM_MAS_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Fightingly Escaping Man")},
	FEM_MAS_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Escapingly Fighting Man")},
	FEM_MAS_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, true, "Object Woman as Escaping & Fighting Man")},

	FEM_mas_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Peaceful Boy")},
	FEM_mas_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Caring Boy")},
	FEM_mas_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Playful Boy")},
	FEM_mas_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Playfully Caring Boy")},
	FEM_mas_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Carefully Playful Boy")},
	FEM_mas_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Caring & Playful Boy")},
	FEM_mas_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Hostile Boy")},
	FEM_mas_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Escaping Boy")},
	FEM_mas_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Fighting Boy")},
	FEM_mas_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Fightingly Escaping Boy")},
	FEM_mas_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Escapingly Fighting Boy")},
	FEM_mas_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,true, "Object Woman as Escaping & Fighting Boy")},

	FEM_fem_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Peaceful Girl")},
	FEM_fem_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Caring Girl")},
	FEM_fem_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Playful Girl")},
	FEM_fem_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Playfully Caring Girl")},
	FEM_fem_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Carefully Playful Girl")},
	FEM_fem_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Caring & Playful Girl")},
	FEM_fem_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Hostile Girl")},
	FEM_fem_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Escaping Girl")},
	FEM_fem_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Fighting Girl")},
	FEM_fem_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Fightingly Escaping Girl")},
	FEM_fem_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Escapingly Fighting Girl")},
	FEM_fem_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,true, "Object Woman as Escaping & Fighting Girl")},

	FEM_FEM_obj_p_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Peaceful Object Woman")},
	FEM_FEM_obj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Caring Object Woman")},
	FEM_FEM_obj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Playful Object Woman")},
	FEM_FEM_obj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Playfully Caring Object Woman")},
	FEM_FEM_obj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Carefully Playful Object Woman")},
	FEM_FEM_obj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Caring & Playful Object Woman")},
	FEM_FEM_obj_m_ 	:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Hostile Object Woman")},
	FEM_FEM_obj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escaping Object Woman")},
	FEM_FEM_obj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Fighting Object Woman")},
	FEM_FEM_obj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Fightingly Escaping Object Woman")},
	FEM_FEM_obj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escapingly Fighting Object Woman")},
	FEM_FEM_obj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, true, "Escaping & Fighting Object Woman")},


	MAS_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Peaceful Subject Man")}, 	
	MAS_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Caring Subject Man")}, 
	MAS_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Playful Subject Man")},
	MAS_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Playfully Caring Subject Man")}, 
	MAS_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Carefully Playful Subject Man")},
	MAS_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Caring & Playful Subject Man")},
	MAS_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Hostile Subject Man")},
	MAS_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escaping Subject Man")}, 
	MAS_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Fighting Subject Man")},
	MAS_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Fightingly Escaping Subject Man")},
	MAS_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escapingly Fighting Subject Man")},
	MAS_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, true, false,"Escaping & Fighting Subject Man")},

	MAS_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Peaceful Boy")}, 	
	MAS_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Caring Boy")}, 
	MAS_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Playful Boy")},
	MAS_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Playfully Caring Boy")}, 
	MAS_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Carefully Playful Boy")},
	MAS_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Caring & Playful Boy")},
	MAS_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Hostile Boy")},
	MAS_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Escaping Boy")}, 
	MAS_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Fighting Boy")},
	MAS_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Fightingly Escaping Boy")},
	MAS_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Escapingly Fighting Boy")},
	MAS_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, true, false,false,"Subject Man as Escaping & Fighting Boy")},

	MAS_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Peaceful Girl")}, 	
	MAS_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Caring Girl")}, 
	MAS_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Playful Girl")},
	MAS_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Playfully Caring Girl")}, 
	MAS_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Carefully Playful Girl")},
	MAS_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Caring & Playful Girl")},
	MAS_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Hostile Girl")},
	MAS_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Escaping Girl")}, 
	MAS_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Fighting Girl")},
	MAS_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Fightingly Escaping Girl")},
	MAS_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Escapingly Fighting Girl")},
	MAS_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,false,false,"Subject Man as Escaping & Fighting Girl")},

	MAS_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Peaceful Woman")}, 	
	MAS_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Caring Woman")}, 
	MAS_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Playful Woman")},
	MAS_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Playfully Caring Woman")}, 
	MAS_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Carefully Playful Woman")},
	MAS_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Caring & Playful Woman")},
	MAS_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Hostile Woman")},
	MAS_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Escaping Woman")}, 
	MAS_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Fighting Woman")},
	MAS_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Fightingly Escaping Woman")},
	MAS_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Escapingly Fighting Woman")},
	MAS_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, true, false,true, false,"Subject Man as Escaping & Fighting Woman")},

	mas_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Peaceful Man")},
	mas_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Caring Man")},
	mas_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Playful Man")},
	mas_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Playfully Caring Man")},
	mas_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Carefully Playful Man")},
	mas_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Caring & Playful Man")},
	mas_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Hostile Man")},
	mas_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Escaping Man")},
	mas_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Fighting Man")},
	mas_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Fightingly Escaping Man")},
	mas_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Escapingly Fighting Man")},
	mas_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, true, false,"Subject Boy as Escaping & Fighting Man")},

	mas_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Peaceful Subject Boy")},
	mas_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Caring Subject Boy")},
	mas_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Playful Subject Boy")},
	mas_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Playfully Caring Subject Boy")},
	mas_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Carefully Playful Subject Boy")},
	mas_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Caring & Playful Subject Boy")},
	mas_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Hostile Subject Boy")},
	mas_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escaping Subject Boy")},
	mas_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Fighting Subject Boy")},
	mas_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Fightingly Escaping Subject Boy")},
	mas_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escapingly Fighting Subject Boy")},
	mas_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,true, false,false,"Escaping & Fighting Subject Boy")},

	mas_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Peaceful Girl")},
	mas_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Caring Girl")},
	mas_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Playful Girl")},
	mas_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Playfully Caring Girl")},
	mas_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Carefully Playful Girl")},
	mas_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Caring & Playful Girl")},
	mas_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Hostile Girl")},
	mas_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Escaping Girl")},
	mas_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Fighting Girl")},
	mas_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Fightingly Escaping Girl")},
	mas_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Escapingly Fighting Girl")},
	mas_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,false,false,"Subject Boy as Escaping & Fighting Girl")},

	mas_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Peaceful Woman")},
	mas_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Caring Woman")},
	mas_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Playful Woman")},
	mas_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Playfully Caring Woman")},
	mas_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Carefully Playful Woman")},
	mas_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Caring & Playful Woman")},
	mas_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Hostile Woman")},
	mas_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Escaping Woman")},
	mas_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Fighting Woman")},
	mas_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Fightingly Escaping Woman")},
	mas_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Escapingly Fighting Woman")},
	mas_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,true, false,false,true, false,"Subject Boy as Escaping & Fighting Woman")},

	fem_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Peaceful Man")},
	fem_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Caring Man")},
	fem_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Playful Man")},
	fem_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Playfully Caring Man")},
	fem_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Carefully Playful Man")},
	fem_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Caring & Playful Man")},
	fem_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Hostile Man")},
	fem_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Escaping Man")},
	fem_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Fighting Man")},
	fem_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Fightingly Escaping Man")},
	fem_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Escapingly Fighting Man")},
	fem_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, true, false,"Subject Girl as Escaping & Fighting Man")},

	fem_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Peaceful Boy")},
	fem_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Caring Boy")},
	fem_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Playful Boy")},
	fem_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Playfully Caring Boy")},
	fem_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Carefully Playful Boy")},
	fem_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Caring & Playful Boy")},
	fem_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Hostile Boy")},
	fem_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Escaping Boy")},
	fem_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Fighting Boy")},
	fem_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Fightingly Escaping Boy")},
	fem_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Escapingly Fighting Boy")},
	fem_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,true, false,false,"Subject Girl as Escaping & Fighting Boy")},

	fem_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Peaceful Subject Girl")},
	fem_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Caring Subject Girl")},
	fem_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Playful Subject Girl")},
	fem_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Playfully Caring Subject Girl")},
	fem_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Carefully Playful Subject Girl")},
	fem_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Caring & Playful Subject Girl")},
	fem_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Hostile Subject Girl")},
	fem_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escaping Subject Girl")},
	fem_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Fighting Subject Girl")},
	fem_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Fightingly Escaping Subject Girl")},
	fem_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escapingly Fighting Subject Girl")},
	fem_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,false,false,"Escaping & Fighting Subject Girl")},

	fem_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Peaceful Woman")},
	fem_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Caring Woman")},
	fem_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Playful Woman")},
	fem_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Playfully Caring Woman")},
	fem_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Carefully Playful Woman")},
	fem_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Caring & Playful Woman")},
	fem_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Hostile Woman")},
	fem_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Escaping Woman")},
	fem_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Fighting Woman")},
	fem_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Fightingly Escaping Woman")},
	fem_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Escapingly Fighting Woman")},
	fem_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,false,false,true, false,"Subject Girl as Escaping & Fighting Woman")},

	FEM_MAS_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Peaceful Man")},
	FEM_MAS_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Caring Man")},
	FEM_MAS_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Playful Man")},
	FEM_MAS_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Playfully Caring Man")},
	FEM_MAS_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Carefully Playful Man")},
	FEM_MAS_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Caring & Playful Man")},
	FEM_MAS_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Hostile Man")},
	FEM_MAS_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Escaping Man")},
	FEM_MAS_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Fighting Man")},
	FEM_MAS_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Fightingly Escaping Man")},
	FEM_MAS_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Escapingly Fighting Man")},
	FEM_MAS_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, true, false,"Subject Woman as Escaping & Fighting Man")},

	FEM_mas_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Peaceful Boy")},
	FEM_mas_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Caring Boy")},
	FEM_mas_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Playful Boy")},
	FEM_mas_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Playfully Caring Boy")},
	FEM_mas_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Carefully Playful Boy")},
	FEM_mas_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Caring & Playful Boy")},
	FEM_mas_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Hostile Boy")},
	FEM_mas_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Escaping Boy")},
	FEM_mas_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Fighting Boy")},
	FEM_mas_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Fightingly Escaping Boy")},
	FEM_mas_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Escapingly Fighting Boy")},
	FEM_mas_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, true, false,false,"Subject Woman as Escaping & Fighting Boy")},

	FEM_fem_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Peaceful Girl")},
	FEM_fem_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Caring Girl")},
	FEM_fem_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Playful Girl")},
	FEM_fem_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Playfully Caring Girl")},
	FEM_fem_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Carefully Playful Girl")},
	FEM_fem_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Caring & Playful Girl")},
	FEM_fem_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Hostile Girl")},
	FEM_fem_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Escaping Girl")},
	FEM_fem_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Fighting Girl")},
	FEM_fem_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Fightingly Escaping Girl")},
	FEM_fem_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Escapingly Fighting Girl")},
	FEM_fem_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,false,false,"Subject Woman as Escaping & Fighting Girl")},

	FEM_FEM_sbj_p_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Peaceful Subject Woman")},
	FEM_FEM_sbj_p_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Caring Subject Woman")},
	FEM_FEM_sbj_p_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Playful Subject Woman")},
	FEM_FEM_sbj_p_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Playfully Caring Subject Woman")},
	FEM_FEM_sbj_p_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Carefully Playful Subject Woman")},
	FEM_FEM_sbj_p_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Caring & Playful Subject Woman")},
	FEM_FEM_sbj_m_  :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Hostile Subject Woman")},
	FEM_FEM_sbj_m_m :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escaping Subject Woman")},
	FEM_FEM_sbj_m_p :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Fighting Subject Woman")},
	FEM_FEM_sbj_m_mp:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Fightingly Escaping Subject Woman")},
	FEM_FEM_sbj_m_pm:function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escapingly Fighting Subject Woman")},
	FEM_FEM_sbj_m_b :function(ni,qua){mkMood2(this,ni,qua,false,true, false,true, false,"Escaping & Fighting Subject Woman")}}
function getObjByNi( ni,from){ var r =from.find(o => ni===o.ni); return r}
function mkMood2(o,ni,qua,FEM,KID,fem,kid,obj,nI){
	o.ni=ni; o.nI=nI; o.gForm =null; o.bForm =null; o.obj =obj; o.vQs=qua.vQs;
	if( FEM===fem && !( KID && !kid)){ o.stereo  =true} 	else{ o.stereo  =false}
	if( FEM!==fem &&  KID===kid) 		{ o.pureBad =true} 	else{ o.pureBad =false}
	if( FEM!==fem &&  KID!==kid) 		{ o.invMor  =true} 	else{ o.invMor  =false}
	if( FEM===fem &&  KID && !kid) 	{ o.pureGood=true} 	else{ o.pureGood=false}
	o.sex= ni.substr( 0,ni.indexOf( '_')); 					o.sex= getObjByNi( o.sex,AT.sXs);
	o.gnd= ni.split( '_')[1].substr( 0,ni.indexOf( '_'));	o.gnd= getObjByNi( o.gnd,AT.gNs);
	o.pM = ni.substr( ni.indexOf( '_') +1)
		.substr( ni.indexOf( '_') +1)
			.substr( ni.indexOf( '_')); o.pM ="G"+o.pM;		o.pM = getObjByNi( o.pM, AT.pMs);
	o =initModalForm( 		o, o.gnd.ni);
	o =manipulateModalForm( o);
	o =interpretModalForm( 	o);
	o =interpretMosaicForm( o);
	o.bG = mkModalXYPlane( 	o, AL.sQr);
	evalModalXYPlane( 		o, AL.sQr, AL.vQr);
	o.xY = mkMosaicXYPlane( o, AL.sQr, obj);
	evalMosaicXYPlane(  	o, AL.sQr, AL.vQr, o.gnd.fem)}
function initModalForm(m,ni){ switch(ni){ 
	case "MAS": m.gForm = ['a','b','c']; m.bForm =["a'","c'","b'"]; break;
	case "mas": m.gForm = ['a','b','c']; m.bForm =["c'","a'","b'"]; break;
	case "fem": m.gForm = ['b','a','c']; m.bForm =["a'","c'","b'"]; break;
	case "FEM": m.gForm = ['c','b','a']; m.bForm =["a'","c'","b'"]}return m}
function modalFlip(mf,f){ var ret=[];
	mf.forEach( function(mf){ ret.push(mf)});
	switch(f) { case 1: ret[0]=mf[1]; ret[1]=mf[0]; break;
				case 2: ret[1]=mf[2]; ret[2]=mf[1]; break;
				case 3: ret[0]=mf[2]; ret[2]=mf[0]} return ret}
function turnModalFormBad(m){ for(let n=0; n < 3; n++){
	if(m.gForm[n]==="a" ){ m.gForm[n]="c'"}if(m.gForm[n]==="c" ){m.gForm[n]="a'"}}}
function turnModalFormGood(m){ for(let n=0; n < 3; n++){
	if(m.bForm[n]==="a'"){ m.bForm[n] ="c"}if(m.bForm[n]==="c'"){m.bForm[n] ="a" }}}
function manipulateModalForm(m){
	if(!m.pM.head){ m.gForm =modalFlip(m.gForm,2)}
	for(let n=0; n < m.pM.tail.length; n++){
		switch(m.pM.tail[n]){  	case "-": 	m.bForm =modalFlip(m.bForm,1); break;
								case "+": 	m.bForm =modalFlip(m.bForm,2); break;
								case "x": 	m.bForm =modalFlip(m.bForm,1);
								 			m.bForm =modalFlip(m.bForm,2);
								 			m.bForm =modalFlip(m.bForm,1)}}
	if(m.pureBad) { turnModalFormBad(m)}
	if(m.invMor)  { turnModalFormBad(m); turnModalFormGood(m)}
	if(m.pureGood){ turnModalFormGood(m)}
	return m}
function interpretModalForm(m){ var b=""; var g="";
	m.bForm.forEach( function(s){ b=b+s});
	m.gForm.forEach( function(s){ g=g+s});
	switch(b){case "a'b'c'":m.bMF = "α',β',γ'";		m.bAriV = "-X"; 		m.bAriK = "X - Y";		break;
			  case "a'c'b'":m.bMF = "α',γ',β'";		m.bAriV = "X - Y"; 		m.bAriK = "-X";			break;
			  case "b'a'c'":m.bMF = "β',α',γ'";		m.bAriV = "-X"; 		m.bAriK = "Y - r";		break;
			  case "b'c'a'":m.bMF = "β',γ',α'";		m.bAriV = "X - Y"; 		m.bAriK = "Y - r";		break;
			  case "c'a'b'":m.bMF = "γ',α',β'";		m.bAriV = "Y - r"; 		m.bAriK = "-X";			break;
			  case "c'b'a'":m.bMF = "γ',β',α'";		m.bAriV = "Y - r"; 		m.bAriK = "X - Y";		break;
			  case "ab'c": 	m.bMF = "α,β',γ";		m.bAriV = "X"; 			m.bAriK = "X - Y";		break;
			  case "acb'": 	m.bMF = "α,γ,β'";		m.bAriV = "Y - X"; 		m.bAriK = "-X";			break;
			  case "b'ac": 	m.bMF = "β',α,γ";		m.bAriV = "X"; 			m.bAriK = "Y - r";		break;
			  case "b'ca": 	m.bMF = "β',γ,α";		m.bAriV = "Y - X"; 		m.bAriK = "Y - r";		break;
			  case "cab'": 	m.bMF = "γ,α,β'";		m.bAriV = "r - Y"; 		m.bAriK = "-X";			break;
			  case "cb'a": 	m.bMF = "γ,β',α";		m.bAriV = "r - Y"; 		m.bAriK = "X - Y"}
	switch(g){case 'abc': 	m.gMF = "α,β,γ"; 		m.gAriV = "Y"; 			m.gAriK = "X - Y"; 		break;
			  case 'acb': 	m.gMF = "α,γ,β"; 		m.gAriV = "X - Y"; 		m.gAriK = "Y"; 			break;
			  case 'bac': 	m.gMF = "β,α,γ";		m.gAriV = "Y"; 			m.gAriK = "r - X";		break;
			  case 'bca': 	m.gMF = "β,γ,α";		m.gAriV = "X - Y"; 		m.gAriK = "r - X";		break;
			  case 'cab': 	m.gMF = "γ,α,β";		m.gAriV = "r - X"; 		m.gAriK = "Y";			break;
			  case 'cba': 	m.gMF = "γ,β,α";		m.gAriV = "r - X"; 		m.gAriK = "X - Y";		break;
			  case "a'bc'": m.gMF = "α',β,γ'"; 		m.gAriV = "-Y"; 		m.gAriK = "X - Y"; 		break;
			  case "a'c'b": m.gMF = "α',γ',β"; 		m.gAriV = "Y - X"; 		m.gAriK = "Y"; 			break;
			  case "ba'c'": m.gMF = "β,α',γ'";		m.gAriV = "-Y"; 		m.gAriK = "r - X";		break;
			  case "bc'a'": m.gMF = "β,γ',α'";		m.gAriV = "Y - X"; 		m.gAriK = "r - X";		break;
			  case "c'a'b": m.gMF = "γ',α',β";		m.gAriV = "X - r"; 		m.gAriK = "Y";			break;
			  case "c'ba'": m.gMF = "γ',β,α'";		m.gAriV = "X - r"; 		m.gAriK = "X - Y"}
	m.bFormL =m.bForm.length; m.bFormLs=[]; m.bForm.forEach( function(o){ m.bFormLs.push( o.length)});
	m.gFormL =m.gForm.length; m.gFormLs=[]; m.gForm.forEach( function(o){ m.gFormLs.push( o.length)});
	if( stereoSyms( m.bForm, m.bFormL, m.gForm, m.gFormL)) { m.sSym=true} else{ m.sSym=false}
	if( complexSyms(m.bForm, m.bFormL, m.bFormLs, m.gForm, m.gFormL, m.gFormLs)) { m.cSym=true} else{ m.cSym=false}
	return m}
function stereoSym(b,g){ g+="'"; if(g===b){ return true} else{ return false}}
function stereoSyms(bForm,bLen,gForm,gLen){
	if( bLen !==gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!stereoSym( bForm[n], gForm[m])){ return false}}}
		return true}}
function complexSym( bF1, bL1, gF1, gL1){
	if((bF1 ==="b" && gF1 ==="b'")||(bF1 ==="b'" && gF1 ==="b")){ return true}
	if((bL1 !==gL1)&&
		(((bF1 ==="a")&&(gF2 ==="a'"))||((bF1 ==="a'")&&(gF2 ==="a"))||
			((bF1 ==="c")&&(gF2 ==="c'"))||((bF1 ==="c'")&&(gF2 ==="c")))){ return true}
	else{ return false}}
function complexSyms(bForm,bLen,gForm,gLen){
	if( bLen !==gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!complexSym( bForm[n], bFormLs[n], gForm[m], gFormLs[m])){ return false}}}
		return true}}

/*
similarity determination algorithm for vQs:
completely different f.ex. wisdom vs dysphoria
least similar f.ex. wisdom vs belief, epiphany vs form, body vs beauty, norm vs success
less similar f.ex wisdom vs epiphany
rom and cla similarity separately
*/

function interpretMosaicForm(m){ 
	if( m.gnd.fem){ 
		m.xForm=m.gForm; m.yForm=m.bForm;
		m.xMF=m.gMF; m.yMF=m.bMF; m.xAriV=m.gAriV; m.xAriK=m.gAriK; m.yAriV=m.bAriV; m.yAriK=m.bAriK}
	else{
		var x=""; var y="";
		m.xForm=m.bForm; m.yForm=m.gForm;
		m.yForm.forEach( function(s){ y=y+s});
		m.xForm.forEach( function(s){ x=x+s});
		switch(y){case "abc": 	m.yMF = "α,β,γ"; 		m.yAriV = "X"; 			m.yAriK = "Y - X"; 		break;
				  case "acb": 	m.yMF = "α,γ,β"; 		m.yAriV = "Y - X"; 		m.yAriK = "X"; 			break;
				  case "bac": 	m.yMF = "β,α,γ";		m.yAriV = "X"; 			m.yAriK = "r - Y";		break;
				  case "bca": 	m.yMF = "β,γ,α";		m.yAriV = "Y - X"; 		m.yAriK = "r - Y";		break;
				  case "cab": 	m.yMF = "γ,α,β";		m.yAriV = "r - Y"; 		m.yAriK = "X";			break;
				  case "cba": 	m.yMF = "γ,β,α";		m.yAriV = "r - Y"; 		m.yAriK = "Y - X";		break;
				  case "a'bc'": m.yMF = "α',β,γ'"; 		m.yAriV = "-X"; 		m.yAriK = "Y - X"; 		break;
				  case "a'c'b": m.yMF = "α',γ',β"; 		m.yAriV = "X - Y"; 		m.yAriK = "X"; 			break;
				  case "ba'c'": m.yMF = "β,α',γ'";		m.yAriV = "-X"; 		m.yAriK = "r - Y";		break;
				  case "bc'a'": m.yMF = "β,γ',α'";		m.yAriV = "X - Y"; 		m.yAriK = "r - Y";		break;
				  case "c'a'b": m.yMF = "γ',α',β";		m.yAriV = "Y - r"; 		m.yAriK = "X";			break;
				  case "c'ba'": m.yMF = "γ',β,α'";		m.yAriV = "Y - r"; 		m.yAriK = "Y - X";}
		switch(x){case "a'b'c'":m.xMF = "α',β',γ'";		m.xAriV = "-Y"; 		m.xAriK = "Y - X";		break;
				  case "a'c'b'":m.xMF = "α',γ',β'";		m.xAriV = "Y - X"; 		m.xAriK = "-Y";			break;
				  case "b'a'c'":m.xMF = "β',α',γ'";		m.xAriV = "-Y"; 		m.xAriK = "X - r";		break;
				  case "b'c'a'":m.xMF = "β',γ',α'";		m.xAriV = "Y - X"; 		m.xAriK = "X - r";		break;
				  case "c'a'b'":m.xMF = "γ',α',β'";		m.xAriV = "X - r"; 		m.xAriK = "-Y";			break;
				  case "c'b'a'":m.xMF = "γ',β',α'";		m.xAriV = "X - r"; 		m.xAriK = "Y - X";		break;
				  case "ab'c":	m.xMF = "α,β',γ";		m.xAriV = "Y"; 			m.xAriK = "Y - X";		break;
				  case "acb'": 	m.xMF = "α,γ,β'";		m.xAriV = "X - Y"; 		m.xAriK = "-Y";			break;
				  case "b'ac": 	m.xMF = "β',α,γ";		m.xAriV = "Y"; 			m.xAriK = "X - r";		break;
				  case "b'ca": 	m.xMF = "β',γ,α";		m.xAriV = "X - Y"; 		m.xAriK = "X - r";		break;
				  case "cab'": 	m.xMF = "γ,α,β'";		m.xAriV = "r - X"; 		m.xAriK = "-Y";			break;
				  case "cb'a": 	m.xMF = "γ,β',α";		m.xAriV = "r - X"; 		m.xAriK = "Y - X";}}return m}


function precalcPrimalMoods(seed,parent){ var pMs =[]; var pM =null;
	for(let n=0; n <AT.pMsL; n++){ pM=mkPm( seed[n],parent); pMs.push(pM)}return pMs}
function mkPm( ni,parent,subj){ var pM=null; switch(ni){
	case "G_p_"  : pM= new AL.PrimalMoods.G_p_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_p_m" : pM= new AL.PrimalMoods.G_p_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_p" : pM= new AL.PrimalMoods.G_p_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_mp": pM= new AL.PrimalMoods.G_p_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_pm": pM= new AL.PrimalMoods.G_p_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_b" : pM= new AL.PrimalMoods.G_p_b( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_"  : pM= new AL.PrimalMoods.G_m_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_m_m" : pM= new AL.PrimalMoods.G_m_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_p" : pM= new AL.PrimalMoods.G_m_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_mp": pM= new AL.PrimalMoods.G_m_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_pm": pM= new AL.PrimalMoods.G_m_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_b" : pM= new AL.PrimalMoods.G_m_b( ni);  inhPm( pM,parent,subj); return pM}}
function inhPm( pM,parent,subj){/*if( parent) { pM.parent =parent.pMs.find(o => o.ni === pM.ni)}
								if( subj) 	{ subj.pMs.push( pM)}*/}
AL.PrimalMoods={ seed : ["G_m_","G_m_m","G_m_p","G_m_mp","G_m_pm","G_m_b",
							"G_p_","G_p_m","G_p_p","G_p_mp","G_p_pm","G_p_b"],
	G_p_ 	:function(ni){ mkPm2(this,true, [],			ni,"", "G", "" 	)},
	G_p_m 	:function(ni){ mkPm2(this,true, ["-"],		ni,"", "G", "−" )},
	G_p_p 	:function(ni){ mkPm2(this,true, ["+"],		ni,"", "G", "+" )},
	G_p_mp 	:function(ni){ mkPm2(this,true, ["-","+"],	ni,"", "G", "−+")},
	G_p_pm 	:function(ni){ mkPm2(this,true, ["+","-"],	ni,"", "G", "+−")},
	G_p_b 	:function(ni){ mkPm2(this,true, ["x"],		ni,"", "G", "±" )},
	G_m_ 	:function(ni){ mkPm2(this,false,[],			ni,"−","G", "" 	)},
	G_m_m 	:function(ni){ mkPm2(this,false,["-"],		ni,"−","G", "−" )},
	G_m_p 	:function(ni){ mkPm2(this,false,["+"],		ni,"−","G", "+" )},
	G_m_mp 	:function(ni){ mkPm2(this,false,["-","+"],	ni,"−","G", "−+")},
	G_m_pm 	:function(ni){ mkPm2(this,false,["+","-"],	ni,"−","G", "+−")},
	G_m_b 	:function(ni){ mkPm2(this,false,["x"],		ni,"−","G", "±" )}}
function mkPm2(  				 o,   head, tail, 		ni,niH,niG, niT){
	o.head=head; o.tail=tail; o.ni=ni; o.niH=niH; o.niG=niG; o.niT=niT;}


function precalcGenders(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<AT.gNsL; n++){ b=mkGender( seed[n],parent);r.push(b)}return r}
function mkGender( ni,parent,subj){ var g=null; switch(ni){
	case "MAS": g= new AL.Genders.MAS( ni,subj); inhGender( g,parent);return g;
	case "mas": g= new AL.Genders.mas( ni,subj); inhGender( g,parent);return g;
	case "fem": g= new AL.Genders.fem( ni,subj); inhGender( g,parent);return g;
	case "FEM": g= new AL.Genders.FEM( ni,subj); inhGender( g,parent);return g}}
function inhGender( g,parent){ /*if(parent){ g.parent=parent.gNs.find(o => o.ni ===g.ni)}*/}
AL.Genders={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni,subj){ mkGender2(this,ni,false,false,"♂" ,subj)},
	mas:function( ni,subj){ mkGender2(this,ni,false,true, "*♂",subj)},
	fem:function( ni,subj){ mkGender2(this,ni,true ,false,"*♀",subj)},
	FEM:function( ni,subj){ mkGender2(this,ni,true ,true, "♀" ,subj)}}
function mkGender2( o,ni,fem,kid,nI,subj){ var b=[];
	o.ni=ni;o.fem=fem;o.kid=kid;o.nI=nI; o.V =0; o.K =0;
	if( subj){ b=subj.nMs.filter(n =>
		n.kid===subj.kid && n.fin ===subj.fin && n.weird===subj.weird &&	n.last ===subj.last)}
	if(b !==[]){ o.name =b[0]} else{ b =mkName(fem,kid,subj.fin,subj.weird,subj.nM.last); o.name =b}}

function precalcSexes(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<AT.sXsL; n++){ b=mkSex( seed[n],parent);r.push(b)}return r}
function mkSex( ni,parent,subj){ var s =null; switch( ni){
	case "MAS": s= new AL.Sexes.MAS( ni); inhSex( s,parent,subj);return s;
	case "mas": s= new AL.Sexes.mas( ni); inhSex( s,parent,subj);return s;
	case "fem": s= new AL.Sexes.fem( ni); inhSex( s,parent,subj);return s;
	case "FEM": s= new AL.Sexes.FEM( ni); inhSex( s,parent,subj);return s}}
function inhSex( s,parent,subj){
	/*if(parent){ s.parent=parent.sXs.find(o => o.ni === s.ni)}
	if( subj) { subj.sXs.push ( s)}*/}
AL.Sexes={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni){ mkSex2(this,ni,false,false, "♂" )},
	mas:function( ni){ mkSex2(this,ni,false,true, "*♂")},
	fem:function( ni){ mkSex2(this,ni,true, false,"*♀")},
	FEM:function( ni){ mkSex2(this,ni,true, true, "♀" )}}
function mkSex2( o,ni,fem,kid,nI){ o.ni=ni;o.kid=kid;o.fem=fem;o.nI=nI; o.V =0; o.K =0;}


function precalcSociotypes( seed,ab,parent,subj){ var tYs =[]; var b =null;
	for(let n=0; n <AT.tYsL; n++){ b =mkType( seed[n],ab,parent,subj); tYs.push( b)}return tYs}
function mkType(ni,ab,parent,subj){
	if( subj){ var t =subj.tYs.find( o => o.ni ===ni); if( t){ return t}}
	var t =null; switch( ni){
		case "iSFC": t =new AL.Sociotypes.iSFC( ni,ab,parent,subj); return t;
		case "iSFR": t =new AL.Sociotypes.iSFR( ni,ab,parent,subj); return t;
		case "iSTC": t =new AL.Sociotypes.iSTC( ni,ab,parent,subj); return t; 
		case "iSTR": t =new AL.Sociotypes.iSTR( ni,ab,parent,subj); return t;
		case "iNFC": t =new AL.Sociotypes.iNFC( ni,ab,parent,subj); return t;
		case "iNFR": t =new AL.Sociotypes.iNFR( ni,ab,parent,subj); return t;
		case "iNTC": t =new AL.Sociotypes.iNTC( ni,ab,parent,subj); return t;
		case "iNTR": t =new AL.Sociotypes.iNTR( ni,ab,parent,subj); return t;
		case "eSFC": t =new AL.Sociotypes.eSFC( ni,ab,parent,subj); return t;
		case "eSFR": t =new AL.Sociotypes.eSFR( ni,ab,parent,subj); return t;
		case "eSTC": t =new AL.Sociotypes.eSTC( ni,ab,parent,subj); return t;
		case "eSTR": t =new AL.Sociotypes.eSTR( ni,ab,parent,subj); return t;
		case "eNFC": t =new AL.Sociotypes.eNFC( ni,ab,parent,subj); return t;
		case "eNFR": t =new AL.Sociotypes.eNFR( ni,ab,parent,subj); return t;
		case "eNTC": t =new AL.Sociotypes.eNTC( ni,ab,parent,subj); return t;
		case "eNTR": t =new AL.Sociotypes.eNTR( ni,ab,parent,subj); return t;
		case "NaT" : t =new AL.Sociotypes.NaT(  ni,ab,parent,subj);	return t}}
function inhTy( tY,parent){ if( parent){ tY.parent =parent.tYs.find( o => o.ni ===tY.ni)}}
AL.Sociotypes={ //1. CR 2. IE 3. FT 4. SN
	seed: [ "iSFC","iSFR","eSFC","eSFR","iSTC","iSTR","eSTC","eSTR",
			"iNFC","iNFR","eNFC","eNFR","iNTC","iNTR","eNTC","eNTR"],
	iSFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,false,false,
		"Dolphin", 		"Descending Idealist", 		"Romantic Believer", 	"ESFp","SEE","ESFP")},
	iSFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,false,true, 
		"Wolverine", 	"Ascending Idealist",		"Classical Believer", 	"ISFj","ESI","ISFP")},
	iSTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,true, false,
		"Anaconda",		"Descending Utopist", 		"Romantic Trendsetter", "ESTp","SLE","ESTP")},
	iSTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,false,true, true, 
		"Alligator",	"Ascending Utopist", 		"Classical Trendsetter","ISTj","LSI","ISTP")},
	iNFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, false,false,
		"Octopus",		"Ascending Time Traveler", "Romantic Healer", 		"ENFp","EIE","ENFP")},	
	iNFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, false,true, 
		"Platypus", 	"Descending Time Traveler", "Classical Healer", 	"INFj","EII","INFP")},
	iNTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, true, false,
		"Raven", 		"Ascending Wonderer", 		"Romantic Gardener", 	"ENTp","ILE","ENTP")},
	iNTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,false,true, true, true, 
		"Panda", 		"Descending Wonderer", 		"Classical Gardener", 	"INTj","LII","INTP")},
	eSFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,false,false,
		"Turtle", 		"Descending Host", 			"Romantic Defender", 	"ISFp","ESI","ISFJ")},
	eSFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,false,true, 
		"Zebra", 		"Ascending Host", 			"Classical Defender", 	"ESFj","ESE","ESFJ")},
	eSTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,true, false,
		"Monkey", 		"Descending Realist", 		"Romantic Artisan", 	"ISTp","SLI","ISTJ")},
	eSTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, false,true, true, 
		"Hippo", 		"Ascending Realist", 		"Classical Artisan", 	"ESTj","LSE","ESTJ")},
	eNFR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, false,false,
		"Swan",	 		"Ascending Someone", 		"Romantic Performer", 	"INFp","IEI","INFJ")},
	eNFC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, false,true, 
		"Nightingale", 	"Descending Someone", 		"Classical Performer", 	"ENFj","EIE","ENFJ")},
	eNTR:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, false,
		"Falcon", 		"Ascending Anyone", 		"Romantic Cleric", 		"INTp","ILI","INTJ")},
	eNTC:function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, true, 
		"Piranha", 		"Descending Anyone", 		"Classical Cleric", 	"ENTj","LIE","ENTJ")},
	NaT: function( ni,qua,parent,s){ mkSociotype(this,ni,qua,parent,s,true, true, true, false,
		"", 		"", 		"", 	"","","")}}
function mkSociotype( o,ni,ab,parent,s,ie,sn,ft,rc,zo,desc,call,modA4,modA3,mbti){
							o.ni=ni; o.zo=zo; o.desc=desc; o.call=call; o.modA4=modA4; o.modA3=modA3; o.mbti=mbti;
							if(ni!=="NaT"){ o.nI=ni};
							o.ie=ie; o.sn=sn; o.ft=ft; o.rc=rc;
							//inhTy( 		o, parent);
							o.iEs 		= AT.iEs;
							o.fNs 		= precalcFunctions( 			AL.Functions.seed, 						AT);
							o.cRs 		= precalcCircuits( 				AL.Circuits.seed, 						AT);
							o.fAs 		= o.fNs.concat( 				o.cRs);
							o.abSpace 	= AT.abSpace;
							o.reSpace 	= orientRelSpace( o, precalcSocionicsEssence( o.fNs, o.cRs));
							o.cRs 		= orientCircuitsAbsolutely( o);
						}

function connectSpaces( abs,rel){
	function f(tAZ,tAY,tAX){ rel[tAZ][tAY][tAX].ab =abs[tAZ][tAY][tAX];
		rel[tAZ][tAY][tAX].tAX=tAX; 	rel[tAZ][tAY][tAX].tAY=tAY; 	rel[tAZ][tAY][tAX].tAZ=tAZ;
		rel[tAZ][tAY][tAX].tAx=tAX-1; 	rel[tAZ][tAY][tAX].tAy=tAY-1; 	rel[tAZ][tAY][tAX].tAz=tAZ-1}
	f(0,0,0); f(0,0,2); f(0,2,0); f(0,2,2); f(2,2,0); f(2,2,2); f(2,0,0); f(2,0,2);	return rel}
function tor(src){ var ret = mk3Space();
ret[0][2][0]=src[0][0][0];ret[2][2][0]=src[0][2][0];ret[2][0][0]=src[2][2][0];ret[0][0][0]=src[2][0][0];
ret[0][2][2]=src[0][0][2];ret[2][2][2]=src[0][2][2];ret[2][0][2]=src[2][2][2];ret[0][0][2]=src[2][0][2];
ret[1][2][2]=src[0][1][2];ret[2][1][2]=src[1][2][2];ret[1][0][2]=src[2][1][2];ret[0][1][2]=src[1][0][2];
ret[2][0][1]=src[2][2][1];ret[2][2][1]=src[0][2][1];ret[0][2][1]=src[0][0][1];ret[0][0][1]=src[2][0][1];
ret[1][2][0]=src[0][1][0];ret[2][1][0]=src[1][2][0];ret[1][0][0]=src[2][1][0];ret[0][1][0]=src[1][0][0];return ret}
function rot(src){ var ret = mk3Space();
ret[0][0][0]=src[0][2][0];ret[0][2][0]=src[2][2][0];ret[2][2][0]=src[2][0][0];ret[2][0][0]=src[0][0][0];
ret[0][0][2]=src[0][2][2];ret[0][2][2]=src[2][2][2];ret[2][2][2]=src[2][0][2];ret[2][0][2]=src[0][0][2];
ret[0][1][2]=src[1][2][2];ret[1][2][2]=src[2][1][2];ret[2][1][2]=src[1][0][2];ret[1][0][2]=src[0][1][2];
ret[0][0][1]=src[0][2][1];ret[2][0][1]=src[0][0][1];ret[2][2][1]=src[2][0][1];ret[0][2][1]=src[2][2][1];
ret[0][1][0]=src[1][2][0];ret[1][2][0]=src[2][1][0];ret[2][1][0]=src[1][0][0];ret[1][0][0]=src[0][1][0];return ret}
function ver(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][2-y][x] = src[z][y][x];}}}  return ret}
function lon(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[2-z][y][x] = src[z][y][x];}}}  return ret}
function lat(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][y][2-x] = src[z][y][x];}}}  return ret}
function orientRelSpace(t, reSpace){ switch(t.ni){
	case "iSTR": reSpace =connectSpaces( t.abSpace, tor(lon(lat(reSpace)))); break;
	case "iSTC": reSpace =connectSpaces( t.abSpace, tor(lat(reSpace))); 		break;
	case "eSTR": reSpace =connectSpaces( t.abSpace, tor(lon(reSpace))); 		break;
	case "eSTC": reSpace =connectSpaces( t.abSpace, tor(reSpace)); 			break;
	case "iNFR": reSpace =connectSpaces( t.abSpace, rot(lon(lat(reSpace)))); break;
	case "iNFC": reSpace =connectSpaces( t.abSpace, rot(lat(reSpace))); 		break;
	case "eNFR": reSpace =connectSpaces( t.abSpace, rot(lon(reSpace))); 		break;
	case "eNFC": reSpace =connectSpaces( t.abSpace, rot(reSpace)); 			break;
	case "iSFR": reSpace =connectSpaces( t.abSpace, lon(lat(ver(reSpace)))); break;
	case "iSFC": reSpace =connectSpaces( t.abSpace, lat(ver(reSpace))); 		break;
	case "eSFR": reSpace =connectSpaces( t.abSpace, lon(ver(reSpace))); 		break;
	case "eSFC": reSpace =connectSpaces( t.abSpace, ver(reSpace)); 			break;
	case "iNTC": reSpace =connectSpaces( t.abSpace, lon(lat(reSpace))); 		break;
	case "iNTR": reSpace =connectSpaces( t.abSpace, lat(reSpace)); 			break;
	case "eNTC": reSpace =connectSpaces( t.abSpace, lon(reSpace)); 			break;
	case "eNTR": reSpace =connectSpaces( t.abSpace, reSpace)}return reSpace}
function orientCircuitsAbsolutely(t){ var c=null;
	if( t.ie){ 	c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi =  c.rDi})}
	else{ 		c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi = -c.rDi})}
	if( t.sn){ 	c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi =  c.rDi});
		if(!t.rc){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}
		else{		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}}
	else{		c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi = -c.rDi});
		if(!t.rc){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}
		else{ 		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}}return t.cRs}
// SAISINKO LAUTASELLISEN RETURNAMUUSSIA
function precalcSocionicsEssence( fNs,cRs){ var space =mk3Space();
	space[2][0][2] =fNs.find( o => o.ni ==="f1");	
	space[2][0][0] =fNs.find( o => o.ni ==="f2");	
	space[0][0][0] =fNs.find( o => o.ni ==="f3");	
	space[0][0][2] =fNs.find( o => o.ni ==="f4");	
	space[0][2][2] =fNs.find( o => o.ni ==="f5");	
	space[0][2][0] =fNs.find( o => o.ni ==="f6");	
	space[2][2][0] =fNs.find( o => o.ni ==="f7");	
	space[2][2][2] =fNs.find( o => o.ni ==="f8");
	space[2][0][1] =orientCircuitRelatively( space,2,0,1,cRs.find( o => o.ni ==="a"));
	space[1][0][0] =orientCircuitRelatively( space,1,0,0,cRs.find( o => o.ni ==="g"));
	space[0][0][1] =orientCircuitRelatively( space,0,0,1,cRs.find( o => o.ni ==="b"));
	space[0][1][2] =orientCircuitRelatively( space,0,1,2,cRs.find( o => o.ni ==="i"));
	space[0][2][1] =orientCircuitRelatively( space,0,2,1,cRs.find( o => o.ni ==="c"));
	space[1][2][0] =orientCircuitRelatively( space,1,2,0,cRs.find( o => o.ni ==="h"));
	space[2][2][1] =orientCircuitRelatively( space,2,2,1,cRs.find( o => o.ni ==="d"));
	space[1][2][2] =orientCircuitRelatively( space,1,2,2,cRs.find( o => o.ni ==="e"));
	space[1][0][2] =orientCircuitRelatively( space,1,0,2,cRs.find( o => o.ni ==="f"));
	space[2][1][0] =orientCircuitRelatively( space,2,1,0,cRs.find( o => o.ni ==="k"));
	space[2][1][2] =orientCircuitRelatively( space,2,1,2,cRs.find( o => o.ni ==="l"));
	space[0][1][0] =orientCircuitRelatively( space,0,1,0,cRs.find( o => o.ni ==="j"));return space}
function orientCircuitRelatively(space,x,y,z,c){c.tRX=x;c.tRY=y;c.tRZ=z; c.tRx=x-1;c.tRy=y-1;c.tRz=z-1;
	if 		(c.lat)	{ c.acc =space[x][y][z -c.rDi]; c.pro =space[x][y][z +c.rDi]}
	else if (c.lon)	{ c.acc =space[x -c.rDi][y][z]; c.pro =space[x +c.rDi][y][z]}
	else 			{ c.acc =space[x][y -c.rDi][z]; c.pro =space[x][y +c.rDi][z]}return c}


function getDifferenceOfEssence(src,dst){ var r = {x: src.x -dst.x, y: src.y -dst.y, z: src.z -dst.z}; return r}
function getCoordinatesOfEssence(ni,src){
	for(var z=0; z<3; z++){
		for(var y=0; y<3; y++){
			for(var x=0; x<3; x++){
				if(src[x][y][z]){ if(src[x][y][z].ni === ni){ return { z:z, y:y, x:x}}}}}}}
function getNeighboursOfEssence(eX,eY,eZ,tY){ var r=[];
	var nX1 = eX+1; nX1 ===  3 ? nX1 = 0:true;
	var nX2 = eX-1; nX2 === -1 ? nX2 = 2:true;
	var nY1 = eY+1; nY1 ===  3 ? nY1 = 0:true;
	var nY2 = eY-1; nY2 === -1 ? nY2 = 2:true;
	//var nZ1 = eZ+1; nZ1 ===  3 ? nZ1 = 0:true;
	//var nZ2 = eZ-1; nZ2 === -1 ? nZ2 = 2:true;
	tY[nX1][eY][eZ] ? r.push(tY[nX1][eY][eZ]):true;
	tY[nX2][eY][eZ] ? r.push(tY[nX2][eY][eZ]):true;
	tY[eX][nY1][eZ] ? r.push(tY[eX][nY1][eZ]):true;
	tY[eX][nY2][eZ] ? r.push(tY[eX][nY2][eZ]):true;
	//tY[eX][eY][nZ1] ? r.push(tY[eX][eY][nZ1]):true;
	//tY[eX][eY][nZ2] ? r.push(tY[eX][eY][nZ2]):true;
	return r}


/*function Signal( subj){ mkSignal(this, subj, subj.presentSubjs, subj.awaySubjs, subj.presentPatts, subj.awayPatts)}
function mkSignal(o,subj,presentSubjs,awaySubjs,presentObjs,awayObjs){
	var subjs=sortByQuality( presentSubjs,awaySubjs);
	var patts=sortByQuality( presentPatts,awayPatts);
	var topic=maxByQuality() //äää
}*/


function precalcCircuits( seed,parent){ cRs =[]; var b =null;
	for(let n=0; n <AT.cRsL; n++){ b =mkCircuit( seed[n],parent);cRs.push( b)}return cRs}
function mkCircuit( ni,parent){ var c =null; switch( ni){
	case "a" : c =new AL.Circuits.a( ni); inhCircuit( c,parent);return c;
	case "b" : c =new AL.Circuits.b( ni); inhCircuit( c,parent);return c;
	case "c" : c =new AL.Circuits.c( ni); inhCircuit( c,parent);return c;
	case "d" : c =new AL.Circuits.d( ni); inhCircuit( c,parent);return c;
	case "e" : c =new AL.Circuits.e( ni); inhCircuit( c,parent);return c;
	case "f" : c =new AL.Circuits.f( ni); inhCircuit( c,parent);return c;
	case "g" : c =new AL.Circuits.g( ni); inhCircuit( c,parent);return c;
	case "h" : c =new AL.Circuits.h( ni); inhCircuit( c,parent);return c;
	case "i" : c =new AL.Circuits.i( ni); inhCircuit( c,parent);return c;
	case "j" : c =new AL.Circuits.j( ni); inhCircuit( c,parent);return c;
	case "k" : c =new AL.Circuits.k( ni); inhCircuit( c,parent);return c;
	case "l" : c =new AL.Circuits.l( ni); inhCircuit( c,parent);return c}}
function inhCircuit( c,parent){ if(parent){ c.parent = parent.cRs.find(o => o.ni === c.ni)}}
AL.Circuits={ seed:["a","b","c","d","e","f","g","h","i","j","k","l"],
	a:function( ni){ mkCircuit2( this,ni,false,true, false,-1,true, true, true ,"Love Detector" 			)},
	b:function( ni){ mkCircuit2( this,ni,false,true, false, 1,false,true, false,"Weakest Link" 				)},
	c:function( ni){ mkCircuit2( this,ni,false,true, false,-1,false,true, true ,"Challenge Detector" 		)},
	d:function( ni){ mkCircuit2( this,ni,false,true, false, 1,true, true, false,"Harvester" 				)},
	e:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,true ,"Ego" 						)},
	f:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,true ,"Super-Ego" 				)},
	g:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,false,"Super-Id" 					)},
	h:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,false,"Id" 						)},
	i:function( ni){ mkCircuit2( this,ni,false,false,true,  1,true, false,false,"Neurosomatic Circuit" 		)},
	j:function( ni){ mkCircuit2( this,ni,false,false,true, -1,false,false,true ,"Metaprogramming Circuit" 	)},
	k:function( ni){ mkCircuit2( this,ni,false,false,true, -1,true, false,true ,"Morphogenetic Circuit" 	)},
	l:function( ni){ mkCircuit2( this,ni,false,false,true,  1,false,false,false,"Meta-Ego" 					)}}
function mkCircuit2( 			 c,   ni,lon,  lat,  ver, rDi,str,  val,  mnt,  nI){
	c.lon=lon; c.lat=lat; c.ver=ver; c.rDi=rDi; c.ni=ni; c.ni2=ni; c.str=str; c.val=val; c.mnt=mnt; c.nI=nI;
	c.count=0; c.K=0; c.V=0; c.spd={lon:0,lat:0,ver:0}}

function precalcFunctions(seed,parent){ fNs =[]; var b =null;
	for(let n=0; n <AT.fNsL; n++){ b =mkFunc( seed[n],parent);fNs.push( b)}return fNs}
function mkFunc(ni,parent){ var f=null; switch( ni){
	case "f1" : f =new AL.Functions.f1( ni); inhFunc( f,parent);return f;
	case "f2" : f =new AL.Functions.f2( ni); inhFunc( f,parent);return f;
	case "f3" : f =new AL.Functions.f3( ni); inhFunc( f,parent);return f;
	case "f4" : f =new AL.Functions.f4( ni); inhFunc( f,parent);return f;
	case "f5" : f =new AL.Functions.f5( ni); inhFunc( f,parent);return f;
	case "f6" : f =new AL.Functions.f6( ni); inhFunc( f,parent);return f;
	case "f7" : f =new AL.Functions.f7( ni); inhFunc( f,parent);return f;
	case "f8" : f =new AL.Functions.f8( ni); inhFunc( f,parent);return f}}
function inhFunc(f,parent){ if(parent){ f.parent = parent.fNs.find(o => o.ni ===f.ni)}}
AL.Functions={ seed: ["f1","f2","f3","f4","f5","f6","f7","f8"],
	f1:function( ni){ mkFunc2(this,ni,"1",2,  2,  0,  false,false,true ,true, true, true, "Role Function" 			)},
	f2:function( ni){ mkFunc2(this,ni,"2",2,  0,  0,  false,true, false,true, false,false,"Suggestive Function" 	)},
	f3:function( ni){ mkFunc2(this,ni,"3",0,  0,  0,  false,true, false,false,false,true, "Mobilizing Function" 	)},
	f4:function( ni){ mkFunc2(this,ni,"4",0,  2,  0,  false,false,true ,false,true, false,"Vulnerable Function" 	)},
	f5:function( ni){ mkFunc2(this,ni,"5",0,  2,  2,  true, true, true ,true, false,true, "Leading Function" 		)},
	f6:function( ni){ mkFunc2(this,ni,"6",0,  0,  2,  true, false,false,true, true, false,"Ignoring Function" 		)},
	f7:function( ni){ mkFunc2(this,ni,"7",2,  0,  2,  true, false,false,false,true, true, "Demonstrative Function" 	)},
	f8:function( ni){ mkFunc2(this,ni,"8",2,  2,  2,  true, true, true ,false,false,false,"Creative Function" 		)}}
function mkFunc2( 			  f,   ni,ni2,tRX,tRZ,tRY,str,  val,  mnt  ,rXa,  rYa,  rZa,  nI){
	f.tRX=tRX;f.tRZ=tRZ;f.tRY=tRY; f.tRx=tRX-1;f.tRz=tRZ-1;f.tRy=tRY-1;
	f.ni=ni;f.ni2=ni2;f.nI=nI; f.str=str;f.val=val;f.mnt=mnt;f.rXa=rXa;f.rYa=rYa;f.rZa=rZa;
	f.count=0; f.V=0; f.K=0; f.spd={lon:0,lat:0,ver:0}}

function precalcSocionicsMetaphysics(iEs){ var s=mk3Space();
	s[0][0][0]=iEs.find(o=>o.ni==="Fi");	s[0][0][2]=iEs.find(o=>o.ni==="Fe");	
	s[2][0][0]=iEs.find(o=>o.ni==="Si");	s[2][0][2]=iEs.find(o=>o.ni==="Se");
	s[2][2][0]=iEs.find(o=>o.ni==="Ti");	s[2][2][2]=iEs.find(o=>o.ni==="Te");
	s[0][2][0]=iEs.find(o=>o.ni==="Ni");	s[0][2][2]=iEs.find(o=>o.ni==="Ne");return s}
function mk3Space(){ var space=[]; for(var z=0; z<=2;z++){space[z]=[];
										for(var y=0; y<=2; y++){space[z][y]=[];
											for(var x=0; x<=2; x++){space[z][y][x]=null}}} return space}



function precalcInformationElements( seed,parent){ var b =null; var iEs =[];
	for(let n=0; n <AT.iEsL; n++){
		/*if( s){ if(s.tY.iEs.length >0){ return s.tY.iEs}}
		else{*/ 	 b =mkIe( seed[n],parent); iEs.push( b)}
				/*if(s){ switch(seed[n]){ case "Fi" : s.Fi =b; break; case "Fe" : s.Fe =b; break;
										case "Si" : s.Si =b; break; case "Se" : s.Se =b; break;
										case "Ti" : s.Ti =b; break; case "Te" : s.Te =b; break;
										case "Ni" : s.Ni =b; break; case "Ne" : s.Ne =b; break}}}*/return iEs}
function mkIe(ni,parent){ var iE =null; switch( ni){
	case "Fi" : iE =new AL.InformationElements.Fi( ni); /*inhIe( iE,parent);*/ return iE;
	case "Fe" : iE =new AL.InformationElements.Fe( ni); /*inhIe( iE,parent);*/ return iE;
	case "Si" : iE =new AL.InformationElements.Si( ni); /*inhIe( iE,parent);*/ return iE;
	case "Se" : iE =new AL.InformationElements.Se( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ti" : iE =new AL.InformationElements.Ti( ni); /*inhIe( iE,parent);*/ return iE;
	case "Te" : iE =new AL.InformationElements.Te( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ni" : iE =new AL.InformationElements.Ni( ni); /*inhIe( iE,parent);*/ return iE;
	case "Ne" : iE =new AL.InformationElements.Ne( ni); /*inhIe( iE,parent);*/ return iE}}
function inhIe(iE,parent){ if(parent){ iE.parent = parent.iEs.find(o => o.ni ===iE.ni)}}
AL.InformationElements={ seed: ["Fi","Fe","Si","Se","Ti","Te","Ni","Ne"],
	Fi:function( ni){ mkIe2(this,ni,false,false,false)},
	Fe:function( ni){ mkIe2(this,ni,false,false,true )},
	Si:function( ni){ mkIe2(this,ni,true, false,false)},
	Se:function( ni){ mkIe2(this,ni,true, false,true )},
	Ti:function( ni){ mkIe2(this,ni,true, true, false)},
	Te:function( ni){ mkIe2(this,ni,true, true, true )},
	Ni:function( ni){ mkIe2(this,ni,false,true, false)},
	Ne:function( ni){ mkIe2(this,ni,false,true, true )}}
/*function getSqs(a,s1,s2,s3,s4){ var ret=[]; var b=null;
	b=a.find(o => o.ni ===s1); ret.push(b);
	b=a.find(o => o.ni ===s2); ret.push(b);
	b=a.find(o => o.ni ===s3); ret.push(b);
	b=a.find(o => o.ni ===s4); ret.push(b); return ret}*/
// make also crosshair that intersects sircuits and not intersect functions
// pms and lps: peaceful iok uok, playful ino uno, caring ino uno, hostile iok uno, fight iok uno, escape ino uno
// there is no similar need to invoke a circuit from its accepting function? because? because the circuit overwrites the accepting function's state with the producing function's state? so the only reason to use it from the accepting function before the producing function has already been used would be to empty the data of the accepting function? which can be important but is a completely different reason to use the circuit.
function mkIe2( o,ni,mo,ul,ie){ o.mo=mo;o.ul=ul;o.ie=ie;o.ni=ni;
	/*console.log(qua);
	switch(ni){ case "Fi" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["FEEL_0i","FEEL_2i","FEEL_4i"],3);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"U").filter( v => v.i); break; 
		case "Fe" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["FEEL_1e","FEEL_3e"],2);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"U").filter( v => v.e); break;
		case "Si" : 
			o.rQs =getByNis(qua.sQs,AT.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["THINK_1i","THINK_3i"],2);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"O").filter( v => v.i); break;
		case "Se" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DELI_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["THINK_0e","THINK_2e","THINK_4e"],3);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"O").filter( v => v.i); break;
		case "Ni" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["FEEL_0i","FEEL_2i","FEEL_4i"],3);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"M").filter( v => v.i); break;
		case "Ne" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["FEEL_1e","FEEL_3e"],2);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"M").filter( v => v.e); break;
		case "Ti" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["THINK_1i","THINK_3i"],2);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"L").filter( v => v.i); break;
		case "Te" :
			o.rQs =getByNis(qua.sQs,AT.sQsL,["HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],4);
			o.cQs =getByNis(qua.sQs,AT.sQsL,["THINK_0e","THINK_2e","THINK_4e"],3);
			o.vQs =getByNi1st(qua.vQs,AT.vQsL,"U").filter( v => v.e);}
	o.sQs =o.rQs.concat( o.cQs)*/}

/*
"R_0", "Si_4_PHEN_1", "Se_3_LOWN_2", "Si_2_HIGH_3", "Se_1_DLBR_4",	"Ni_4_HRMNY_1","Ne_3_SIGNI_2","Ni_2_AWARE_3","Ne_1_UNITY_4"
	"F_0i", 	"F_1e", 	"F_2i", 	"F_3e", 	"F_4i",	"T_0e", "T_1i", "T_2e", "T_3i", "T_4e"],
*/


/*
If femininity acquires a negative karma the result is neurosis?

Demiurge is a definable subject.

The attributes of demiurge approximate the attributes of the best subject known to the subject.

If the subject is always only the object of a better subject and has zero distance to the better subject, the attributes of demiurge for the subject turn identical to the attributes of the better subject unless an even better subject is known.

The demiurge is a container of perceptions with many forms, which may be called faces. The demiurge has a good face and a bad face.

The subject's selfishness is proportional to the subject's resemblance of the good face of the demiurge.
The subject's self-hate is proportional the the subject's resemblance of the bad face of the demiurge.
A perception associates to singular events.

The absolute minimum romantic complexity of good is 0 and absolute minimum classical complexity of good is 0 for females and 1 for males.
The absolute minimum romantic complexity of bad is 1 and absolute minimum classical complexity of bad is 0.

The subject's conception of God has a minimum and maximum romantic complexity and a minimum and maximum classical complexity. The minimums are negative and the maximums are positive. These are determined according to the subject's best experiences.

The subject's conception of the Devil also has minimum complexities which are determined according to worst experiences. 

If the subject believes God is definable, all singular events associate to the current faces of the demiurge.
If the subject believes God is undefinable, a singular event associates to the current faces of the demiurge only when the absolute amount of its value or karma equals resolution.
In the model, God contains the demiurge but also all sequences of events.
"God" and "demiurge" are absolute subjects. Their instances are constituents of the cognition of a relatively existing subject.
"Mother" and "father" are absolute subjects. For a relatively existing subject, "mother" is a personification of value and "father" a personification of karma.

Functions can iterate themselves without going via any circuit.

Several subsequent iterations of functions are the same mosaic event.

Using a func or circ costs 1 energy and using a reversed circ costs 2 energy.

Using a weak func or circ costs 1 energy.

Object display feature: show only one red-blue quadrant.

Dynamic Metaphysics

It's good if bad people start fearing the sound "Allah" because then they fwill dislike handling dinner table cutlery, so wealth won't make as happy as it otherwise woulnd.

Jos ei ymmärrä jotain mitä toinen sanoo, sen sanominen oli epäfem femi ilmentymä

If you have to wait in line with other people you will feel you are equal with them. If you've only waited in line with white people this will make the company of non-white people feel better.

If signal is in circuit the circuit is always reversed?

subjects make intension first, objects make extension first? accepting subject function makes extensions and producing subject fuction makes intensions? accepting object function makes intensions and producing object function makes extensions? circuit swaps intension and extension?

***
*/

AL.Origins ={ seed:["Allah",
					"Monad",
					"Yahweh",
					"Nothing",
					"Kali"],
	Allah 	:function(ni){ mkOrigin2( this,ni,true, false)},
	Monad 	:function(ni){ mkOrigin2( this,ni,true, false,"MAS","MAS")},
	Yahweh 	:function(ni){ mkOrigin2( this,ni,true, true)},
	Nothing :function(ni){ mkOrigin2( this,ni,false,false)},
	Kali 	:function(ni){ mkOrigin2( this,ni,true, true, "FEM","FEM")}};
function mkOrigin(ni,parent){ var O =null; switch(ni){
	case "Allah"  :O=new AL.Origins.Allah( ni); 	inhOrigin( O,parent);return O;
	case "Monad"  :O=new AL.Origins.Monad( ni); 	inhOrigin( O,parent);return O;
	case "Yahweh" :O=new AL.Origins.Yahweh( ni);	inhOrigin( O,parent);return O;
	case "Kali"   :O=new AL.Origins.Kali( ni); 		inhOrigin( O,parent);return O;
	case "Nothing":O=new AL.Origins.Nothing( ni); 	inhOrigin( O,parent);return O}}
function mkOrigin2(o,ni,subj,definable,sex,gnd){
	o.ni =ni; o.definable =definable; o.subj=subj;
	if( subj){ 		o.gnd =gnd; o.sex =sex}
	if( definable){ o.tYs =[]; o.mDs =[]; o.pMs =[]; o.gNs =[]; o.sXs =[]}
	else{ 			o.tYs=null;o.mDs=null;o.pMs=null;o.gNs=null;o.sXs=null}}
function precalcOrigins( seed,parent){ a =[]; var b =null;
	for(let n=0; n <AT.originsL; n++){ b =mkOrigin( seed[n],parent); a.push( b)}return a}
function inhOrigin(O,parent){ if(parent){ O.parent = parent.origins.find(o => o.ni ===O.ni)}}

AL.BinaryGenders ={ seed:["Feminine","Neutral","Masculine"],
	Feminine: 	function(ni){ mkBinaryGender2( this,ni,false)},
	Neutral: 	function(ni){ mkBinaryGender2( this,ni,undefined)},
	Masculine: 	function(ni){ mkBinaryGender2( this,ni,true)}}
function mkBinaryGender(ni){ var o =null; switch(ni){
	case "Feminine" :o =new AL.BinaryGenders.Feminine(ni); 	inhBinaryGender( o,parent);return o;
	case "Neutral" 	:o =new AL.BinaryGenders.Neutral(ni); 	inhBinaryGender( o,parent);return o;
	case "Masculine":o =new AL.BinaryGenders.Masculine(ni); inhBinaryGender( o,parent);return o}}
function mkBinaryGender2(o,ni,masculine){ this.ni=ni;switch(masculine){ case undefined 	:o.masculine =undefined;
																		case false 		:o.masculine =false;
																		case true 		:o.masculine =true}}









function precalcAdultQualities( seed,parent){ var b =null; var a =[];
	for(let n=0; n <AT.aQsL; n++){	b =mkRq( seed[n],parent); a.push( b);}return a}
AL.AdultQualities =[
	"adu_0_rom_0","adu_4_phen_1","adu_3_lown_2","adu_2_high_3","adu_1_dlbr_4",
	"adu_4_hrmny_1", "adu_3_signi_2", "adu_2_aware_3", "adu_1_unity_4"];
function precalcChildQualities( seed,parent){ var b =null; var a =[];
	for(let n=0; n <AT.cQsL; n++){	b =mkRq( seed[n],parent); a.push( b);}return a}
AL.ChildQualities =[
	"kid_0_rom_0","kid_4_phen_1","kid_3_lown_2","kid_2_high_3","kid_1_dlbr_4",
	"kid_4_hrmny_1", "kid_3_signi_2", "kid_2_aware_3", "kid_1_unity_4"];
function mkRq( ni,parent){ var q=null; switch(ni){
	case "kid_0_rom_0" 	:q=new AL.RomanticQualities.kid_0_rom_0 	(ni); inhRq( q,parent);return q;
	case "kid_4_phen_1" :q=new AL.RomanticQualities.kid_4_phen_1	(ni); inhRq( q,parent);return q;
	case "kid_3_lown_2" :q=new AL.RomanticQualities.kid_3_lown_2 	(ni); inhRq( q,parent);return q;
	case "kid_2_high_3" :q=new AL.RomanticQualities.kid_2_high_3 	(ni); inhRq( q,parent);return q;
	case "kid_1_dlbr_4" :q=new AL.RomanticQualities.kid_1_dlbr_4 	(ni); inhRq( q,parent);return q;
	case "kid_4_hrmny_1":q=new AL.RomanticQualities.kid_4_hrmny_1 	(ni); inhRq( q,parent);return q;
	case "kid_3_signi_2":q=new AL.RomanticQualities.kid_3_signi_2 	(ni); inhRq( q,parent);return q;
	case "kid_2_aware_3":q=new AL.RomanticQualities.kid_2_aware_3 	(ni); inhRq( q,parent);return q;
	case "kid_1_unity_4":q=new AL.RomanticQualities.kid_1_unity_4 	(ni); inhRq( q,parent);return q;
	case "adu_0_rom_0" 	:q=new AL.RomanticQualities.adu_0_rom_0 	(ni); inhRq( q,parent);return q;
	case "adu_4_phen_1" :q=new AL.RomanticQualities.adu_4_phen_1	(ni); inhRq( q,parent);return q;
	case "adu_3_lown_2" :q=new AL.RomanticQualities.adu_3_lown_2 	(ni); inhRq( q,parent);return q;
	case "adu_2_high_3" :q=new AL.RomanticQualities.adu_2_high_3 	(ni); inhRq( q,parent);return q;
	case "adu_1_dlbr_4" :q=new AL.RomanticQualities.adu_1_dlbr_4 	(ni); inhRq( q,parent);return q;
	case "adu_4_hrmny_1":q=new AL.RomanticQualities.adu_4_hrmny_1 	(ni); inhRq( q,parent);return q;
	case "adu_3_signi_2":q=new AL.RomanticQualities.adu_3_signi_2 	(ni); inhRq( q,parent);return q;
	case "adu_2_aware_3":q=new AL.RomanticQualities.adu_2_aware_3 	(ni); inhRq( q,parent);return q;
	case "adu_1_unity_4":q=new AL.RomanticQualities.adu_1_unity_4 	(ni); inhRq( q,parent);return q;}}
function inhRq( q,parent){ if( parent){ q.parent=parent.rQs.find(o => o.ni === q.ni)}}
AL.RomanticQualities={ 
	kid_4_phen_1 	: function(ni){mkRq2(this,ni,false,false,4,1,"4s1","Sensory \n introverted \n phenomena")},
	kid_3_lown_2 	: function(ni){mkRq2(this,ni,false,false,3,2,"3s2","Sensory \n extroverted \n lower needs")},
	kid_2_high_3 	: function(ni){mkRq2(this,ni,false,false,2,3,"2s3","Sensory \n introverted \n higher needs")},
	kid_1_dlbr_4 	: function(ni){mkRq2(this,ni,false,false,1,4,"1s4","Sensory \n extroverted \n deliberation")},
	kid_0_rom_0 	: function(ni){mkRq2(this,ni,false,true, 0,0,"0n0","Empty \n romantic \n quality")},
	kid_4_hrmny_1	: function(ni){mkRq2(this,ni,false,true, 4,1,"4n1","iNtuitive \n introverted \n harmony")},
	kid_3_signi_2	: function(ni){mkRq2(this,ni,false,true, 3,2,"3n2","iNtuitive \n extroverted \n significance")},
	kid_2_aware_3	: function(ni){mkRq2(this,ni,false,true, 2,3,"2n3","iNtuitive \n introverted \n awareness")},
	kid_1_unity_4	: function(ni){mkRq2(this,ni,false,true, 1,4,"1n4","iNtuitive \n extroverted \n unity")},
	adu_4_phen_1 	: function(ni){mkRq2(this,ni,true, false,4,1,"4S1","Sensory \n introverted \n phenomena")},
	adu_3_lown_2 	: function(ni){mkRq2(this,ni,true, false,3,2,"3S2","Sensory \n extroverted \n lower needs")},
	adu_2_high_3 	: function(ni){mkRq2(this,ni,true, false,2,3,"2S3","Sensory \n introverted \n higher needs")},
	adu_1_dlbr_4 	: function(ni){mkRq2(this,ni,true, false,1,4,"1S4","Sensory \n extroverted \n deliberation")},
	adu_0_rom_0 	: function(ni){mkRq2(this,ni,true, true, 0,0,"0N0","Empty \n romantic \n quality")},
	adu_4_hrmny_1	: function(ni){mkRq2(this,ni,true, true, 4,1,"4N1","iNtuitive \n introverted \n harmony")},
	adu_3_signi_2	: function(ni){mkRq2(this,ni,true, true, 3,2,"3N2","iNtuitive \n extroverted \n significance")},
	adu_2_aware_3	: function(ni){mkRq2(this,ni,true, true, 2,3,"2N3","iNtuitive \n introverted \n awareness")},
	adu_1_unity_4	: function(ni){mkRq2(this,ni,true, true, 1,4,"1N4","iNtuitive \n extroverted \n unity")}}
function mkRq2( o,ni,kid,SN,F,T,nI,desc){ o.ni=ni; o.kid=kid; o.SN=SN; o.F=F; o.T=T; o.nI=nI; o.desc=desc;}


function precalcFeminineQualities( seed,parent){ var b =null; var a =[];
	for(var n=0; n <AT.fQsL; n++){	b =mkCq( seed[n],parent); a.push( b);}return a}
AL.FeminineQualities =[
	"fem_feel_0i","fem_feel_1e","fem_feel_2i","fem_feel_3e","fem_feel_4i",
	"fem_think_0e","fem_think_1i","fem_think_2e","fem_think_3i","fem_think_4e"];
function precalcMasculineQualities( seed,parent){ var b =null; var a =[];
	for(var n=0; n <AT.mQsL; n++){	b =mkCq( seed[n],parent); a.push( b);}return a}
AL.MasculineQualities =[
	"mas_feel_0i","mas_feel_1e","mas_feel_2i","mas_feel_3e","mas_feel_4i",
	"mas_think_0e","mas_think_1i","mas_think_2e","mas_think_3i","mas_think_4e"];
function mkCq( ni,parent){ var q=null; switch(ni){
	case "fem_feel_0i" 	:q=new AL.ClassicalQualities.fem_feel_0i	(ni); inhCq( q,parent);return q;
	case "fem_feel_1e" 	:q=new AL.ClassicalQualities.fem_feel_1e	(ni); inhCq( q,parent);return q;
	case "fem_feel_2i" 	:q=new AL.ClassicalQualities.fem_feel_2i 	(ni); inhCq( q,parent);return q;
	case "fem_feel_3e" 	:q=new AL.ClassicalQualities.fem_feel_3e 	(ni); inhCq( q,parent);return q;
	case "fem_feel_4i" 	:q=new AL.ClassicalQualities.fem_feel_4i 	(ni); inhCq( q,parent);return q;
	case "fem_think_0e"	:q=new AL.ClassicalQualities.fem_think_0e 	(ni); inhCq( q,parent);return q;
	case "fem_think_1i"	:q=new AL.ClassicalQualities.fem_think_1i 	(ni); inhCq( q,parent);return q;
	case "fem_think_2e"	:q=new AL.ClassicalQualities.fem_think_2e 	(ni); inhCq( q,parent);return q;
	case "fem_think_3i"	:q=new AL.ClassicalQualities.fem_think_3i 	(ni); inhCq( q,parent);return q;
	case "fem_think_4e"	:q=new AL.ClassicalQualities.fem_think_4e 	(ni); inhCq( q,parent);return q;
	case "mas_feel_0i" 	:q=new AL.ClassicalQualities.mas_feel_0i	(ni); inhCq( q,parent);return q;
	case "mas_feel_1e" 	:q=new AL.ClassicalQualities.mas_feel_1e	(ni); inhCq( q,parent);return q;
	case "mas_feel_2i" 	:q=new AL.ClassicalQualities.mas_feel_2i 	(ni); inhCq( q,parent);return q;
	case "mas_feel_3e" 	:q=new AL.ClassicalQualities.mas_feel_3e 	(ni); inhCq( q,parent);return q;
	case "mas_feel_4i" 	:q=new AL.ClassicalQualities.mas_feel_4i 	(ni); inhCq( q,parent);return q;
	case "mas_think_0e"	:q=new AL.ClassicalQualities.mas_think_0e 	(ni); inhCq( q,parent);return q;
	case "mas_think_1i"	:q=new AL.ClassicalQualities.mas_think_1i 	(ni); inhCq( q,parent);return q;
	case "mas_think_2e"	:q=new AL.ClassicalQualities.mas_think_2e 	(ni); inhCq( q,parent);return q;
	case "mas_think_3i"	:q=new AL.ClassicalQualities.mas_think_3i 	(ni); inhCq( q,parent);return q;
	case "mas_think_4e"	:q=new AL.ClassicalQualities.mas_think_4e 	(ni); inhCq( q,parent);return q}}
function inhCq( q,parent){ if( parent){ q.parent=parent.cQs.find(o => o.ni === q.ni)}}
AL.ClassicalQualities={ 
	fem_feel_0i	: function(ni){mkCq2(this,ni,false,false,-0,"♀F0i","Sensory \n introverted \n phenomena")},
	fem_feel_1e	: function(ni){mkCq2(this,ni,false,true, -1,"♀F1e","Sensory \n extroverted \n lower needs")},
	fem_feel_2i : function(ni){mkCq2(this,ni,false,false,-2,"♀F2i","Sensory \n introverted \n higher needs")},
	fem_feel_3e : function(ni){mkCq2(this,ni,false,true, -3,"♀F3e","Sensory \n extroverted \n deliberation")},
	fem_feel_4i : function(ni){mkCq2(this,ni,false,false,-4,"♀F4i","Empty \n romantic \n quality")},
	fem_think_0e: function(ni){mkCq2(this,ni,false,true, +0,"♀T0e","iNtuitive \n introverted \n harmony")},
	fem_think_1i: function(ni){mkCq2(this,ni,false,false, 1,"♀T1i","iNtuitive \n extroverted \n significance")},
	fem_think_2e: function(ni){mkCq2(this,ni,false,true,  2,"♀T2e","iNtuitive \n introverted \n awareness")},
	fem_think_3i: function(ni){mkCq2(this,ni,false,false, 3,"♀T3i","iNtuitive \n extroverted \n unity")},
	fem_think_4e: function(ni){mkCq2(this,ni,false,true,  4,"♀T4e","Sensory \n introverted \n phenomena")},
	mas_feel_0i	: function(ni){mkCq2(this,ni,true, false,-0,"♂F0i","Sensory \n extroverted \n lower needs")},
	mas_feel_1e	: function(ni){mkCq2(this,ni,true, true, -1,"♂F1e","Sensory \n introverted \n higher needs")},
	mas_feel_2i : function(ni){mkCq2(this,ni,true, false,-2,"♂F2i","Sensory \n extroverted \n deliberation")},
	mas_feel_3e : function(ni){mkCq2(this,ni,true, true, -3,"♂F3e","Empty \n romantic \n quality")},
	mas_feel_4i : function(ni){mkCq2(this,ni,true, false,-4,"♂F4i","iNtuitive \n introverted \n harmony")},
	mas_think_0e: function(ni){mkCq2(this,ni,true, true, +0,"♂T0e","iNtuitive \n extroverted \n significance")},
	mas_think_1i: function(ni){mkCq2(this,ni,true, false, 1,"♂T1i","iNtuitive \n introverted \n awareness")},
	mas_think_2e: function(ni){mkCq2(this,ni,true, true,  2,"♂T2e","iNtuitive \n introverted \n awareness")},
	mas_think_3i: function(ni){mkCq2(this,ni,true, false, 3,"♂T3i","iNtuitive \n introverted \n awareness")},
	mas_think_4e: function(ni){mkCq2(this,ni,true, true,  4,"♂T4e","iNtuitive \n extroverted \n unity")}}
function mkCq2( o,ni,mas,ie,FT,nI,desc){ o.ni=ni; o.mas=mas; o.ie=ie; o.FT=FT; o.nI=nI; o.desc=desc;}






/*AL.Subjects ={ seed:["Allah","God","Yahweh","Satan", //the gender of allah is undefined, gender of yahweh is fluid
	"Femininity","Masculinity","Adults","Children","Pure","Hejssans","Islam","Kafirs","Culture","Logic","Subjectivity","Objectivity",
	"Best","Average","Median",
	"Best Human","Mr. Best","Mrs. Best","Best Adult","Best Child","Best Pure","Best Hejssan","Best Muslim","Best Kafir","Best Man","Best Woman","Best Boy","Best Girl", //cultural
	"Manhood","Womanhood","Boyhood","Girlhood", //logical
	"The Man","The Woman","The Boy","The Girl", //subjective
	"King of World","Queen of World","Prince of World","Princess of World", //objective
	"King of Muslims","Queen of Muslims","Prince of Muslims","Princess of Muslims", //objective
	"King of Kafir","Queen of Kafir","Prince of Kafir","Princess of Kafir", //objective
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",
	"Median Human","Median Muslim","Median Kafir","Median Man","Median Woman","Median Boy","Median Girl",
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",],
	}*/






function getAvailableMoves(subj){
	var moves=mkBoolMatrix( 4*subj.sex.reso+2);
}
function initTurn(sim){
	sim.keySubj.sMp = mkNullMatrix( 2*AL.vQr);
	sim.availableMoves = getAvailableMoves(sim.keySubj);
	//for(var n=0; n<sim.keySubj.subjs.length; n++){ populateMosaic(sim.keySubj, sim.keySubj.subjs[n])}
}
function attemptMove( mX, mY, preview){
	if(!AL.keySubj.pGn.fem&&mX<2*AL.keySubj.pGn.reso+1&&mY<2*AL.keySubj.pGn.reso+1) {
		var mvX= mX -AL.keySubj.pGn.reso;
		var mvY= mY -AL.keySubj.pGn.reso;
		if( preview){ previewMove( AL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( AL.sim, mX, mY, mvX, mvY);return true }}
	else if(AL.keySubj.pGn.fem&& mX<2*AL.keySubj.pGn.reso+1&&mY>2*AL.keySubj.pGn.reso){
		var mvX=mX -AL.keySubj.pGn.reso;
		var mvY=mY -((AL.keySubj.pGn.reso*3)+1);
		if( preview){ previewMove( AL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( AL.sim, mX, mY, mvX, mvY);return true }}
	return false}
function previewMove( sim, mX, mY, mvX, mvY){
	/*sim.personInTurn.mCpreview = sim.personInTurn.mCppl;*/
}
function moveAgents( sim, mX, mY, mvX, mvY){
	console.log("BREAK");
	sim.keySubj.agents.forEach(function(p){
		if(p.nI === sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*AL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*AL.keySubj.ni.bE.reso+2}}});
	sim.subjs.forEach(function(p){
		console.log(p.agents);
		if(p.nI === sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*AL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*AL.keySubj.ni.bE.reso+2}}
		//precalcOthers(sim.people);
		/*p.ppl.forEach(function(P){
			if(P.ni.in === sim.personInTurn.ni.in){ P.ni.mX =mX; P.ni.mY =mY}
			else{
				P.ni.mX+=mvX; while( P.ni.mX < 0){ P.ni.mX += 4*AL.personInTurn.ni.bE.reso+2}
				while( P.ni.mX>= 4*AL.personInTurn.ni.bE.reso+2){ P.ni.mX -= 4*AL.personInTurn.ni.bE.reso+2}
				P.ni.mY+=mvY; while( P.ni.mY < 0){ P.ni.mY += 4*AL.personInTurn.ni.bE.reso+2}
				while( P.ni.mY >= 4*AL.personInTurn.ni.bE.reso+2){ P.ni.mY -= 4*AL.personInTurn.ni.bE.reso+2}}});*/
		});
	//var vX= mvX; 	var vY= -mvY;
	initTurn( AL.sim);
	draw();}

function populateMosaic(subj,obj){
	if(!Array.isArray(subj.sMp[ obj.mPy][obj.mPx])) { subj.sMp[ obj.mPy][obj.mPx]=[]}
	subj.sMp[ obj.mPy][obj.mPx].push(obj)}
function processSubTurn(sim,mX,mY){
	if(sim.subTurn<sim.subjs.length-1){
		sim.subTurn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	else{
		sim.subTurn=0;
		sim.turn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	AL.keySubj = sim.keySubj;
	precalcObjs( AL.sim);
	initTurn( AL.sim);
	draw();}
function startTurn( sim){ 
	//var opt =getNeighboursOfEssence
	//var b =new Event( sim,)
	}


function initCleanSlate(){
				AL.touched 		=false;

				AL.pGn 			=null;
				AL.sGn 			=null;						
				AL.pPm 			=null;
				AL.sPm 			=null;
				AL.pMd 			=null;
				AL.sMd 			=null;
				AL.mP 			=null;
				AL.pL 			=null;

				AL.ni  			=null;
				AL.tY 			=AT.tY;
				AL.mD 			=null;
				AL.sex  		=null;
				AL.gnd  		=null;
				AL.pM 			=null;
				AL.tYl 			=null;

				AL.turn 		=null;
				AL.subTurn 		=null;
				AL.subjs 		=null;
				AL.subjsL 		=null;
				AL.keySubj 		=null;
				AL.subj 		=null;
				AL.queue 		=null;

				AL.sim=null;

				AL.sBTunes[2] 	=0;
				AL.sBTunes[3] 	=0;

				AL.statSim = AL.statSims[0];
}

function initVariables(){
				AL.pGn 			=AL.subj.pGn;
				AL.sGn 			=AL.subj.sGn;						
				AL.pPm 			=AL.subj.pPm;
				AL.sPm 			=AL.subj.sPm;
				AL.pMd 			=AL.subj.pMd;
				AL.sMd 			=AL.subj.sMd;
				AL.mP 			=AL.subj.mP;
				AL.pL 			=AL.subj.pL;

				AL.ni  			=AL.subj.ni;
				AL.tY 			=AL.subj.tY;
				AL.mD 			=AL.subj.mD;
				AL.sex  		=AL.subj.sex;
				AL.gnd  		=AL.subj.gnd;
				AL.pM 			=AL.subj.pM;
				AL.tYl 			=AL.subj.tYl;
}
function initUserInterface(){
				AL.touched 		=false;

				AL.fesL 		=AL.fes.length;
				AL.sBToolsL 	=AL.sBTools.length;
				AL.sKMoodToolsL =AL.sKMoodTools.length;
				AL.sKTypeToolsL =AL.sKTypeTools.length;
				AL.tBToolsL 	=AL.tBTools.length;
				AL.statTabsL 	=AL.statTabs.length;
				AL.lIFesL 		=AL.lIFes.length;
				AL.lIToolsL 	=AL.lITools.length;
				AL.bPToolsL 	=AL.bPTools.length;

				AL.sBToolsP 	=[]; for( var n =0; n <AL.sBToolsL; n++){ AL.sBToolsP.push(false)}
				AL.sKMoodToolsP =[]; for( var n =0; n <AL.sKMoodToolsL; n++){ AL.sKMoodToolsP.push(false)}
				AL.sKMoodToolsD =[];
				AL.sKTypeToolsP =[]; for( var n =0; n <AL.sKTypeToolsL; n++){ AL.sKTypeToolsP.push(false)}
				AL.tBToolsP 	=[]; for( var n =0; n <AL.tBToolsL; n++){ AL.tBToolsP.push(false)}
				AL.lIToolsP 	=[]; for( var n =0; n <AL.lIToolsL; n++){ AL.lIToolsP.push(false)}				
				AL.bPToolsP 	=[]; for( var n =0; n <AL.bPToolsL; n++){ AL.bPToolsP.push(false)}}

function initDefaultState(){
				AL.sim =RT.sims[0];
				AL.turn 		=AL.sim.turn;
				AL.subTurn 		=AL.sim.subTurn;
				AL.subjs 		=AL.sim.subjs;
				AL.subjsL 		=AL.sim.subjsL;
				AL.keySubj 		=AL.sim.keySubj;
				AL.subj 		=AL.sim.keySubj;
				AL.queue 		=AL.sim.queue;

				AL.sBTunes[2] 	=AL.sim.subjsL;
				AL.sBTunes[3] 	=AL.sim.subjsL+1;

				AL.statSim = AL.statSims[0];
				}


function mkQueue( sim,subTurn){ var q =[];
	for( var n =0; n <sim.subjs.length; n++){ q.push( subjs[ n])} q =shuffle( q);
	sim.subTurn =subTurn;return q}
function queueNext( sim){ var b=null;
	for( var n =sim.subTurn; n <sim.subjsL; n++){
		if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}
	if( b ===null){ sim.turn++; sim.subTurn =0; sim.queue =mkQueue( sim);
		for( var n =sim.subTurn; n <sim.subjsL; n++){
			if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}}
	if( b ===null){ b =[];
		for( var n =0; n <sim.subjsL; n++){ if(!sim.subjs[n].away){ b.push( sim.subjs[n])}}
		if( b.length >0){
			b =b[Math.floor(Math.random()*b.length)]; b.obj=false; sim.keySubj =b; //don't need to do this to turn objs into sbjs
			for( var n =0; n <sim.subjsL; n++){ if( sim.queue[n] ===b){ sim.subTurn =n}}}}}
/*function mkSim2(init, o,   subjs, 	 	subjsL, 	 evs, 	   evsL, 	  turn, 	 subTurn){
	if( init === true) {
						RT.simsL++;
						o.nI 		=RT.simsL;
						o.subjsL 	=0;
						o.subjs 	=[];
						o.queue 	=mkQueue( o.subjs);
						o.keySubj 	=o.queue[0];
						o.evs 		=[];
						o.turn 		=0;
						o.subTurn 	=0;
						o.day 		=0;
						o.hour 		=0;
						o.min 		=0;
						o.sec 		=0;
	}
	else{ 				
						RT.simsL++;
						o.nI 		=RT.simsL;
						o.subjsL 	=0;
						o.subjs 	=subjs.slice(0);
						o.queue 	=mkQueue( o.subjs, subTurn);
						o.evs 		=evs.slice(0);
						o.turn  	=turn;
						o.subTurn 	=subTurn;
	}
	RT.sims.push( o)}*/




function initSubjs(sim){
				sim.finSubjs 	=[]; 	sim.finSubjsL =0;
				sim.sweSubjs 	=[]; 	sim.sweSubjsL =0;
				for( var i =0; i <sim.subjsL; i++){
					if( sim.subjs[i].fin){
						sim.finSubjs.push( sim.subjs[i]);
						sim.finSubjsL++;
						sim.subjs[i].nI =( sim.finSubjsL +9).toString( 36).toUpperCase()}
					else{
						sim.sweSubjs.push( sim.subjs[i]);
						sim.sweSubjsL++;
						sim.subjs[i].nI =( sim.sweSubjsL +9).toString( 36)}
					sim.subjs[i].subjs =sim.subjs;
					mkSignal( sim.subjs[i],"f5");
					mkOptions(sim.subjs[i]);}
				//sim.nI 	=AL.simsL +1;
				sim.queue =sim.subjs.slice();
				sim.queue =shuffle( sim.queue);
				sim.keySubj =sim.queue[0];
}

function initSims(){ mkSim( RT, "sim", false); copySim( RT, RT.sims[0], 10);}

// abstract value is always at least the same as abstract karma?
// maybe should scrap this hypothesis

function mkStatSim( to,ni){ var s =new StatSim( to,ni); to.statSims.push(s)}
function mkSim( to,ni,randSubjs){
	var rand=false; if( randSubjs){ rand=true}
	var s =new Sim( to,ni,rand); to.simsSrc.push(s); to.sims.push(s);
	if(!randSubjs){
		s.subjs 	=mkSubjs(s);  				s.subjsL =s.subjs.length;
		s.places 	=precalcDefaultPlaces( AL.Places.seed);
		putDefaultSubjsToDefaultPlaces( s.subjs, s.places);}
	initSubjs( s);}
function StatSim( to,ni){ mkStatSim2( this,to,ni)}
function Sim( to,ni,rand){ mkSim2( this,to,ni,rand)}
function mkStatSim2( o,to,ni){
	to.statSimsL++;
	o.ni =ni;
	switch( ni){ case "tot" : o.nI="Σ";break;case "avg" : o.nI="x̄";break;case "med" : o.nI="µ"}
	mkResolution( 	o, 	 	AL.rXp);
	//o.ab={}; o.re={};
	//o.mP =mkNullMatrix
	o.subjs =[]; 	o.subjsL =0;}
function mkSim2( o,to,ni,rand){
	o.copies=null;
	o.copiesL=0;
	to.simsSrcL++;
	to.simsL++;
	if(rand){ 	to.simsSrcRand.push(o); to.simsSrcRandL++;o.nI=idOf(to.simsSrcRandL-1); o.ni=ni+"_"+idOf(to.simsSrcRandL-1);}
	else{ 		to.simsSrcDef.push(o); 	to.simsSrcDefL++; o.nI = to.simsSrcDefL; 	o.ni =ni+"_"+to.simsSrcDefL;}
	mkResolution( 	o, 	 	RT.rXp);
	//o.ab={}; o.re={};
	//o.mP =mkNullMatrix
	o.subjs =[]; 	o.subjsL =0;
	o.evs =[]; 		o.evsL =0;
	o.turn =0; 		o.subTurn =0;
	o.queue =[]; 	o.keySubj =null;
	initQualities(o);}
function copySim( to,s,n){
	if(!n){ var n=1}
	for(var i=0; i<n; i++){ 
		if(!s.copies){ s.copies =[]}
		var sim = _.clone(s);
		sim.copies=null;
		sim.copiesL=0;
		s.copies.push(sim);
		s.copiesL++;
		sim.ni = s.ni +"_copy" + s.copiesL;
		sim.nI = s.nI +"." + s.copiesL}
	to.sims =mkSimArr( to.simsSrc);
	to.simsL=to.sims.length}

function mkSimArr( sims){
	var r=[];
	for(var i=0; i<sims.length; i++){
		r.push( sims[i]);
		if(sims[i].copies){ includeCopies( r,sims[i])}}
	return r}
function includeCopies( arr,sim){
	for(var i=0; i<sim.copies.length;i++){
		arr.push( sim.copies[i]);
		if(sim.copies[i].copies){ includeCopies( arr,sim.copies[i])}}
	return arr}

/*o.sex= ni.substr( 0,ni.indexOf( '_')); 					o.sex= getObjByNi( o.sex,AT.sXs);
	o.gnd= ni.split( '_')[1].substr( 0,ni.indexOf( '_'));	o.gnd= getObjByNi( o.gnd,AT.gNs);
	o.pM = ni.substr( ni.indexOf( '_') +1)
		.substr( ni.indexOf( '_') +1)
			.substr( ni.indexOf( '_')); o.pM ="G"+o.pM;		o.pM = getObjByNi( o.pM, AT.pMs);
	*/

function countOntology(){
				AT.fQsL 		=AL.FeminineQualities.length;
				AT.mQsL 		=AL.MasculineQualities.length;
				AT.aQsL 		=AL.AdultQualities.length;
				AT.cQsL 		=AL.ChildQualities.length;

				//AT.rQsL 		=AL.RomanticQualities.seed.length;
				//AT.sQsL 		=AL.ScalarQualities.seed.length;
				//AT.vQsL 		=AL.VectorQualities.seed.length;
				AT.sXsL 		=AL.Genders.seed.length;
				AT.pMsL 		=AL.PrimalMoods.seed.length;
				AT.iEsL 		=AL.InformationElements.seed.length;
				AT.fNsL 		=AL.Functions.seed.length;
				AT.cRsL 		=AL.Circuits.seed.length;
	
				AT.tYsL 		=AL.Sociotypes.seed.length;
				AT.gNsL 		=AL.Sexes.seed.length;			
				AT.mDsL 		=AL.Moods.seed.length;
				AT.originsL  =AL.Origins.seed.length;

				AL.PlacesL 		=AL.Places.seed.length;
}
function initQualities(to){
	to.fQs 		= [];

	to.sXs 		= []; 
	to.gNs 		= [];
	to.sQs 		= [];
	to.vQs 		= [];
	to.pMs 		= [];
	to.mDs 		= [];
	to.iEs 		= [];
	to.fNs 		= [];
	to.cRs 		= [];
	to.tYs 		= [];
}
function mkQualities(to,parent){
	to.fQs 		= precalcFeminineQualities( 	AL.FeminineQualities, 					parent);
	to.mQs 		= precalcMasculineQualities( 	AL.MasculineQualities, 					parent);
	to.aQs 		= precalcAdultQualities( 		AL.AdultQualities, 						parent);
	to.cQs 		= precalcChildQualities( 		AL.ChildQualities, 						parent);

	to.sXs 		= precalcSexes( 				AL.Sexes.seed, 							parent); 
	to.gNs 		= precalcGenders( 				AL.Genders.seed, 				 		parent);
	to.sQs 		= precalcScalarQualities( 		AL.ScalarQualities.seed, 				parent);
	to.vQs 		= precalcVectorQualities( 		AL.VectorQualities.seed, 		to.sQs, parent);
	to.pMs 		= precalcPrimalMoods( 			AL.PrimalMoods.seed, 					parent);
	to.mDs 		= precalcMoods( 				AL.Moods.seed, 					to, 	parent);
	to.iEs 		= precalcInformationElements( 	AL.InformationElements.seed, 	to, 	parent);
	to.abSpace 	= precalcSocionicsMetaphysics( 	to.iEs);
	to.fNs 		= precalcFunctions( 			AL.Functions.seed, 						parent);
	to.cRs 		= precalcCircuits( 				AL.Circuits.seed, 						parent);
	to.fAs 		= to.fNs.concat( 				to.cRs);
	to.reSpace 	= precalcSocionicsEssence( 		to.fNs, to.cRs);
	to.tYs 		= precalcSociotypes( 			AL.Sociotypes.seed, 			to,		parent);
	to.tY 		= mkType("NaT", to, parent);
	//function mkType(ni,ab,parent,subj){
}
function mkResolution( to, rXp){ 
	to.rXp = rXp;
	to.sQr = Math.pow( 4, rXp);
	to.vQr = 2 * to.sQr + 1;
	to.mPr = 2 * to.vQr}

function initOntology(){
						countOntology();
						mkResolution( 	AL, 	1);
						mkResolution( 	AT, 	AL.rXp);
						mkResolution( 	RT, 	AL.rXp);							
						mkQualities( 	AT);
						AL.statTabsL = AL.statTabs.length;
						AL.statSims =[];
						AL.statSimsL=0;
						for(var i=0; i<AL.statTabsL; i++){ mkStatSim( AL, AL.statTabs[i])}	AL.statSimsL =AL.statSims.length;}

function precalc() { 
						

						initOntology();
					
						initSims();

						initUserInterface();
						initDefaultState();
						initVariables();
						initTurn( AL.sim);

						console.log( RT);
						console.log( AT);
						console.log( AL);
}
precalc();

// Notes 2:

// falling asleep is masculine version of orgasm?
// people don't remember the moment they fall asleep because the masculine origin has neither value nor karma.
// if the masculine origin has neither value nor karma, how does it work at all?
// the model includes no concept of "rest". yet resting should be valuable when one is tired.
// the intention of resting should value qualities with low magnitude.
// children don't like to go to sleep because falling asleep has no value and this is difficult to comprehend for the child.

// non-heteronormative mood is caused by scalar qualities whose genders mismach. information elements have no gender or age, contrary to what is stated in Notes 1.
// consequently, it isn't enough to define about 384 different moods.
// scalar qualities have sex or age but no gender. non-heteronormativity is not possible at this level.
// vector qualities have sex, age and gender. non-heteronormativity is possible at this level.
// no, it's wrong. non-heteronormativity has to be an information element because a vector quality has sex and age but no gender.
// information elements are OVERLAPPING PAIRS OF VECTOR QUALITIES so that one vector quality is the intension of ie 1 and other, the extension of ie 1.
// the intension of ie 1 is the extension of ie 2 and the intension of ie 2 is a new vector quality (not either one of the previous two).
// 

// Notes 1:

//RT.sims should contain all true (not derived) simulations
//AL.sims should contain selected simulations
//AL.sim should contain the active simulation
//derived simulations are contained by AT.sims and cannot be selected but can be active (can be AL.sim)
//Apart from this, RT contains precalc settings of relative subjects and objects, and raw data collected from all simulations.
//It should be possible to copy the initial simulation and to create new simulations in which there are random factors within bounds specified by precalc values
//comparable subjects produced by precalc should associate to each other by ni
//This data is necessary for searching for objects.
//Data compiled from data collected from all simulations, such as averages or medians, belong to some simulation in AT.
//if there are both cloned and generated simulations, their averages or medians should be modeled both separately and together, meaning three instances of each tab defined in AT
//ni discrepancy makes it impossible to combine all aspects of cloned and generated simulations
//Data of absolute simulations is not updated at runtime unless that is specifically asked for (meaning the tab of the simulation is open or the data is used to search for an object)
//This data can be used for searching for objects but isn't necessary for that.
//AT contains also all archetypes. Archetypes can also be relevant for making statistics

//for brevity, resolution could perhaps be expressed as an attribute of the RT object even though it would technically belong to AT
//If resolution of the RT object were greater than the resolution of any simulation in RT then the program would need to break some tie in AT that wasn't actually broken, but this only makes sense if there is some a deterministic method for that.
//There would be a need to separate the resolution of RT and AT to improve performance if the simulation is continued after deriving data from it to AT
//It would be better to designate greatest resolution exponent of a relative simulation an attribute of the RT object even though the need to differentiate resolution in RT and AT is quite remote for now.
//The resolution that is currently relevant (resolution of the AL object) can be obtained from RT, AT or any individual simulation
//The resolution of the AL object would need to be changed whenever active simulation or active subject is changed
//There is always an active simulation but not always an active subject
//There is no need to precalc colours of quality vectors for resolution exponents greater than 1

//chains of scalar qualities are evaluated so that V(1) * V(2) * V(3) * ... * V(4ˆAL.rXp).
//only scalar qualities of the same type (ie THINK or FEEL or "SENSE" or "INTUIT" or ROMANTIC_0) may be chained
//qualities which have both intension and extension, and include ROMANTIC_0, can have an age but cannot have a gender
//because they cannot have a gender they cannot be feminine
//therefore the masculine origins are actually equivalent to the non-feminine origins.
//if the resolution of a value (length of the chain) is less than V(4ˆrXp) then it is evaluated so that
//f.ex AL.rXp = 4 and resolution of a particular value is 2 
// V(1) * V(2)
// so that V(x) returns a value from 0 to 4 (and 0 only when this is the first value of the chain or the chain is intuition)
// when the maximum is:
// 4 * 4 * 4 * 4
// which is why the user doesn't really need to manipulate the part of the program which deals with this
// after the user (developer) has verified that this part works

	// There are no relative instances of qualities.
	// qualities may be attributes of relatively existing things.
	// Information Elements are not qualities because they exist in time.
	// To exist in time is a relative form of existence even though Information Elements also have an absolute form.
	// Relative instances of forms must be sexed.
	// Relative instances of essences don't necessarily need to be sexed or have already been sexed.
	// Only one relative instance of each kind of essence needs to be precalculated for a subject.

// What would it mean to increase resolution from 4? The next possible resolution would be 16. In this case 16 base scalar qualities would be ordered pairs of 4 base scalar qualities.
// MYSTICAL QUALITY NEEDS NO MODEL if we can reduce mystical quality to a higher base resolution model of objectivity. <- bad idea
// subjectivity and logic can be modeled so that only the base resolution of intension or extension is higher? <- bad idea
// quality is the IDEAL value of something, not its actually experienced value which is sociotypal VALUE.
// sociotypal value is the same thing as subjective value. qualitative value is the same thing as objective value.
// sociotypal value is the same thing as feminine value? qualitative value is the same thing as masculine value?
// increasing the base from 4 is the only way to compare sequences of qualities in this model.
// researching sequences of qualities is probably the only way to discover how moods are changed to other moods.
// information about moods would be lost in a model with a resolution of 2.
// resolution of 16 does not seem to increase qualitatively the amount of information in any other way than by making it possible to compare the value of objects whose first quality is equal.
// the quality of an object is an arbitrarily long sequence of pairs of romantic and classical qualities.
// one half of the pair can be empty
// the quality of an object is a pair of sequences of romantic and classical qualities which also manifest as intensions and extensions
// the intensions and extensions are also sequences of qualities (arrays)
// the intensions and extensions are necessary for the function and circuit model
// romantic and classical qualities are necessary for the scalar, vector and mosaic plane quality model.
// there is no volition in the vector and mosaic plane model. nothing is left to chance.
// there is volition in the information element model
// there is volition in identifying scalar qualities because we don't have a method for that.
// scalar qualities are pairs of information elements? one is classical and one is romantic? this depends on the ie? one is also intension and other is extension. this does not depend on ie, it depends on the way how functions and circuits have been used.
// but information elements are neither strong nor weak. no pair of information elements decides weak/strong. yet scalar qualities are either weak or stong.
// scalar qualities are not pairs of information elements.
// information elements are pairs of scalar qualities
// pairs of scalar qualities are vector qualities
// information elements are generalizations of vector qualities.
// the sex of an information element can be determined according to constituent romantic qualities
// information elements may have chirality?
// romantic scalar qualities, including ROMANTIC_0, have a sex. classical scalar qualities don't.
// scalar qualities whose sex is different need to be modeled as different objects
// f.ex. needing attention for its own sake is a feminine scalar quality. it obviously is easier to define as a scalar quality than as an information element.
// associating scalar qualities to the self is to objectify the self
// to objectify the self decreases the feminine quality of the self
// to be objectified by another does not decrease the feminine quality of the self?
// pure classical qualities are always intensions and pure romantic qualities are always extensions
// feminine subjects gravitate towards feminine objects unless they are aroused. if they are aroused they don't want to create intensions.
// the gender of a romantic quality is feminine or neutral: FEM or GND
// pairing a masculine scalar quality with a romantic scalar quality is not possible because classical scalar qualities do not have gender
// pairing a masculine information element with a feminine information element is possible: this is the only possible cause of non-heteronormative mood.
// classical scalar qualities have an age: child or everyone: KID or AGE
// information elements are the only possible way to explain how is a mismatch of sex and gender generated
// if we were to teach an AI something by using a program like markover we would have to teach it in terms of scalar qualities.
// so scalar qualities are a way to input data into the program at precalc but information elements would be the only way to input data at runtime.
// we do not need information elements for inputting data at precalc?
// if we need scalar qualities at runtime we need them for inputting info that could in theory be done at precalc.
// we may still need to input scalar qualities at runtime anyway.
// if we had a program like markover we would need to input classical and romantic qualities separately and simultaneously.
// in symmetrical moods, the object automatically adds its multipolar location to itself, turning it back into a subject.
// in this case no intension is created
// life positions and subj obj positions are attributes of events whose values are subjects.
// in the scalar quality feature of the program, there is no need for any sequencer. there is also no need for a list of subjects. a list of objects would be needed.

// lp ip up 	gnostic						-> peaceful
// lp ino uno, 	subjective	ISBJ	UOBJ	-> caring
// lp ip up, 	gnostic 	iobj 	usubj 	-> playingly careful
// lp iok uok, 	mystical					-> playful
// lp ip up, 	gnostic		iobj 	uobj 	-> carefully playful
// lp ip up, 	gnostic 	isubj 	usubj 	-> playing & careful
// lp ip unp 	rational					-> hostile
// lp ino uok, 	objective 	 				-> escape
// lp ip unp 	rational 	iobj 	usubj 	-> fightingly escaping
// lp iok uno, 	logical 	ISBJ	UOBJ	-> fighting
// lp ip unp 	rational 	iobj 	uobj 	-> escapingly fighting
// lp ip unp, 	rational 	isubj 	usubj 	-> escaping & fighting

// functions have process positions?
// 5,8 isbj uobj
// 2,3 iobj usbj
// 1,4 isbj uobj
// 6,7 iobj usbj

// IEs have life positions?

// what if circuits DON'T have process positions?

// vector qualities have life positions derived from IE
// vector qualities have SVM derived from IE
// IEs have SVM

// lps and subj-obj-positions are attributes of relations.
// subj-obj positions are attributes of directed socionics relations. subj position is the "better" one
// subj-obj positions can be used to replace so-called process positions which i inveted. subj is busy position and obj is done position.
// self-sacrifice can only be done if much positive karma outweighs not-as-much negative value.
// positive value outweighs an equal amount of negative karma.
// the value of (shared) culture decides how much ip unp does one take from another before mood change from ip up to ip unp.

// so on faculty level we calc all mental value and call the result subjective value
// we calc all value and call the result quality
// we need the faculty model as an input to the vector quality model so that the vector quality model can be an input to the object model which is based on scalar quality.

// BottomBar is not needed in object feature

// signal consists of intension-extension (predicate) chain and romantic-classical (scalar quality) chain
// the information element chain is determined according to the predicate chain and scalar quality chain
// the information element chain is used to determine when the option for user input into the information element model is possible.
// inputting information to the model as information elements is a way to modify the state of the simulation without breaking its continuity.

// if there is information element of value in a mental faculty then signal needs to go there (to the associated faculty) in order for the subject to access this information.
// how does the signal go there? if it isn't in an adjanced faculty it will terminate a current process
// information element model is used for explaining processes in the context of episodic time. this is the difference between information elements and qualities. qualities do not exist longitudinally in time except as attributes of information elements.
// mental faculties are used for creating the subject's conception of time.
// there is no process aspect to qualities. qualities are only paired but not arranged into longer sequences.
// valued and mental faculties are a, c, 5, 8.

// if subject perceives another subject to have a lower resolution, the other subject appears infantile or feminine?
// differences of opinion can (only) be explained in a meta-model in which some choice appears to be arbitrary in the lower-resolution model but turns out to be deterministic in the higher-resolution model?
// the resolution of the entire simulation is the highest resolution of any subject in the model
// resolution exponent 1 is enough for generating all precalc data
// vector qualities can be connected into chains, too, but these chains do not exist in time.
// they also do not exist in a mood except when they are used for evaluating something.
// the value of a subject's evaluation of an object is determined primarily according to the last vector quality of the value and secondarily according to the resolution of the value
// increasing the resolution of a value is a method for breaking ties

// markover needs data input as romantic and classical scalar AND also as vector so that:
// if something is a reference to a valuable object the value of the referent is a vector
// ...and the reference is a pair of scalars so that...
// ...the scalars can be less valuable than the vector if the reference does not contain that which is valuable about the referent
// ...but merely refers to it.
// this is an extremely good way to refer to negative quality without reinforcing it via its feminine (performative) side.

// cognitive paths including information elements may be modeled as sequences of faculties whose resolution is 3^n in which n is the length of the path
// there is never a reason to use a circuit two times in a row, except to clear the mind when using the creative function
// if an accepting function has a vector it is by default the extension
// if a producing function has a vector it is by default the intension
// reversing a circuit overwrites the extension with the intension
// reversing a circuit corresponds to the relative direction -1 (or "2") whereas traversing the circuit corresponds to the relative direction 1
// the complexity of a chain is FAC1 * FAC2 * FAC3 ... in which FACn is either a circuit or a function so that being a function turns FACn into 7 and being a circuit turns FACn into 3.
// such models do not account for the possibility of external influence to the process
// in order to model maximum complexity of a sequence each instance of FACn could be interpreted as a 7 but this might produce a number that's greater than the actual maximum complexity
// because it can't be complex to use the same IE all the time but this is the only way to retain a theoretical maximum complexity of 7 for each link of the chain

// use of a circuit costs energy, not time

// in order to jump where there is absolute signal, the relative signal termines itself and automatically starts again at the position of greatest absolute value

// reversing the i circuit is the fastest way to clear the ego from its initial condition

// circuits and functions are constituents of subjects
// information elements are attributes of subjects
// scalar qualities are attributes of objects
// on the mosaic plane, scalar qualities are accumulated in domains of object and information elements in domains of subject?

// technically, in chains of scalar qualities the null value of JavaScript would mean "undefined/arbitrary" and ROMANTIC_0 specifically zero.
// orgasm only happens when ROMANTIC_0 is the most valuable scalar quality of the model
// orgasm lasts only until some other scalar quality accumulates more value
// time could perhaps be defined in relation to the length of an orgasm
// the default unit of measuring time would be in relation to the length of arousal? explaining why longer intercourses could make people more patient

// being an object does not happen in time because scalar qualities do not happen in time?
// scalar qualities have to happen in time, otherwise bad things can't happen in time
// vector qualities do not happen in time
// the value of an information element is determined on the subject domains of the mosaic plane
// orgasm is an Information Element of its own
// it represents the 0 value of the Information Element model
// ROMANTIC_0 with an intension means the orgasm of a subject's object
// the subject's object can also be the self if one refers to his own orgasm while not having it
// abstract (iNtuitive) scalar qualities and Information Elements are inherently weaker than Sensing scalar qualities.
// because strength means the ability to sustain itself, Thinking is inherently stronger than Feeling
// if objectivity were the ultimate ground of relevance reality would obviously contain too much information for making a complete model.
// there are two null Information Elements without orgasm:
// * ROMANTIC_0,FEEL_0i would be vector M_iNtuit_0i because Mysticality is the ultimate ground of relevance of this model.
// * a subject cannot notice ROMANTIC_0,THINK_0e = L_Think_0e in himself unless he is an object (in object domain of mosaic plane).
// to become an object of Buddhism so that Buddhism is a subject makes it possible to meditate indefinitely because Buddhism tells one to produce L_Think_0e
// M_iNtuit_0 is the weak zero and L_Think_0e is the strong zero
// "SENSE_0" could as well be called ROMANTIC_0 without an intension, which is orgasm
// Perhaps iNtuitions are echoes of Sensations anyway
// sensory deprivation creates hallucinations and hallucinations must be produced by intuition
// prolonged sensory deprivation is torture
// total sensory deprivation would cause anguish after the echoes would wear out
// in this sense intuition resembles karma whereas sensing resembles value
// karma could be more important than value for intuition!
// if so, the hostile man and boy would be most able to create intuitive worth.
// the fighting man would be better at evaluating negative karma objectively than the hostile man
// extreme intuitive scalar quality associates to bad karma more than medium intuitive scalar quality
// extreme sensory scalar quality associates to bad value more than medium sensory scalar quality
// 0 is the most karmic number
// classical quality is more relevant for intuition than romantic quality
// romantic quality is more relevant for sensing than classical quality
// non-negative romantic coordinate is domain of intuition and negative romantic coordinate is domain of sensing
// because weakness is more inherent to intuition strength associates to negative sign of r coordinate
// vector qualities can be said to have a primary and secondary value
// for intuition karma is primary and value secondary, for sensing value is primary and karma secondary
// projections of mood planes should be made so that primary value associates to high saturation of colour and K is above V when more valuable, ie. when the r coordinate has a non-negative value
// the size of the domain of sensing is smaller than the domain of intuition because intuition includes the c axis.
// sensory 0 is orgasm
// in order to attain sensory 0 it is necessary that FEEL_0i and THINK_0e are absent
// arousal means ROMANTIC_0 as intension
// orgasm means ROMANTIC_0 as extension and no intension
// attempting to overwrite ROMANTIC_0 as extension does not ruin an orgasm if it is began before the orgasm starts but after the orgasm has become inevitable. it it is began before the orgasm has become inevitable there will be no orgasm.
// feminine subjects and objects affect the location of masculine subjects on the multipolar plane
// if the domains weren't mirrored it would look like feminine subjects pull masculine subjects towards themselves
// masculine objects and subjects do not pull feminine objects towards themselves
// this way, in order to have sex the masculine subject needs to do (x,y) so that |x| = 4 and |y| = 4 while feminine subject does (-x,-y) so that |x| = 1 and |y| = 1. when the masculine subject does (x,y) again he reaches the origin of the feminine subject.
// arousal is created within subjective and logical domain
// orgasm is created within objective and mystical domain?
// only an aroused (symmetrical) mood lets the subjects do (x,y) or (-x,-y) again without creating an intension
// creating an intension affects the subject's own place on the multipolar plane. it places him back into his own domain.
// the value of arousal can exceed the value of orgasm
// the karma of arousal is relevant to courting
// there is no such thing as a masculine orgasm because the masculine origin never has value or karma
// in order not to hurt a feminine thing the feminine thing needs to be loved or to have a purpose
// which is an origin of the need for privacy
// but also an origin of the need for exhibitionism
// femininity isn't protected by having a purpose
// so females aren't restricted to behaving only femininely
// because non-feminine behavior may have a purpose
// if a subject can use a dialectic method to precalc his response to every stimulus he will experience the precalc is neither masculine nor feminine
// as such, on the mosaic plane it originates from the non-feminine origin
// on the multipolar plane, masculine subjects can access feminine vector qualities whose classical qualities are nonzero and romantic qualities are zero as descriptions of how females behave.
// these classical qualities are available only in feminine domains
// the same classical qualities cannot be found in masculine domains
// associating these classical qualities to nonzero feminine romantic quality causes corrective behaviour in case of negative romantic quality and feminine behaviour in case of positive romantic quality.
// it is pointless for men to associate positive feminine romantic quality to them because men cannot decide how women are
// if men behave like women or try to decide how women are they are being feminine
// these classical qualities are available to feminine subjects only via feminine objects
// these are not valued by aroused females
// the object of lesbian sex needs to be a masochist? or else the vectors wont find the origin on the mosaic plane
// beause every man has a feminine side male-female sex could be modeled as lesbian sex
// if the woman wants to stop before the man is done without an external (extroverted) cause for this (such as fear), this is caused by her modeling the intercourse as lesbian sex
// ie. she does not perceive the masculine aspect of the man regardless of what it is
// classical scalar quality has a gender only on the multipolar plane
// true gender neutrality on the multipolar plane is accomplished only by pairing romantic and classical qualities of mixed gender.
// which prevents arousal by creating an intension which is not ROMANTIC_0


</script></head>
<body>
	<!-- Google Tag Manager (noscript) -->
	<!--<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVWFS2"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>-->
	<!-- End Google Tag Manager (noscript) -->
	<script>(function() { predraw(); draw();})();</script>
	<script type="text/javascript">var sc_project=863932;var sc_invisible=1;var sc_security="0ed0c038";</script>
	<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
	<noscript><div class="statcounter"><a title="Web Analytics Made Easy - StatCounter" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="//c.statcounter.com/863932/0/0ed0c038/1/" alt="Web Analytics Made Easy - StatCounter"></a></div></noscript>
</body></html>
