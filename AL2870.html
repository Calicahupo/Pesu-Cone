<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head> <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type"/>
<title>SOS-Aston-3.141-2870</title>
<style>svg text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}
	svg text::selection { background: none;}
	@font-face { font-family:'profont'; 			src:url('diodi/profontwindows-webfont.woff2')format('woff2'),
		url('diodi/profontwindows-webfont.woff') 	format('woff');	font-weight:normal; font-style:normal; }
	/*@font-face { font-family: 'de_valenciaregular'; src: url('diodi/de_valencia_beta-webfont.woff2') format('woff2'),
        url('de_valencia_beta-webfont.woff') 		format('woff'); font-weight: normal;font-style: normal;}*/
    @font-face { font-family: 'strike_fighter';    	src:url('diodi/strikefighter-webfont.woff2')format('woff2'),
    	url('diodi/strikefighter-webfont.woff') 	format('woff'); font-weight: normal; font-style: normal;}
    /*@font-face { font-family: 'VGA'; 				src: url('diodi/PerfectDOSVGA437.woff2') format('woff2'),
        url('diodi/PerfectDOSVGA437.woff') 			format('woff'); font-weight: normal; font-style: normal;}
        , url('diodi/PerfectDOSVGA437.svg#PerfectDOSVGA437') format('svg')*//*hexadecimal sequencer bebas?*/
	html{height:100%;padding:0px;margin:0px;font-family:profont;font-size:13px;background-color:black;color:white;}
	body{height:100%;padding:0px;margin:0px;background-color:transparent;}
</style><!-- src="diodi/di0016.js"></script><!-aldiod--> <!-- src="diodi/dB0000.js"></script><!-devBar-->
<script src="diodi/jquery-2.js"></script><script>
//window.addEventListener("resize", draw, true);
function draw(){ /*calcInterface( OM);*/ predraw( OM); /*clearScreen();*/ postinit( OM); /*clearScreen();*/}
function clearScreen(){var e=Array.from(document.querySelectorAll('*')); e.forEach( function(e){ e.remove()})}
var OM={ 
	defUser:false,
	dev: 	true,
	fe: 	"mosaic",
	fes: 	["money","mosaic","yozen","zygn"],
	pages: 	["initUser"],
	pJ: 	["TYPE","META","COL.","TOC."],
	sG: [{fe:"money",sTs:["hello"],
			dis: 	 { mono:"", u:"sGN", d:"sGS", l:"sGW", r:"sGE", uL:"sGNW",	uR:"sGNE", 	dL:"sGSW", 	dR:"sGSE"}}],
	dC: [{fe:"mosaic",sTs:["hello","world"], 
			dis: 	 { mono:"", u:"mCAHo",d:"mCAHe",l:"mCCHo",r:"mCCHe",uL:"qRuLS",uR:"qRuRS",dL:"qRdLS",dR:"qRdRS"},
			override:{ mono:false,u:false,d:false,l:false,r:false}}],
	qU: [{fe:"zygn",sTs:["hello"],
		 	dis: 	 { mono:"",	u:"", d:"", l:"prompt",r:"",	uL:"", 		uR:"mCSelf",dL:"", 		dR:"mCOther"},
			override:{ mono:false,u:false,d:false,l:true, r:false}}],
	qD: [{hnd:"prompt"  }],
	mC: [{hnd:"mCSelf"  },{hnd:"mCOther" },{hnd:"mCAHo" 	},{hnd:"mCAHe" 	},{hnd:"mCCHo" 	},{hnd:"mCCHe" 	}],
	qR: [{hnd:"qRuLS" 	},{hnd:"qRuRS" 	},{hnd:"qRdLS" 	},{hnd:"qRdRS" 	}],	kK: [{hnd:"..." }],
	reso: 	5,	fesLen: 0, 	sTs: []}
var sV =document.createElementNS( "http://www.w3.org/2000/svg","svg"); var nS =sV.namespaceURI;
function predraw( om){ sV.setAttribute( 'height',window.innerHeight); sV.setAttribute( 'width',window.innerWidth);
	for(var j=0; j < om.fesLen; j++){ if( om.ui.features[j].nim ==om.fe){
			//console.log( om.ui);//.features[j]); console.log("j"); console.log( om.ui.features[j].dev.sB.sV);

			for(var i=0; i < om.ui.features[j].dev.sB.sV.dELen; i++){ sV.appendChild( om.ui.features[j].dev.sB.sV.dE[i])}
			if( om.ui.features[j].act.sT){ sV.appendChild( om.ui.features[j].dev.sT.sV)};
			if( om.ui.features[j].act.eX){ sV.appendChild( om.ui.features[j].dev.eX.sV)};
			if( om.ui.features[j].act.sQ){ sV.appendChild( om.ui.features[j].dev.sQ.sV)};
			if( om.ui.features[j].act.gR){ sV.appendChild( om.ui.features[j].dev.gR.sV)};
			if( om.ui.features[j].act.oL){ sV.appendChild( om.ui.features[j].dev.oL.sV)};

			if( om.ui.features[j].act.aM){ sV.appendChild( om.ui.features[j].dev.aM.sV)};
			if( om.ui.features[j].act.sH){ sV.appendChild( om.ui.features[j].dev.sH.sV)};
			if( om.ui.features[j].act.cA){ sV.appendChild( om.ui.features[j].dev.cA.sV)};
			//if( om.ui.features[j].act.mE){ sV.appendChild( om.ui.features[j].dev.mE.sV)};

			if( om.ui.features[j].act.sG){ sV.appendChild( om.ui.features[j].dev.sG.sV)};	
			if( om.ui.features[j].act.dC){ sV.appendChild( om.ui.features[j].dev.dC.sV)};
			//if( om.ui.features[j].act.qU){ sV.appendChild( om.ui.features[j].dev.qU.sV)};
			if( om.ui.features[j].act.mC){ sV.appendChild( om.ui.features[j].dev.mC.sV)};
			if( om.ui.features[j].act.kK){ sV.appendChild( om.ui.features[j].dev.kK.sV)};

			if( om.ui.features[j].act.pM){ sV.appendChild( om.ui.features[j].dev.pM.sV)};
			if( om.ui.features[j].act.yO){ sV.appendChild( om.ui.features[j].dev.yO.sV)};
			//if( om.ui.features[j].act.tT){ sV.appendChild( om.ui.features[j].dev.tT.sV)};

				}}}
$(document).ready( function(){ postinit( OM)})
function postinit( om){ drUserPage( OM.user, OM.ui.th);

}

function mkDiffSpace( se){ }
function DiffractionPlane( nim,o1,f1,o2,f2,o3,f3,o4,f4){ this.nim=nim;
	this.c={ o1:o1,f1:f1,o2:o2,f2:f2,o3:o3,f3:f3,o4:o4,f4:f4}}
function precalcDiffSpace( t){var ys={ seed:null, c:null}; 
									ys.seed =new DiffractionPlane( "M",		false,false,
																			false,true, 
																			true, false,
																			true, true);
	ys.c =mkDiffSpace( ys.seed);return ys}
function mkType2( t){ t.c.x3= !t.c.x1; t.c.y3= !t.c.x1; t.c.x4 = t.c.x1; t.c.y4= !t.c.x1; return t}

//

OM.PP={ seed: ["PP00","PP01","PP10","PP11"]}
OM.LP={ seed: ["LP00","LP01","LP10","LP11"]}
OM.MD={ seed: ["Ke","Ki","Se","Si","Le","Li","Je","Ji"]}
OM.GD={ seed: ["M","F"]}
OM.AD={ seed: ["A","C"]}
OM.VD={ seed: ["I","E"]}
OM.ED={ seed: ["K","S","L","J"]}
OM.ID={ seed: ["Ri","Re","Fi","Fe","Ti","Te","Ni","Ne"]}


OM.Dice={ seed:["des","asc","rea","fro","str","prt","Bpx","Gpx","Bfx","Gfx","Bxn",
				"Gxn","Bxy","Gxy","Bpn","Gpn","Bpy","Gpy","Bfn","Gfn","Bfy","Gfy"],
	Di:function( n, ni, hoe, hot, hog){ var o={ n:n, ni:ni, hoe:hoe, hot:hot, hog:hog}; return o}}
function des( n, ds, chi, hom){ var o=OM.Dice.Di(n,"des",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function asc( n, ds, chi, hom){ var o=OM.Dice.Di(n,"asc",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function rea( n, ds, chi, hom){ var o=OM.Dice.Di(n,"rea",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function fro( n, ds, chi, hom){ var o=OM.Dice.Di(n,"fro",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function str( n, ds, chi, hom){ var o=OM.Dice.Di(n,"str",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function prt( n, ds, chi, hom){ var o=OM.Dice.Di(n,"prt",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpx( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bpx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpx( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gpx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfx( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bfx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfx( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gfx",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bxn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bxn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gxn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gxn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bxy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bxy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gxy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gxy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bpn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gpn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bpy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bpy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gpy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gpy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bfn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfn( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gfn",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Bfy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Bfy",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}
function Gfy( n, ds, chi, hom){ var o=OM.Dice.Di(n,"Gry",ds,chi,hom); this.n=o.n; this.ni=o.ni;
	this.hot=o.hot; this.hot=o.hot; this.hog=o.hog;}

OM.Type={ seed: ["NaT","RIT","RET","RIF","REF","TIN","TEN","TIR","TER","FIN","FEN","FIR","FER","NIT","NET","NIF","NEF"],
	f1:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f2:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f3:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f4:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f5:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f6:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f7:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	f8:function( n,x,y,z){ this.n=n;this.x=x;this.y=y;this.z=z},
	a:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	b:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	c:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	d:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	e:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	f:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	g:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	h:function( n,x,y,z,Z) { this.n=n;this.x=x;this.y=y;this.z=z;this.Z=Z},
	i:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	j:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	k:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	l:function( n,z,x,y,X,Y){ this.n=n;this.z=z;this.x=x;this.y=y;this.X=X;this.Y=Y},
	Qp:function(p){var o={ anc:p};
		p.x? p.y? p.z?/*Ne*/o.nim="abc" :/*Ni*/o.nim="bca" : p.z?/*Fe*/o.nim="bac" :/*Fi*/o.nim="acb" :
			 p.y? p.z?/*Te*/o.nim="bac" :/*Ti*/o.nim="acb" : p.z?/*Re*/o.nim="bca" :/*Ri*/o.nim="cab";return o},
	TmFinPres:function(){ var r ={ ni:"fin",edu: OM.Type.TmFinEdu, chiF:OM.Type.TmFinChiF, chiM:OM.Type.TmFinChiM,
		aduM:OM.Type.TmFinAduM, aduF:OM.Type.TmFinAduF, zodM:OM.Type.TmFinZodM, zodF:OM.Type.TmFinZodF};return r},
	TmFinEdu:  [["UAV","UVA","UTV","UVT"],["SAV","SVA","STV","SVT"],
	 			["RET","TER","REF","FER"],["RIT","TIR","RIF","FIR"]],
	TmFinChiM: [["MTN","MNT","MFN","MNF"],["RTM","TRM","RFM","FRM"]],
	TmFinChiF: [["FRF","RFF","TRF","RTF"],["NFF","FNF","NTF","TNF"]],
	TmFinAduM: [["MTEN","MNET","MFEN","MNEF"],["MTIN","MNIT","MFIN","MNIF"],
				["MRET","MTER","MREF","MFER"],["MRIT","MTIR","MRIF","MFIR"]],
	TmFinAduF: [["FIRF","RIFF","TIRF","RITF"],["FERF","REFF","TERF","RETF"],
				["NIFF","FINF","NITF","TINF"],["NEFF","FENF","NETF","TENF"]],
	TmEngPres:function(){ var r ={ ni:"eng", edu: OM.Type.TmEngEdu, chiF:OM.Type.TmEngChiF, chiM:OM.Type.TmEngChiM,
		aduM:OM.Type.TmEngAduM, aduF:OM.Type.TmEngAduF, zodM:OM.Type.TmEngZodM, zodF:OM.Type.TmEngZodF};return r},
	TmEngEdu:  [["TEN","NET","FEN","NEF"],["TIN","NIT","FIN","NIF"],
				["RET","TER","REF","FER"],["RIT","TIR","RIF","FIR"]],
	TmEngChiM: [["MTN","MNT","MFN","MNF"],["RTM","TRM","RFM","FRM"]],
	TmEngChiF: [["FRF","RFF","TRF","RTF"],["NFF","FNF","NTF","TNF"]],
	TmEngAduM: [["MTEN","MNET","MFEN","MNEF"],["MTIN","MNIT","MFIN","MNIF"],
				["MRET","MTER","MREF","MFER"],["MRIT","MTIR","MRIF","MFIR"]],
	TmEngAduF: [["FIRF","RIFF","TIRF","RITF"],["FERF","REFF","TERF","RETF"],
				["NIFF","FINF","NITF","TINF"],["NEFF","FENF","NETF","TENF"]],
	TmEngZodF: [["Bee", 		"Wolverine",	"Fishes",  		"Cat"],
				["Panda", 		"Owl",			"Seal",			"Octopus"],
				["Beaver", 		"Wolf", 		"Turtle", 		"Sheep",],
				["Puppy", 		"Spider", 		"Pike", 		"Waterfowl"]],
	TmEngZodM: [["Driver", 		"Pike",			"Cobbler",  	"Eagle"],
				["Chief", 		"Turtle",		"Blacksmith"	,"Mason"],
				["Meteor", 		"Sun", 			"Raven", 		"Elf",],
				["Planet", 		"Star", 		"Snake", 		"Troll"]],
	TmFinZodF: [["Mehiläinen", 	"Ahma",			"Kalat",  		"Kissa"],
				["Panda", 		"Pöllö",		"Norppa",		"Mustakala"],
				["Majava", 		"Susi", 		"Kilpikonna", 	"Lammas",],
				["Koiranpentu",	"Hämähäkki", 	"Hauki", 		"Vesilintu"]],
	TmFinZodM: [["Kuljettaja", 	"Hauki",		"Suutari",  	"Kotka"],
				["Päällikkö", 	"Kilpikonna",	"Seppä", 		"Muurari"],
				["Meteoriitti", "Aurinko", 		"Korppi", 		"Haltia",],
				["Planeettta", 	"Tähti", 		"Käärme", 		"Peikko"]],
	TmSent:function( ni){ var sty ={ fin:{}, eng:{}}; 	sty.ni=ni;
														sty.fin 	= 	this.TmFin()
														sty.suomi 	= 	this.TmSuomi( ni);
														sty.engZodiacF =this.TmEngZodiacF( ni);
														sty.engZodiacM =this.TmEngZodiacM( ni);
														sty.finZodiacF =this.TmFinZodiacF( ni);
														sty.finZodiacM =this.TmFinZodiacM( ni);
														sty.regName = 	this.TmRegName( ni);return sty},
	Tm:function( n,ni){ this.n=n; this.ni=ni;},/*
		var o={	n:n, ni:ni, z:z, y:y, x:x, w:
			x5:x, 		x8:X, 		x1:false, 	x4:false,	y5:y, 		y8:Y, 		y1:false, 	y4:false,
			x2:false, 	x3:false, 	x6:false, 	x7:false,	y2:false, 	y3:false, 	y6:false, 	y7:false};
		o.x3= !o.x; 	o.x5= !o.x; 		o.y3= !o.x2; 	o.y5= !o.y2; 
		o.x4= !o.x2; 	o.x6= !o.x2; 		o.y4= !o.y; 	o.y6= !o.y;
		o.x7=  o.x;  						o.y7=  o.x;
		o.x8=  o.x2; 						o.y8=  o.y2;
		o.f1=new this.f1(1, o.x3, o.y3, !o.z); o.f2=new this.f2(2, o.x4, o.y4, !o.z);
		o.f3=new this.f3(2, o.x1, o.y1, !o.z); o.f4=new this.f4(4, o.x2, o.y2, !o.z);
		o.f5=new this.f5(5, o.x3, o.y3, !o.z); o.f6=new this.f6(6, o.x4, o.y4, !o.z);
		o.f7=new this.f7(7, o.x1, o.y1, !o.z); o.f8=new this.f8(8, o.x2, o.y2, !o.z);
		o.a=new this.a( 1,  o.z,  o.x1, o.y1, o.x2, o.y2);
		o.b=new this.b( 2,  o.z,  o.x3, o.y3, o.x4, o.y4);
		o.c=new this.c( 3, !o.z,  o.x7, o.y7, o.x8, o.y8);
		o.d=new this.d( 4, !o.z,  o.x5, o.y5, o.x6, o.y6);
		o.e=new this.e( 5,  o.x1, o.y1, o.z, !o.z); 
		o.f=new this.f( 6,  o.x4, o.y4,!o.z,  o.z);
		o.g=new this.g( 7,  o.x3, o.y3,!o.z,  o.z);
		o.h=new this.h( 8,  o.x3, o.y3, o.z, !o.z);
		o.i=new this.i( 9,  o.z,  o.x4, o.y4, o.x1, o.y1);
		o.j=new this.j( 10,!o.z,  o.x7, o.y7, o.x6, o.y6);
		o.k=new this.k( 11,!o.z,  o.x8, o.y8, o.x5, o.y5);
		o.l=new this.l( 12, o.z,  o.x3, o.y3, o.x2, o.y2);*/
		//o.lang ={ eng: OM.Type.TmEngPres(), fin: OM.Type.TmFinPres()};
		//o.pres =o.lang.eng; 


		//o.qp =this.Qp( o);	return o}}
NaT:function( n,ni){var o=OM.Type.Tm( n,"NaT")},
RIT:function( n,ni){var o=OM.Type.Tm( n,"RIT")},
RET:function( n,ni){var o=OM.Type.Tm( n,"RET")},
RIF:function( n,ni){var o=OM.Type.Tm( n,"RIF")},
REF:function( n,ni){var o=OM.Type.Tm( n,"REF")},
TIN:function( n,ni){var o=OM.Type.Tm( n,"TIN")},
TEN:function( n,ni){var o=OM.Type.Tm( n,"TEN")},
TIR:function( n,ni){var o=OM.Type.Tm( n,"TIR")},
TER:function( n,ni){var o=OM.Type.Tm( n,"TER")},
FIN:function( n,ni){var o=OM.Type.Tm( n,"FIN")},
FEN:function( n,ni){var o=OM.Type.Tm( n,"FEN")},
FIR:function( n,ni){var o=OM.Type.Tm( n,"FIR")},
FER:function( n,ni){var o=OM.Type.Tm( n,"FER")},
NIT:function( n,ni){var o=OM.Type.Tm( n,"NIT")},
NET:function( n,ni){var o=OM.Type.Tm( n,"NET")},
NIF:function( n,ni){var o=OM.Type.Tm( n,"NIF")},
NEF:function( n,ni){var o=OM.Type.Tm( n,"NEF")}}
function Ty(t,x,y,z,w){ t.x=x; t.y=y; t.z=z; t.w=w; t.ni=t.constructor.name; t.sty=getSty(t); /*console.log(t);*/ return t}
function getSty(t){ /*console.log(t.constructor.name);*/}

OM.Spirit={ seed: ["IM","OM","Im","Om","If","IF","Of","OF"],
	SpSent:function( ni){ switch(ni){
		case"IM": return "Adam"; 	case"OM": return "Man"; 	case"Im": return "Cain"; 	case"Om": return "Boy";
		case"If": return "Fatima"; 	case"IF": return "Eve"; 	case"Of": return "Girl"; 	case"OF": return "Woman";}},
	Qf:function( o){ switch(o.ni){
		case "IM": case "OM": o.val= this.Qp( "abc"); o.bad= this.Qp( "acb");return o;
		case "Im": case "Om": o.val= this.Qp( "abc"); o.bad= this.Qp( "cab");return o;
		case "If": case "Of": o.val= this.Qp( "bac"); o.bad= this.Qp( "acb");return o;
		case "IF": case "OF": o.val= this.Qp( "cba"); o.bad= this.Qp( "acb");return o}},
	Qp:function( nim){ switch( nim){
		case "abc": var r=new Quanta( "a","b","c"); return r;
		case "acb": var r=new Quanta( "a","c","b"); return r;
		case "bac": var r=new Quanta( "b","a","c"); return r;
		case "cba": var r=new Quanta( "c","b","a"); return r;
		case "bca": var r=new Quanta( "b","c","a"); return r;
		case "cab": var r=new Quanta( "c","a","b"); return r;}},
	Sp:function( n,ni,c,v,g){ var o={ n:n, ni:ni, chi:c, ver:v, mas:g,
		uR:"", 	uL:"", 	dR:"", 	dL:"", u:"", r:"", l:"", d:"" };
		if( g){if( v){ o.uR="S"; o.uL="O"; o.dR="C"; o.dL="L"; u="F"; r="R"; l="T"; d="N"}
				else { o.uR="L"; o.uL="C"; o.dR="O"; o.dL="S"; u="T"; r="N"; l="F"; d="R"}}
		else { if( v){ o.uR="L"; o.uL="O"; o.dR="C"; o.dL="S"; u="N"; r="T"; l="R"; d="F"}
				else { o.uR="S"; o.uL="C"; o.dR="O"; o.dL="L"; u="R"; r="F"; l="N"; d="T"}}
		o= this.Qf( o); o.sent= this.SpSent( ni); return o}}
function Quanta( l,s,d){ this.low=l; this.str=s; this.dia=d; var spi=quanType( l,s,d); this.spi=spi;}
function quanType( l,s,d){}
function IM( n,c,v,g){ var o=OM.Spirit.Sp(n,"IM",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function OM( n,c,v,g){ var o=OM.Spirit.Sp(n,"OM",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Im( n,c,v,g){ var o=OM.Spirit.Sp(n,"Im",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Om( n,c,v,g){ var o=OM.Spirit.Sp(n,"Om",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function If( n,c,v,g){ var o=OM.Spirit.Sp(n,"If",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function IF( n,c,v,g){ var o=OM.Spirit.Sp(n,"IF",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function Of( n,c,v,g){ var o=OM.Spirit.Sp(n,"Of",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}
function OF( n,c,v,g){ var o=OM.Spirit.Sp(n,"OF",c,v,g); this.n=o.n;this.ni=o.ni;
	this.chi=o.chi;this.ver=o.ver;this.mas=o.mas; this.val=o.val; this.bad=o.bad; this.sent=o.sent;}

OM.Context={ seed: ["NaC","L","C","O","S"], // l=logic d=dialectic
	Co:function( n,ni,l,d){	var o={ n:n, ni:ni, log:l, dia:d}; return o},
	Being:function( l,d){ var o={ log:l, dia:d}; return o}}
function L( n,l,d){ var o=OM.Context.Co(n,"L",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function C( n,l,d){ var o=OM.Context.Co(n,"C",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function O( n,l,d){ var o=OM.Context.Co(n,"O",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}
function S( n,l,d){ var o=OM.Context.Co(n,"S",l,d); this.n=o.n; this.ni=o.ni; this.log=o.log; this.dia=o.dia}

//function Girl( n,g,a){ var o=OM.Gender.Gn(n,"f",g,a); 	this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
//function Boy ( n,g,a){ var o=OM.Gender.Gn(n,"m",g,a); 	this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
OM.Gender={ seed: ["NaG","Girlism","Boyism","Womanism","Manism"], //seed: ["NaG","f","F","m","M"],
	Gn:function( n,ni,m,a){ var o={ n:n, ni:ni, ma:m, ad:a}; return o}}
function NaG( n, g,a){  	var o=OM.Gender.Gn(n,"NaG",g,a); this.noun="Nongender";
this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
function Girlism( n, g,a){  var o=OM.Gender.Gn(n,"Girlism",g,a);this.noun="Girl";
this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
function Boyism( n, g,a){  	var o=OM.Gender.Gn(n,"Boyism",g,a);this.noun="Boy";
this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
function Womanism(n,g,a){  	var o=OM.Gender.Gn(n,"Womanism",g,a);this.noun="Woman";
this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
function Manism( n,g,a){  	var o=OM.Gender.Gn(n,"Manism",g,a);this.noun="Man";
this.n=o.n;this.ni=o.ni;this.ma=o.ma;this.ad=o.ad}
//function mkLangManism(){ var o = {noun: "man"} return o}
/*                                                                                                              ! ?
                                                                                                               TÿE
                                                                                                       °      OÿŸÿDON     ƒ
                                                                                                       §       oÿÿ
                                                                                                     ö >"<      sÿÿ
                                                                                                      äÅ …}      aÿÿ
                                                                                                     Ä Ä Ä        eÿÿ
                                                                                                    Ö< Ö< Ö<       sÿÿ
                                                                                              ÿ      ÿÿÿÿÿ¢         ÿÿ
                                                                                               ÿÿÿ ÿÿÿÿÿÿÿÿÿÿ$     tÿÿ
                                                                                                ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ€ asÿÿÿ
                                                                                            ÿÿÿÿÿÿÿold°spice°so°lÿÿÿÿ
                                                                               ..:::::~~ˆ~ˆ~~~~~~~~~~~^ˆ~ˆ¨~¨~¨*~ˆ*/
function mkPanda(id){ var di=null; switch( id){ case "des":di=new des(  1, false,null, null ); return di;
												case "asc":di=new asc(  2, true, null, null ); return di;
												case "Bpx":di=new Bpx(  3, false,false,null ); return di;
												case "Gpx":di=new Gpx(  4, true, false,null ); return di;
												case "Bfx":di=new Bfx(  5, false,true, null ); return di;
												case "Gfx":di=new Gfx(  6, true, true, null ); return di;
												case "Bxn":di=new Bxn(  7, false,null, false); return di;
												case "Gxn":di=new Gxn(  8, true, null, false); return di;
												case "Bxy":di=new Bxy(  9, false,null, true ); return di;
												case "Gxy":di=new Gxy( 10, true, null, true ); return di;				
												case "Bpn":di=new Bpn( 11, false,false,false); return di;
												case "Gpn":di=new Gpn( 12, true, false,false); return di;
												case "Bpy":di=new Bpy( 13, false,false,true ); return di;
												case "Gpy":di=new Gpy( 14, true, false,true ); return di;
												case "Bfn":di=new Bfn( 15, false,true, false); return di;
												case "Gfn":di=new Gfn( 16, true, true, false); return di;
												case "Bfy":di=new Bfy( 17, false,true, true ); return di;
												case "Gfy":di=new Gfy( 18, true, true, true ); return di;
												case "rea":di=new rea( 19, null, false,false); return di;
												case "fro":di=new fro( 20, null, false,true ); return di;
												case "str":di=new str( 21, null, true, false); return di;
												case "prt":di=new prt( 22, null, true, true );return di}}
function mkType(id){ var ty=null; switch( id){ 
	case "NaT":ty=new OM.Type.NaT( 0); ty=Ty(ty,false,true, false,true ); return ty;
	case "RIT":ty=new OM.Type.RIT( 1); ty=Ty(ty,true, true, false,true ); return ty;
	case "RET":ty=new OM.Type.RET( 2); ty=Ty(ty,false,false,false,true ); return ty;
	case "RIF":ty=new OM.Type.RIF( 3); ty=Ty(ty,false,false,false,true ); return ty;
	case "REF":ty=new OM.Type.REF( 4); ty=Ty(ty,true, false,false,true ); return ty;
	case "TIN":ty=new OM.Type.TIN( 5); ty=Ty(ty,false,false,true, false); return ty;
	case "TEN":ty=new OM.Type.TEN( 6); ty=Ty(ty,true, false,true, false); return ty;
	case "TIR":ty=new OM.Type.TIR( 7); ty=Ty(ty,false,true, true, true ); return ty;
	case "TER":ty=new OM.Type.TER( 8); ty=Ty(ty,true, true, true, false); return ty;
	case "FIN":ty=new OM.Type.FIN( 9); ty=Ty(ty,false,true, true, true ); return ty;
	case "FEN":ty=new OM.Type.FEN( 10);ty=Ty(ty,true, true, true, false); return ty;
	case "FIR":ty=new OM.Type.FIR( 11);ty=Ty(ty,false,false,true, true ); return ty;
	case "FER":ty=new OM.Type.FER( 12);ty=Ty(ty,true, false,true, true ); return ty;
	case "NIT":ty=new OM.Type.NIT( 13);ty=Ty(ty,false,false,false,false); return ty;
	case "NET":ty=new OM.Type.NET( 14);ty=Ty(ty,true, false,false,false); return ty;
	case "NIF":ty=new OM.Type.NIF( 15);ty=Ty(ty,false,true, false,false); return ty;
	case "NEF":ty=new OM.Type.NEF( 16);ty=Ty(ty,true, true, false,false);return ty}}
	//spin for fin if cmp has
function mkSpirit(id){ var sp=null; switch( id){case "IF":sp =new IF( 1, false,false,false); return sp;
												case "IM":sp =new IM( 2, false,false,true ); return sp;
												case "OF":sp =new OF( 3, false,true, false); return sp;
												case "OM":sp =new OM( 4, false,true, true ); return sp;
												case "If":sp =new If( 5, true ,false,false); return sp;
												case "Im":sp =new Im( 6, true ,false,true ); return sp;
												case "Of":sp =new Of( 7, true ,true, false); return sp;
												case "Om":sp =new Om( 8, true ,true, true );return sp}}
function mkContext(id){ var co=null;switch( id){case "O":co =new O( 1, false,false); return co;
												case "S":co =new S( 2, false,true ); return co;
												case "L":co =new L( 3, true, false); return co;
												case "C":co =new C( 4, true, true ); return co}}
function mkGender(id){ var gn=null;switch( id){ case "NaG":gn=new 		NaG 	( 0, false,false); return gn;
												case "Girlism":gn=new 	Girlism ( 1, false,false); return gn;	
												case "Boyism":gn=new 	Boyism 	( 2, true, false); return gn;
												case "Manism":gn =new 	Womanism( 3, true ,true ); return gn;
												case "Womanism":gn =new Manism  ( 4, false,true ); return gn;}}
function precalcGender(gn){ var gns=[];var bu=null; for(var n=0; n <=4  ;n++){bu=mkGender(gn[n]);gns.push(bu)}return gns}
function precalcDice( di) { var dis=[];var bu=null; for(var n=0; n < 22 ;n++){ bu=mkPanda( di[n]);dis.push(bu)} return dis}
function precalcTypes( ty){ var tys=[];var bu=null; for(var n=0; n <=16 ;n++){ bu=mkType( ty[n]); tys.push(bu)} return tys}
function precalcSpirits(sp){var sps=[];var bu=null; for(var n=0; n < 8  ;n++){bu=mkSpirit(sp[n]); sps.push(bu)} return sps}
function precalcContexts(c){var cos=[];var bu=null; for(var n=0; n < 4  ;n++){bu=mkContext(c[n]); cos.push(bu)} return cos}
function precalcLang(){/*var lan=[];var bu=null; for(var n=0; n <= 1  ;n++){bu=mkLang(c[n]); lan.push(bu)} return lan*/
var bu = {eng: OM.Type.TmEngPres(), fin: OM.Type.TmFinPres()}; bu.cur = bu.eng; return bu}
function precalcChildTypes(es){return 0} //return new coord system??
function precalcForest( om){ om.fL={};	om.fL.co = precalcContexts( om.Context.seed);
										//om.fL.sp = precalcSpirits( 	om.Spirit.seed);
										om.fL.es = precalcTypes( 	om.Type.seed);
										om.fL.ces= precalcChildTypes (om.fL.es);
										om.fL.di = precalcDice( 	om.Dice.seed);
										om.fL.gn = precalcGender( 	om.Gender.seed);
										om.fL.la = precalcLang();}
function precalc() {	precalcForest(OM); 		console.log( OM.fL);
						precalcInterface(OM);}
function precalcInterface(om){

								OM.user = {crtPa:'initUser',crtFo:null, 	crtFe:null, paComp:0,
											sTs: [], 		sT:null,	
											crtTyFo:null, 	crtGnFo:null, 	sty:null,
											selGn: false, 	ty:null,
											selTy: false, 	sQ:0,
											la:null,  		laSty:null, initDone:false}; 
											console.log(OM.fL.la);
											OM.user.la = OM.fL.la.cur; //console.log(OM.user.la);
											OM.user.laSty = OM.fL.la.cur.edu;
											OM.user.ty = OM.fL.es.find(o => o.ni === "NaT"); //console.log(OM.user);
											OM.user.gn = OM.fL.gn.find(o => o.ni === "NaG");
											calcInterface(om)}//OM.user.gn = OM.fL.gn.find(o => o.ni === "M");

function calcInterface(om){ 	var ui 					= precalcUserInterfaceTemplates( false,		om.reso,
																						 0, 		0,
																						 om.sG,	 	om.qU,
																						 om.qD,	 	om.dC,
																						 om.mC,	 	om.qR,
																						 om.kK, 	om.pJ,
																						 om.pages);
								ui 						= measureWindow( ui);

								ui.th					= precalcThemes( ui.th);

								//console.log(ui.th);

								OM.user.sty = 			ui.th.blue;

								//ui.sty.u 				= precalcUserStyles( ui.sty);

								//OM.user.sty = setUserStyle( ui.sty.pageTe, OM.user.ty.ni);
								
								ui.templates 			= precalcUserInterfaceTemplates( ui,		om.reso,
																						 ui.winWid, ui.winHei);
								
								ui.templates.features 	= precalcFeatureTemplates( ui.templates, om.fes);
								
								ui						= precalcFeatures( ui, ui.templates.features, om.fesLen);

								ui 						= calcSuperTabs( ui, ui.templates.features, om.fesLen);



								om.ui =ui;

}
// Gram -> Plot?
// divert/convert in logic quadrant to forget/learn? divert/teach?
// ri manouvreability decide PP10 init of SEG?

function uiFocusUserType( e){ 	hiliteUserType( OM.ui,OM.user,e)}

function uiFocusUserGender( e){ hiliteUserGender( OM.ui,OM.user,e)}




function bindMany( sel,c){ var e=Array.from(document.querySelectorAll( sel));
	e.forEach( function(e){ e.addEventListener("mouseover", function(){ c( "mouseover",	e)})});
	e.forEach( function(e){ e.addEventListener("mousedown", function(){ c( "mousedown", e)})})}
function ölistenForUser(){
	bindMany( '.pAIU_tyA', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserType( e); 	break;
													/*	case "mouseover" 	: uiFocusUserType( e); 		break;*/ }});
	bindMany( '.pAIU_gnA', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserGender( e);	break;
													/*	case "mouseover" 	: uiFocusUserGender( e); 	break;*/ }})}
function uiChooseSb( e){ console.log(e); chooseUserFe( OM.ui,OM.user,e)}
function chooseUserFe( ui,usr,e){ var id = e.id.split("-").pop();}



function mkFeature( ui,t){ 
	if(t.act.sV){ t.sV =mkFeatureSVG( ui,t)}
	/*if(t.act.DOM){ t.dev.DOM =mkFeatureDOM( ui,t); if(t.act.sV){ t.dev.DOM.appendChild( t.dev.sV)}}*/ return t}
function mkFeatureDOM( ui,t){ var f =mkD( 0,0,ui.winWid,ui.winHei,t.nim,'transparent',t.nim ); return f}
function mkFeatureSVG( ui,t){ var f =mkL( 0,0,ui.winWid,ui.winHei,t.nim,ui.th.sty.blue.base,t.nim,'' ); return f}

function precalcFeature( ui,template){ var fe =mkFeature( ui,template); ui.features.push( fe); }
function precalcFeatures( ui,templates,fesLen) {
	for(var i=0; i < fesLen; i++) { precalcFeature( ui,templates[i])} /*ui.fesLen =fesLen;*/ return ui}
function setUserStyle( ty){ var r; console.log(sty);
	if(sty ==null){ var sty = OM.user.sty}
	switch(usrTyN){ case "NaT": 			r =sty.gray; break;
					case "RIF": case "NET": r =sty.orange; break;
					case "FIR": case "TEN": r =sty.blue; break;
					case "RIT": case "NEF": r =sty.olive; break;
					case "TIR": case "FEN": r =sty.green; break;
					case "RET": case "NIF": r =sty.violet; break;
					case "TER": case "FIN": r =sty.copper; break;
					case "NIT": case "REF": r =sty.brass; break;
					case "TIN": case "FER": r =sty.cyan; break;} return r}

//textnodet talteen user objiin?
	/*function usGt(t){ if(u.selGn && u.gn.ni ==t){ 	p.c= c.selArea; 	p.b=c.selAreaB }
										else { 		p.c= c.area; 		p.b=c.areaB} return p.c}
	function usGT(t){ if(u.selGn && u.gn.ni ==t){ 	p.c= c.selAreaT}
										else { 		p.c= c.areaT; 		p.c=c.areaB} return p.c}*/
										//on form complete	//hilite hover gone	//You are #char	//DONE RESET (MORE) kolmas nappi unohtu mikä se oli

function drUserPage(u,d){ 
	c = styleUser(u,d,OM.ui);
	console.log(d);
	mkPanelBackground(u,d,c);
	mkPanelLabels( u,d,c);
	mkLanguagePanel( u,d,c);
	mkGenderPanel( u,d,c);
	mkTypePanel ( u,d,c);
	mkTypeCube ( u,d,c );
	mkUserResult( u,d,c);
}
function styleUser(u,d,ui){ var r;
	switch(u.ty.ni){ case "NaT": 			r =ui.th.black; break;
					case "RIF": case "NET": r =ui.th.orange; break;
					case "FIR": case "TEN": r =ui.th.blue; break;
					case "RIT": case "NEF": r =ui.th.olive; break;
					case "TIR": case "FEN": r =ui.th.green; break;
					case "RET": case "NIF": r =ui.th.violet; break;
					case "TER": case "FIN": r =ui.th.copper; break;
					case "NIT": case "REF": r =ui.th.brass; break;
					case "TIN": case "FER": r =ui.th.cyan; break;} u.sty = r; return r}

function mkPanelBackground(u,d,c){ 
	//shaibaa rrrr xxxx eitoimi 
	console.log(d);
	console.log(c);
	var o =document.getElementsByClassName("pAIU-base");  for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var cl="pAIU"; var cL=cl; var id =cl+"-base";
	//var e =mkLT( d.lP, d.tP, OM.ui.winWid-d.lP-d.rP, OM.ui.winHei-d.tP-d.bP, cl, c.base, cl+"-base", 0.66); E.push(e);
	/*var e =drA( 
		d.lP, 
		d.tP, 
		OM.ui.winWid-d.lP-d.rP, 
		OM.ui.winHei-d.tP-d.bP,
		c.base,
		id,
		cL,
		0,
		undefined,
		0.66);
	sV.appendChild( e);*/

}
function mkPanelLabels(u,d,c){ 	console.log(d);
	function usLC(t){ var id =cl+"_plL-"+t; cL= cl + id;}
//noi ei parsi oikein, tya-?
	var E=[]; var Cl="pAIU_plL pAIU_plT"; var cl="pAIU";
	var o =document.getElementsByClassName(Cl); for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var l,L=""; var xi=d.btnGrX; var X=OM.ui.winWid -(d.cE*4);  var yi=d.btnGrY; var y=d.fraHei+yi; var w=d.btnWid;
	var h=d.btnHei; var x=X;	var f=d.fonSiz; var b=d.btnBrd; var id=cl+"_pl";//rrr; var cL; var t;
	usLC("l"); e =drT(x, 		y-d.bPD,c.hilite,"language :",	id, cL, f); 	E.push(e); y+=yi;
	usLC("g"); e =drT(x, 		y-d.bPD,c.hilite,"user type:",	id, cL, f); 	E.push(e); x+=d.lV;
	E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);}

function mkLanguagePanel( u,d,c){ //labels should flip?
	function usLT(t){ id =cl+"_laT-"+t; cL =cl+" "+cl+"_laT";
		if( u.selGn && u.gn.ni ==t) { 	l =u.sty.selAreaT 	}
								else{ 	l =u.sty.areaT 		}}
	var E=[]; var cl="pAIU"; var Cl="pAIU_laT";
	var o =document.getElementsByClassName(Cl); for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var l,L=""; var xi=d.btnGrX; var x=d.fraWid+xi+xi+xi;  var yi=d.btnGrY; var y=d.fraHei; var w=d.btnWid; var h=d.btnHei;
	var f=d.fonSiz; var b=d.btnBrd; var id; var cL; var X=OM.ui.winWid -(d.cE*4); x=X+(xi*2.5);//y+=yi;
	//	usGA("Womanism"); 	e =drA(x, 		y, 			h, 		h, 		l, 	id, cL, b, L);  E.push(e);
		usLT("ENG"); 	e =drT(x+d.lP, 	y+d.bPD, 	l, 		"English",id, cL, f);  			E.push(e); x+=w*2; 
	//	usGA("Manism"); 	e =drA(x, 		y, 			h, 		h, 		l, 	id, cL, b, L);  E.push(e);
		usLT("FIN"); 	e =drT(x+d.lP, 	y+d.bPD, 	l, 		"Suomi",id, cL, f);  		E.push(e);
		E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);
		bindMany( '.pAIU_laT', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserLang( e);	break;}})}


function mkGenderPanel( u,d,c){ 
	function usGC(t){ id =cl+"_gnC-"+t; cL =cl+" "+cl+"_gnC"}
	function usGA(t){ id =cl+"_gnA-"+t; cL =cl+" "+cl+"_gnA";
		if( u.selGn && u.gn.ni ==t) { 	l =u.sty.selArea; 	L =u.sty.selAreaB  	 }
								else{ 	l =u.sty.area; 		L =u.sty.areaB 		}}
	function usGT(t){ id =cl+"_gnT-"+t; cL =cl+" "+cl+"_gnT";
		if( u.selGn && u.gn.ni ==t) { 	l =u.sty.selAreaT 	}
								else{ 	l =u.sty.areaT 		}}
	var E=[]; var cl="pAIU"; var Cl="pAIU_gnA pAIU_gnT pAIU_gnC";
	var o =document.getElementsByClassName(Cl); for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var l,L=""; var xi=d.btnGrX; var x=d.fraWid+xi+xi+xi;  var yi=d.btnGrY; var y=d.fraHei; var w=d.btnWid; var h=d.btnHei;
	var f=d.fonSiz; var b=d.btnBrd; var id; var cL; var X=OM.ui.winWid -(d.cE*4); x=X+(xi*3); y+=yi;
/*	usGC("g"); e =drT(x+xi, 		y+d.bPD,c.hilite,"gender",	id, cL, f); 	E.push(e);*/ x+=d.lV;
	//console.log(u.gn); //NaG
	usGA("F"); 	e =drA(x, 		y, 			h, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usGT("F"); 	e =drT(x+d.lP, 	y+d.bPD, 	l, 		"F",id, cL, f);  			E.push(e); x+=h*1.618; 
	usGA("M"); 	e =drA(x, 		y, 			h, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usGT("M"); 	e =drT(x+d.lP, 	y+d.bPD, 	l, 		"M",id, cL, f);  			E.push(e);
	E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);
	bindMany( '.pAIU_gnA', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserGender( e);	break;}})}

function mkUserResult(u,d,c){
	function usRA(t){ id =cl+"_reR"; cL =cl+" "+cl+"_reR"}
	function usRD(t){ id =cl+"_reD"; cL =cl+" "+cl+"_reD"}
	function usBA(t){ id =cl+"_reL"; cL =cl+" "+cl+"_reL"}
	function usBT(t){ id =cl+"_reT"; cL =cl+" "+cl+"_reT"}
	function usBG(t){ id =cl+"_reG"; cL =cl+" "+cl+"_reG"}
	if(!u.initDone){
	var E=[]; var cl="pAIU"; var Cl="pAIU_reR pAIU_reD";
	var o =document.getElementsByClassName(Cl); for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var l,L=""; var xi=d.btnGrX; var x=d.fraWid+xi+xi+xi;  var yi=d.btnGrY; var y=d.fraHei; var w=d.btnWid; var h=d.btnHei;
	var f=d.fonSiz; var b=d.btnBrd; var id; var cL; var X=OM.ui.winWid -(d.cE*4); x=X+(xi*3); y+=yi;
	 x+=d.lV;

	 e =drA(250, 		66, 			225, 		287, 		l, 	id, cL, b, L);  E.push(e);
	 usBA("ty"); e=drA(255,75,33,33, "#222288", id,cl,b); E.push(e);
	 console.log(u);
	 usBT("ty"); e =drT(250, 	66+f, 	"#ffffff", 		u.ty.ni,  id, cL, f);  	E.push(e); x+=xi;

	 usBA("gn"); e=drA(300,75,33,33, "#222288", id,cl,b); E.push(e);
	 usBG("gn"); e =drT(300, 	66+f, 	"#ffffff", 		u.gn.noun,  id, cL, f);  	E.push(e); x+=xi;


//e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	 e =drA(250, 		366, 			225, 		173, 		l, 	id, cL, b, L);  E.push(e);
	// e=drA(250, 375, xi, yi, 	"#006600", id, cl, b, ); E.push(e);
	 usRA("R"); e=drA(250, 450, xi, yi, 	"#ff6800", id, cl, b, L,1); E.push(e);
	 usRD("D"); e=drA(250, 400, xi, yi, 	"#006600", id, cl, b, L,1); E.push(e);

	 e =drA(500, 		300, 			366, 		287, 		l, 	id, cL, b, L);  E.push(e);
	
	E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);
	bindMany( '#pAIU_reR', function(ev,e) { switch(ev){ case "mousedown" 	: uiResetUser( e);	break;}});
	bindMany( '#pAIU_reD', function(ev,e) { switch(ev){ case "mousedown" 	: console.log("ulaanbator");	break;}})}}


//var temp = OM.Type.TmFinPres(); console.log(temp);
//noi ei parsi oikein, tya-
/*function lT(sX,sY){ //console.log(u.gn);∨
		if(u.gn.ni =='NaG'){ return ""} var pT; 
		if(!u.gn.ad){ if(u.gn.ma){ pT=[
		["MTN","MNT","MFN","MNF"],["RTM","TRM","RFM","FRM"]]}else{pT=[
		["FRF","RFF","TRF","RTF"],["NFF","FNF","NTF","TNF"]]}}
		if(u.gn.ma){ pT=
[["FIRF","RIFF","TIRF","RITF"],["FERF","REFF","TERF","RETF"],["NIFF","FINF","NITF","TINF"],["NEFF","FENF","NETF","TENF"]]}
		else{ pT=
[["MTEN","MNET","MFEN","MNEF"],["MTIN","MNIT","MFIN","MNIF"],["MRET","MTER","MREF","MFER"],["MRIT","MTIR","MRIF","MFIR"]]}
		return pT[sY][sX]}*/
function mkTypeLabel(X,Y,u){ //console.log(u.ty); console.log(u.la); console.log(u.la.chiM);
	if(u.gn.ni=="NaG"){ 				return u.la.edu[Y][X]}
	if(u.gn.ni=="Manism"){ 				return u.la.aduM[Y][X]}
	if(u.gn.ni=="Boyism"){ 	if(!Y>1){	return u.la.chiM[Y][X]} else {return ""}}
	if(u.gn.ni=="Womanism"){ 			return u.la.aduF[Y][X]}
	if(u.gn.ni=="Girlism"){ if(!Y>1){	return u.la.aduF[Y][X]}else {return ""}}
	//console.log(X); console.log(Y); console.log(u.laSty);
//	return u.laSty[Y][X];
}
	//rrrr//if(typeof u!='undefined'){console.log(u);}
	//if(u.gn.ni=="NaG"){ return ""}
	//var r = 2;r= X+" "+Y; return r}
function mkTypePanel( u,d,c,cl){  //console.log(u.ty);console.log(u.la.edu);
	function usTA(X,Y){ id =cl+"_tyA-"+Y+"+"+X; cL =cl+"_tyA";
		if( u.selTy && u.ty.ni ==t) { 	l =u.sty.selArea; 	L =u.sty.selAreaB  	 }
								else{ 	l =u.sty.area; 		L =u.sty.areaB 		}}
	function usTT(sX,sY){ /*if(!(sY>1&& !u.gn.ad)){//<--seiveri + }*/ id =cl+"_tyT-"+sX+"+"+sY; cL =cl+" "+cl+"_tyT";
		txt =mkTypeLabel(sX,sY,OM.user); //console.log(OM.user);
		if( u.selTy && u.ty.ni ==t) { 	l =u.sty.selAreaT 	}
								else{ 	l =u.sty.areaT 		}}
	
	var E=[]; var Cl="pAIU_tyA pAIU_tyT pAIU_tyC"; var cl="pAIU";
	var o =document.getElementsByClassName(Cl); for(var i=o.length-1; i >= 0; --i){ o[i].remove()}
	var l,L=""; var xi=d.btnGrX; var X=OM.ui.winWid -(d.cE*4);  var yi=d.btnGrY; var y=d.fraHei+yi+yi; var w=d.btnWid;
	var h=d.btnHei; var x=X; x+=xi+xi;	var f=d.fonSiz; var b=d.btnBrd; var id; var cL; var t;
	x=X+d.lV;

	usTA(0,0); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(0,0); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(1,0); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(1,0); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(2,0); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(2,0); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(3,0); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(3,0); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x=X+d.lV; y+=yi;
	usTA(0,1); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(0,1); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(1,1); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(1,1); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(2,1); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(2,1); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(3,1); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(3,1); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x=X+d.lV; y+=yi;
	usTA(0,2); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(0,2); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(1,2); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(1,2); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(2,2); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(2,2); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(3,2); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(3,2); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x=X+d.lV; y+=yi;
	usTA(0,3); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(0,3); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(1,3); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(1,3); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(2,3); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(2,3); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x+=xi;
	usTA(3,3); e =drA(x, 		y, 			w, 		h, 		l, 	id, cL, b, L);  E.push(e);
	usTT(3,3); e =drT(x+d.tPL, 	y+d.bPD, 	l, 		txt,  id, cL, f);  			E.push(e); x=X+d.lV; y+=yi;
	E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);
	bindMany( '.pAIU_tyA', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserType( e);	break;/*	case "mouseover" 	: uiFocusUserGender( e); 	break;*/ }})}
		




function mkTypeCube( u,d,c){ var cl="pAIU"; var e; var E=[]; var v=""; var x=OM.ui.winWid-d.cE-d.cE+66; var y=d.cE/2; var w=d.cE; var h=d.cE; var id=cl; var d=d.cuD; var op=d.op2; var co=u.sty.plane;
						v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)));
						e =drS(v, u.sty.cShade, id+"-cU-hrz", cl, op); 								E.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
						//e =mkS(v, id+"-sP", u.sty.cShade, id+"-sP-top", op2);
						e =drS(v, u.sty.cShade, id+"-cU-top", cl, op);								E.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
						//e =mkS(v, id+"-sP", u.sty.cShade, id+"-sP-btm", op2/1.618); 
						e =drS(v, u.sty.cShade, id+"-cU-btm", cl, op/1.618); 						E.push(e);
						v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+
							(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
							(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+
							(x + (w/2)-(w/d)+","+(y+h+(h/d)));
						//e =mkS(v, id+"-sP", u.sty.cShade, id+"-sP-vrt", op2); 		
						e =drS(v, u.sty.cShade, id+"-cU-vrt", cl, op); 								E.push(e);
						e =drA(x+(w/d),	y-(h/d),w,h,co,id+"-btm",cl+"-btm",0,undefined,op); 		E.push(e);
						e =mkK(x, 		y, 		w,h,co,id+"-mid",cl+"-mid",0,undefined,op/1.618);	E.push(e);
						e =mkK(x-(w/d),	y+(h/d),w,h,co,id+"-top",cl+"-top",0,undefined,op);			E.push(e);
	E.forEach( function(e){ sV.appendChild(e)}); document.body.appendChild( sV);
	/*bindMany( '.pAIU_gnA', function(ev,e) { switch(ev){ case "mousedown" 	: uiChooseUserGender( e);	break;
														case "mouseover" 	: uiFocusUserGender( e); 	break; }})*/
}



/* function drA(x,y,w,h,l,id,cl,b,L,op) //brass->amber
function mkK(x,y,w,h,id,co,cl,op) { var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
									r.setAttribute( 'opacity',op);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}

p.e=mkC( p.e,b.x,b.y,d.cE,d.cE,"cUIU",c.plane,"cUIU",false,true,4,0.7,u.ty.ni,true);
	p.e=mkW( p.e,b.x,b.y,d.cE,d.cE,"#ddff66",1,4,0.38,"#99bbff","#ff88aa","#ddffdd");
function mkC(c,x,y,w,h,id,co,cl,xA,yA,d,op,usrTyN,n){ var e=null; var v=""; //todo:tyn (if user male?, muuten nappien alle)
	if(!xA){ if(!yA){ 	e =mkK(x+(w/d),y+(h/d),w,h,id+"-btm",co,cl+"-btm",op); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x-(w/d),	y-(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e)}
				else{
						v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-hrz",op);c.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-top",op);c.push(e);
						v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-btm",op/1.618);c.push(e);
						v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+
							(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
							(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+
							(x + (w/2)-(w/d)+","+(y+h+(h/d)));
						e =mkS(v,id+"-sP","#ffcccc",id+"-sP-vrt",op);c.push(e);

						e =mkK(x+(w/d),	y-(h/d),w,h,id+"-btm",co,cl+"-btm",op); 		c.push(e);
						e =mkK(x, 		y, 		w,h,id+"-mid",co,cl+"-mid",op/1.618);	c.push(e);
						e =mkK(x-(w/d),	y+(h/d),w,h,id+"-top",co,cl+"-top",op);			c.push(e);
if(n){
	e=mkTFun(x+11, 				y-9,		"cUIUFun-1","#662525","cUIUFun",66,"5","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w+8,				y-9,		"cUIUFun-2","#662525","cUIUFun",66,"8","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w+21,			y+(h/2)-9,	"cUIUFun-3","#662525","cUIUFun",66,"1","strike_fighter",0.5); c.push(e);
	e=mkTFun(x + 11, 			y+(h/2)-9,	"cUIUFun-4","#662525","cUIUFun",66,"4","strike_fighter",0.5); c.push(e);

	e=mkTFun(x+w-(w/d)+10, 		y+h-(h/d)-9,"cUIUFun-5","#252566","cUIUFun",66,"2","strike_fighter",0.5); c.push(e);
	e=mkTFun(x-(w/d)+11,		y+h-(h/d)-9,"cUIUFun-6","#252566","cUIUFun",66,"3","strike_fighter",0.5); c.push(e);
	e=mkTFun(x-(w/d)+8,			y+(h/d)-9,	"cUIUFun-7","#252566","cUIUFun",66,"6","strike_fighter",0.5); c.push(e);
	e=mkTFun(x+w-(w/d)+7, 		y+(h/d)-9,	"cUIUFun-8","#252566","cUIUFun",66,"7","strike_fighter",0.5); c.push(e)}

					}}else{if(!yA){
						e =mkL(x-(w/d),	y+(h/d),w,h,id+"-btm",co,cl+"-btm"); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x+(w/d),	y-(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e)}else{
						e =mkL(x-(w/d),	y-(h/d),w,h,id+"-btm",co,cl+"-btm"); c.push(e);
						e =mkL(x, 		y, 		w,h,id+"-mid",co,cl+"-mid"); c.push(e);
						e =mkL(x+(w/d),	y+(h/d),w,h,id+"-top",co,cl+"-top"); c.push(e);
					}}return c}*/

											/*	case "mouseover" 	: uiFocusUserGender( e); 	break;*/ //}})}



/*{crtPa:'initUser',crtFo:null, 	crtFe:null, paComp:0,
											sTs: [], 		sT:null,	
											crtTyFo:null, 	crtGnFo:null, 	sty:null,
											selGn: false, 	ty:null,
											selTy: false, 	sQ:0,
											la:null, initDone:false}; */

function uiResetUser( e){
	OM.user.selTy=false;
	OM.user.gn = OM.fL.gn.find(o => o.ni =="NaG");
	//OM.user.ty = OM.fL.ty.find(o => o.ni =="NaT");
	drUserPage( OM.user, OM.ui.th)}

function uiChooseUserGender( e){ var g=e.getAttribute("id"); g=g.split("-").pop(); 
	chooseUserGender( OM.user, g);
	drUserPage( OM.user, OM.ui.th)}
function chooseUserGender(u,g){
	if(u.gn.ni=="NaG"){
		if(g=="M"){ u.gn =OM.fL.gn.find(o => o.ni=="Manism")}else if(g=="F"){u.gn=OM.fL.gn.find(o => o.ni=="Womanism")}}
	else if(u.gn.ni == "Manism" && g == "F"){ u.gn=OM.fL.gn.find(o => o.ni=="Womanism") }
	else if(u.gn.ni == "Manism" && g == "M"){ u.gn=OM.fL.gn.find(o => o.ni=="Boyism") }
	else if(u.gn.ni == "Womanism" && g == "F"){ u.gn=OM.fL.gn.find(o => o.ni=="Girlism") }
	else if(u.gn.ni == "Womanism" && g == "M"){ u.gn=OM.fL.gn.find(o => o.ni=="Manism") }
	else if(u.gn.ni == "Boyism" && g == "F"){ u.gn=OM.fL.gn.find(o => o.ni=="Womanism") }
	else if(u.gn.ni == "Boyism" && g == "M"){ u.gn=OM.fL.gn.find(o => o.ni=="Manism") }
	else if(u.gn.ni == "Girlism" && g == "F"){ u.gn=OM.fL.gn.find(o => o.ni=="Womanism") }
	else if(u.gn.ni == "Girlism" && g == "M"){ u.gn=OM.fL.gn.find(o => o.ni=="Manism") }}

function uiChooseUserType( e){ 	var c=e.getAttribute("id"); c=c.split("-").pop(); c=c.split("+");
	chooseUserType( OM.user, c[0], c[1]);
	drUserPage( OM.user, OM.ui.sty);}
function chooseUserType(u,x,y){if(u.gn.ni=="NaG"){ uiNeutralType(u,x,y)} else
	if(u.gn.ad){if(u.gn.ma){ uiWomanType(u,x,y)} else { uiManType(u,x,y)}} else
				if(u.gn.ma){ uiGirlType(u,x,y)} else { uiBoyType(u,x,y)}}
function uiNeutralType(u,x,y){ var r = "neutral "+x+y; console.log(r);}
//function uiWomanType(u,x,y){ var r = "woman "+x+y; console.log(r);}
//function uiManType(y,x){ var r = "man "+x+y; console.log(r);}
//function uiManType(y,x){ console.log(OM.Type); var r = OM.Type.TmFinAduM[x][y]; console.log(r)}
function uiManType(u,x,y){ var r =OM.Type.TmFinAduM[x][y]; r=r.substring(1);
	u.ty = OM.fL.es.find(o => o.ni === r); u.selTy=true; console.log(r);}
function uiWomanType(u,x,y){ var r =OM.Type.TmFinAduF[x][y]; r=r.slice(0, -1);
	u.ty = OM.fL.es.find(o => o.ni === r); u.selTy=true; console.log(r);}
function uiGirlType(u,x,y){ var r = "girl "+x+y; console.log(r);}
function uiBoyType(u,x,y){ var r = "boy "+x+y; console.log(r);}




/*
	console.log(i);
	if(u.ty.ni == i){ 	u.ty = OM.fL.es.find(o => o.ni === "NaT"); 	u.selTy =true}
	else {				u.ty = OM.fL.es.find(o => o.ni === i); 		u.selTy=false}
	u.sty = setUserStyle( OM.ui.sty.pageTe, u.ty.ni);
	console.log(u);}*/

function uiChooseUserLang( e){ console.log(e); }

	/*
	switch(u.gn.ni){
		case "NaG": var v = OM.fL.gn; console.log(v); break;
		case "Manism": console.log("Manism"); break; 
		case "Womanism": console.log("Womanism"); break; 
		case "Boyism": console.log("Boyism"); break; 
		case "Girlism": console.log("Girlism"); break; }*/
/*	if(u.gn.ni =="NaG"){ 	u.gn =OM.fL.gn.find(o => o.ni ==i); u.selGn =true;console.log(u.gn);} else
	if(u.gn.ni =="Manism"){ u.gn =OM.fL.gn.find(o => o.ni =="Boyism");u.selGn =true;console.log(u.gn);} else
	if(u.gn.ni =="Boyism"){ u.gn =OM.fL.gn.find(o => o.ni =="NaG"); u.selGn =false;console.log(u.gn);}else
	if(u.gn.ni =="Girlism"){ u.gn =OM.fL.gn.find(o => o.ni =="NaG");u.selGn =true;console.log(u.gn);} else
	if(u.gn.ni =="Womanism"){u.gn =OM.fL.gn.find(o => o.ni =="Girlism");u.selGn =false;console.log(u.gn);}*/


		/*if(!u.gn.ad){ 		u.gn = OM.fL.gn.find 	(o => o.ni == "NaG"); 	u.selGn =false}
		else{  		 		var a =OM.fL.gn.filter 	(o => o.ma == u.gn.ma);
							a  	  =OM.fL.gn.filter 	(o => o.ad != u.gn.ad);
						  	u.gn = a.find 			(o => o.ni != "NaG"); */
			//console.log(a);
						//u.gn = OM.fL.gn.filter(o => o.ni === "NaG");
						//u.gn = OM.fL.gn.find(o =>)

				//		console.log(u.gn)
			
	
	//if(u.gn.ni == i){ 	u.gn = OM.fL.gn.find(o => o.ni === "NaG"); 	u.selGn =true}
	//else {				u.gn = OM.fL.gn.find(o => o.ni === i); 		u.selGn=false}}


													

function precalcUserInterfaceTemplates( src, reso, winWid, winHei, sG,qU,qD,dC,mC,qR,kK,pJ,pages) {
	var s={ sBs:0, qUs:0, qDs:0, dCs:0, mCs:0, qRs:0, kKs:0, pJs:0, pL:0};
	if(src){s.sGs =src.sGs; 	s.qUs =src.qUs; 	s.qDs =src.qDs; 	s.dCs =src.dCs;
			s.mCs =src.mCs; 	s.qRs =src.qRs; 	s.kKs =src.kKs; 	s.pJs =src.pJs;		s.pL =src.pagLen; }
	else{ 	s.sGs =sG.length; 	s.qUs =qU.length; 	s.qDs =qD.length; 	s.dCs =dC.length;//length checks in caller already?
			s.mCs =src.mCs; 	s.qRs =qR.length; 	s.kKs =kK.length; 	s.pJs =pJ.length; 	s.pL =pages.length; }
	var ui ={ th: {sty: {blue:{ base:"#123456", hilite:"#ff6600", area:"#345678", areaT:"#89abcd", selArea:"#6789ab",
						selAreaT:"#deefde", cShade:"#ffcccc", valNum:"#662525", shaNum:"#252566", plane:"#336688",
						selAreaB:"#6789ab", areaB:"#6789ab", shArea:"#012345" /*#012345*/},
				orange:{}, olive:{}, green:{}, violet:{}, cyan:{}, copper:{}, brass:{}, //typed
							white:{}, black:{},/*<-gendered*/gray:{}},/*<-neutral*/
				cubeA:0.7, wireA:0.38,
				lV:173, mV:452, bPL:10, bPD:20, cE:280, 	fraWid:66, 	fraHei:66,  op1:0.66, op2:0.7,	 
					rP:66,  tP:25,  lP:40,  bP:19,  lP:7,tPL:15,btnWid:66, 	btnHei:25, 	cuD:4,
					btnGrX:88, 	btnGrY:40, 	fonSiz:25, 	btnBrd:2},
		sV:null,	winWid:0, 	winHei:0, overflow:false, features:[], fesLen:0,  pages:[], pagLen:s.pL,
		devices:{
/*SIDEBAR */sB:{ sV:null,disWid:66, 	disHei:0, 	disHrz:0, 	disVrt:0,
										rowHei:39,	fesHei:0,	btnBrd:4, 	bTOX:6, 	bTOY:12 },
/*PROJECTr*/pJ:{ sV:null,	cloWid:0, 	cloHei:0, 	cloHrz:0, 	cloVrt:0, 	rowHei:19,
										opeWid:0, 	opeHei:0, 	opeHrz:0, 	opeVrt:0,	pJs: s.pJs },
/*SEQUENCr*/sQ:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, 	rowHei:0, 	rowNum:5, 	rowOff:0 },
/*SUPERTAB*/sT:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, 	tabHei:0, 	tabWid:0},
/*SHOTGUN*/ sH:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*CANNON*/ 	cA:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, 	disCal:0},
/*AMMO*/ 	aM:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*EXPLORER*/eX:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*GRAM    */gR:{ sV:null,	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0},
/*DEVBAR  */oL:{ sV:null,	disWid:0, 	disHei:0,	disHrz:0, 	disVrt:0},
/*DIOMOG  */dG:{ sV:null,	disWid:0, 	disHei:0,	disHrz:0, 	disVrt:0},
/*SYSGRID */sGs: s.sGs,
			sG:{ sV:null, 	disWid:0, 	disHei:0,  	disHrz:0, 	disVrt:0,
										fldWid:0,	fldHei:0,	furHei:0,
										qdrWid:0,	qdrHei:0,	fraThi:15,
				dis:{  		mono:null, uL:null, uR:null, dL:null, dR:null, 	u:null,  d:null,  l:null,  r:null}},
/*QUAD    */qUs: s.qUs, qDs: s.qDs,
			qU:{ sV:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,
										cntHrz:0, 	cntVrt:0,	halWid:0, 	halHei:0, dis:{
					mono:{scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					uR: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					uL: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					dL: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					dR: { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					u : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					l : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					d : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0},
					r : { scr:null, scrWid:0, scrHei:0, scrHrz:0, scrVrt:0}},
				override:{mono:false, u:false, d:false, l:false, r:false}},
/*PANDA   */dCs: s.dCs,
			dC:{ sV:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, cntHrz:0, cntVrt:0,
										prjSca:5, 	prjLen:3, 	prjHAp:2, edgHrz:0, edgVrt:0,
										laReso:reso,loReso:reso,elReso:reso, dis: {
											fro:null, rea:null, str:null, prt:null, asc:null,
											des:null, uL: null, uR: null, dL: null, dR: null}},
/*MOSAIC  */mCs: s.mCs,
			mC:{ sV:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, cntHrz:0, cntVrt:0,
							froWid:0, 	froHei:0, 	froTiW:0, 	froTiH:0, froHrz:0, froVrt:0,
							latWid:0, 	latHei:0, 	latTiW:0, 	latTiH:0, prtHrz:0, prtVrt:0, strHrz:0, strVrt:0,
							eleWid:0, 	eleHei:0, 	eleTiW:0, 	eleTiH:0, ascHrz:0, ascVrt:0, desHrz:0, desVrt:0,
							reaWid:0, 	reaHei:0, 	reaTiW:0, 	reaTiH:0, reaHrz:0, reaVrt:0,
							xReso:reso, yReso:reso, zReso:reso,	prjSca:5, prjLen:2, prjApe:3, modHrz:0, modVrt:0},
/*TOWER   */qRs: s.qRs,
			qR:{ sV:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0, tilWid:0, tilHei:0},
/*KAKARA  */kKs: s.kKs,
			kK:{ sV:null, 	disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0 },
/*GRIDLOCK*/gL:{ 			disWid:0, 	disHei:0, 	disHrz:0, 	disVrt:0,
							scrWid:0, 	scrHei:0, 	scrHrz:0, 	scrVrt:0,
							lVX:40,	mVX:173, tHY:40, THY:25, mHY:106, bHY:75, dBH:19 },
/*YOZEN   */yO:{ sV:null, 	disWid:0, disHei:0, disHrz:0, disVrt:0, lVX:0, mVX:0, tHY:0, mHY:0 }}};
	if( winWid > 0){ ui.winWid =winWid; ui.winHei =winHei} return ui}





function precalcThemes(t){ 
	t.orange 	=blueToOrange(t.sty.blue); console.log(t.orange);
	t.olive 	=blueToOrange(t.sty.blue);
	t.green 	=blueToGreen (t.sty.blue);
	t.brass 	=blueToBrass (t.sty.blue);
	t.cyan 		=blueToCyan  (t.sty.blue);
	t.violet 	=blueToViolet(t.sty.blue);
	t.copper 	=blueToCopper(t.sty.blue);
	t.black 	=blueToBlack (t.sty.blue);
	t.white 	=blueToWhite (t.sty.blue);
	t.gray 		=blueToGray  (t.sty.blue); console.log(t);
	return t}
function blueToOrange(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToOlive(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToGreen(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToBrass(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToCyan(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToViolet(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToCopper(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToBlack(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToWhite(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}
function blueToGray(t){ 	var T =copyTheme(t); T =mTHue(T, 10); return T}

function copyTheme(t){ var T={


	base:t.base, 					hilite:t.hilite, 				area:t.area, 				
	areaT:t.areaT,					selArea:t.selArea,				selAreaT:t.selAreaT,
	cShade:t.cShade, 				valNum:t.valNum,				shaNum:t.shaNum,
	plane:t.plane,					selAreaB:t.selAreaB, 			areaB:t.areaB,
	areaT:t.areaT, 					shArea:t.shArea}; return T }
function mTHue(t,n){ //plane
	t.base=mCHue(t.base,n); 		t.hilite=mCHue(t.hilite,n); 	t.area=mCHue(t.area,n);
	t.areaT=mCHue(t.areaT,n);		t.selArea=mCHue(t.selArea,n); 	t.selAreaT=mCHue(t.selAreaT,n);
	t.cShade=mCHue(t.cShade,n); 	t.valNum=mCHue(t.valNum,n);		t.shaNum=mCHue(t.shaNum,n);
	t.plane=mCHue(t.plane,n); 		t.selAreaB=mCHue(t.selAreaB,n); t.areaB=mCHue(t.areaB,n);
	t.areaT=mCHue(t.areaT,n); 		t.shArea=mCHue(t.shArea,n); return t}
function mCHue(rgb, degree) {    var hsl = rgbToHSL(rgb);    hsl.h += degree;
	if(hsl.h > 360){ hsl.h -= 360}else if(hsl.h < 0){ hsl.h += 360}    return hslToRGB(hsl)}
function rgbToHSL(rgb){ rgb = rgb.replace(/^\s*#|\s*$/g, ''); if(rgb.length == 3){ rgb = rgb.replace(/(.)/g, '$1$1'); }
    var r =parseInt(rgb.substr(0,2),16)/255, g =parseInt(rgb.substr(2,2),16)/255, b =parseInt(rgb.substr(4,2),16)/255,
        cMax = Math.max(r, g, b), cMin = Math.min(r, g, b), delta = cMax - cMin,  l = (cMax + cMin) / 2, h = 0, s = 0;
    if(delta ==0){ h = 0}
    	else if(cMax ==r){ h =60 * (((g - b) / delta) % 6)}else if(cMax ==g){ h = 60 * (((b - r) / delta) + 2)}
    	else { h = 60 * (((r - g) / delta) + 4)}
    if(delta ==0){ s = 0}else{ s = (delta/(1-Math.abs(2*l - 1)))} return { h:h, s:s, l:l}}
function hslToRGB(hsl){ var h=hsl.h, s=hsl.s, l=hsl.l,c=(1-Math.abs(2*l-1))*s,x=c*(1-Math.abs((h/60)%2-1)),m=l-c/2,r,g,b;
    if (h < 60) 	{ 	r = c; g = x; b = 0}    else if (h < 120) { r = x; g = c; b = 0}
    else if (h < 180) { r = 0; g = c; b = x}    else if (h < 240) { r = 0; g = x; b = c}
    else if (h < 300) { r = x; g = 0; b = c}    else 			{ 	r = c; g = 0; b = x}
    r = normaliseRGB(r, m); g = normaliseRGB(g, m); b = normaliseRGB(b, m); return rgbToHex(r,g,b)}
function normaliseRGB(color, m) { color=Math.floor((color+m)*255); if (color < 0) { color = 0} return color}
function rgbToHex(r, g, b) { return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1); }



function precalcDevicesForFeature( ui,feNim,act,qU){
	var dev={ 	DOM:null,sB:null, pJ:null, tT:null, gL:null,
				sQ:null, aM:null, sH:null, cA:null, mE:null,
				sT:null, eX:null, gR:null, oL:null, dG:null, pM:null,
				sG:null, qU:null, dC:null, mC:null, kK:null, yO:null };
	if(act.sB){ dev.sB = mkSidebar( 	ui, feNim,				act.sV);
				dev.pJ = mkProjector( 	ui, feNim, 				act.sV);
				/*dev.tT = mkToolTips( 	ui, feNim, 				act.sV)*/}
	if(act.gL){ dev.gL = mkGridlock( 	ui, feNim)}
	if(act.sQ){ dev.sQ = mkSequencer( 	ui, feNim,	act.DOM,	act.sV)}
	if(act.sT){ dev.sT = mkSuperTabs( 	ui, feNim,	act.DOM,	act.sV)}

	if(act.aM){ dev.aM = mkAmmo( 		ui, feNim, 	act.DOM, 	act.sV, 	dev.gL)}
	if(act.sH){ dev.sH = mkShotgun( 	ui, feNim, 	act.DOM, 	act.sV, 	dev.aM)}
	if(act.cA){ dev.cA = mkCannon( 		ui, feNim, 	act.DOM, 	act.sV, 	dev.aM)}
	if(act.eX){ dev.eX = mkExplorer( 	ui, feNim,	act.DOM,	act.sV)}
	if(act.gR){ dev.gR = mkGram( 		ui, feNim,	act.DOM,	act.sV)}
	if(act.oL){ dev.oL = mkOneLiner( 	ui, feNim,	act.DOM,	act.sV)}
	if(act.dG){ dev.dG = mkDialog( 		ui, feNim,	act.DOM,	act.sV, 	dev.gL)}

	if(act.sG){ dev.sG = mkSystemGrid( 	ui, feNim, 	act.DOM)}
	if(act.qU){ dev.qU = mkQuad( 		ui, feNim, 				act.sV, 				qU); 
				dev = mkQuad2( 			ui,	feNim, 							dev, 		qU)}
	if(act.dC){ dev.dC = mkDice( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.mC){ dev.mC = mkMosaic( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.kK){ dev.kK = mkKakara( 		ui, feNim, 				act.sV, 	dev.gL)}
	if(act.yO){ dev.yO = mkYozen( 		ui, feNim, 				act.sV, 	dev.gL)}
	return dev; }
function qDFind( qU,id){ /*cC( "*** qDFind ***");cC(qU);cC(id);*/ if( qU.mono==id){ return "mono"}
		 if( qU.uR==id){ return "uR"}else if( qU.uL==id){ return "uL"}
	else if( qU.dL==id){ return "dL"}else if( qU.dR==id){ return "dR"}
	else if( qU.d ==id){ return "d" }else if( qU.r ==id){ return "r" }
	else if( qU.u ==id){ return "u" }else if( qU.l ==id){ return "l" }else{ return ""}}
function qdFind2( qD,qU){ switch( qD){ case "mono": return qU.disDim.mono;
	case "uR": return qU.disDim.uR; 	case "uL": return qU.disDim.uL;
	case "dR": return qU.disDim.dR; 	case "dL": return qU.disDim.dL;
	case "u" : return qU.disDim.u; 		case "d" : return qU.disDim.d;
	case "r" : return qU.disDim.r; 		case "l" : return qU.disDim.l;}}
function mkQuad5( ui,dev,feNim,parent,dim){ switch( hnd){ 					 case 'mCSelf':
	ui.act.mC =true; parent = mkMosaic( ui, id, true, 	parent); return dev; case 'mCOther':
	ui.act.mC =true; parent = mkMosaic( ui, id, true, 	parent); return dev; case 'kakara':
	ui.act.kK =true; parent = mkKakara( ui, id, true, 	parent); return dev; case 'prompt':
	ui.act.pM =true; parent = mkPrompt( ui, id, true, 	parent); return dev}}
function mkQuad4( ui,dev,id,qU,dim) { if( qU.mono!=""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.mono,dim)}
									if( qU.uR != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.uR, 	dim)}
									if( qU.uL != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.uL, 	dim)}
									if( qU.dR != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.dR, 	dim)}
									if( qU.dL != ""){ dev =mkQuad5( ui,dev,id,dev.qU.dis.dL, 	dim)}
									if( qU.u != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.u, 	dim)}
									if( qU.d != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.d, 	dim)}
									if( qU.r != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.r, 	dim)}
									if( qU.l != "") { dev =mkQuad5( ui,dev,id,dev.qU.dis.l, 	dim)}}
function cC(n,v){ console.log(n);console.log(v)}
function mkQuad3( ui,feNim,dev,qU,id){ /*cC( "*** mkQuad3 ***"); cC(ui);cC(feNim);cC(dev);cC(qU);cC(id);*/
	var qD =qDFind( qU,id); if( qD==""){ return dev} else{
	qD = qdFind2( qD,dev.qU); dev =mkQuad4( ui,dev,id,qU,qD)} return dev}
function mkQuad2( ui,feNim,dev,qU){ /*cC("*** mkQuad2 ***");cC.log( ui);cC.log( feNim);cC.log( dev);cC.log( qU);*/
	dev = mkQuad3( ui,feNim,dev,qU,'mCSelf');
	dev = mkQuad3( ui,feNim,dev,qU,'mCOther');
	dev = mkQuad3( ui,feNim,dev,qU,'kakara');
	dev = mkQuad3( ui,feNim,dev,qU,'prompt'); /*cC(dev);*/ return dev}
function mkSidebar( ui,feNim,sV){ 		var re=new Sidebar( ui,feNim,sV); 			re =mkSidebarElements( re);return re}
function mkProjector( ui,feNim,sV){ 	var re=new Projector( ui,feNim,sV); 		re =mkProjectorElems( ui,re);return re}
function mkToolTips( ui,fe,sV) { 		var re=new ToolTips( ui,fe,sV); 			re =mkToolTipsElements( re);return re}
function mkGridlock( ui,feNim) 		{ 	var re=new Gridlock( ui,feNim);return re}
function mkSuperTabs( ui,feNim,DOM,sV){ var re=new SuperTabs( ui,feNim,DOM,sV); 	re =mkSuperTabsElements( re);return re}
function mkSequencer( ui,feNim,DOM,sV){ var re=new Sequencer( ui,feNim,DOM,sV); 	re =mkSequencerElements( re);return re}
function mkAmmo(ui,fe,sV,DOM,parent) {  var re=new Ammo( ui,fe,DOM,sV,parent); 		re =mkAmmoElements(re);return re}
function mkShotgun( ui,fe,DOM,sV,par){  var re=new Shotgun( ui,fe,DOM,sV,par); 		re =mkShotgunElements( re);return re}
function mkCannon( ui,fe,DOM,sV,par){   var re=new Cannon( ui,fe,DOM,sV,par); 		re =mkCannonElements( re);return re}
function mkExplorer( ui,feNim,DOM,sV){	var re=new Explorer( ui,feNim,DOM,sV); 		re =mkExplorerElements( re);return re}
function mkGram( ui,feNim,DOM,sV){ 		var re=new Gram( ui,feNim,DOM,sV);	 		re =mkGramElements( re);return re}
function mkOneLiner( ui,feNim,DOM,sV){ 	var re=new OneLiner( ui,feNim,DOM,sV); 		re =mkOneLinerElements( re);return re}
function mkSystemGrid( ui,feNim,DOM){ 	var re=new SystemGrid( ui,feNim,DOM); 		re =mkSystemGridElements(re);return re}
function mkQuad( ui,hnd,sV,qU){ 		var re=new Quad( ui,hnd,sV,qU); 			re =caQuad( re,qU);return re}
function mkDice( ui,hnd,sV,par){ 		var re=new Dice( ui,hnd,sV,par);return re}
function mkTower( ui,hnd,sV,par){ 		var re=new Tower( ui,hnd,sV,par); 			re =mkTowerElements( re);return re}
function mkDialog( ui,feNim,DOM,sV,p){  var re=new Dialog( ui,feNim,DOM,sV,p); 		re =mkDialogElements( re);return re}
function mkMosaic( ui,feNim,sV,parent){ var re=new Mosaic( ui,feNim,sV,parent); 	re =mkMosaicElements( re); return re}
function mkMeter( ui,feNim,sV,parent){  var re=new Meter( ui,feNim,sV,parent); 		re =mkMeterElements( re); return re}
function mkKakara( ui,feNim,sV,parent){ var re=new Kakara( ui,feNim,sV,parent); 	re =mkKakaraElements( re);return re}
function mkYozen( ui,feNim,sV,parent){  var re=new Yozen( ui,feNim,sV,parent); 		re =mkYozenElements( re);return re}
function Sidebar( ui,feNim,SVG){ this.ui =ui;  this.actSVG =SVG; this.sV =null; this.feNim=feNim;
	this.disWid =ui.devices.sB.disWid; 				this.disHei =ui.winWid;
	this.disHrz =ui.winWid -ui.devices.sB.disWid; 	this.disVrt=ui.devices.sB.disVrt;
	this.rowHei=ui.devices.sB.rowHei; 				this.btnBrd=ui.devices.sB.btnBrd;
	this.bTOX=ui.devices.sB.bTOX; 					this.bTOY=ui.devices.sB.bTOY;
	this.fesHei =ui.fesLen * ui.devices.sB.rowHei;
	var sty={ fnt:15, brd:3, d:OM.coGrid,
		btnTxt:"#cccccc",	btnU:"#444444",		btnR:"#111111",		btnD:"#080808",		btnL:"#333333", 	sel:"#111111",
		selTxt:"#ffffff",	selU:"#000000",		selR:"#444444",		selD:"#777777",		selL:"#080808", 	btn:"#333333",
		bG:"#222222"};
	this.sty =sty; }
function Projector( ui,feNim,SVG){this.ui=ui; this.feNim=feNim; this.actSVG=true;
	this.cloWid=ui.devices.sB.disWid;  							this.opeWid=ui.devices.sB.disWid; 
	this.cloHei=ui.devices.pJ.rowHei; 							this.opeHei=(ui.pagLen + 1) * ui.devices.pJ.rowHei;
	this.cloVrt=ui.devices.sB.fesHei; 							this.opeVrt=ui.devices.sB.fesHei;
	this.cloHrz=ui.devices.sB.disHrz; 							this.opeHrz=ui.devices.sB.disHrz;
	this.sV=null; var sty={ bG:"#444444"}; this.sty =sty;}
function ToolTips( ui,feNim,SVG){ this.ui=ui; this.feNim=feNim; this.disWid=ui.devices.sB.disWid; 
	this.actSVG =SVG; this.sV =null; this.disVrt =ui.winWid -ui.devices.sB.disWid; this.toolArr =[];
	var sty={ bG:"#888888"};
	this.sty =sty; }
function Gridlock( ui,feNim){ this.ui =ui; this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid;
	this.disHei =ui.winHei; this.disHrz =ui.devices.gL.disHrz; this.disVrt =ui.devices.gL.disVrt;
	this.lVX =ui.devices.gL.lVX; this.mVX =ui.devices.gL.mVX; this.tHY =ui.devices.gL.tHY; this.THY =ui.devices.gL.THY;
	this.mHY =ui.devices.gL.mHY; this.bHY =ui.devices.gL.bHY; this.scrHrz =ui.devices.gL.mVX +ui.devices.gL.lVX;
	this.scrVrt =ui.devices.gL.tHY;	this.scrWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY;
	/*switch( feNim){ case "dharma" : this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY; break;
					case "mosaic" : this.scrHei =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.tHY; break}*/}
function Sequencer( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.devices.gL.lVX; this.disHei =ui.winWid;
	this.disHrz =ui.devices.sQ.disHrz; this.disVrt =ui.devices.sQ.disVrt;
	this.rowHei =Math.floor((ui.devices.gL.bHY / ui.devices.sQ.rowNum) - (ui.devices.sQ.rowOff / ui.devices.sQ.rowNum));
	var sty = {
		bG:"#000000",		btnTxt:"#888888",	sel:"#555555",		selTxt:"#cccccc"};
	this.sty =sty; }
function SuperTabs( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX; this.disHei =ui.devices.gL.tHY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.sT.disVrt;
	this.tabHei =ui.devices.gL.THY; this.tabWid =ui.devices.gL.mVX;
	var sty = { rad:6,
		bG:"#000000",		d:OM.coGrid, 		brd:"#555555", 		txt:"#888888", 		sel:"#ffffff"};
	this.sty =sty;}
function Ammo( ui,feNim,DOM,SVG,parent){ this.ui =ui;this.actDOM=DOM;this.DOM=null;this.actSVG=SVG;this.sV=null;
	this.feNim=feNim; 	
						this.disWid =parent.scrWid; this.disHei =parent.scrHei;
						this.scrWid =parent.scrWid; this.scrHei =parent.scrHei;
						this.disVrt =parent.scrVrt; this.disHrz =parent.scrHrz;
						this.scrVrt =parent.scrVrt; this.scrHrz =parent.scrHrz;
	var sty = {
		bG:"#000000", 	bel:"#cccc88",
		ori:"#ffffff", 	oriTxt:"#000000", dup:"#cccccc", dupTxt:"#888888", tra:"#220000", traTxt:"#cc0000"};
	this.sty = sty; }
function Shotgun( ui,feNim,DOM,SVG,ammo){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.ammo =ammo; this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.bHY +ui.devices.gL.mHY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY +ui.devices.gL.bHY +ui.devices.gL.mHY;
	var sty = {
		bG:"#cccc88", 	brd:"#ffffff", txt:"#ffffff", dup:"#cccccc", not:"#8888cc"};
	this.sty =sty;}
function Cannon( ui,feNim,DOM,SVG,ammo){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.ammo =ammo; this.feNim=feNim; this.disWid =ammo.disWid;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY;// -ui.devices.gL.bHY;// -ui.devices.gL.dBH;
	this.disHrz =ui.devices.gL.lVX;	this.disVrt =ui.devices.gL.tHY; this.disCal =ui.devices.cA.disCal;
	var sty = {
		bG:"#cccc88", 	brd:"#ffffff", txt:"#ffffff", dup:"#cccccc", not:"#8888cc"};
	this.sty =sty; }
function Explorer( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.devices.gL.mVX; this.disHei =ui.winHei -ui.devices.gL.THY;
	this.disHrz =ui.devices.gL.lVX; this.disVrt =ui.devices.gL.THY;
	var sty = { 
		bG:OM.coGrid, 		disL:"#ffffff", 	disD:"#cccccc", 	brd:"#999999", 		disCvr:"#555555"};
	this.sty =sty;}
function Gram( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.lVX; this.disHei =ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.winHei -ui.devices.gL.bHY -ui.devices.gL.dBH;
	var sty = { brdWid:3,
		bG:OM.coGrid,	d:"#000000"};
	this.sty =sty;}
function OneLiner( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.dBH;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =0;
	var sty = { pad:3, 
		bG:"#000000",  txt:"#00ff00"};
	this.sty =sty;}
function Dialog( ui,feNim,DOM,SVG){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.actSVG =SVG; this.sV =null;
	this.feNim=feNim; this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.devices.gL.mHY; this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX;
	this.disVrt =ui.winHei -ui.devices.gL.mHY -ui.devices.gL.tHY;
	var sty = { pad:5,
		bG:OM.coGrid, 	d:"#ffffff", 		brd:"#cccccc"};
	this.sty =sty;}
function Quad( ui,feNim,SVG,templates){
	this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.qDs =ui.devices.qU.qDs;
	this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY;
	this.cntHrz =(ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX)/2;
	this.cntVrt =(ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY)/2;
	this.halWid =Math.floor((ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX)/2);
	this.halHei =Math.floor((ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY)/2);
	this.dis =ui.devices.qU.dis;
	var sty={
		bG:"#220033"};
	this.sty =sty}
function caQuad( qU,qD){
	qU.dis.uR.scrWid=qU.halWid;
	qU.dis.uR.scrHei=qU.halHei; qU.dis.uL.scrWid=qU.halWid; qU.dis.uL.scrHei=qU.halHei;
	qU.dis.dL.scrWid=qU.halWid; qU.dis.dR.scrHei=qU.halHei; qU.dis.dR.scrWid=qU.halWid; qU.dis.dR.scrHei=qU.halHei;
	qU.dis.u.scrWid =qU.disWid; qU.dis.u.scrHei =qU.halHei; qU.dis.l.scrWid =qU.halWid; qU.dis.l.scrHei =qU.disHei;
	qU.dis.d.scrWid =qU.disWid; qU.dis.u.scrHei =qU.halHei; qU.dis.r.scrWid =qU.halWid; qU.dis.r.scrHei =qU.disHei;
	qU.dis.uR.scrHrz=Math.ceil(qU.cntHrz); 	qU.dis.uR.scrVrt=qU.disVrt;
	qU.dis.uL.scrHrz=qU.disHrz; 			qU.dis.uL.scrVrt=qU.disVrt;
	qU.dis.dR.scrHrz=Math.ceil(qU.cntHrz); 	qU.dis.dR.scrVrt=Math.ceil(qU.cntVrt);
	qU.dis.dL.scrHrz=qU.disHrz; 			qU.dis.dL.scrVrt=Math.ceil(qU.cntVrt);
	qU.dis.u.scrHrz =qU.disHrz; 			qU.dis.u.scrVrt =qU.disVrt;
	qU.dis.l.scrHrz =qU.disHrz; 			qU.dis.l.scrVrt =qU.disVrt;
	qU.dis.d.scrHrz =qU.disHrz; 			qU.dis.d.scrVrt =Math.ceil(qU.cntVrt);
	qU.dis.r.scrHrz =Math.ceil(qU.cntHrz); 	qU.dis.r.scrVrt =Math.ceil(qU.cntVrt);
	qU.dis.mono.scrHrz =qU.disHrz; 			qU.dis.mono.scrVrt =qU.disVrt;
	qU.dis.mono.scrWid =qU.disWid; 			qU.dis.mono.scrHei =qU.disHei;return qU}
function SystemGrid( ui,feNim,DOM){ this.ui =ui; this.actDOM =DOM; this.DOM =null; this.feNim=feNim;
	this.disWid =ui.winWid -ui.devices.sB.disWid -ui.devices.gL.mVX -ui.devices.gL.lVX;
	this.disHei =ui.winHei -ui.devices.gL.tHY -ui.devices.gL.mHY -ui.devices.gL.bHY;
	this.disHrz =ui.devices.gL.mVX +ui.devices.gL.lVX; this.disVrt =ui.devices.gL.tHY;
	var sty={
		bG:"#448844",	arm:"#888844",		brd:"#ffff88",		leg:"#222244"};
	this.sty =sty;}
function Dice( ui,fe,SVG,parent){ this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=fe; this.parent=parent;
	this.disWid =parent.scrWid; this.disHei =parent.scrHei; this.disHrz =parent.scrHrz; this.disVrt =parent.scrVrt;
	this.cntHrz =parent.scrWid / 2; 	this.cntVrt =parent.scrHei / 2;
	this.prjSca =ui.devices.dC.prjSca; 	this.prjLen =ui.devices.dC.prjLen; 	this.prjHAp =ui.devices.dC.prjHAp;
	this.edgHrz =(parent.scrWid / 2) * (ui.devices.dC.prjLen / ui.devices.dC.prjSca);
	this.edgVrt =(parent.scrHei / 2) * (ui.devices.dC.prjLen / ui.devices.dC.prjSca);
	this.laReso =ui.devices.dC.laReso; 	this.loReso =ui.devices.dC.loReso; 	this.elReso =ui.devices.dC.elReso;
	this.dis = ui.devices.dC.dis;
	var sty ={
		bG:"#220000"}
	this.sty =sty}
function Mosaic( ui,feNim,SVG,parent){ this.ui =ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.scrWid; this.disHei =parent.scrHei; this.disHrz =parent.scrHrz; this.disVrt =parent.scrVrt;
	this.cntHrz =Math.floor( parent.scrWid / 2); 	//laterthis.modHrz =(parent.disWid/2) -Math.floor(parent.disWid/2);
	this.cntVrt =Math.floor( parent.scrHei / 2); 	//this.modVrt =(parent.disWid/2) -Math.floor(parent.disWid/2);
	this.froTiW =Math.floor((parent.scrWid * (ui.devices.mC.prjApe / ui.devices.mC.prjSca)) / ui.devices.mC.xReso);
	this.froTiH =Math.floor((parent.scrHei * (ui.devices.mC.prjApe / ui.devices.mC.prjSca)) / ui.devices.mC.yReso);
	this.latTiW =Math.floor((parent.scrWid * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)) / ui.devices.mC.zReso);
	this.latTiH =Math.floor((parent.scrHei - (parent.scrHei * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.yReso);
	this.eleTiW =Math.floor((parent.scrWid - (parent.scrWid * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.xReso);
	this.eleTiH =Math.floor((parent.scrHei - (parent.scrHei * (ui.devices.mC.prjLen / ui.devices.mC.prjSca)))
		/ ui.devices.mC.zReso);
	this.reaTiW =Math.floor( parent.scrWid / ui.devices.mC.xReso);
	this.reaTiH =Math.floor( parent.scrHei / ui.devices.mC.yReso);
	var sty={
		bG:"#000022"};
	this.sty=sty; }
function Tower( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG=SVG; this.sV=null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#000022"}
	this.sty=sty}
function Kakara( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG =SVG; this.sV =null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#ee00aa"};
	this.sty=sty; }
function Yozen( ui,feNim,SVG,parent){ this.ui=ui; this.actSVG =SVG; this.sV=null; this.feNim=feNim; this.parent=parent;
	this.disWid =parent.disWid; this.disHei =parent.disHei; this.disHrz =parent.disHrz; this.disVrt =parent.disVrt;
	var sty={
		bG:"#eeeeaa"};
	this.sty=sty; }


function mkT(x,y,id,co,cl,fonSiz,txt,fonFam){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
			if(fonSiz!=false){ 	t.setAttribute( 'font-size',fonSiz)}
				if( id!=false){ t.setAttribute( 'id', 	id) }
				if( co!=false){ t.setAttribute( 'fill', co) }
				if( cl!=false){ t.setAttribute( 'class',cl) }
								t.setAttribute( 'pointer-events', 'none');
								t.textContent =txt; return t}
function mkTFun(x,y,id,co,cl,fonSiz,txt,fonFam,op){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
			if(fonSiz!=false){ 	t.setAttribute( 'font-size',fonSiz)}
			if(fonFam!=false){ 	t.setAttribute( 'font-family',fonFam)}
				if(op!=false){ 	t.setAttribute( 'opacity',op)}
				if( id!=false){ t.setAttribute( 'id', 	id) }
				if( co!=false){ t.setAttribute( 'fill', co) }
				if( cl!=false){ t.setAttribute( 'class',cl) }
								t.textContent =txt; return t}
//b.e=mkTFun(b.x,b.y,"cUIUFun-1","#662525","cUIUFun",66,"1","strike_fighter",0.5);
function mkY(){ /*värierottelu mkC*/}

function mkW(c,x,y,w,h,co,st,d,op,Co,cO,CO){  var
	e=mkI(	x-((w/d)/2),	y+((h/d)/2),	x+((w/d)/2)+(w-(w/d)), 			y+((h/d)/2),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+((h/d)/2)+h,	x+((w/d)/2)+(w-(w/d)), 			y+((h/d)/2)+h,	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2),	x+((w/d)/2)+(w-(w/d))+(w/d),	y-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2)+h,	x+((w/d)/2)+(w-(w/d))+(w/d),	y-((h/d)/2)+h,	"cHUI",co,st,op); c.push(e);

	e=mkI(	x+((w/d)/2),	y-((h/d)/2),	x+((w/d)/2),	y+((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y-((h/d)/2)+h,	x+((w/d)/2),	y+(2.5*(h/d)),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2),	y+((h/d)/2),	x+((w/d)/2),	y+(2.5*(h/d)),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x+((w/d)/2)+w,	y-((h/d)/2),	x+((w/d)/2)+w,	y+((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2)+w,	y-((h/d)/2)+h,	x+((w/d)/2)+w,	y+(2.5*(h/d)),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x+((w/d)/2)+w,	y+((h/d)/2),	x+((w/d)/2)+w,	y+(2.5*(h/d)),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2),	y+((h/d)/2),	x-((w/d)/2),	y+(1.5*(h/d)),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+(1.5*(h/d)),	x-((w/d)/2),	y+h-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+h-((h/d)/2),	x-((w/d)/2),	y+h+((h/d)/2),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2)+w,	y+((h/d)/2),	x-((w/d)/2)+w,	y+(1.5*(h/d)),	"cHUI",Co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(1.5*(h/d)),	x-((w/d)/2)+w,	y+h-((h/d)/2),	"cHUI",co,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+h-((h/d)/2),	x-((w/d)/2)+w,	y+h+((h/d)/2),	"cHUI",Co,st,op); c.push(e);

	e=mkI(	x-((w/d)/2),	y+(h/d)+(h/8),		x+((w/d)/2),	y+((h/d)/2),	"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2),	y+(h/d)+(h/8)+(h/2),x+((w/d)/2),	y+h-(1.5*(h/d)),"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(h/d)+(h/8),		x+((w/d)/2)+w,	y+((h/d)/2),	"cHUI",cO,st,op); c.push(e);
	e=mkI(	x-((w/d)/2)+w,	y+(h/d)+(h/8)+(h/2),x+((w/d)/2)+w,	y+h-(1.5*(h/d)),"cHUI",cO,st,op); c.push(e); 

//	e=mkI(  x+(w/2),		y+(h/2)-(h/d),		x+(w/2),		y+((h/2)+(h/d)),"cHUI",CO,42,op/2); c.push(e);
//	e=mkI(  x+(w/2)-(w/d),	y+(h/2),			x+(w/2)+(w/d),	y+(h/2), 		"cHUI",CO,42,op/2); c.push(e);
//	e=mkTFun(  x+(w/2)-66, 		y+(h/2)-10,	"cHty", "#ffffff", 	"pAIU_txt",25,"MOI","profont",0.618);c.push( e);
//	e=mkTFun(  x+(w/2)-25, 		y+(h/2)-4,	"cHty", "#ffffff", 	"pAIU_txt",19,"descriptzn","profont",0.618);c.push( e);

	return c}
function mkP(c,x,y,w,h,d){ var e=null; var
	v =x+(w/d)	+","+(y+(h/d))	+" "+(x+(w/2))+","+(y+(h/d)) 	+" "+(x+(w/2)) +","+(y+(h/2));
	//	+(x+(w/d)+(w/2))+","+(y+(h/d)+(h/2))	+" "+(x+(w/d))+","+(y+(h/d));
	e=mkSG( v,"-pP","#650065","-pP-jou",false); /*console.log(e);*/ c.push(e); return c}
function mkI(x,y,X,Y,id,co,st,op){var r=document.createElementNS( nS,'line');
	r.setAttribute( 'x1',x);r.setAttribute('x2',X);
	r.setAttribute('y1',y); r.setAttribute('y2',Y); r.setAttribute('id',id); r.setAttribute( 'opacity',op);
	r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}
function mkII(x,y,X,Y,id,co,st,op,wi){var r=document.createElementNS( nS,'line');
	r.setAttribute( 'x1',x);r.setAttribute('x2',X);
	r.setAttribute('y1',y); r.setAttribute('y2',Y); r.setAttribute('id',id); r.setAttribute( 'opacity',op);
	r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}
function mkB(x,y,w,h,id,co,cl,tId,tCo,tCl,fonSiz,txt){ var b=[];
	var e =mkL(x,y,w,h,id,co,cl); b.push(e); e =mkT(x,y,tId,tCo,tCl,fonSiz,txt); b.push(e); return b}
function mkD(x,y,w,h,id,co,cl) 	{ var r=document.createElement('div'); r.setAttribute( 'position','fixed'); r.setAttribute( 'width',w); r.setAttribute( 'height',h); r.setAttribute( 'left',x); r.setAttribute( 'top',y); r.setAttribute( 'id',id); r.setAttribute( 'background-color',co); if(typeof cl!='undefined'){ r.setAttribute( 'class',cl) }return r}
function mkS(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); if(id!=false){p.setAttribute( 'id',id)} p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} return p}
function mkG(id,stops,sL){ var g=document.createElementNS( nS,'linearGradient'); g.setAttribute('id',id);
	for(var i=0; i < sL; i++){ var ats = stops[i]; var stop = document.createElementNS( nS,'stop');
		for(var att in attrs){ if(atts.hasOwnProperty( att)) stop.setAttribute( att,atts[att])}
		g.appendChild( stop)}
	var defs =sV.querySelector('defs') || sV.insertBefore( document.createElementNS( nS,'defs'), sV.firstChild);
	return defs.appendChild(g)}
function mkH( id,offset,co){ var h=document.createElementNS( nS,'stop'); h.setAttribute('id',id);
	h.setAttribute('offset',offset); h.setAttribute('stop-color',co); return h}
function mkCH( pro,axi,dia){
	var ss=mkH( 'uRGX-pro',0,"#ff8888");

	var lG=mkLG( 'uRG'); }
function mkLG( id,stops,stLen){var lG=document.createElementNS( nS,'linearGradient'); lG.setAttribute('id',id);
	for(var i=0; i < stLen; i++){ lG.appendChild( stops[i])}
	console.log( lG)}
/*createGradient($('svg')[0],'MyGradient',[
  {offset:'5%', 'stop-color':'#f60'},
  {offset:'95%','stop-color':'#ff6'}
]);
$('svg path').attr('fill','url(#MyGradient)');*/

// svg:   the owning <svg> element
// id:    an id="..." attribute for the gradient
// stops: an array of objects with <stop> attributes
/*function createGradient(svg,id,stops){
  var svgNS = svg.namespaceURI;
  var grad  = document.createElementNS(svgNS,'linearGradient');
  grad.setAttribute('id',id);
  for (var i=0;i<stops.length;i++){
    var attrs = stops[i];
    var stop = document.createElementNS(svgNS,'stop');
    for (var attr in attrs){
      if (attrs.hasOwnProperty(attr)) stop.setAttribute(attr,attrs[attr]);
    }
    grad.appendChild(stop);
  }

  var defs = svg.querySelector('defs') ||
      svg.insertBefore( document.createElementNS(svgNS,'defs'), svg.firstChild);
  return defs.appendChild(grad);
}*/
function mkSG(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); p.setAttribute( 'id',id); p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} return p}
function drA(x,y,w,h,l,id,cl,b,L,op){ var e=document.createElementNS( nS,'rect'); e.setAttribute( 'fill',l);
	e.setAttribute('x',x);e.setAttribute('y',y); e.setAttribute( 'width',w); e.setAttribute( 'height',h); 
	if(b > 0){ e.setAttribute( 'stroke',L); e.setAttribute( 'stroke-width',b)}
	if(op!=undefined){ e.setAttribute( 'opacity',op)} e.setAttribute( 'id',id); e.setAttribute( 'class',cl); return e}
function drT(x,y,l,t,id,cl,f,F){ var e=document.createElementNS( nS,'text'); e.setAttribute('x',x);e.setAttribute('y',y);
 	e.setAttribute( 'id', id); e.setAttribute( 'class', cl); e.setAttribute( 'font-size',f); e.setAttribute( 'fill',l);
 	if(F==undefined){ e.setAttribute( 'font-family','profont')}else{ e.setAttribute( 'font-family',F)} e.textContent =t;
 	e.setAttribute( 'pointer-events', 'none'); return e}
function drS(v,l,id,cl,op){ var e=document.createElementNS( nS,'polygon'); e.setAttribute("points",v);
	e.setAttribute( 'fill',l); e.setAttribute('id',id); e.setAttribute('class',cl);
	if(op!=undefined){ e.setAttribute( 'opacity',op)} return e}
//e =mkS(v, id+"-sP", u.sty.cShade, id+"-sP-hrz", op); 
/*function mkS(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); if(id!=false){p.setAttribute( 'id',id)} p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} return p}*/

/* function mkT(x,y,id,co,cl,fonSiz,txt,fonFam){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
			if(fonSiz!=false){ 	t.setAttribute( 'font-size',fonSiz)}
				if( id!=false){ t.setAttribute( 'id', 	id) }
				if( co!=false){ t.setAttribute( 'fill', co) }
				if( cl!=false){ t.setAttribute( 'class',cl) }
								t.setAttribute( 'pointer-events', 'none');
								t.textContent =txt; return t}*/
function mkL(x,y,w,h,id,co,cl,sC,sW){ var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
					if(sC!=""){ 	w -=sW*2; h -=sW*2; r.setAttribute( 'stroke',sC); r.setAttribute( 'stroke-width',sW)}
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}
function mkLT(x,y,w,h,id,co,cl,op){ var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
					 				r.setAttribute( 'opacity',op);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					//if( cl!=null){ 	cl.forEach( function(){ r.setAttribute( 'class',cl)}); } console.log(r);
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}
function mkK(x,y,w,h,id,co,cl,op) { var r=document.createElementNS( nS,'rect');
					if( x> -1){ 	r.setAttribute( 'x',x)}	
					if( y> -1){ 	r.setAttribute( 'y',y)}
									r.setAttribute( 'opacity',op);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id!=false){ r.setAttribute( 'id', 	id) }
					if( co!=false){ r.setAttribute( 'fill', co) }
					if( cl!=false){ r.setAttribute( 'class',cl) }return r}

function mkFb( n,sB){ var id="sB_btn-"+n; n = n * sB.rowHei;
	var e =mkL( sB.disHrz, n, sB.disWid, sB.rowHei,	id, sB.sty.btn,"sB_btn",""); return e }
function mkFt( n,sB,ni){ var id="sB_btT-"+n; n = n * sB.rowHei;
	var e =mkT( sB.disHrz+sB.bTOX, n+sB.bTOY,		id, sB.sty.btnTxt, "sB_btT",15,ni,'profont'); return e }
function mkFr( n,sB){ var et=[]; var yi=n * sB.rowHei; var
	e=mkL( sB.disHrz, yi,  						sB.disWid, sB.btnBrd, false, sB.sty.btnU, "sB_btnBrd", ""); et.push( e);
	e=mkL( sB.disHrz, yi+sB.rowHei-sB.btnBrd, 	sB.disWid, sB.btnBrd, false, sB.sty.btnD, "sB_btnBrd", ""); et.push( e);
	var v = sB.disHrz+","+yi+" "+ 				(sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+sB.disHrz+","+(yi+sB.rowHei);
	e=mkS( v,false,sB.sty.btnL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
	var v = sB.disHrz+sB.disWid+","+yi+" "+ 	(sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
	e=mkS( v,false,sB.sty.btnR/*"#880000"*/,"sB_btnBrd",false); et.push( e);
	return et}

/*v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+
							(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+
							(x+w-(w/d)+","+(y+(h/2)+(h/d)));
						e =mkS( 	e =mkS(v,id+"-sP","#ffcccc",id+"-sP-hrz",op);c.push(e);*/
function mkSidebarElements( sB){  	sB.sV =mkSidebarSVG( sB); return sB}
function mkSidebarSVG( sB){ var re={ dE:[], dELen: 0}; var buf =null;
		re.dE =[mkL( sB.disHrz,sB.disVrt,sB.disWid,sB.disHei,"sB",sB.sty.bG,"sB",'')];
		for( var i=0; i < OM.fesLen; i++){	buf =mkFb( i,sB);  			re.dE.push(buf);
											buf =mkFt( i,sB, OM.fes[i]);re.dE.push(buf);
											buf =mkFr( i,sB); re.dE =re.dE.concat(buf);} re.dELen =re.dE.length; return re}
function mkProjectorElems( ui,pJ){ 	pJ.sV =mkProjectorSVG1( pJ); return pJ}
function mkProjectorSVG1( pJ){ 	var re={ open:null, closed:null};
							re.open =mkL( pJ.opeHrz,pJ.opeVrt,pJ.opeWid,pJ.opeHei,"pJOpe",pJ.sty.bG,"pJOpe","");
							re.closed=mkL(pJ.cloHrz,pJ.cloVrt,pJ.cloWid,pJ.cloHei,"pJClo",pJ.sty.bG,"pJClo","");return re}
function mkToolTipsElements( tT){ tT.sV =mkToolTipsSVG( tT); return tT}
function mkToolTipsSVG( tT){ 	var re =mkL( tT.disHrz,tT.disVrt,tT.disWid,tT.disHei,"tT",tT.sty.bG,"tT",""); return re}
function mkSequencerElements( sQ){ sQ.sV =mkSequencerSVG( sQ); return sQ}
								//if( sQ.actDOM){ sQ.DOM =mkSequencerDOM( sQ);
								//				if( sQ.actSVG){ sQ.DOM.appendChild(sQ.sV)}} return sQ}
function mkSequencerDOM( sQ){	var re =mkD( sQ.disHrz,sQ.disVrt,sQ.disWid,sQ.disHei,"sQD",sQ.sty.bG,"sQD"); return re}
function mkSequencerSVG( sQ){	var re =mkL( sQ.disHrz,sQ.disVrt,sQ.disWid,sQ.disHei,"sQ",sQ.sty.bG,"sQ",""); return re}
function mkSuperTabsElements( sT){ /*console.log(sT);*/ sT.sV =mkSuperTabsSVG( sT); return sT}
								//if( sT.actDOM){ sT.DOM =mkSuperTabsDOM( sT);
								//				if( sT.actSVG){ sT.DOM.appendChild(sT.sV)}} return sT}
function mkSuperTabsDOM( sT){	var re =mkD( sT.disHrz,sT.disVrt,sT.disWid,sT.disHei,"sTD",sT.sty.bG,"sTD"); return re}
function mkSuperTabsSVG( sT){	var re =mkL( sT.disHrz,sT.disVrt,sT.disWid,sT.disHei,"sT",sT.sty.bG,"sT",""); return re}

function mkShotgunElements( sH) {if( sH.actSVG){ sH.sV =mkShotgunSVG( sH)}
								if( sH.actDOM){ sH.DOM =mkShotgunDOM( sH);
												if( sH.actSVG){ sH.DOM.appendChild(sH.sV)}} return sH}
function mkShotgunDOM( dE){		var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"sHD",dE.sty.bG,"sHD"); return re}
function mkShotgunSVG( dE){		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"sH",dE.sty.bG,"sH",""); return re}
function mkCannonElements( cA) {cA.sV =mkCannonSVG( cA);
								if( cA.actDOM){ cA.DOM =mkCannonDOM( cA);
													if( cA.actSVG){ cA.DOM.appendChild(cA.sV)}} return cA}
function mkCannonDOM( dE){		var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"cAD",dE.sty.bG,"cAD"); return re}
function mkCannonSVG( dE){		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"cA",dE.sty.bG,"cA",""); return re}
function mkAmmoElements( aM){	if( aM.actSVG){ aM.sV =mkAmmunitionSVG( aM)}
								if( aM.actDOM){ aM.DOM =mkAmmunitionDOM( aM);
													if( aM.actSVG){ aM.DOM.appendChild(aM.sV)}} return aM}
function mkAmmunitionDOM( dE){	var re =mkD( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"aMD",dE.sty.bG,"aMD"); return re}
function mkAmmunitionSVG( dE){	var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"aM",dE.sty.bG,"aM",""); return re}

function mkExplorerElements( eX){ if( eX.actSVG){ eX.sV =mkExplorerSVG( eX)}
								if( eX.actDOM){ eX.DOM =mkExplorerDOM( eX);
												if( eX.actSVG){ eX.DOM.appendChild(eX.sV)}} return eX}
function mkExplorerDOM( eX){	var re =mkD( eX.disHrz,eX.disVrt,eX.disWid,eX.disHei,"eXD",eX.sty.bG,"eXD"); return re}
function mkExplorerSVG( eX){	var re =mkL( eX.disHrz,eX.disVrt,eX.disWid,eX.disHei,"eX",eX.sty.bG,"eX",""); return re}
function mkGramElements( gR){ 	if( gR.actSVG){ gR.sV =mkGramSVG( gR)}
								if( gR.actDOM){ gR.DOM =mkGramDOM( gR);
												if( gR.actSVG){ gR.DOM.appendChild(gR.sV)}} return gR}
function mkGramDOM( gR){		var re =mkD( gR.disHrz,gR.disVrt,gR.disWid,gR.disHei,"gRD",gR.sty.bG,"gRD"); return re}
function mkGramSVG( gR){		var re =mkL( gR.disHrz,gR.disVrt,gR.disWid,gR.disHei,"gR",gR.sty.bG,"gR",''); return re}
function mkOneLinerElements( oL){ if( oL.actSVG){ oL.sV =mkOneLinerSVG( oL)}
								if( oL.actDOM){ oL.DOM =mkOneLinerDOM( oL);
												if( oL.actSVG){ oL.DOM.appendChild(oL.sV)}} return oL}
function mkOneLinerDOM( oL){	var re =mkD( oL.disHrz,oL.disVrt,oL.disWid,oL.disHei,"oLD",oL.sty.bG,"oLD"); return re}
function mkOneLinerSVG( oL){	var re =mkL( oL.disHrz,oL.disVrt,oL.disWid,oL.disHei,"oL", oL.sty.bG,"oL",''); return re}
function mkDialogElements( dG){ if( dG.actSVG){ dG.sV =mkDialogSVG( dG)}
								if( dG.actDOM){ dG.DOM =mkDialogDOM( dG);
												if( dG.actSVG){ dG.DOM.appendChild(dG.sV)}} return dG}
function mkDialogDOM( dG){		var re =mkD( dG.disHrz,dG.disVrt,dG.disWid,dG.disHei,"dGD",dG.sty.bG,"dGD"); return re}
function mkDialogSVG( dG){		var re =mkL( dG.disHrz,dG.disVrt,dG.disWid,dG.disHei,"dG",dG.sty.bG,"dG",''); return re}
function mkSystemGridElements( sG){ if( sG.actSVG){ sG.sV =mkSystemGridSVG( sG)} 
								if( sG.actDOM){ sG.DOM =mkSystemGridDOM( sG);
												if( sG.actSVG){ sG.DOM.appendChild(sG.sV)}} return sG}
function mkSystemGridDOM( sG){	var re =mkD( sG.disHrz,sG.disVrt,sG.disWid,sG.disHei,"sGD",sG.sty.bG,"sGD"); return re}
function mkSystemGridSVG( sG){	var re =mkD( sG.disHrz,sG.disVrt,sG.disWid,sG.disHei,"sG",sG.sty.bG,"sG"); return re}
function mkMosaicElements( mC){ if( mC.actSVG){ mC.sV =mkMosaicSVG( mC)} return mC}
function mkMosaicSVG( mC){		var re =mkL( mC.disHrz,mC.disVrt,mC.disWid,mC.disHei,"mC",mC.sty.bG,"mC",''); return re}

function mkKakaraElements( dE){ if( dE.actSVG){ dE.sV =mkLakaraSVG( dE)} return dE}
function mkKakaraSVG( dE){ 		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"kK",dE.sty.bG,"kK",''); return re}
function mkYozenElements( dE){ 	if( dE.actSVG){ dE.sV =mkYozenSVG( dE)} return dE}
function mkYozenSVG( dE){ 		var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"yO",dE.sty.bG,"yO",''); return re}
function mkMoralystElements( dE){ if( dE.actSVG){ dE.sV =mkMoralystSVG( dE)} return dE}
function mkMoralystSVG( dE){ 	var re =mkL( dE.disHrz,dE.disVrt,dE.disWid,dE.disHei,"mT",dE.sty.bG,"mT",''); return re}

function precalcFeatureTemplates( uiFes,sB) { var ret=[]; OM.fesLen =OM.fes.length; uiFes.fesLen =OM.fesLen; var fe =null;
	for(var i=0; i < OM.fesLen; i++) { fe =precalcFeatureTemplate( OM.fes[i], uiFes); ret.push( fe)} return ret}
function precalcFeatureTemplate( nim,ui){
	var sTs =precalcSuperTabs( nim);
	var qU = precalcQuad( nim);
	var fe =new Feature( ui,nim,sTs,qU);	return fe}
function Feature( ui,h,sTs,qU){ this.nim=h; this.sTs=sTs; this.sTsLen=sTs.length;
	var act =getDevicesForFeature( h); 					this.act =act;
	var dev =precalcDevicesForFeature( ui,h,act,qU); 	this.dev =dev;
	this.tools=null; }

function precalcQuad( feNim){ switch( feNim){ 	case "mosaic": return OM.qU 
												case "zygn": return OM.qU } return null }
function precalcGridlock( disWid,disHei,gL){ gL.disWid=disWid; gL.disHei=disHei;
	gL.scrWid=disWid-gL.lVX-gL.mVX;					gL.scrHei=disHei-gL.tHY-gL.bHY;
	gL.scrHrz=gL.lVX+gL.mVX; 						gL.scrVrt=gL.mVX; return gL}
function measureWindow( ui){ ui.winWid =window.innerWidth; ui.winHei =window.innerHeight; return ui}
function precalcSuperTabs( feNim){var sTs=[]; switch( feNim){
	case "money" : sTs=[ "hello","world"]; break;
	case "mosaic": sTs=[ "world"]; 		break}return sTs}
function calcSuperTabs( ui, fes, fesL){	for(var i=0; i<fesL; i++){ for(var j=0; j<fes[i].sTsLen; j++){
	fes[i].sTs[j] =mkSuperTab( fes[i], fes[i].sTs[j])}}/* console.log(OM.user);*/ /*bind sT to user not fe*/return ui}
function mkSuperTab( fe,sTNi){ var o; switch( sTNi){ 	case "hello": o =mkSuperTabHello( fe); break;
														case "world": o =mkSuperTabWorld( fe); break; } return o}
function mkSuperTabHello( fe){ var o=new SuperTab("hello",fe,OM.user); return o}
function mkSuperTabWorld( fe){ var o=new SuperTab("world",fe,OM.user); return o}
function SuperTab( ni,fe,usr){ this.ni=ni; this.user=usr; this.fe=fe; OM.user.sTs.push(this);}

function getDevicesForFeature( h){ var r=null; switch( h){
	case "yozen": 	r = {  DOM:true, sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:true, eX:true, gR:true, oL:true, dG:false,pM:false,
							sG:true, qU:false,dC:false,mC:false,kK:false,yO:false};return r;
	case "money" : 	r = {  DOM:true, sV:true, sB:true, tT:true, gL:true, 
							sQ:true, aM:true, sH:true, cA:true, mE:false,
							sT:true, eX:true, gR:false,oL:true, dG:false,pM:false,
							sG:false,qU:false,dC:false,mC:false,kK:false,yO:false};return r;
	case "mosaic": 	r =	{  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:true,
							sT:true, eX:true, gR:true, oL:true, dG:false,pM:false,
							sG:false,qU:true, dC:false,mC:false,kK:false,yO:false};return r;
	case "dharma" : r = {  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:false,eX:true, gR:true, oL:true, dG:false,pM:false,
							sG:false,qU:false,dC:false,mC:false,kK:false,yO:true };return r;
	case "zygn": 	r = {  DOM:false,sV:true, sB:true, tT:true, gL:true,
							sQ:true, aM:false,sH:false,cA:false,mE:false,
							sT:true, eX:true, gR:false,oL:true, dG:false,pM:false,
							sG:false,qU:true, dC:false,mC:false,kK:false,yO:false};return r}}

function precalcToolsForFeatures( ui, fes, fesLen){
	for(var i=0; i < fesLen; i++) { var tools 	=precalcToolsForFeature( fes[i]);
									tools 		=mkTools( ui,i,tools);
									 }}
function precalcToolsForFeature( fe){ switch( fe){
	case 'dharma': var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4, 	siF1:4,bind:4,	min:0,max:4 };return ret;
	case 'money' : var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4,	siF1:4,bind:4,	min:0,max:4 };return ret;
	case 'mosaic': var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:false,siF1:4,bind:4, 	min:0,max:4 };return ret;
	case 'yozen' : var ret={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:false,siF1:4,bind:4, 	min:0,max:4 };return ret;
	case 'zygn': var r={ SVG:null,sB:null,
		tick:0,undo:1,redo:1,stop:2,play:2,rec:2,save:3,load:3,scroll:4, 	siF1:4,bind:4, 	min:0,max:4 };return r;}}
function mkTools( ui,i,t){ ui.features[i].tools = mkTools2( ui.devices.sB, t) }
function mkTools2( sB,t){ var tools ={ SVG:[], len:t.len, sB:null,
	tick:null,undo:null,redo:null,stop:null,play:null,rec:null, save:null,load:null }; var buf =null;
	for(var i=t.min; i < t.max; i++){ buf =null; buf =mkToolRow( i,t[i]); if( buf!=null){ tools.SVG.push( buf)}}
	tools =mkTools3( tools); return tools}
function mkToolRow( n,i){ var tools =mkToolRow2( n,i); if(!tools){ return null}else{
	var ret="ret"; return ret; }}
function mkToolRow2( n,i){ var r ={ r:[], ri:0}; 
	if(i.tick==n){ r.r.push("tick");r.ri++} if(i.undo==n){ r.r.push("undo");r.ri++} if(i.redo==n){ r.r.push("redo");r.ri++}
	if(i.stop==n){ r.r.push("stop");r.ri++} if(i.play==n){ r.r.push("play");r.ri++} if( i.rec==n){ r.r.push( "rec");r.ri++}
	if(i.save==n){ r.r.push("save");r.ri++} if(i.load==n){ r.r.push("load");r.ri++}if(i.scroll==n){r.r.push("scro");r.ri++}
	if(i.siF1==n){ r.r.push("s-F1");r.ri++} if(i.bind==n){ r.r.push("bind");r.ri++}
	
	if( r.ri==0){ return false}else{ return r}}
function mkTools3( tools){ for(var i=tools.len[0]; i < tools.len[1]; i++){ }} 

function mkToolsX( id,rowPop){ var r =null; switch( id){
	case "scro": r ={ id:id, rowPop:rowPop, auto:true, on:false, hold:false,
		sty:{ txt:'DOM', font:'strike_fighter', fontSi:3}}; return r}}


precalc();
</script></head><body onload='predraw( OM)'></body></html>
