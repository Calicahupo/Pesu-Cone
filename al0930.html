<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"
	http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>aldiodi 930</title><style>
	@font-face { font-family:'profont';
		src:url('diode/profontwindows-webfont.woff2')format('woff2'),
			url('diode/profontwindows-webfont.woff') format('woff');	font-weight:normal; font-style:normal; }
	@font-face { font-family: 'strike_fighter';
    	src:url('diode/strikefighter-webfont.woff2')format('woff2'),
    		url('diode/strikefighter-webfont.woff') format('woff'); font-weight: normal; font-style: normal;}
	html,body{height:100%;padding:0px;margin:0px;font-family:profont;font-size:13px;background-color:black;color:white;}
	button,select,input{font-family:profont;font-size:13px;}
	#wrapper{ min-height:100%; background-color:black; }
	#sidebar{position:fixed; min-height:100%; right:0px; background-color:#222222; font-size:15px; width:66px; }
		.sidebar-option{border-top:3px outset #444;padding-top:10px;padding-bottom:10px;border-bottom:3px outset #080808;
			padding-left:8px;padding-right:8px;border-left:3px outset #333;border-right:3px outset #111; color:#ccc;}
		.sidebar-option-selected{border-top: 3px inset black;padding-top:10px;padding-bottom:10px;
			border-bottom:3px inset #777; background-color:#111; padding-left:8px; padding-right:8px; color:white;  border-left: 3px inset #080808;  border-right: 3px inset #444;}
	#sidebarFeatures{ position:fixed; right:0px; bottom: 0px; width: 66px; }
	.trinaryFeature{ width: 18px; height:18px; display:inline; text-align:center; background-color: #444;
		font-size: 17px; float:left; margin-bottom:2px; margin-left:2px; margin-right:2px; margin-top:2px;
		-webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; padding:0px; }
	.binaryFeature { width: 29px; height:29px; display:inline; text-align:center; background-color: #444; 
		 font-size: 20px; float:left; margin-bottom:2px; margin-left:2px; margin-right:2px; margin-top:2px;
		-webkit-border-radius: 8px; -moz-border-radius: 8px; border-radius: 8px;}
	.unaryFeature  { width: 62px; height:62px; display:inline; text-align:center; background-color:#444; 
	 	 font-size: 42px; float:left; margin-bottom:2px; margin-left:2px; margin-top:2px;
	 	-webkit-border-radius:13px; -moz-border-radius:13px; border-radius:13px;}
	.clearBoth { clear:both; }

	#dharmaHeader { position:fixed; top:0px; right:66px; height: 25px; min-width:100%;border-right:1px solid #555;}
	#dharmaHeaderControls{
		position:fixed;top:0px;left:0px;width:107px;height:25px;background-color:#222;border-right:1px solid #555;}
	#dharmaHeaderBase {
		height:5px;width:100%;background-color:#222;top:19px;position:fixed;left:107px;border-top: 1px solid #555;}
	#dharmaHeaderTabs { height:25px; left:107px; width:100%; position:fixed; }
	.dharmaProfileCurrent { height:11px; margin-top:2px; float:left; position:relative; margin-left: 6px;
		padding-left:6px; padding-right:4px; padding-top: 2px; padding-bottom: 4px;
		background-color: #222; border:1px solid #555555; border-bottom: 0px none;
		-webkit-border-top-left-radius: 6px;-webkit-border-top-right-radius: 6px;-moz-border-radius-topleft: 6px;
		-moz-border-radius-topright: 6px;border-top-left-radius: 6px;border-top-right-radius: 6px; }
	.dharmaProfile { height:11px; margin-top:2px; float:left; position:relative; margin-left: 6px; color:#888;
		padding-left:6px; padding-right:4px; padding-top: 2px; padding-bottom: 3px;
		background-color: #000; border:1px solid #555555; border-bottom: 0px none;
		-webkit-border-top-left-radius: 6px;-webkit-border-top-right-radius: 6px;-moz-border-radius-topleft: 6px;
		-moz-border-radius-topright: 6px;border-top-left-radius: 6px;border-top-right-radius: 6px; }

	#dharmaSidebar  { width:173px; min-height:100%; position:fixed; left:  0px; top:25px;  background-color:#222; }
	select#dharmaTypeSelector { width:173px; }
	select#dharmaSubtypeSelector { width:173px; background-color:#ccc; height:78px; }
	.dharmaSidebarHood { width:173px; padding-top:2px; height:13px; background-color: #555; color:#222; overflow:hidden; }
	#dharmaEngine 				{ width:173px; padding-top:2px; height:13px; background-color:black; }
	#dharmaEngineOntology 		{ background-color:#111; }
	#dharmaEngineEpistemology 	{ background-color:#444; }
	#dharmaEngineMorality 		{ background-color:#111; }
	#dharmaEngineEthics 		{ background-color:#444; }
	#dharmaSidebarHoodPaint{position:absolute;width:186px;color:rgba(0,0,0,0.2);
		font-size:22px;margin-top:-3px;margin-left:-13px;overflow:hidden;}
	.dharmaConstantTooltip { text-shadow: 0 0 2px #FFFFFF; width: 60px; float:left; text-align:center; }
	.dharmaRelationTooltip { text-shadow: 0 0 2px #FFFFFF; float:left; text-align:center;  }
	#dharmaFooterCover{ width:173px; height:100%; position:absolute; left:0px; top:200px; background-color:#ccc; }
	select#dharmaSource { width: 60px; background-color:#ccc;top:112px; position:absolute; left:0px;}
	select#dharmaTarget { width: 60px; background-color:#ccc; top:112px; position:absolute;left:113px;}
	select#dharmaRelation {  background-color:#fff; width:53px; top:112px; position:absolute;left:60px; }
	#dharmaFrom{width: 59px;height:15px;position:fixed;left:0px;bottom:119px;
				text-align:center;border-right:1px solid #999;}
	#dharmaVia{ width: 53px; height:15px;position:fixed; left:60px;bottom:119px;
				text-align:center;}
	#dharmaTo { width: 59px;height:15px;position:fixed;left:113px;bottom:119px;
				text-align:center;border-left:1px solid #999}
	input#dharmaFrom,input#dharmaVia,input#dharmaTo{ display:inline;}
	#dharmaControls {width:173px; height:18px; position:fixed; left:0px; bottom:97px;}
	#allConstsToUp 	{width:28px;height:18px;padding:0px;}
	#selConstsToUp  {width:28px;height:18px;padding:0px;margin-right:2px;}
	#relsToLeft 	{width:28px;height:18px;padding:0px;}
	#relsToRight 	{width:28px;height:18px;padding:0px;}
	#selRelsToDown 	{width:28px;height:18px;padding:0px;margin-left:2px;}
	#allRelsToDown 	{width:28px;height:18px;padding:0px;}
	.dharmaControlButtonLabel { position:relative; top:-3px;}
	select#relationTypeSelector { width:173px; position:fixed; bottom:0px; background-color:#ccc;}
	select#relationSubtypeSelector { width:173px; position:fixed; bottom:19px; height:78px; }

	#dharmaParser { height:78px; background-color:#222; position:fixed; left:173px; bottom:19px; min-width:100%; }
	#devBar{ height: 19px; position:fixed; right:66px; bottom:0px; background-color:black; width:100%;
		text-align:right; padding-right: 9px; color:red; font-size:15px;}

	#dharmaColumnWrapper{width:100%;min-height:100%;background-color:#181818; position:absolute;top:25px;
		margin-left:173px; padding:66px; }
	.dharmaColumn{ margin-right:25px; border:1px solid black; float:left;  width:25%; padding: 66px;}
	#leftDharmaColumn{}
	#rightDharmaColumn{}

	#dharmaColumns { width:100%; left:346px; top:25px; margin-top:25px; position:absolute; }
	.dharmaColumn  { width:25px; background-color:white; border: 1px solid black; padding:66px; float:left; }
	#leftDharmaColumn { min-height: 100%; width:50%; background-color:#111; }
	#rightDharmaColumn{ min-height: 100%; width:50%; background-color:#111; }
	.divrow { width:100%; }	.rowblock { float:left; }
	#uL{float:left;}		#uR{float:left;}
	#content { background-color:black; color:white; }
</style>
<script src="diode/jquery-2.js"></script>
<script>
var svg   = document.createElementNS("http://www.w3.org/2000/svg", "svg");
var svgNS = svg.namespaceURI;
var AL = {
/*ENGINE  */initDone: false, 			T:0, 						time:0,				 		defaultTime: 6516,
/*CORE    */dharma: { mas:null, fem:null, beings:null, mosaic:null, space:null, tmprmnt:null, ontology:null },
/*XY      */resolution:	 8,				mosaic:		"XY",			mosaics: 	["XY","XZ","YZ"],
/*TAXONOMY*/ontology:null, 				epistemology:null, 			morality:null, 				ethics:null,
/*UI      */tab:		"dharma",		tabs:		["test","dharma","mosaic"], 				prevTab: false,
			fontSize: 	15, 			devHeader:	false,			headerHeight:50,
			sidebar: 	true,			sidebarSVG:true, 			sidebarWidth: 	66,
			sidebarTabHei: 41,			sidebarTabPadL: 11,			sidebarTabPadT: 6,
/*DHARMA  */dharmaProfile:null, 		dharmaProfiles: [], 	dharmaProfileIndex: 1, 		dharmaLogy: null,
/*MISC    */uri:		location,		trackingMosaic: false, 		help:true }

// "There are no taxonomies in America!" "And no Cartesian coordinates, either!"
function initTaxonomy(logies) {
	for(var i=0; i < logies.length; i++) {
		for(var j=0; j < logies[i].content.items.length; j++) {	var f = logies[i].content.items[j];
			f.hypot=false; 			f.hypotIn=[]; 			f.lemma=false; 			f.lemmaIn=[];
			f.corollary=false;		f.corollaryIn=[]; 		f.hiddenDharma=false; 	f.hiddenDharmaIn=[]; }} return logies }
function applyEpistemology(dharma,epistemology) { 	var bf; for(var i=0; i < dharma.ontology.length; i++) {
													if 		(dharma.ontology[i].handle == "beings" ) {
														bf = assignEpistemologiesTo(dharma.ontology[i], ["vertexPlane"]);
														dharma.ontology[i].epistemology = bf; }
													else if (dharma.ontology[i].handle == "tmprmnt" ){
														bf = assignEpistemologiesTo(dharma.ontology[i], ["circuitScript"]);
														dharma.ontology[i].epistemology = bf; }} return dharma }
function initEpistemology(dharma) { dharma.epistemology = ["vertexPlane","circuitScript"];
	function generate(arr) { var rt = []; var bf;
		for(var i=0; i < arr.length; i++) { bf = initEpistemologies(dharma, arr[i]); rt.push(bf); } return rt }
	dharma.epistemology = applyEpistemology(dharma, initTaxonomy(generate(dharma.epistemology)));
	AL.epistemology = dharma.epistemology; return dharma }
function initOntology(dharma) { dharma.beings = { mas: dharma.mas, fem: dharma.fem };
	var ontologies = ["beings", "tmprmnt"]
	ontologies = initTaxonomy(initOntologies(dharma, ontologies));
	AL.ontology = ontologies[0]; dharma.ontology = ontologies; return dharma }
function assignEpistemologiesTo(ont,epi) {}
function initEpistemologies(dharma, epi) { var label; var rt;
	function makeCatalogue(hnd) { 
		if 		(hnd=="vertexPlane") { label = "Vertex Planes";	rt = getOnt(dharma,'beings');  rt = listVertexPlanes(rt) }
		else if (hnd=="circuitScript"){label = "Circuit Script";rt = getOnt(dharma,'tmprmnt'); rt = listCircuits(rt,
				["judging","perceiving","resilient","intuitive","thinking","feeling"]); }
		rt = new Catalogue(epi, label, rt); return rt; }
	var r = makeCatalogue(epi); return r }
function initOntologies(dharma, arr) { var rt=[]; var bf=null; var label;
	function makeCatalogue(hnd) {
		if 		(hnd=="beings") { label = "Beings";		 bf = listBeings(dharma.beings,
				["masculine","feminine","self","other","adult","child","primal being","primal mood"]); }
		else if (hnd=="tmprmnt"){ label = "Temperament"; bf = listTemperaments(dharma.tmprmnt,
				["judging","perceiving","resilient","intuitive","thinking","feeling"]); }
		bf = new Catalogue(arr[i], label, bf); rt.push(bf); }
	for(var i=0; i<arr.length; i++){ makeCatalogue(arr[i]) } return rt }
function Catalogue(handle,label,content){this.handle=handle; this.label=label; this.content=content; }
function getOnt(d,hnd) { for(var i=0; i<d.ontology.length;i++){if(hnd==d.ontology[i].handle){return d.ontology[i]}}}
function getOntology(hnd){ for(var i=0;i<AL.dharma.ontology.length;i++){
	if(hnd==AL.dharma.ontology[i].handle){ return AL.dharma.ontology[i] }}}
function getVertexPlanes(beings) { var rt = []; var bf = null; for(var i=0; i < beings.length; i++) {
		bf={G:beings[i].vertexPlane.uR.good, B:beings[i].vertexPlane.uR.bad}; rt.push(bf) }	return rt }
function listVertexPlanes(b,types) { var rt = { items: null, categories: [] }; var buf;
	rt.items = getVertexPlanes(b); return rt }
function listCircuits(t,types) { var rt = { items: null, categories: [] }; var buf;
	rt.items = [ {sign:"α"},{sign:"β"},{sign:"γ"},{sign:"δ"},{sign:"ε"},{sign:"ζ"},{sign:"η"},{sign:"θ"},{sign:"ι"},{sign:"κ"},{sign:"λ"},{sign:"μ"} ];	return rt }
function listBeings(b,types) { var rt = { items: null, categories: [] }; var buf;
	rt.items = [
		b.mas.selves.adult,
		b.mas.selves.adult.moods.hostile, b.mas.selves.adult.moods.enemy, b.mas.selves.adult.moods.runaway,	b.mas.selves.adult.moods.peaceful, b.mas.selves.adult.moods.playful, b.mas.selves.adult.moods.escorting,
		b.fem.selves.adult,
		b.fem.selves.adult.moods.hostile, b.fem.selves.adult.moods.enemy, b.fem.selves.adult.moods.runaway,	b.fem.selves.adult.moods.peaceful, b.fem.selves.adult.moods.playful, b.fem.selves.adult.moods.escorting,
		b.mas.others.adult,
		b.mas.others.adult.moods.hostile, b.mas.others.adult.moods.enemy, b.mas.others.adult.moods.runaway,	b.mas.others.adult.moods.peaceful, b.mas.others.adult.moods.playful, b.mas.others.adult.moods.escorting,
		b.fem.others.adult,
		b.fem.others.adult.moods.hostile, b.fem.others.adult.moods.enemy, b.fem.others.adult.moods.runaway,	b.fem.others.adult.moods.peaceful, b.fem.others.adult.moods.playful, b.fem.others.adult.moods.escorting,
		b.mas.selves.child,
		b.mas.selves.child.moods.hostile, b.mas.selves.child.moods.enemy, b.mas.selves.child.moods.runaway, b.mas.selves.child.moods.peaceful, b.mas.selves.child.moods.playful, b.mas.selves.child.moods.escorting,
		b.fem.selves.child,
		b.fem.selves.child.moods.hostile, b.fem.selves.child.moods.enemy, b.fem.selves.child.moods.runaway, b.fem.selves.child.moods.peaceful, b.fem.selves.child.moods.playful, b.fem.selves.child.moods.escorting,
		b.mas.others.child,
		b.mas.others.child.moods.hostile, b.mas.others.child.moods.enemy, b.mas.others.child.moods.runaway, b.mas.others.child.moods.peaceful, b.mas.others.child.moods.playful, b.mas.others.child.moods.escorting,
		b.fem.others.child,
		b.fem.others.child.moods.hostile, b.fem.others.child.moods.enemy, b.fem.others.child.moods.runaway, b.fem.others.child.moods.peaceful, b.fem.others.child.moods.playful, b.fem.others.child.moods.escorting];
	rt.items = labelBeings(rt.items);
	for(var i=0; i<types.length; i++) {
		if(types[i] == "masculine") { buf = { handle: types[i], items: [
		b.mas.selves.adult,
		b.mas.selves.adult.moods.hostile, b.mas.selves.adult.moods.enemy, b.mas.selves.adult.moods.runaway,	b.mas.selves.adult.moods.peaceful, b.mas.selves.adult.moods.playful, b.mas.selves.adult.moods.escorting,
			b.mas.others.adult,
		b.mas.others.adult.moods.hostile, b.mas.others.adult.moods.enemy, b.mas.others.adult.moods.runaway,	b.mas.others.adult.moods.peaceful, b.mas.others.adult.moods.playful, b.mas.others.adult.moods.escorting,
		b.mas.selves.child,
		b.mas.selves.child.moods.hostile, b.mas.selves.child.moods.enemy, b.mas.selves.child.moods.runaway, b.mas.selves.child.moods.peaceful, b.mas.selves.child.moods.playful, b.mas.selves.child.moods.escorting,
		b.mas.others.child,
		b.mas.others.child.moods.hostile, b.mas.others.child.moods.enemy, b.mas.others.child.moods.runaway, b.mas.others.child.moods.peaceful, b.mas.others.child.moods.playful, b.mas.others.child.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "feminine") { buf = { handle: types[i], items: [
		b.fem.selves.adult,
		b.fem.selves.adult.moods.hostile, b.fem.selves.adult.moods.enemy, b.fem.selves.adult.moods.runaway,	b.fem.selves.adult.moods.peaceful, b.fem.selves.adult.moods.playful, b.fem.selves.adult.moods.escorting,
		b.fem.others.adult,
		b.fem.others.adult.moods.hostile, b.fem.others.adult.moods.enemy, b.fem.others.adult.moods.runaway,	b.fem.others.adult.moods.peaceful, b.fem.others.adult.moods.playful, b.fem.others.adult.moods.escorting,
		b.fem.selves.child,
		b.fem.selves.child.moods.hostile, b.fem.selves.child.moods.enemy, b.fem.selves.child.moods.runaway, b.fem.selves.child.moods.peaceful, b.fem.selves.child.moods.playful, b.fem.selves.child.moods.escorting,
		b.fem.others.child,
		b.fem.others.child.moods.hostile, b.fem.others.child.moods.enemy, b.fem.others.child.moods.runaway, b.fem.others.child.moods.peaceful, b.fem.others.child.moods.playful, b.fem.others.child.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "self") { buf = { handle: types[i], items: [
		b.mas.selves.adult,
		b.mas.selves.adult.moods.hostile, b.mas.selves.adult.moods.enemy, b.mas.selves.adult.moods.runaway,	b.mas.selves.adult.moods.peaceful, b.mas.selves.adult.moods.playful, b.mas.selves.adult.moods.escorting,
		b.fem.selves.adult,
		b.fem.selves.adult.moods.hostile, b.fem.selves.adult.moods.enemy, b.fem.selves.adult.moods.runaway,	b.fem.selves.adult.moods.peaceful, b.fem.selves.adult.moods.playful, b.fem.selves.adult.moods.escorting,
		b.mas.selves.child,
		b.mas.selves.child.moods.hostile, b.mas.selves.child.moods.enemy, b.mas.selves.child.moods.runaway, b.mas.selves.child.moods.peaceful, b.mas.selves.child.moods.playful, b.mas.selves.child.moods.escorting,
		b.fem.selves.child,
		b.fem.selves.child.moods.hostile, b.fem.selves.child.moods.enemy, b.fem.selves.child.moods.runaway, b.fem.selves.child.moods.peaceful, b.fem.selves.child.moods.playful, b.fem.selves.child.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "other") { buf = { handle: types[i], items: [
		b.mas.others.adult,
		b.mas.others.adult.moods.hostile, b.mas.others.adult.moods.enemy, b.mas.others.adult.moods.runaway,	b.mas.others.adult.moods.peaceful, b.mas.others.adult.moods.playful, b.mas.others.adult.moods.escorting,
		b.fem.others.adult,
		b.fem.others.adult.moods.hostile, b.fem.others.adult.moods.enemy, b.fem.others.adult.moods.runaway,	b.fem.others.adult.moods.peaceful, b.fem.others.adult.moods.playful, b.fem.others.adult.moods.escorting,
		b.mas.others.child,
		b.mas.others.child.moods.hostile, b.mas.others.child.moods.enemy, b.mas.others.child.moods.runaway, b.mas.others.child.moods.peaceful, b.mas.others.child.moods.playful, b.mas.others.child.moods.escorting,
		b.fem.others.child,
		b.fem.others.child.moods.hostile, b.fem.others.child.moods.enemy, b.fem.others.child.moods.runaway, b.fem.others.child.moods.peaceful, b.fem.others.child.moods.playful, b.fem.others.child.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "adult") { buf = { handle: types[i], items: [
		b.mas.selves.adult,
		b.mas.selves.adult.moods.hostile, b.mas.selves.adult.moods.enemy, b.mas.selves.adult.moods.runaway,	b.mas.selves.adult.moods.peaceful, b.mas.selves.adult.moods.playful, b.mas.selves.adult.moods.escorting,
		b.fem.selves.adult,
		b.fem.selves.adult.moods.hostile, b.fem.selves.adult.moods.enemy, b.fem.selves.adult.moods.runaway,	b.fem.selves.adult.moods.peaceful, b.fem.selves.adult.moods.playful, b.fem.selves.adult.moods.escorting,
		b.mas.others.adult,
		b.mas.others.adult.moods.hostile, b.mas.others.adult.moods.enemy, b.mas.others.adult.moods.runaway,	b.mas.others.adult.moods.peaceful, b.mas.others.adult.moods.playful, b.mas.others.adult.moods.escorting,
		b.fem.others.adult,
		b.fem.others.adult.moods.hostile, b.fem.others.adult.moods.enemy, b.fem.others.adult.moods.runaway,	b.fem.others.adult.moods.peaceful, b.fem.others.adult.moods.playful, b.fem.others.adult.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "child") { buf = { handle: types[i], items: [
		b.mas.selves.child,
		b.mas.selves.child.moods.hostile, b.mas.selves.child.moods.enemy, b.mas.selves.child.moods.runaway, b.mas.selves.child.moods.peaceful, b.mas.selves.child.moods.playful, b.mas.selves.child.moods.escorting,
		b.fem.selves.child,
		b.fem.selves.child.moods.hostile, b.fem.selves.child.moods.enemy, b.fem.selves.child.moods.runaway, b.fem.selves.child.moods.peaceful, b.fem.selves.child.moods.playful, b.fem.selves.child.moods.escorting,
		b.mas.others.child,
		b.mas.others.child.moods.hostile, b.mas.others.child.moods.enemy, b.mas.others.child.moods.runaway, b.mas.others.child.moods.peaceful, b.mas.others.child.moods.playful, b.mas.others.child.moods.escorting,
		b.fem.others.child,
		b.fem.others.child.moods.hostile, b.fem.others.child.moods.enemy, b.fem.others.child.moods.runaway, b.fem.others.child.moods.peaceful, b.fem.others.child.moods.playful, b.fem.others.child.moods.escorting] };
		rt.categories.push(buf); }
		else if(types[i] == "primal being") { buf = { handle: types[i], items: [
		b.mas.selves.adult,	b.fem.selves.adult,	b.mas.others.adult,	b.fem.others.adult,		
		b.mas.selves.child,	b.fem.selves.child,	b.mas.others.child,	b.fem.others.child] };
		rt.categories.push(buf); }
		else if(types[i] == "primal mood") { buf = { handle: types[i], items: [
		b.mas.selves.adult.moods.hostile, b.mas.selves.adult.moods.enemy, b.mas.selves.adult.moods.runaway,	b.mas.selves.adult.moods.peaceful, b.mas.selves.adult.moods.playful, b.mas.selves.adult.moods.escorting,
		b.fem.selves.adult.moods.hostile, b.fem.selves.adult.moods.enemy, b.fem.selves.adult.moods.runaway,	b.fem.selves.adult.moods.peaceful, b.fem.selves.adult.moods.playful, b.fem.selves.adult.moods.escorting,
		b.mas.others.adult.moods.hostile, b.mas.others.adult.moods.enemy, b.mas.others.adult.moods.runaway,	b.mas.others.adult.moods.peaceful, b.mas.others.adult.moods.playful, b.mas.others.adult.moods.escorting,
		b.fem.others.adult.moods.hostile, b.fem.others.adult.moods.enemy, b.fem.others.adult.moods.runaway,	b.fem.others.adult.moods.peaceful, b.fem.others.adult.moods.playful, b.fem.others.adult.moods.escorting,
		b.mas.selves.child.moods.hostile, b.mas.selves.child.moods.enemy, b.mas.selves.child.moods.runaway, b.mas.selves.child.moods.peaceful, b.mas.selves.child.moods.playful, b.mas.selves.child.moods.escorting,
		b.fem.selves.child.moods.hostile, b.fem.selves.child.moods.enemy, b.fem.selves.child.moods.runaway, b.fem.selves.child.moods.peaceful, b.fem.selves.child.moods.playful, b.fem.selves.child.moods.escorting,
		b.mas.others.child.moods.hostile, b.mas.others.child.moods.enemy, b.mas.others.child.moods.runaway, b.mas.others.child.moods.peaceful, b.mas.others.child.moods.playful, b.mas.others.child.moods.escorting,
		b.fem.others.child.moods.hostile, b.fem.others.child.moods.enemy, b.fem.others.child.moods.runaway, b.fem.others.child.moods.peaceful, b.fem.others.child.moods.playful, b.fem.others.child.moods.escorting] };
		rt.categories.push(buf); }}
	return rt}
function listTemperaments(t,types) { var rt = { handle: "", items: null, categories: [] }; var buf;
	rt.items = [ { label: "FIN"},{ label: "FIR"},{ label: "FEN"},{ label: "FER"},{ label: "NIF"},{ label: "NIT"},{ label: "NEF"},{ label: "NET"},{ label: "RIF"},{ label: "RIT"},{ label: "REF"},{ label: "RET"},{ label: "TIN"},{ label: "TIR"},{ label: "TEN"},{ label: "TER"} ];	return rt }


function remFromArr(arr,obj) { var index = arr.indexOf(obj); if (index > -1) { array.splice(index, 1) }}
function dharmaHypothesis(str)  { var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	dharma.hypot ? remFromArr(dharma.hypotIn,tab) : dharma.hypotIn.push(tab);	dharma.hypot = !dharma.hypot }
function dharmaLemma(str) 		{ var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	dharma.lemma ? remFromArr(dharma.lemmaIn,tab) : dharma.lemmaIn.push(tab);	dharma.lemma = !dharma.lemma }
function hideDharma(str) 		{ var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	if(!dharma.hiddenDharma){ dharma.hiddenDharma = true; dharma.hiddenDharmaIn.push(tab) }}
function showDharma(str) 		{ var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	if(dharma.hiddenDharma) { dharma.hiddenDharma = false; remFromArr(dharma.hiddenDharmaIn,tab) }}
function proveDharma(str) 		{ var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	if(!dharma.hiddenDharma){ dharma.conjecture = true; dharma.conjectureIn.push(tab) }}
function disproveDharma(str) 	{ var tab = AL.dharmaProfile; var dI = parseInt(str.split("_").pop());
	var dharma = AL.ontology.content.items[dI];
	if(dharma.hiddenDharma) { dharma.conjecture = false; remFromArr(dharma.conjectureIn,tab) }}
function setDharmaLogy(str) { AL.dharmaLogy = str }
function DharmaProfile(label,sel) { var index=AL.dharmaProfileIndex;  this.index=index; this.selection=sel;
	if(typeof label=="undefined") { var label=""; label+=index; } this.label=label;
	this.hidden = false; AL.dharmaProfiles.push(this); AL.dharmaProfileIndex++; }
function selectDharmas(hnd,sub,sel) { var rt={ont: null, sub:null, sel:null}; rt.ont = getOntology(hnd);
	if(typeof sub != "undefined") { rt.sub = sub } if(typeof sel != "undefined") { rt.sel = sel } return rt }
function initDharmaProfiles() {
	var bng = selectDharmas("beings",[7]);
	var tpr = selectDharmas("tmprmnt",[]);
	var v = new DharmaProfile("Beings",bng);
	AL.dharmaProfile = v;
	var v = new DharmaProfile("Temperaments",tpr); }
function populateDharmaProfiles() {
	var d = document.getElementById('dharmaHeaderTabs');
	for(var i=0; i < AL.dharmaProfiles.length; i++) { createDharmaHeaderTab(d,i,AL.dharmaProfiles[i]) } return d }
function createDharmaHeaderTab(div,n,profile) {
	var profile = getDharmaProfile(n);	var e=document.createElement('div');
	if(profile==AL.dharmaProfile) 	{ e.setAttribute('class','dharmaProfileCurrent'); }
	else 							{ e.setAttribute('class','dharmaProfile')}
	var id = 'dharmaProfile_'+n;		e.setAttribute('id',id);
	e.innerHTML = profile.label;		div.appendChild(e) }
function getDharmaProfile(str) { var n = parseInt(str); return AL.dharmaProfiles[n] }

function createDharmaProfile() { /*var profile = selectDharmas(AL.ontology.handle);	profile = new DharmaProfile(AL.dharmaProfileIndex, profile); var header = document.getElementById('dharmaHeaderTabs'); createDharmaHeaderTab(header,AL.dharmaProfileIndex,profile);	document.getElementById("nameDharmaProfile").focus(); */}
function removeDharmaProfile(n) { AL.currentDharmaProfile.hidden = true; } //kesken
function labelBeings(arr) {	function labelBeing(b) { var l=""; if(b.other) { l += "Other " } if (b.adult &&  b.male) { l += "Man " }	else if (b.adult && !b.male) { l += "Woman "} else if (!b.adult && b.male) { l += "Boy " } else if(!b.adult && !b.male) { l += "Girl "}	l+=b.sign; return l; } for(var i=0; i < arr.length; i++) { labelBeing(arr[i]) } return arr }

// ENTITIES
function initExistence() { initDharmaProfiles() }
/*     XX YY     YY
 XX   XX   YY   YY
  XX XX     YY YY
   XXX       YYY
  XX XX       YY
 XX   XX      YY
XX     XX    */
function dharmaToMosaic(b,R){ var vp=b.vertexPlane;
	function display(v,r) {if(typeof r=="undefined"){ sketchMosaic(v,"uL",R,(R*2)+1) }
						else if(r==1) {sketchMosaic(v,"uL",1,(R*2)+1)}
						else if(r==3) {sketchMosaic(v,"uL",(R*2)+1,(R*2)+1); }}
	function punctuate(n) {sketchMosaic(mp.uL,"uL",n,n); }
	var mp={uL:null,u:null,uR:null,l:null,o:null,r:null,dL:null,d:null,dR:null,plane:null};
	mp.uL=colorQuadrant(vp.uL,R,b,"uL");	mp.u=colorAxis(vp.u,R);		mp.uR=colorQuadrant(vp.uR,R,b,"uR");
	mp.l =colorAxis(vp.l,R); 				mp.o=vp.origin;				mp.r =colorAxis(vp.r,R);
	mp.dL=colorQuadrant(vp.dL,R,b,"dL");	mp.d=colorAxis(vp.d,R);		mp.dR=colorQuadrant(vp.dR,R,b,"dR");
	var top		= interleaveQuadrants( R, mp.uL, mp.u, mp.uR );	var bottom  = interleaveQuadrants( R, mp.dL, mp.d, mp.dR );
	var middle  = mp.l.concat(mp.o).concat(mp.r);				var plane = colorDomain(R, top, bottom, middle);
	mp.plane=plane; return mp }
function initMosaic(d) { var R = AL.resolution; d.mosaic = new Mosaic(
		d.mas.selves.adult, d.mas.others.adult,	d.fem.selves.adult, d.fem.others.adult, AL.resolution);	return d; }
function Mosaic(uL,uR,dL,dR,R){ if(typeof R=="undefined"){R=AL.resolution} var sign=[[uL.sign,uR.sign],[dL.sign,dR.sign]];
	uL.mosaic = dharmaToMosaic(uL,R);	uR.mosaic = dharmaToMosaic(uR,R);
	dL.mosaic = dharmaToMosaic(dL,R);	dR.mosaic = dharmaToMosaic(dR,R);
	var p = createMosaic(uL.mosaic.plane, uR.mosaic.plane, dL.mosaic.plane, dR.mosaic.plane, R);
	this.plane=p; this.uL=uL;this.uR=uR;this.dL=dL;this.dR=dR; this.sign=sign; }
function createMosaic(uL,uR,dL,dR,R) { function display() { sketchMosaic(ret,"uL",2*((2*R)+1)) }
	var U = interleaveDomains(R,uL,uR); var D = interleaveDomains(R,dL,dR);	var ret = U.concat(D); return ret }
function interleaveDomains(R,lM,rM) { var r = (2*R)+1; var X = 2*r; var Y = r; var m = makeNullMatrix(X,Y);
	function display() { sketchMosaic(m,"uL",r,X) }
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<r) { m[y][x] = lM[y][x] }
													 else 	 { m[y][x] = rM[y][x-r] }}} return m }
function paintQuadrant(R,off,g,b) {	function display() { sketchMosaic(q,"uL",R); }
	function combine(x,y) { 
		if(g[y][x]==null) {	if(off) { if(y<R) { q[y][x]=b[y-1][x] }} else { q[y][x]=b[y][x] }} else { q[y][x]=g[y][x] }}
	var q = makeNullMatrix(R,R); for(var y = 0; y < R; y++) { for(var x = 0; x < R; x++) { combine(x,y) }}  return q }
function offsetRight(matrix,n){	for(var i = 0; i < n; i++) { for(var j = n-1; j >= 0; j--) {
			matrix[i][j] = matrix[i][j-1]; } if(j==1) { matrix[i][j-1] = null; }}}
function rotate(matrix,n) {	var r=Math.ceil(n/2); if(n%2==1) { r--; }
    for (var i = 0; i < n/2; i++) { for (var j = 0; j < r; j++) {
            var temp = matrix[i][j]; matrix[i][j] = matrix[n-1-j][i]; matrix[n-1-j][i] = matrix[n-1-i][n-1-j];
            matrix[n-1-i][n-1-j] = matrix[j][n-1-i]; matrix[j][n-1-i] = temp; }} return matrix }
function flipDiagonal(matrix,n) { for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) {
        	if(j < i) {	var temp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = temp; }}} return matrix }
function stroke(c) { var ret={r:c.r, g:c.g, b:c.b, h:c.h }; return ret; }
function paintTriplane(t,m,g,R) {	var X; var Y; var bRes=R; var src=null; var dst=null; var b=null; var yi=Infinity;
	function draw(x,y) { if(x<=y) {	if 		(x==y) 		  	 { m[y][x] = stroke(t.d[y]) }
									else if (x==0&&y<R-1)	 { m[y][x] = stroke(t.v[y]) }
									else if (y==R-1) 	 	 { m[y][x] = stroke(t.h[x]) }	
									else { if(y>yi||b==null) { src=stroke(t.v[y]);dst=stroke(t.d[y]);//if(bRes%2==1){bRes--}
										b=blendColors(bRes, src, dst); yi=y; } m[y][x] = stroke(b[x]) }}}
								for(var y=0; y<R; y++) { b=null; yi=Infinity;
									for(var x=0; x<R; x++) { draw(x,y); }} return m }
function colorTriplane(t,R) { var ax=stroke(t.axial); var prox=stroke(t.proximal); var diag=stroke(t.diagonal); 
	var v=blendColors(R+1,prox,ax);	var d=blendColors(R+1,prox,diag); var h=blendColors(R+3,ax,diag); return{ h:h,v:v,d:d }}
function makeNullArray(R) { var r=[]; for(var i=0; i<=R; i++) { r.push(null); } return r; }
function makeNullMatrix(X,Y){var r=[];var b;for(var y=0;y<Y;y++){b=[];for(var x=0;x<X;x++){b.push(null)}r.push(b)}return r}
function colorQuadrant(q,R,b,code) { var offsetDown=false; // dont need b here???
	function situateHor(tp,s,res) {
							if(code=="uL"||code=="dL") { offsetRight(tp,res) }
							if(code=="dL"||code=="dR") { offsetDown=true }}
	function orient(tp,s,g,res) { 
							if(code=="uL" && !g) { rotate(rotate(tp,res),res) }
							if(code=="uL" &&  g) { flipDiagonal(rotate(rotate(tp,res),res),res) }
							if(code=="uR" &&  g) { flipDiagonal(rotate(flipDiagonal(tp,res),res),res) }
							if(code=="uR" && !g) { rotate(rotate(rotate(flipDiagonal(tp,res),res),res),res) }
							if(code=="dL" &&  g) { flipDiagonal(rotate(tp,res),res) }
							if(code=="dL" && !g) { rotate(rotate(rotate(tp,res),res),res) }
							if(code=="dL") 		 { flipDiagonal(tp,res) }
							if(code=="dR" &&  g) { flipDiagonal(tp,res) }}
	function apply(triplane,matrix,colors,res){ var r=paintTriplane(colors, matrix, triplane.good, res); return r }
	function display() { sketchMosaic(goodTriplane,"uL",R); sketchMosaic(badTriplane,"uR",R); }
	var badMatrix = makeNullMatrix(R,R);					 var goodMatrix = makeNullMatrix(R,R);
	var badColors = colorTriplane(q.bad, R-1); 				 var goodColors = colorTriplane(q.good, R);
	var badTriplane=apply(q.bad, badMatrix, badColors, R-1); var goodTriplane=apply(q.good, goodMatrix, goodColors, R);
	orient(badTriplane, q.sign.vis, false, R-1);			 orient(goodTriplane, q.sign.vis, true, R);
	situateHor(badTriplane,q.sign.vis, R); var r = paintQuadrant(R, offsetDown, goodTriplane, badTriplane);	 return r }
function colorAxis(a,R) { var ret=[]; if(typeof R=="undefined") { R=AL.resolution }
	if(a.sign.syn=="u"||a.sign.syn=="d") { R++ }
	var colors=blendColors(R,a.crucial,a.peripheral); //colors = colors.slice(1,R);
	if(a.sign.syn=="l"||a.sign.syn=="u"){ colors.reverse()}return colors}
function interleaveQuadrants(R,l,v,r) { var X = (2*R)+1; var Y = R; var m = makeNullMatrix(X,Y);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<R)  { m[y][x] = l[y][x] }
												else if(x==R) { m[y][x] = v[y] }
												else 		  { m[y][x] = m[y][x] = r[y][x-R-1] }}} return m }
function colorDomain(R,top,btm,mid) { var r=(R*2)+1; var m=makeNullMatrix(r,r);
	for(var y=0; y<r; y++){ for(var x=0; x<r; x++) { if(y<R)  { m[y][x] = top[y][x] }
												else if(y==R) { m[y][x] = mid[x] }
												else 		  { m[y][x] = btm[y-R-1][x] }}} return m }
function componentToH(n) { var hex = n.toString(16); return hex.length == 1 ? "0" + hex : hex; }
function rgbToH(r,g,b) { if(r != null) { return "#"+componentToH(r)+componentToH(g)+componentToH(b); } else { return "" }}
function hToRgb(hex) { var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex); return result ? {
	r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16), h: hex } : null; }	
function blendColors(n,from,to) { var rt = [];
	var r = chunkify(n, from.r, to.r); var g = chunkify(n, from.g, to.g); var b = chunkify(n, from.b, to.b);
	for(var i = 0; i < n; i++) { h = rgbToH(r[i],g[i],b[i]); rt.push({r:r[i],g:g[i],b:b[i],h:h}); } return rt }
function chunkify(n,from,to) { var ret = []; var size = Math.floor((to-from) / (n-1)); if(n % 2 == 0) {
	for(var i = 0; i < n; i++) { ret.push(from + (i * size)); } return ret } else { ret = [from];
	for(var i = 1; i < (n-1); i++) { ret.push(from + (i * size)); }} ret.push(to); return ret }
function initVectorColors() {
	function f(n,G,U,R) { var re = { n:n, G:G, U:U, R:R, r:0, g:0, b:0, h:"" };
		function f2 (c,G,U,R) { G ? U ? R ? c.h="#ff7700" : c.h="#fffe00" : R ? c.h="#ff0000" : c.h="#ff00bf" :
									U ? R ? c.h="#0043ff" : c.h="#8900fe" : R ? c.h="#00ffff" : c.h="#2eff62" ; return c }
		function f1 (c,G,U,R) { G ? U ? R ? c.h="#462300" : c.h="#424100" : R ? c.h="#44323E" : c.h="#543e4d" :
									U ? R ? c.h="#00257F" : c.h="#48007E" : R ? c.h="#1C8080" : c.h="#1C8035" ; return c }
		function f0 (c,G,U,R) { G ? U ? R ? c.h="#FFDDBC" : c.h="#FFFEBC" : R ? c.h="#FFBBBD" : c.h="#FFBEFF" :
									U ? R ? c.h="#B9CDFF" : c.h="#C87CFF" : R ? c.h="#BAFFFF" : c.h="#BAFFCC" ; return c }
		n==0 ? re = f0(re,G,U,R) : n==1 ? re = f1(re,G,U,R) : re = f2(re,G,U,R);
		var rgb=hToRgb(re.h); re.r=rgb.r; re.g=rgb.g; re.b=rgb.b; return re; } var ret=
	{low:{	bUL:f(0,false,true,false),bUR:f(0,false,true,true),bDL:f(0,false,false,false),bDR:f(0,false,false,true),
			gUL:f(0,true,true,false), gUR:f(0,true,true,true), gDL:f(0,true,false,false), gDR:f(0,true,false,true)},
	far: {	bUL:f(1,false,true,false),bUR:f(1,false,true,true),bDL:f(1,false,false,false),bDR:f(1,false,false,true),
			gUL:f(1,true,true,false), gUR:f(1,true,true,true), gDL:f(1,true,false,false), gDR:f(1,true,false,true)},
	high:{	bUL:f(2,false,true,false),bUR:f(2,false,true,true),bDL:f(2,false,false,false),bDR:f(2,false,false,true),
			gUL:f(2,true,true,false), gUR:f(2,true,true,true), gDL:f(2,true,false,false),gDR:f(2,true,false,true)}};
	return ret }

	  /*¨¨¨¨\ 		  CC   CCC   CCCCC   PPPPP	
	 /.\   /.\ 		 CC   CC CC  CC  CC  PP 	
	/.  \ /  .\ 	CC   CC   CC CCCCC   PPPPP 	
	\.  / \  ./ 	CC   CC   CC CC  CC  PP 	
	 \./   \./ 		 CC   CC CC  CC  CC  PPPPP 	
	  \_____/ 		  CC   CCC   CC  CC  PPPP*/ 

function initSelves(c) {
	var M = initMasculinity(c);
	var m = manToBoy(M.vertexPlane);
	var f = manToGirl(M.vertexPlane);
	var F = manToWoman(M.vertexPlane);
	return { M:M, m:m, F:F, f:f }}
function createOther(being) { var vertexPlane = swapRatAbs(being.vertexPlane, being.male, being.other);
	var ret = new Being(being.adult, being.male, vertexPlane, true, being.sign+"'");
	ret.moods=initMoods(ret.adult, ret.male, ret.vertexPlane, true, ret.sign); return ret }
function initOthers(selves) { var others={
		M:createOther(selves.M),
		m:createOther(selves.m),
		f:createOther(selves.f),
		F:createOther(selves.F)};
	return { mas: { selves: { adult: selves.M, child: selves.m }, others: { adult:others.M, child:others.m }},
			 fem: { selves: { adult: selves.F, child: selves.f }, others: { adult:others.F, child:others.f}}}}
function createMoods(plane) { var src=copyVertexPlane(plane); var ret = {
	peaceful:src, enemy:src, playful:src, hostile:src, escorting:src, runaway:src }; return ret }
function initMoods(adult,G,plane,O,sign) { var ret=createMoods(plane);
	ret.peaceful =									ret.peaceful = new Being( adult, G, ret.peaceful, O, sign+"-pace");
	ret.escorting= synFlip(ret.escorting,1,0,G,O);	ret.escorting= new Being( adult, G, ret.escorting,O, sign+"-escr");
	ret.playful  = synFlip(ret.playful,  2,0,G,O);	ret.playful  = new Being( adult, G, ret.playful,  O, sign+"-play");
	ret.hostile  = synFlip(ret.hostile,  0,2,G,O); 	ret.hostile  = new Being( adult, G, ret.hostile,  O, sign+"-hstl");
	ret.runaway  = synFlip(ret.runaway,  1,2,G,O);	ret.runaway  = new Being( adult, G, ret.runaway,  O, sign+"-runa");
	ret.enemy    = synFlip(ret.enemy,	 2,2,G,O);  ret.enemy 	 = new Being( adult, G, ret.enemy, 	  O, sign+"-enmy");
	return ret }
function initPrimalMoods(beings) {
	beings.M.moods = initMoods(beings.M.adult, beings.M.male, beings.M.vertexPlane, false, beings.M.sign);
	beings.m.moods = initMoods(beings.m.adult, beings.m.male, beings.m.vertexPlane, false, beings.m.sign);
	beings.f.moods = initMoods(beings.f.adult, beings.f.male, beings.f.vertexPlane, false, beings.f.sign);
	beings.F.moods = initMoods(beings.F.adult, beings.F.male, beings.F.vertexPlane, false, beings.F.sign); return beings }
function manToWoman(plane){var r=swapSubLog(flipLowHigh(plane,true),true);r=new Being(true,false, r,false,"F");return r}
function manToGirl(plane) {var r=swapSubLog(flipLowFar(plane,true),true); r=new Being(false,false,r,false,"f");return r}
function manToBoy(plane)  {var r=flipLowFar(plane,false);			 	  r=new Being(false,true, r,false,"m");return r}
function BiblAde(crucial,peripheral,amplifying,sign) { this.crucial=crucial; this.peripheral=peripheral; this.sign=sign;
	if(amplifying) { this.little=crucial; this.much=peripheral; } else { this.little=peripheral; this.much=crucial; }}
function createAxis(crucial,peripheral,amplifying,semSign,synSign){ var sign={sem:semSign, syn:synSign};
	var ret = {crucial:hToRgb(crucial), peripheral:hToRgb(peripheral)};
	var ret = new BiblAde(ret.crucial, ret.peripheral, amplifying, sign); return ret }
function initMasculinity(c) {
	var bUL=new Triplane(c.low.bUL,c.far.bUL,c.high.bUL,false); var gUL=new Triplane(c.low.gUL,c.far.gUL,c.high.gUL,true);
	var bUR=new Triplane(c.low.bUR,c.far.bUR,c.high.bUR,false); var gUR=new Triplane(c.low.gUR,c.far.gUR,c.high.gUR,true);
	var bDL=new Triplane(c.low.bDL,c.far.bDL,c.high.bDL,false); var gDL=new Triplane(c.low.gDL,c.far.gDL,c.high.gDL,true);
	var bDR=new Triplane(c.low.bDR,c.far.bDR,c.high.bDR,false); var gDR=new Triplane(c.low.gDR,c.far.gDR,c.high.gDR,true);
	var uL=new Quadrant(bUL,gUL,false,true ); var uR=new Quadrant(bUR,gUR,true,true );
	var dL=new Quadrant(bDL,gDL,false,false); var dR=new Quadrant(bDR,gDR,true,false);
	var r={uL:uL,uR:uR,dL:dL,dR:dR,u:null,r:null,d:null,l:null,g:[],b:[]}; r=new Being(true,true,r,false,"M"); return r }
function copyVertexPlane(p){var ret={ g:p.g,b:p.b,uL:p.uL,uR:p.uR,dL:p.dL,dR:p.dR,
										u:p.u,r:p.r,d:p.d,l:p.l,origin:p.origin }; return ret;} // next 3 only for M self
function flipLowFar(plane,good) {var ret=null; good ? ret=synFlip(plane,0,1,true,false):ret=synFlip(plane,1,0);return ret }
function flipFarHigh(plane,good){var ret=null; good ? ret=synFlip(plane,0,2,true,false):ret=synFlip(plane,2,0);return ret }
function flipLowHigh(plane,good){var ret=null; good ? ret=synFlip(plane,0,3,true,false):ret=synFlip(plane,3,0);return ret }
function synFlip(plane,bad,good,G,O) { var ret = copyVertexPlane(plane); syntacticFlip(ret, bad, good, G, O); return ret; }
function syntacticFlip(plane,bad,good,G,O) { if(bad!=0){plane.b.push(bad)} if(good!=0){plane.g.push(good)}
	function f(q) { var r = { bad: q.bad, good: q.good }; switch(good) { //sievennä?
		case 1: r.good= new TripLane(r.good.axial, 	  r.good.proximal,r.good.diagonal,true);break;
		case 2: r.good= new TripLane(r.good.proximal, r.good.diagonal,r.good.axial,   true);break;
		case 3: r.good= new TripLane(r.good.diagonal, r.good.axial,   r.good.proximal,true);break} switch(bad) {
		case 1: r.bad = new TripLane(r.bad.axial, 	  r.bad.proximal, r.bad.diagonal,false);break;
		case 2: r.bad = new TripLane(r.bad.proximal,  r.bad.diagonal, r.bad.axial, 	 false);break;
		case 3: r.bad = new TripLane(r.bad.diagonal,  r.bad.axial, 	  r.bad.proximal,false);break}
		r = new QuadrAnt(r.bad, r.good, q.sign); return r }
	plane.uL=f(plane.uL); plane.uR=f(plane.uR); plane.dL=f(plane.dL); plane.dR=f(plane.dR); }
function TripLane(proximal,axial,diagonal,good) { var low; var far; var high;
	typeof proximal == "undefined" ? this.proximal="...." : this.proximal=proximal;
	typeof axial 	== "undefined" ? this.axial="...." 	  : this.axial=axial;
	typeof diagonal == "undefined" ? this.diagonal="...." : this.diagonal=diagonal; if(good){
		this.low=proximal;this.far=axial;this.high=diagonal; } else { this.low=proximal;this.far=diagonal;this.high=axial; }this.good=good; var sign = proximal.sign+axial.sign+diagonal.sign; this.sign=sign; }
function Triplane(low,far,high,good) { low.sign="α"; far.sign="β"; high.sign="γ"; var proximal; var axial; var diagonal;
	typeof low == "undefined" ? this.low="...." : this.low=low;  // Triplane object hardcoded for M
	typeof far == "undefined" ? this.far="...." : this.far=far;
	typeof high== "undefined" ? this.high="....": this.high=high;
	if(good){ proximal=low; axial=far; diagonal=high; } else { proximal=low; axial=high; diagonal=far; }
	this.proximal=proximal;this.axial=axial;this.diagonal=diagonal; this.good=good; this.sign=low.sign+far.sign+high.sign; }
function Being(adult,male,plane,other,sign){ plane=scaleAxes(adult,male,plane);
	this.adult=adult; this.male=male; this.other=other; this.sign=sign;	this.vertexPlane=plane;
	male ? this.vertexPlane.origin=hToRgb("#000000") : this.vertexPlane.origin=hToRgb("#ffffff"); }
function cloneSign(s) { var r = { sem:s.sem, syn:{ X:s.syn.X, Y:s.syn.Y }, vis: { X:s.vis.X, Y:s.vis.Y }}; return r; }
function QuadrAnt(b,g,sign){ this.bad=b; this.good=g; this.sign=sign; }
function Quadrant(b,g,X,Y,G,O){ this.bad=b; this.good=g; var sem = null;
	if(typeof G=="undefined") { sem = signQuadrantSemantics(X,Y) } else { sem = signQuadrantSemantics(X,Y,G,O) }
	var sign = { sem:sem, syn:{ X:X, Y:Y }, vis:{ X:X, Y:Y }}; this.sign=sign; }
function swapSubLog(p,G,O) { var r=copyVertexPlane(p); var g = !G;
	r.uR = p.dL; var uR = signQuadrant(r.uR.sign.syn, r.uR.sign.sem, true, true, g, O); r.uR.sign = uR;
	r.dL = p.uR; var dL = signQuadrant(r.dL.sign.syn, r.dL.sign.sem, false,false,g, O); r.dL.sign = dL; return r }
function swapRatAbs(p,G,O) { var r=copyVertexPlane(p); var o = !O;
	r.uL = p.dR; var uL = signQuadrant(r.uL.sign.syn, r.uL.sign.sem, false,true, G, o); r.uL.sign = uL;
	r.uR = p.dL; var uR = signQuadrant(r.uR.sign.syn, r.uR.sign.sem, true, true, G, o); r.uR.sign = uR;
	r.dL = p.uR; var dL = signQuadrant(r.dL.sign.syn, r.dL.sign.sem, false,false,G, o); r.dL.sign = dL;
	r.dR = p.uL; var dR = signQuadrant(r.dR.sign.syn, r.dR.sign.sem, true, false,G, o); r.dR.sign = dR; return r }
function scaleAxes(adult,male,p,other) {
	var l = signAxisSemantics(p.uL.sign.sem, p.dL.sign.sem); var r = signAxisSemantics(p.uR.sign.sem, p.dR.sign.sem);
	var u = signAxisSemantics(p.uL.sign.sem, p.uR.sign.sem); var d = signAxisSemantics(p.dR.sign.sem, p.dL.sign.sem);
	var crucU = blendColors(3,p.uL.bad.proximal, p.uR.bad.proximal)[1];
	var periU = blendColors(3,p.uL.bad.axial,    p.uR.bad.axial)[1];
	var crucD = blendColors(3,p.dL.bad.proximal, p.dR.bad.proximal)[1];
	var periD = blendColors(3,p.dL.bad.axial,    p.dR.bad.axial)[1];
	if(male) {		p.l=createAxis("#222222","#888888", true, l, "l"); p.r=createAxis("#222222","#888888", true, r, "r");
					p.u=createAxis(crucU.h,  periU.h,   true, u, "u"); p.d=createAxis(crucD.h,  periD.h,   true, d, "d")}
	else if(!adult){p.l=createAxis("#dddddd","#aaaaaa", true, l, "l"); p.r=createAxis("#dddddd","#aaaaaa", true, r, "r");
					p.u=createAxis(crucU.h,  periU.h,   true, u, "u"); p.d=createAxis(crucD.h,  periD.h,   true, d, "d")}
	else {			p.l=createAxis("#dddddd","#aaaaaa",false, l, "l"); p.r=createAxis("#dddddd","#aaaaaa",false, r, "r");
					p.u=createAxis(crucU.h,  periU.h,   true, u, "u"); p.d=createAxis(crucD.h,periD.h,true,d,"d")}return p}
function signAxisSemantics(q1,q2){ var r=""; var L=false; var C=false; var O=false; var S=false;
	if( q1=="L" || q2=="L" ) { L=true } if( q1=="C" || q2=="C" ) { C=true }
	if( q1=="O" || q2=="O" ) { O=true } if( q1=="S" || q2=="S" ) { S=true }
	if( L&&C ) { r="N" } else if( L&&O ) { r="T" } else if( O&&S ) { r="R" } else if( S&&C ) { r="F" } return r }
function signQuadrant(syn,sem,visX,visY,G,O) {
	var r = { syn:{ X:syn.X, Y:syn.Y }, vis:{ X:visX, Y:visY }, sem: sem }; return r }
function signQuadrantSemantics(X,Y,G,O){ var r=""; if((typeof G=="undefined")||
			(G && !O)) { if(X && Y){r="L"}else if(X && !Y){r="O"}else if(!X && Y){r="C"}else if(!X && !Y){r="S"}}
	else if(!G && !O)  { if(X && Y){r="S"}else if(X && !Y){r="O"}else if(!X && Y){r="C"}else if(!X && !Y){r="L"}}
	else if(!G &&  O)  { if(X && Y){r="L"}else if(X && !Y){r="C"}else if(!X && Y){r="O"}else if(!X && !Y){r="S"}}
	else if (G &&  O)  { if(X && Y){r="S"}else if(X && !Y){r="C"}else if(!X && Y){r="O"}else if(!X && !Y){r="L"}}return r }
/*
                                                                                         
                      XX                                                      2222          XX
                X       XX                                                  222  222          XX
XX              X        XX    XXXXXXXX    EEEE  EE   EE  EEEEe EE EE   EE 222    222     XX   XX
XXXXXXXXXX   XXXXXXX     XX                EE    EEE  EE EE     EE EEE  EE 2222222222     XXOHIXMÄN!
XX              X        XX    XXXXXXXX    EEEE  EE E EE EE EEE EE EE E EE 222            XX   XX
                X      333                 EE    EE  EEE EE  EE EE EE  EEE  222  222 	     βββ
                       X                   EEEE  EE   EE  EEEE  EE EE   EE    2222           X
                       X                                                                     X
*/
function parseTriplaneSign(g, s) {
	var rt=parseArithmetic(interpretTriplaneSign(g,s));
	return rt;
		}
function parseArithmetic(s) { }
function interpretTriplaneSign(g, s) { var Q = ""; var R = "";
		 if( g && s=="αβγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="αγβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="βαγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="αγβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="βαγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="βγα" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="γαβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if( g && s=="γβα" ) { Q = "X+Y"; R = "X-Y";  console.log("über")}
	else if(!g && s=="αβγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="αγβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="βαγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="αγβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="βαγ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="βγα" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="γαβ" ) { Q = "X+Y"; R = "X-Y"; }
	else if(!g && s=="γβα" ) { Q = "X+Y"; R = "X-Y"; }
	console.log(s);
	return { Q:Q, R:R }}
function quantifyAs(bng) {
	var g = parseTriplaneSign(true, bng.vertexPlane.uR.good.sign);
	//var b = parseTriplaneSign(false,bng.vertexPlane.uR.bad.sign );
	console.log(g);
	//console.log(b);
}
function initQuantification(dharmas) { var q = quantifyAs(beings.fem.others.adult);
	return beings; } //sociotypes also quantify
function initMetaphysics() {
	AL.dharma   = initEpistemology(initOntology(initMosaic(initOthers(initPrimalMoods(initSelves(initVectorColors()))))));
	//initSpace(mosaic,AL.resolution,dharmas); 
}

// PROCESS
//function parseTriplaneSign(t,g) { }
function quantTile(X,Y,R,d,q,t) { var x = Math.abs(Y); var y = Math.abs(Y); 
	return t.sign; }

function quantifyLocationValue(l) { var ret;
	var x = Math.abs(l.X);
	var y = Math.abs(l.Y);
	if(x >= y) { ret = y;
		if(!l.sex) { ret = 5 - x; }}
	else { ret = x - y; }	
	return ret; }

// ENGINE
/*while (condition)
  statement*/
function moveToTile(id) { }
function startTime(time) { if(AL.time==0) {	typeof time=="undefined" ? AL.time = AL.defaultTime : AL.time = time;
	/*while(AL.time!=0) { }*/}
}

/*5{[1}\+!&8pS49h5&J                   X XXX
EE5^~*^!!!_XX46L35ur   XYX XI  XXX ☆?☽ X H
EBEVrr^\/\-JS4h&vovr    X   XI  X   !  XDQNX
EEQ}r>+*\;^4493ontjj    X   X I X   ✝   /T\X
QQHKj;^+;|x&5oTujjj}    X   X  NX   V  XXX|X
J5u53r^^\+/\cjj>>"\;    X   X   E   X   |⊞|
j52xLJl}|\"}}{".` !^   XXX XXX XXE XWX  XXX
JT5555nr[r?1>[?{+;*/
function viimeinenSana() { initMetaphysics(); initExistence(); initUI(); virginTab() }
function initUI() {	measureWindow(); for(var i = 0; i < AL.tabs.length; i++) { AL.tabs[i] = initTab(AL.tabs[i]) }} 
function initControls(SVG) { window.addEventListener("resize", AL.tab.funcs.resize, true);
							 SVG ? initSVGControls() : initDOMControls() }
function initSVGControls() {
	var elements = Array.from(document.querySelectorAll('svg .barTab'));
	elements.forEach(function(el) {	el.addEventListener("mousemove",function() { barTabMouseover(el.id) } ); });
	elements.forEach(function(el) {	el.addEventListener("click", 	function() { barTabClick(el.id)	 	} ); });
	var elements = Array.from(document.querySelectorAll('svg .mosaic-uL-tile'));
	elements.forEach(function(el) {	el.addEventListener("mousemove",function() { tileMouseover(el.id) 	} ); });
	elements.forEach(function(el) {	el.addEventListener("click", 	function() { tileClick(el.id) 	 	} ); }); }
function initDOMControls() {
	var elements = Array.from(document.querySelectorAll('.sidebar-option'));
	elements.forEach(function(el) {	el.addEventListener("click", 	function() { barTabClick(el.id)		} ); });
	var elements = Array.from(document.querySelectorAll('.sidebar-option-selected'));
	elements.forEach(function(el) {	el.addEventListener("click", 	function() { barTabClick(el.id)		} ); });
	var elements = Array.from(document.querySelectorAll('#removeDharmaProfile'));
	elements.forEach(function(el) { el.addEventListener('click', 	function() { removeDharmaProfile() 	} ); });
	var elements = Array.from(document.querySelectorAll('#createDharmaProfile'));
	elements.forEach(function(el) { el.addEventListener('click', 	function() { createDharmaProfile() 	} ); });
	var elements = Array.from(document.querySelectorAll('.dharmaSource .dharmaSourceSelected'));
	elements.forEach(function(el) { el.addEventListener('click', 	function() { dharmaHypothesis(el.id)} ); });
	var elements = Array.from(document.querySelectorAll('.dharmaTarget .dharmaTargetSelected'));
	elements.forEach(function(el) { el.addEventListener('click', 	function() { dharmaLemma(el.id) 	} ); });
	var elements = Array.from(document.querySelectorAll('.dharmaSidebarHood #dharmaSidebarHoodPaint'));
	elements.forEach(function(el) { el.addEventListener('mouseover',function() {
		console.log("HOOD"); openHood(el.id,el.class)} ); });
	var elements = Array.from(document.querySelectorAll('#dharmaOntologySelector'));
	elements.forEach(function(el) { el.addEventListener('click',	function() { setDharmaLogy("ont") 	} ); });
	var elements = Array.from(document.querySelectorAll('#dharmaEpistemologySelector'));
	elements.forEach(function(el) { el.addEventListener('click',	function() { setDharmaLogy("epi") 	} ); });
	var elements = Array.from(document.querySelectorAll('#dharmaMoralitySelector'));
	elements.forEach(function(el) { el.addEventListener('click',	function() { setDharmaLogy("mor") 	} ); });
	var elements = Array.from(document.querySelectorAll('#dharmaEthicsSelector'));
	elements.forEach(function(el) { el.addEventListener('click',	function() { setDharmaLogy("qua") 	} ); }); }
function tileMouseover(id) 	{ console.log(id + " tile mouseover"); }
function tileClick(id) 		{ /*console.log(id);*/ var Id = id.split("-").pop(); /*console.log(Id);*/ moveToTile(Id); }

                                       /*XXXXXXXXXXXXXXXXXVXXX
                                      X                       X
									 X	ZZZZZ  ZZ  ZZ     XXX  X
									 X	Z Z Z Z  Z  Z    Z     X
									 X	  Z   ZZZZ  ZZZ   XX   X
									 X	  Z   X  X  Z  Z    X  X
						  XXXXXXXXXXXX   ZZZ  X  X XXXX  XXX   XXXXXXXXXX*/  

function barTabMouseover(id){ /*console.log(id + " mouseover");*/ }
function barTabClick(id) 	{ var Id = id.split("_").pop(); displayTabById(Id); }
function measureWindow(){ var winWid=window.innerWidth;AL.winWid=winWid; var winHei=window.innerHeight;AL.winHei=winHei }
function initTab(handle) {	var tab = null;
							if 		(handle=='mosaic') {
								tab = initSVGTab(handle) }
							else if (handle=="test"||handle=="dharma"){
								tab = initDOMTab(handle) } return tab }
function Tab(handle,SVG,label,display,features,funcs) {
	this.handle=handle; this.SVG=SVG; this.label=label; this.display=display; this.features=features; this.funcs=funcs }
function initSVGTab(handle) { var SVG=true; var params = { dharmaProfiles:[] };
	var label; var display; var features; var tools; var funcs;
	if 		( handle == 'mosaic' ){ label = "Mosaic"; tools = initTools(handle);
		features = { mono:false, tools:tools };
		display = initMosaicDisplays(AL.winWid,AL.winHei,AL.resolution);
		funcs={ show 	: function() { showSVGTab() },
				hide 	: function() { hideSVGTab() },
				resize 	: function() { resizeSVGTab() },
				refresh : function() { refreshSVGTab() },
				clear 	: function() { clearSVGTab() }}}
	var rt = new Tab( handle, SVG, label, display, features, funcs ); return rt }
function initDOMTab(handle) { var SVG=false; var params = { dharmaProfiles:[] };
	var label; var display; var features=null; var tools=null; var funcs;
	if 		( handle == 'test' ){ label = "Legend"; display = initTestDisplay();
		funcs={ show 	: function() { showDOMTab() },
				hide 	: function() { hideDOMTab() },
				resize 	: function() { resizeDOMTab() },
				refresh : function() { refreshDOMTab() }}}
	else if ( handle == 'dharma' ){ label = "Dharma"; tools = initTools(handle);
	 	features = { tools:tools }
		display = initDharmaDisplay();		
		funcs={ show 	: function() { showDOMTab() },
				hide 	: function() { hideDOMTab() },
				resize 	: function() { resizeDOMTab() },
				refresh : function() { refreshDOMTab() }}}
	var rt = new Tab( handle, SVG, label, display, features, funcs ); return rt }
function getTabByHandle (h) { for(var i=0; i<AL.tabs.length; i++) { if(h==AL.tabs[i].handle) { return AL.tabs[i]; }}}
function virginTab (handle) { var tab = getTabByHandle(AL.tab);					switchTabs( null, 	tab )}
function displayTab(handle) { var tab = getTabByHandle(handle); 				switchTabs( AL.tab, tab )}
function displayTabById(id) { var i=parseInt(id); if( AL.tab != AL.tabs[i] )  { switchTabs( AL.tab, AL.tabs[i] )}}
function switchTabs(ex, to) { if(ex != null) { ex.funcs.hide() } AL.tab = to; to.funcs.show() }
function hideDOMTab() { var w = document.getElementById("wrapper");	if(w != null) { w.remove() }}
function hideSVGTab() { svg.setAttribute('display','none') }
function showSVGTab() {	svg.setAttribute('display','block'); 
						showSVGSidebar( AL.winWid, AL.winHei ); 
						document.body.appendChild(svg);
						switch(AL.tab.handle){ case "mosaic" : showMosaicDisplays( AL.winWid, AL.winHei, AL.tab) }
						$( document ).ready(function() { initControls(true) } ) }
function showDOMTab() { var wrapper = document.createElement('div');		wrapper.setAttribute('id','wrapper');
						var content = AL.tab.display.cloneNode(true); 		wrapper.appendChild(content);
						document.body.appendChild(wrapper);
						AL.tab.funcs.refresh();
						var sidebar = makeDOMSidebar(); 					wrapper.appendChild(sidebar);
						$( document ).ready(function() { initControls(false) } ) }
function resizeDOMTab() {}
function resizeSVGTab() {}
function refreshDOMTab(){ switch(AL.tab.handle) {
	case "dharma" : populateDharmaProfiles(); 									
					var e = document.getElementById('dharmaTypeSelector'); 		populateDharmaTypeSelector(e);
					var e = document.getElementById('dharmaSubtypeSelector');	populateDharmaSubtypeSelector(e);
					var e = document.getElementById('dharmaSource');			populateDharmaSidebarSource(e);
					var e = document.getElementById('dharmaRelation');			populateDharmaSidebarRelations(e);
					var e = document.getElementById('dharmaTarget');			populateDharmaSidebarTarget(e);
					break; }}
function refreshSVGTab(){}

						  /*XXXXXXXXXX  ZZZZZ  ZZ  ZZ     XXX  XXXXXXXXXXXX
									 X	Z Z Z Z  Z  Z    Z     X
									 X	  Z   ZZZZ  ZZZ   XX   X
									 X	  Z   X  X  Z  Z    X  X
									 X	 ZZZ  X  X XXXX  XXX   X
									 X                        X
									 XXXXXXXXXXXXXXXXXXXXXXX*/

function keyHandleToLabel(handle) { switch(handle) {
	case "undo" 	: return "<span style='font-size:13px; position:absolute; top:10px; left: 4px;'>undo</span>";
	case "redo" 	: return "<span style='font-size:13px; position:absolute; top:10px; right:4px;'>redo</span>";
	case "STOP" 	: return "<span style='font-size:25px;'>⬛</span>"; //&#9632;
	case "PLAY" 	: return "<span style='font-size:19px;'>⭓</span>";
	case "REC" 		: return "<span style='color:#8b0000; font-size:39px;'>⬤</span>"; //●'ve seen the 1 hu got a way
	case "SAVE" 	: return "<span style='font-size:19px;'>⬇</span>";
	case "LOAD" 	: return "<span style='font-size:19px;'>⬆</span>";
	case "STACK"	: return "按";
	case "COLLAPSE"	: return "易";
	case "CONSTL" 	: return "搁";
	case "MONOCOL" 	: return "│";
	case "MONOROW"	: return "─";
	case "HIGHERR"	: return "⫧";
	case "SYMMETRY"	: return "<span style='font-size:12px;'>┼</span>";
	case "HIGHROW"	: return "⫟";
	case "HIGHCOL"	: return "<span style='font-size:27px;'>⫨</span>";
	case "HIGHERC"	: return "<span style='font-size:27px;'>⫠</span>";
	case "METATOOL" : return "▢"; /*"<span style='font-size:65px;'>□</span>";*/}}/*-□ later etc*/	
function triple(pri,sec,ter){ var rt={ n:0, pri:null, sec:null, ter:null };
	if 		(typeof ter!="undefined"){ rt.n=3; 	rt.ter=ter; rt.sec=sec; rt.pri=pri }
	else if (typeof sec!="undefined"){ rt.n=2; 				rt.sec=sec; rt.pri=pri }
	else 							 { rt.n=1; 							rt.pri=pri } return rt }
function initTools(handle) { var r=[]; var key=[]; var tool=null;	function T(p,s,t)	{ var rt=triple(p,s,t); return rt }
/*⊞ upon clikc? or sqrd minus etc*/									function K(tri) 	{ key.push(tri) }
	if(handle=="dharma") {
					K(T("undo","redo"));
		tool = new Tool("UndoRedo", 		key); r.push(tool); var key=[];
					K(T("STOP","PLAY")); K(T("REC"));
		tool = new Tool("StopPlayRec", 		key); r.push(tool); var key=[];
					K(T("SAVE","LOAD"));
		tool = new Tool("SaveLoad", 		key); r.push(tool); var key=[];
					K(T("STACK","COLLAPSE"));
		tool = new Tool("StackConst", 		key); r.push(tool); var key=[];
					K(T("CONSTL"));
		tool = new Tool("ConstLabel", 		key); r.push(tool); var key=[];
					K(T("MONOCOL","MONOROW")); K(T("HIGHERR","SYMMETRY","HIGHROW")); K(T("HIGHCOL","HIGHERC"));
		tool = new Tool("HorVer",	 		key); r.push(tool); var key=[];
					K(T("METATOOL"));
		tool = new Tool("MetaTool",	 		key); r.push(tool); var key=[]}
	r = cutToolKeys(r); return r }
function Tool(handle, key) { this.handle=handle; this.key=key}
function cutToolKeys(tools) { var bf=null;
			function setKeyElementClass(e,arity){ if (arity==1) { e.setAttribute('class','unaryFeature')   }
											 else if (arity==2) { e.setAttribute('class','binaryFeature')  }
											 else if (arity==3) { e.setAttribute('class','trinaryFeature') } return e }
			function setKeyElementId(e,handle,n,arity) {
				var id = ""; id += "key"; id += handle;	id += "_"; id += n;	id += "-"; id += arity;
				e.setAttribute('id',id); return e }
		function cutDOM(tri) { var r=[];
			function terDOM() {	priDOM(); secDOM();	var e=document.createElement('div'); e=setKeyElementClass(e, tri.n);
							e=setKeyElementId(e, tri.ter, 3, tri.n); e.innerHTML=keyHandleToLabel(tri.ter); r.push(e); }
			function secDOM() { priDOM(); 			var e=document.createElement('div'); e=setKeyElementClass(e, tri.n);
		 					e=setKeyElementId(e, tri.sec, 2, tri.n); e.innerHTML=keyHandleToLabel(tri.sec); r.push(e); }
			function priDOM() { 					var e=document.createElement('div'); e=setKeyElementClass(e, tri.n);
		 					e=setKeyElementId(e, tri.pri, 1, tri.n); e.innerHTML=keyHandleToLabel(tri.pri); r.push(e); }
			tri.n==3 ? terDOM() : tri.n==2 ? secDOM() : priDOM(); return r }
		function cutSVG(arity,labels,select,handle) {}
		function cutFuncs(handle) { var f; var fs = []; var ident = "key"+handle; switch(ident) {
				case "keyUndoRedo" 	  	: 	f = function() { keyUndoRedo_undo() 		}; fs.push(f);
											f = function() { keyUndoRedo_redo() 		}; fs.push(f); break;
				case "keyStopPlayRec" 	: 	f = function() { keyStopPlayRec_stop() 		}; fs.push(f);
											f = function() { keyStopPlayRec_play() 		}; fs.push(f);
											f = function() { keyStopPlayRec_rec() 		}; fs.push(f); break;
				case "keySaveLoad" 		: 	f = function() { keySaveLoad_save() 		}; fs.push(f);
											f = function() { keySaveLoad_load() 		}; fs.push(f); break;
				case "keyStackConst"	: 	f = function() { keyStackConst_stack() 		}; fs.push(f);
											f = function() { keyStackConst_collapse() 	}; fs.push(f); break;
				case "keyConstLabel" 	: 	f = function() { keyConstLabel() 			}; fs.push(f); break;
				case "keyHorVer" 		: 	f = function() { keyHorVer_monoCol() 		}; fs.push(f);
											f = function() { keyHorVer_monoRow() 		}; fs.push(f);
											f = function() { keyHorVer_higherRow()	 	}; fs.push(f);
											f = function() { keyHorVer_symmetry() 		}; fs.push(f);
											f = function() { keyHorVer_highRow() 		}; fs.push(f);
											f = function() { keyHorVer_highCol() 		}; fs.push(f);
											f = function() { keyHorVer_higherCol() 		}; fs.push(f); break;
				case "keyMetaTool" 		: 	f = function() { keyMetaTool() 				}; fs.push(f); break} return fs }
			function cutState(handle) { var s; var ss = []; var ident = "key"+handle; switch(ident) {
				case "keyUndoRedo" 	  	: 	s = { keyUndoRedo_undo: 		null		}; ss.push(s);
											s = { keyUndoRedo_redo: 		null		}; ss.push(s); break;
				case "keyStopPlayRec" 	: 	s = { keyStopPlayRec_stop: 		null		}; ss.push(s);
											s = { keyStopPlayRec_play: 		null		}; ss.push(s);
											s = { keyStopPlayRec_rec: 		null		}; ss.push(s); break;
				case "keySaveLoad" 		: 	s = { keySaveLoad_save: 		null		}; ss.push(s);
											s = { keySaveLoad_load: 		null		}; ss.push(s); break;
				case "keyStackConst"	: 	s = { keyStackConst_stack: 		null		}; ss.push(s);
											s = { keyStackConst_collapse: 	null		}; ss.push(s); break;
				case "keyConstLabel" 	: 	s = { keyConstLabel: 			null		}; ss.push(s); break;
				case "keyHorVer" 		: 	s = { keyHorVer_monoCol: 		null		}; ss.push(s);
											s = { keyHorVer_monoRow: 		null		}; ss.push(s);
											s = { keyHorVer_higherRow: 		null		}; ss.push(s);
											s = { keyHorVer_symmetry: 		null 		}; ss.push(s);
											s = { keyHorVer_highRow: 		null 		}; ss.push(s);
											s = { keyHorVer_highCol: 		null 		}; ss.push(s);
											s = { keyHorVer_higherCol: 		null 		}; ss.push(s); break;
				case "keyMetaTool" 		: 	s = { keyMetaTool: 				null 		}; ss.push(s); break} return ss }
		function makeCut(triple,tool) { var buf=null; var cut={ state:null, DOM:[], SVG:[], funcs:null };
			cut.state 	= cutState(tool.handle);
			cut.DOM 	= cutDOM  (triple);
			cut.SVG 	= cutSVG  ();
			cut.funcs 	= cutFuncs(tool.handle); return cut }
	function cutKey(tool){ var cut=null; var cuts={ state:[], DOM:[], SVG:[], funcs:[] };
		for(var j=0;j<tool.key.length;j++) {
			cut = makeCut(tool.key[j], tool);
			cuts.state.push (cut.state); //here was if state
			cuts.DOM.push 	(cut.DOM);
			cuts.SVG.push 	(cut.SVG);
			cuts.funcs.push (cut.funcs)} return cuts }
	for(var i=0; i < tools.length; i++){ bf = cutKey(tools[i]); tools[i].key = bf; } return tools }
                                                                  /*XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
                                                                                XXX      XXX.   XXX.    XXX     XX
                                                                               X.       X.     X.  X.  X.  X.  X  X
                                                                                XX.     X.     X.  X.  X.  X      X
                                                                                  X.     X.     XXX.    XXX.  XXXXXXX
                                                                                XX.       X.                       X
                                                                                           X.                      X
                                                                                           X 
                                                                                          */
function makeDOMSidebar() {
	function makeDOMSidebarButton(text,n) {
		var rt = document.createElement("div");				var btnId = "barTab_"+n;
		rt.setAttribute('class','sidebar-option');			rt.setAttribute('id',btnId);
		if(text == AL.tab.label) { rt.setAttribute('class','sidebar-option-selected') }
		var btnText = document.createTextNode(text); 		rt.appendChild(btnText); return rt; }
	var sidebar = document.createElement('div'); 		sidebar.setAttribute('id','sidebar');
	var features= populateDOMSidebarFeatures();
	var btn = null;
	for(var i=0; i<AL.tabs.length; i++) {
		btn = makeDOMSidebarButton(AL.tabs[i].label,i);
		sidebar.appendChild(btn); }
	sidebar.appendChild(features); return sidebar }
function populateDOMSidebarFeatures() {
	function clone(DOM) {
		for(var j=0; j < DOM.length; j++){ var d=document.createElement('div'); d.setAttribute('class','clearBoth');
			if( DOM[j].length == 4 ) { DOM[j].shift() }
			for(var k=0; k < DOM[j].length; k++) { var b=DOM[j][k].cloneNode(true); d.appendChild(b) } f.appendChild(d) }}
	function make(DOM) { var e = clone(DOM) }
	var f = document.createElement('div'); f.setAttribute('id','sidebarFeatures');
	var tools = AL.tab.features.tools;
	for(var i=0; i < tools.length; i++) { make(tools[i].key.DOM) } return f }
function showSVGSidebar(winWid, winHei) {
	var barWid = AL.sidebarWidth;
	var offset = winWid - barWid;
	var tabHei = AL.sidebarTabHei;
	var tabOff = offset + AL.sidebarTabPadL;
	var barTabClass = "barTab";
	var fontSize = AL.fontSize;
	svg.setAttribute('height',winHei); 	svg.setAttribute('width',winWid);
	var bar=document.createElementNS(svgNS,'rect');
	bar.setAttribute('x',offset); 		bar.setAttribute('y',0);
	bar.setAttribute('width',barWid); 	bar.setAttribute('height',winHei);
	bar.setAttribute('fill','#95B3D7');	svg.appendChild(bar);
    for(var i=0; i<AL.tabs.length; i++) { 
    	var barTabId=barTabClass+"_"+i;	
    	var barTab=document.createElementNS(svgNS,'rect');  
    	barTab.setAttribute('class', barTabClass);	barTab.setAttribute('id', barTabId);
    	barTab.setAttribute('x',offset); 			barTab.setAttribute('y',i*tabHei);
    	barTab.setAttribute('width',barWid);		barTab.setAttribute('height',tabHei);
    	AL.tab.handle==AL.tabs[i].handle?barTab.setAttribute('fill','#DDB300'):barTab.setAttribute('fill','#95B300');
    	var label = document.createElementNS(svgNS,"text");
    	label.setAttributeNS(null,'class',barTabClass); label.setAttributeNS(null,'id',barTabId);
		label.setAttributeNS(null,"x",tabOff);			label.setAttributeNS(null,"y",(i*tabHei)+fontSize+9); 
		label.setAttributeNS(null,"font-size",fontSize);label.setAttributeNS(null,"fill","white");
		var textNode = document.createTextNode(AL.tabs[i].label);
		label.appendChild(textNode);
		svg.appendChild(barTab); svg.appendChild(label);  }}

                             /*å
     .                         Åå      ✰
                           .   Åå       \
                            \♫Åå
                        
MM   MM MMMMMM MMMMMM  MMMM  MM MMMMMM
MMM MMM MM  MM MM     MM  MM MM MM 
MM M MM MM  MM MMMMMM MMMMMM MM MM 
MM   MM MM  MM     MM MM  MM MM MM 
MM   MM MMMMMM MMMMMM MM  MM MM MMMMM*/
function drawMosaic(code,depth,m,res, disWid,disHei, disOffX,disOffY, widDif,heiDif, tilWid,tilHei, winWid,winHei) { 
	var mosaicClass = 'mosaic';				var mosaicId 	= mosaicClass+"-"+code;
	var scr=document.createElementNS(svgNS,'rect'); 
	scr.setAttribute('fill','#222222'); 	//scr.setAttribute('fill','#3583A7');
	scr.setAttribute('class',mosaicClass); 	scr.setAttribute('id',mosaicId);
	scr.setAttribute('x',disOffX); 			scr.setAttribute('y',disOffY);
	scr.setAttribute('width',disWid); 		scr.setAttribute('height',disHei);
	svg.appendChild(scr);
	var tileClass = mosaicId+"-tile";
	for(var y=0; y<res; y++) { for(var x=0; x<res; x++) { var tileId = tileClass+"_"+x+"-"+y;
		var tilOffX = disOffX + (x * tilWid);	var tilOffY = disOffY + (y * tilHei);
		if((code=='dL'||code=='dR')) { tilOffY += heiDif }
		if((code=='dR')) 			 { tilOffX += widDif }
		var tile=document.createElementNS(svgNS,"rect"); tile.setAttribute('id',tileId);
		tile.setAttribute('class',tileClass);		
		tile.setAttribute('x',tilOffX); 		tile.setAttribute('y',tilOffY);
		tile.setAttribute('width',tilWid); 		tile.setAttribute('height',tilHei);
		tile.setAttribute('fill',m[y][x].h); 	svg.appendChild(tile); }}
	document.body.appendChild(svg); }
function showMosaic(code,depth,dp,winWid,winHei) { 
	drawMosaic(code, AL.depth, AL.dharma.mosaic.plane, dp.dim.resX, dp.dim.disWid, dp.dim.disHei, dp.dim.dpOffX, dp.dim.dpOffY, dp.dim.widDif, dp.dim.heiDif, dp.dim.tilWid, dp.dim.tilHei, winWid, winHei ) }
function showMosaicDisplays(winWid,winHei,tab){
	if(tab.features.mono){ showMosaic("mono",false,tab.display.mono,winWid,winHei) } else {
	showMosaic("uL",false,tab.display.uL,winWid,winHei); showMosaic("dL",true, tab.display.dL,winWid,winHei);
	showMosaic("dR",true, tab.display.dR,winWid,winHei); }}
function situateMosaic(mosDim, mosPos, code) { 
	if(code=="dL"||code=="dR") { mosDim.dpOffY += mosDim.disHei; 	mosPos.y.off += mosDim.heiDif; }
	if(code=="uR"||code=="dR") { mosDim.dpOffX += mosDim.disWid; 	mosPos.x.off += mosDim.widDif; }
	else if(code=="mono") { mosPos.x.off = Math.floor(mosDim.widDif / 2); mosPos.y.off = Math.floor(mosDim.heiDif / 2); }
	var rt = { dim: mosDim, pos: mosPos }; return rt; }
function measureMosaic(code, winWid, winHei, x, y) { 
	var rt = { disWid:0, disHei:0, tilWid:0, tilHei:0, widDif:0, heiDif:0, dpOffX:0, dpOffY:0, resX:x, resY:y };
	if(code!="mono"){ rt.disWid = Math.floor( winWid / 2 ); 	rt.disHei = Math.floor( winHei / 2 ); }
	else 			{ rt.disWid = winWid; 						rt.disHei = winHei; }
	rt.tilWid = Math.floor( rt.disWid / x); 	rt.tilHei = Math.floor( rt.disHei / y);
	rt.widDif = rt.disWid - (rt.tilWid * x); 	rt.heiDif = rt.disHei - (rt.tilHei * y); return rt }
function configureMosaic(code, winWid, winHei, x, y) {
	var x = 2*((x*2)+1); if(typeof y=="undefined"){ var y=x }
	var winWid = winWid-AL.sidebarWidth;
	var mosPos = { x:{ res:x, crd:0, off:0, zoo:1}, y:{ res:y, crd:0, off:0, zoo:1}};
	var mosDim = measureMosaic(code, winWid, winHei, x, y);
	var disPos = situateMosaic(mosDim, mosPos, code); return disPos }
function MosaicDisplay(code, winWid, winHei, x, y){ 
	if(typeof y != "undefined") { var disPos = configureMosaic(code, winWid, winHei, x, y) }
	else 						{ var disPos = configureMosaic(code, winWid, winHei, x) }
	this.pos=disPos.pos; this.dim=disPos.dim; this.code=code; }
function initMosaicDisplays(winWid,winHei,R) { var rt={ mono:null, uL:null, uR:null, dL:null, dR:null }
	var uL = new MosaicDisplay("uL", winWid, winHei, R); var uR = new MosaicDisplay("uR", winWid, winHei, R);
	var dL = new MosaicDisplay("dL", winWid, winHei, R); var dR = new MosaicDisplay("dR", winWid, winHei, R);
	var mono = new MosaicDisplay("mono", winWid, winHei, R); rt.uL=uL;rt.uR=uR;rt.dL=dL;rt.dR=dR;rt.mono=mono; return rt }
function resizeMosaicDisplays(winWid,winHei,R) {
	resizeMosaicDisplay(AL.mosaicDisplays.mono, winWid, winHei, R) }
function resizeMosaicDisplay(mosaic, winWid, winHei, R) { var cfg=configureMosaic(mosaic.code, winWid, winHei, R);
	mosaic.pos = cfg.pos; mosaic.dim = cfg.dim; }
function sketchMosaic(q,dest,Y,X) {
	function mosaicTileLabel(x,y) {	var xCrd = "" + x; var yCrd = "" + y;
		if(xCrd.length==1) { xCrd = "&nbsp;"+xCrd } if(yCrd.length==1) { yCrd = yCrd+"&nbsp;" } var r=xCrd+yCrd; return r }
	if(typeof X=="undefined") { var X = Y; } var c; var doc = document.getElementById(dest); var r=""; var t=""; var tmp;
	for(var y=0;y<Y;y++) { t="<div>"; r+=t;
		for(var x=0;x<X;x++) {
			if(Y==1) { tmp=mosaicTileLabel(x,y);
				r+="<span style='background-color:"+q[y].h+";'>"+tmp+"</span>"; }
			else if(q[y][x]==null){r+="<span>::::</span>"}
			else if(typeof q[y][x]=="string"){r+="<span>"+q[y][x]+"</span>"}
			else { tmp=mosaicTileLabel(x,y);
				r+="<span style='background-color:"+q[y][x].h+";'>"+tmp+"</span>";}}}
	r+="</div>"; doc.innerHTML +=r; }/*

DDDDDD ' OOOOO  OO     OO           (                         Ω
DD  DDD OO° °OO OOO   OOO    +→    (   m mm mm        x.xx.    Ω
DD   DD OO   OO OOOO OOOO  +++++→  (    m  m  m   M×   x. x.   Ω
DD   DD OOo oOO OO O O OO  +++++→  (    m  m  m   M×   x. x.   Ω
DD  DDD OOOOOOO OO OOO OO    +→    (    m  m  m        x. x.   Ω
DDDDDD   OOOOO  OO  O  OO           (  mm  m  mm      xx. xx. ω

*/function populateDharmaTypeSelector(s) { for(var i = 0; i < AL.dharma.ontology.length; i++) {
		var option = document.createElement('option');	option.text = AL.dharma.ontology[i].label;	s.add(option); }}
function populateDharmaSubtypeSelector(s) {	for(var i = 0; i < AL.ontology.content.categories.length; i++) {
		var option = document.createElement('option');	option.text = AL.ontology.content.categories[i].handle;
		s.add(option); }}
function populateDharmaSidebarSource(s) { var dhArr = AL.ontology.content.items; for(var i = 0; i < dhArr.length; i++) {
		var option = document.createElement('option');
		dhArr[i].hypot ? option.class="dharmaSourceSelected" : option.class="dharmaSource";
		option.id = "dharmaSource_"+i;		option.text = "."+dhArr[i].sign;		s.add(option); } }
function populateDharmaSidebarTarget(s) { var dhArr = AL.ontology.content.items; for(var i = 0; i < dhArr.length; i++) {
		var option = document.createElement('option');
		dhArr[i].lemma ? option.class="dharmaTargetSelected" : option.class="dharmaTarget";
		option.class = "dharmaTarget";		option.id = "dharmaTarget_"+i;
		option.text = "."+dhArr[i].sign;
		s.add(option); } }
function populateDharmaSidebarRelations(s) {}
function initDharmaDisplay(){	var content = document.createElement('div');
								var header   = initDharmaHeaderControls(); 	content.appendChild(header);
								var columns  = initDharmaColumns(); 		content.appendChild(columns);
								var sidebar  = initDharmaSidebar(); 		content.appendChild(sidebar); return content }
function initDharmaHeaderControls() {
	var d = document.createElement('div');	 d.setAttribute('id','dharmaHeaderControls');
	var e = document.createElement('div'); 	 e.setAttribute('id','dharmaHeaderBase');  					  d.appendChild(e);
	var e = document.createElement('div'); 	 e.setAttribute('id','dharmaHeaderTabs');  					  d.appendChild(e);
	var e=document.createElement('button');	 e.setAttribute('id','removeDharmaProfile'); e.innerHTML="-"; d.appendChild(e);
	var e = document.createElement('input'); e.setAttribute('id','nameDharmaProfile');
		e.setAttribute('size',7);			 d.appendChild(e);
	var e=document.createElement('button');  e.setAttribute('id','createDharmaProfile'); e.innerHTML="+"; d.appendChild(e);
	return d }
function initDharmaColumns() {
	var d = document.createElement('div'); 	 d.setAttribute('id','dharmaColumns');
	var e = document.createElement('div'); 	 e.setAttribute('id','leftDharmaColumn'); 
	e.setAttribute('class','dharmaColumn');  d.appendChild(e);
	var e = document.createElement('div'); 	 e.setAttribute('id','rightDharmaColumn'); 
	e.setAttribute('class','dharmaColumn');  d.appendChild(e);
	return d }

function initDharmaSidebar() {
	var d = document.createElement('div'); 	 				d.setAttribute('id','dharmaSidebar');
	var typeSelector = document.createElement('select');	typeSelector.setAttribute('id','dharmaTypeSelector');
	var subtypeSelector = document.createElement('select');	subtypeSelector.setAttribute('id','dharmaSubtypeSelector');
	subtypeSelector.setAttribute('multiple',true);			

	var tooltips = initDharmaHood('dharmaSidebarHood');

	var relSelector = document.createElement('select'); 	relSelector.setAttribute('id','relationTypeSelector');
	var subrelSelector = document.createElement('select');  subrelSelector.setAttribute('id','relationSubtypeSelector');
	subrelSelector.setAttribute('multiple',true);

	var footerCover = document.createElement('div'); 		footerCover.setAttribute('id','dharmaFooterCover');

	var source = document.createElement('select');			var relation = document.createElement('select');
	var target = document.createElement('select'); 
	var selHei=Math.floor((AL.winHei-249)/(AL.fontSize+4));
	source.setAttribute('id','dharmaSource');				source.setAttribute('multiple',true);
	source.setAttribute('size',selHei);
	relation.setAttribute('id','dharmaRelation');			relation.setAttribute('multiple',true);
	relation.setAttribute('size',selHei);
	target.setAttribute('id','dharmaTarget');				target.setAttribute('multiple',true);
	target.setAttribute('size',selHei);

	var frm = document.createElement('div');				frm.setAttribute('id','dharmaFrom');
	var lockFrm = document.createElement('input'); 			lockFrm.setAttribute("type", "checkbox");
	var via = document.createElement('div'); 				via.setAttribute('id','dharmaVia');
	var lockVia = document.createElement('input'); 			lockVia.setAttribute("type", "checkbox");
	var to = document.createElement('div'); 				to.setAttribute('id','dharmaTo');
	var lockTo = document.createElement('input'); 			lockTo.setAttribute("type", "checkbox");
	frm.appendChild(lockFrm); 	via.appendChild(lockVia); 	to.appendChild(lockTo);

	var controls = document.createElement('div'); 			controls.setAttribute('id','dharmaControls');
	var btn1 = document.createElement('button'); 			btn1.setAttribute('id','allConstsToUp');
	btn1.innerHTML="<span class='dharmaControlButtonLabel'>⤒|⤒</span>"; 
	var btn2 = document.createElement('button'); 			btn2.setAttribute('id','selConstsToUp');
	btn2.innerHTML="<span class='dharmaControlButtonLabel'>↥|↥</span>"; 
	var btn3 = document.createElement('button'); 			btn3.setAttribute('id','relsToLeft');
	btn3.innerHTML="<span class='dharmaControlButtonLabel'>⤟</span>";
	var btn4 = document.createElement('button'); 			btn4.setAttribute('id','relsToRight');
	btn4.innerHTML="<span class='dharmaControlButtonLabel'>⤠</span>";
	var btn5 = document.createElement('button'); 			btn5.setAttribute('id','selRelsToDown');
	btn5.innerHTML="<span class='dharmaControlButtonLabel'>↧</span>";
	var btn6 = document.createElement('button'); 			btn6.setAttribute('id','allRelsToDown');
	btn6.innerHTML="<span class='dharmaControlButtonLabel'>⤓</span>"; //↧↥ 
	controls.appendChild(btn1); controls.appendChild(btn2); controls.appendChild(btn3);
	controls.appendChild(btn4); controls.appendChild(btn5); controls.appendChild(btn6);

	var parser = document.createElement('div'); 			parser.setAttribute('id','dharmaParser');

	var devBar = document.createElement('div'); 			devBar.setAttribute('id','devBar');
	if(AL.help) { devBar.innerHTML = "Press F1 For No Help ↧↥" }

	var displayLock = document.createElement('div'); 		displayLock.setAttribute('id','dharmaDisplayLock');
	var lockUpper = document.createElement('div'); 			lockUpper.setAttribute('id','dharmaUpperLock');
	var verTime = document.createElement('div'); 			verTime.setAttribute('id','dharmaVerticalTime');
	lockUpper.appendChild(verTime);
	var lockLower = document.createElement('div'); 			lockLower.setAttribute('id','dharmaLowerLock');
	var horTime = document.createElement('div'); 			horTime.setAttribute('id','dharmaHorizontalTime');
	lockLower.appendChild(horTime); // append these to columns, not here like this
	displayLock.appendChild(lockUpper); 					displayLock.appendChild(lockLower);

	d.appendChild(devBar);
	d.appendChild(typeSelector);d.appendChild(subtypeSelector);
	d.appendChild(tooltips);
	d.appendChild(footerCover);
	d.appendChild(source);  	d.appendChild(relation);	d.appendChild(target);
	d.appendChild(frm); 		d.appendChild(via); 		d.appendChild(to);
	d.appendChild(controls);
	d.appendChild(relSelector);d.appendChild(subrelSelector);
	d.appendChild(parser);
	d.appendChild(displayLock);
	return d }
function initDharmaHood(id) {
	var d = document.createElement('div'); 				d.setAttribute('id',id);
	var hoodPaint = document.createElement('div'); 			hoodPaint.setAttribute('id','dharmaSidebarHoodPaint');
		hoodPaint.innerHTML = "HOOD&nbsp;HOOD&nbsp;HOOD&nbsp;HO";
	var tooltips = document.createElement('div');			tooltips.setAttribute('class','dharmaSidebarHood');
	var sourceTooltip = document.createElement('div');		sourceTooltip.setAttribute('class','dharmaConstantTooltip');
		sourceTooltip.innerHTML = "FROM";
	var relationTooltip = document.createElement('div');	relationTooltip.setAttribute('class','dharmaRelationTooltip');
		relationTooltip.innerHTML = "relation";
	var targetTooltip = document.createElement('div');		targetTooltip.setAttribute('class','dharmaConstantTooltip');
		targetTooltip.innerHTML = "TO";
	tooltips.appendChild(sourceTooltip); tooltips.appendChild(relationTooltip);	tooltips.appendChild(targetTooltip);
	d.appendChild(hoodPaint);							d.appendChild(tooltips);
	return d }
function openHood(id,clas) { if	(id=='dharmaSidebarTooltips') { showTaxonomyTools(clas) }
						else if (id=='dharmaEngine') { 			var hood = closeHood('dharmaSidebar', clas);
																baTang('dharmaSidebar',hood) }}
function showTaxonomyTools(id,clas)  {
	var tooltips = document.createElement('div');				tooltips.setAttribute('id','dharmaSidebarTaxonomy');
	var ont = document.createElement('input');					ont.setAttribute('id','dharmaOntologySelector');
		ont.setAttribute("type", "radio"); 						var ontTip = createTextNode('ont');
	var epi = document.createElement('input');					epi.setAttribute('id','dharmaEpistemologySelector');
		epi.setAttribute("type", "radio");						var epiTip = createTextNode('epi');
	var mor = document.createElement('input');					mor.setAttribute('id','dharmaMoralitySelector');
		mor.setAttribute("type", "radio");						var morTip = createTextNode('mor');
	var qua = document.createElement('input');					qua.setAttribute('id','dharmaEthicsSelector');
		qua.setAttribute("type", "radio");						var quaTip = createTextNode('qua');
	tooltips.appendChild(ont); 	tooltips.appendChild(ontTip);	tooltips.appendChild(epi); 	tooltips.appendChild(epiTip);
	tooltips.appendChild(mor); 	tooltips.appendChild(morTip);	tooltips.appendChild(qua); 	tooltips.appendChild(quaTip);
	document.getElementsByClassName(clas)[0].remove();
	tooltips.setAttribute('class',clas); 	
	document.getElementById('dharmaSidebar').appendChild(tooltips); }
function closeHood(id,clas) {
	var sidebarHood = document.createElement('div'); 
	var hoodPaint = document.createElement('div');			hoodPaint.setAttribute('id','dharmaSidebarHoodPaint');
	hoodPaint.innerHTML = "HOOD&nbsp;HOOD&nbsp;HOOD&nbsp;HO";
	var tooltips = document.createElement('div');			tooltips.setAttribute('class','dharmaSidebarHood');
	var sourceTooltip = document.createElement('div');		sourceTooltip.setAttribute('class','dharmaConstantTooltip');
	sourceTooltip.innerHTML = "FROM";
	var relationTooltip = document.createElement('div');	relationTooltip.setAttribute('class','dharmaRelationTooltip');
	relationTooltip.innerHTML = "relation";
	var targetTooltip = document.createElement('div');		targetTooltip.setAttribute('class','dharmaConstantTooltip');
	targetTooltip.innerHTML = "TO";

	tooltips.appendChild(sourceTooltip);
	tooltips.appendChild(relationTooltip);
	tooltips.appendChild(targetTooltip);
	tooltips.appendChild(hoodPaint);
	return tooltips }
function baTang(d,el) { if(typeof d == "string") { var d = document.getElementById(d) }	d.appendChild(el) }



/*
function initDharmaColumns() {
	var d = document.createElement('div'); 	 d.setAttribute('id','dharmaColumns');
	var e = document.createElement('div'); 	 e.setAttribute('id','oneDharmaColumn'); 
	e.setAttribute('class','dharmaColumn');  

	var f = document.createElement('div'); 	 f.setAttribute('id','leftDharmaColumn'); 
	f.setAttribute('class','innerDharmaColumn');  e.appendChild(f);
	var f = document.createElement('div'); 	 f.setAttribute('id','rightDharmaColumn'); 
	f.setAttribute('class','innerDharmaColumn');  e.appendChild(f);

	d.appendChild(e);
	return d }*/

// /*window.onload=init();*/ 
/*script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
/script>*/


// Press F2 For More Help
// onhover: (mystery key: shift) 	// reverses dir in dharmasrcdst ctrls 

// rect.setAttribute('fill','#95B3D7'); 

/*
#dharmaColumnWrapper{width:100%;min-height:100%;background-color:#181818; position:absolute;top:25px;
		margin-left:173px; padding:66px; }
	.dharmaColumn{ margin-right:25px; border:1px solid black; float:left;  width:25%; padding: 66px;}
	#leftDharmaColumn{}
	#rightDharmaColumn{}
	.innerDharmaColumn{background-color:white; } ei toiminu	



var d = document.createElement('div'); 	 d.setAttribute('id','dharmaColumns');
	var e = document.createElement('div'); 	 e.setAttribute('id','oneDharmaColumn'); 
	e.setAttribute('class','dharmaColumn');  

	var f = document.createElement('div'); 	 f.setAttribute('id','leftDharmaColumn'); 
	f.setAttribute('class','innerDharmaColumn');  e.appendChild(f);
	var f = document.createElement('div'); 	 f.setAttribute('id','rightDharmaColumn'); 
	f.setAttribute('class','innerDharmaColumn');  e.appendChild(f);
	
	d.appendChild(e);
	return d }*/



function initTestDisplay(){ var content = document.createElement('div');
							var v = AL.dharma.beings;
							populateTestDisplay(v, content);
							return content }
function populateTestDisplay(v, content) { var row;
	row = testBeing( v.mas.selves.adult, "r1" ); content.appendChild(row);
	row = testBeing( v.mas.selves.child, "r2" ); content.appendChild(row);
	row = testBeing( v.fem.selves.child, "r3" ); content.appendChild(row);
	row = testBeing( v.fem.selves.adult, "r4" ); content.appendChild(row);
	row = testBeing( v.mas.others.adult, "r5" ); content.appendChild(row);
	row = testBeing( v.mas.others.child, "r6" ); content.appendChild(row);
	row = testBeing( v.fem.others.child, "r7" ); content.appendChild(row);
	row = testBeing( v.fem.others.adult, "r8" ); content.appendChild(row);
	return content }
function testBeing(dhr, id) {
	var div = document.createElement('div');
	div.setAttribute('id',id);
	testBeing2( dhr.male, dhr.adult, dhr.other, 	-3,		dhr.moods.hostile.vertexPlane, 	 div );
	testBeing2( dhr.male, dhr.adult, dhr.other, 	-1,		dhr.moods.enemy.vertexPlane, 	 div );
	testBeing2( dhr.male, dhr.adult, dhr.other, 	-2,		dhr.moods.runaway.vertexPlane,   div );
	testBeing2( dhr.male, dhr.adult, dhr.other,      3,		dhr.moods.peaceful.vertexPlane,  div );
	testBeing2( dhr.male, dhr.adult, dhr.other, 	 1,		dhr.moods.playful.vertexPlane,	 div );
	testBeing2( dhr.male, dhr.adult, dhr.other, 	 2,		dhr.moods.escorting.vertexPlane, div );
	return div }
function testBeing2(male,adult,other,mood,p,div,input) {
	var r = document.createElement('div');
		function makeLabel() { var z="<span style='background-color:black;color:white;'>";
		if(mood==6) { z+=input; }
		else {
			mood== -3?z+="Hostile ":mood== 3?z+="Peaceful ":
			mood== -1?z+="Enemy "  :mood== 1?z+="Playful ":
			mood== -2?z+="Runaway ":mood== 2?z+="Escorting ":z+="Plain ";
			if(other){z+="Other "} adult?male?z+="Man":z+="Woman":male?z+="Boy":z+="Girl"; }
		z+="</span>"; return z;	}
	function d(p) { var label=makeLabel();
		function w(v,zj) { var zi=l(v); var str=""+zj.proximal.sign+zj.axial.sign+zj.diagonal.sign;
			var z = "<span style='background-color:"+v+";color:"+zi+";'><span style='position:absolute;font-size:10px;margin-left:1px;'>"+str+"</span>&nbsp;&nbsp;&nbsp;</span>"; h+=z;}
		function u(v) { var zi=l(v); var adu=n(); var oth=q();
			var z = "<span style='background-color:"+v+";color:"+zi+";'>"+adu+" "+oth+"</span>"; h+=z; }
		function s(v) { var zi=l(v); var zj=Math.abs(mood); var z = "<span style='background-color:"+v+";color:"+zi+";'>";
			mood<0?z+="-":z+="&nbsp;";
			zj<3?z+=zj:z+="<span style='position:absolute;margin-left:-2px;margin-top:-1px;'>&#8734;</span>&nbsp;";
			z+="&nbsp;</span>"; h+=z; }
		function q() { var z; other?z="o":z="s"; return z; }
		function o() { var z="<span style='position:absolute;margin-left:-4px;margin-top:-2px;'>";
			male?z+="&#x2642;":z+="&#x2640;"; z+="</span>&nbsp;"; return z; }
		function n() { var z; adult?z="a":z="c"; return z; }
		function m(v) { var zi=l(v); var gen=o();
			var z = "<span style='background-color:"+v+";color:"+zi+";'>&nbsp;"+gen+"&nbsp;</span>"; h+=z; }
		function l(v) {var z=hToRgb(v);var zi=(255*3)/2;var zj=z.r+z.g+z.b;if(zj<zi){z="#ffffff"}else{z="#000000"}return z;}
		function k(v) { var zi=l(v); var z = "<span style='background-color:"+v+";color:"+zi+";'>B:"+p.b+"</span>"; h+=z; }
		function j(v) { var zi=l(v); var z = "<span style='background-color:"+v+";color:"+zi+";'>G:"+p.g+"</span>"; h+=z; }
		function i(v,a) { if(typeof v=="undefined"){h+="....";}else{if(typeof a=="undefined"){h+=",,,,";}else{ var zi=l(v);
			var z = "<span style='background-color:"+v+";color:"+zi+";'>&nbsp;"+a.sign.sem+"&nbsp;</span>"; h+=z; }}}
		function g(v,q) { if(typeof v=="undefined"){h+="....";}else{ var zi=l(v); var signs="";
			q.sign.syn.X ? signs+="+" : signs+="-"; signs+=q.sign.sem; q.sign.syn.Y ? signs+="+" : signs+="-";
			var z = "<span style='background-color:"+v+";color:"+zi+";'>"+signs+"</span>"; h+=z; }}
		function f(v) { if(typeof v == "undefined") { h+="...."; } else {
			var z = "<span style='background-color:"+v+";'>&nbsp;&nbsp;&nbsp;</span>"; h+=z; }}
		h += "<br />&nbsp;&nbsp;&nbsp;"; h+= label; h+="<br />&nbsp;&nbsp;&nbsp;";
		g(p.uL.good.diagonal.h,p.uL);		w(p.uL.bad.diagonal.h,p.uL.bad);	f(p.uL.bad.axial.h);
		i(p.u.peripheral.h,p.u);
		f(p.uR.bad.axial.h); 				w(p.uR.bad.diagonal.h,p.uR.bad);	g(p.uR.good.diagonal.h,p.uR);
		h+="<br />&nbsp;&nbsp;&nbsp;";
		w(p.uL.good.axial.h,p.uL.good);		f(p.uL.good.proximal.h);			f(p.uL.bad.proximal.h);
		s(p.u.crucial.h);
		f(p.uR.bad.proximal.h);				f(p.uR.good.proximal.h);			w(p.uR.good.axial.h,p.uR.good);
		h+="<br />&nbsp;&nbsp;&nbsp;";
		i(p.l.peripheral.h,p.l);			f(p.l.crucial.h); 					f(p.origin.h);/*j*/
		m(p.origin.h);
		f(p.origin.h);/*k*/					f(p.r.crucial.h); 					i(p.r.peripheral.h,p.r);
		h+="<br />&nbsp;&nbsp;&nbsp;";
		w(p.dL.good.axial.h,p.dL.good);		f(p.dL.good.proximal.h);			f(p.dL.bad.proximal.h);
		u(p.d.crucial.h);
		f(p.dR.bad.proximal.h);				f(p.dR.good.proximal.h);			w(p.dR.good.axial.h,p.dR.good);
		h+="<br />&nbsp;&nbsp;&nbsp;";
		g(p.dL.good.diagonal.h,p.dL);		w(p.dL.bad.diagonal.h,p.dL.bad);	f(p.dL.bad.axial.h);
		i(p.d.peripheral.h,p.d);
		f(p.dR.bad.axial.h); 				w(p.dR.bad.diagonal.h,p.dR.bad);	g(p.dR.good.diagonal.h,p.dR);
		h+="</div>"; }
	d(p);
	r.innerHTML = h;
	div.appendChild(r) }
</script></head><body onload='viimeinenSana()'></body></html>
