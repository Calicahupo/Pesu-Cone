<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-25071088-1"></script>
<script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());  gtag('config', 'UA-25071088-1'); </script>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type"/>
<title>Floresta v1006</title>
<link rel="icon" href="diodi/favicon.ico">
<link rel="stylesheet" type="text/css" href="diodi/fonts.css">
<style>svg text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}
	svg text::selection { background: none;} svg {display:block}
	#fE{ position:absolute; 	top:0px; left:0px; height:100%; width:100%;}
	#qZ{ position:absolute; 	top:0px; left:0px; height:100%; overflow: auto;}
	#tB{ position:absolute; 	top:0px; 						overflow:auto;}
	#lI{ position:absolute; 			 left:0px; 				overflow:auto; overflow-x: auto;}
	#sQ{ position:absolute; 									overflow:auto; }
	html{height:100%;padding:0px;margin:0px;font-family:PF;font-size:13px;background-color:black;color:white;}
	body{height:100%;padding:0px;margin:0px;background-color:transparent; }
</style>
<script>
var OM ={ ab:{}};
OM.re = { tYs:[], nMs:[], mDs:[], pMs:[], gNs:[], sXs:[], subjs:[], sims:[],
	pcReso:4, pcFem:0.5, pcKid:0.5, pcTys:[], pcPms:[], pcFin:0.5,
	pcPureBad:0.2, pcInvMor:0.22, pcPureGood:0.25, pcObj:0.5};
</script>
<script src="diodi/diodi.js"></script>
<script src="diodi/lodash.js"></script>
<script>
var AL={ 
	fe: "type",
	fes: ["quiz","type","mood","mosaic"],
	feTools:[["type","simTotal","simAverage","bigSq","bigLi","subjLi"],
			[ "mood","mosaicForm","simTotal","simAverage","bigSq","bigLi","subjLi"],
			[ "mosaic","bigSq","compactList","bigLi","subjLi"]],
	feTunes:[["type",false,false,false,false,true,false],
			[ "mood",false]],
	r: 4, bB:false, liNarrowInMosaic:true, liNarrow:false, liSize:0, wideSq:false, mosaicForm :false,
	sBTools: ["play","fastForward","skip","skipForward"],
	sBTunes: [100, 	 100, 		   1, 	  1],
	sBMoved: false, sBPlay: false, 	sBSkipSims: true, 	sBFastForward:false,
	sBMoodTools: ["mosaicForm"],
	sBMoodTunes: [true], // before start away asks for delete?
	tBTools: ["listContent","away","hide","copy","rand","make","tabContent","tabSort","tabHide"],
	tBTunes: ["subjs", 	undefined,undefined,undefined,undefined,undefined,"sims",false,false],
	tBSimTools: [undefined,"simAway","simHide","simCopy","simRand","simMake"],
	tBSimTunes: [undefined,false, 		false, 		100, 	false, 	100],
	tBRoomTools:[undefined,"roomAway","roomHide","roomCopy","roomRand","roomMake"],
	tBRoomTunes:[undefined,false, 		false, 		10, 	false, 		10],
	tBSubjTools: [undefined,"subjAway","subjHide","subjCopy","subjRand","subjMake"],
	tBSubjTunes: [undefined,false, 		false, 		10, 	false, 		10],
	tBObjTools: [undefined,"objAway","objHide","objCopy","objRand","objMake"],
	tBObjTunes: [undefined,false, 		false, 		10, 	false, 	10],
// objs Cloth Key Money
// room Spot Seat Way
	lITools: ["listSort"],
	lITunes: [false],
	lISimTools: ["simResos","simRooms","simSpots","simSeats","simWays","simSubjs","simFins","simMascs","simKids","simObjs","simCloths","simKeys","simMoneys","simConts"],
	liSimTunes: [ [2,0], [10,0], [10,0], [10,0]],
	liRoomTools:["roomResos","roomSizes","roomPlaces"],
	lISubjTools: ["resos","pcFin","pcFem","pcKid","pcReso","pcTys","pcPms","pcStereo","pcPureBad","pcInvMor","pcPureGood","pcSubject","pcReso"],
	rePreset: "default", abPreset: "default",
	lIObjTools: ["delObj","makeObj","pcReso","pcSafe","pcPeaceful","pcSensitive","pcToy","pcHostile","pcDangerous","pcOverwhelming"],
	lISimTools: ["pcSubjs"],
	pcSubjs: 8}
var svgFe =null; var divFe =null; var nS ="";
var svgQz =null; var divQz =null;
var svgTb =null; var divTb =null;
var svgLi =null; var divLi =null;
var svgSq =null; var divSq =null;
var ui ={winWid:0, winHei:0,
	sB:{disWid:66, disHei:0, disHrz:0, disVrt:0, rowHei:39,fesHei:0, btnBrd:4, bTOX:6, 	bTOY:10, fnt:15, HUDhei:25,
		btnTxt:"#cccccc",btnU:"#444444",	btnR:"#111111",		btnD:"#080808",		btnL:"#333333", 	sel:"#1c1c1c",
		selTxt:"#ffffff",selU:"#000000",	selR:"#333333",		selD:"#555555",		selL:"#080808", 	btn:"#333333",
		bG:"#222222", HUDbg:"#444444"},
	tB:{disHei: 40, disVrt:0, tabGap:5, tabWid:25, tabHei:30, tooWid:40,
		bG:"#000000", strCol:"#444444"},
	qZ:{bG:"#cccc88"},
	lI:{iteHei:0, fonSiz:0, svgHei:0,
		iHe: 0 ,tPF: 0 ,tTR: 0 ,tSF: 0 ,mDx:   0,kix: 0,mPx:   0,obx: 0,vQx:   0,nMx:   0,miW: 0,
		iHe0:16,tPF0:15,tTR0:14,tSF0:14,mDx0:100,kix0:7,mPx0:180,obx0:3,vQx0:240,nMx0:400,miW0:550,
		iHe1:25,tPF1:20,tTR1:20,tSF1:20,mDx1:100,kix1:4,mPx1:200,obx1:4,vQx1:240,nMx1:200,miW1:550,
		iHe2:0 ,tPF2: 0,tTR2: 0,tSF2: 0,mDx2:100,kix2:4,mPx2:200,obx2:4,vQx2:240,nMx2:200,miW1:550,},
	/*lI:{liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff"}*/
	tY:{disWid:0, disHei:0, disHrz:0, disVrt:0,
		cE:230, cuD:4, op2:0.7, c1x:0 ,c1y:40,/*40*/ c2x:0 ,c2y:40,/*40*/ cMarg:25, liY:0,
		base:"#234567", 	hilite:"#ff6600", area:"#345678", areaT:"#89abcd", selArea:"#6789ab",
		selAreaT:"#deefde", cShade:"#ffcccc", valNum:"#662525", shaNum:"#252566", plane:"#336688",
		selAreaB:"#6789ab", areaB:"#6789ab", shArea:"#012345", liB:"#666666", liI:"#444444", liT: "#cccccc",
		sLiB:"#cccccc", sLiI:"#888888", sLiT: "#ffffff", cIE:"#33d0aa"}, //ui.tY.cIE #95B388 #33d0aa
	sQ:{bG:"#333333", disHrz:0/*66*/, disWid:66, disWid2:66},
	mD:{base:"#002200", key:"#003300", key2:"#004400", selKey:"#005500", selTxt:"#00ee00", dis:"#221900", disStr: "#110800", stroke:"#009900", stroke2:"#008800", hilTxt: "#00cc00", selKey2:"#007700", selKey3: "#004400", stroke3: "#002200"},
	mP:{liW:120},
	bB:{disHei: 173, tipHei:66},
	red: {l: { h:0  , s:25 , v:100}, f:{ h:0  , s:50 , v:50 }, h:{ h:0  , s:100, v:100}},
	cya: {l: { h:180, s:25 , v:100}, f:{ h:180, s:50 , v:50 }, h:{ h:180, s:100, v:100}},
	gre: {l: { h:135, s:25 , v:100}, f:{ h:135, s:50 , v:50 }, h:{ h:135, s:100, v:100}}, 
	lil: {l: { h:315, s:25 , v:100}, f:{ h:315, s:50 , v:50 }, h:{ h:315, s:100, v:100}}, 
	yel: {l: { h:70 , s:25 , v:100}, f:{ h:70 , s:50 , v:50 }, h:{ h:70 , s:100, v:100}}, 
	vio: {l: { h:275, s:25 , v:100}, f:{ h:275, s:50 , v:50 }, h:{ h:275, s:100, v:100}}, 
	blu: {l: { h:222, s:25 , v:100}, f:{ h:222, s:50 , v:50 }, h:{ h:222, s:100, v:100}}, 
	ora: {l: { h:30 , s:25 , v:100}, f:{ h:30 , s:50 , v:50 }, h:{ h:30 , s:100, v:100}}, 
	gra: {l: { h:1  , s:1  , v:100}, f:{ h:1  , s:1  , v:50 }, h:{ h:1  , s:1  , v:1}}}
function predraw(){
	ui.winWid =window.innerWidth; ui.winHei =window.innerHeight; //ui.scrWid =screen.width; ui.scrHei =screen.height;

	if( AL.liSize==2){
		ui.lI.iHeL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tPFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tTRL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.tSFL=Math.floor( (ui.winHei-ui.tB.disHei)/ 8);
		ui.lI.mDx =iHeL*8;
		ui.lI.nMx =iHeL*14}

	ui.sB.disHrz =ui.winWid-ui.sB.disWid; ui.sB.fesHei =AL.fesL * ui.sB.rowHei;
	ui.sB.tooHei =ui.sBToolsL*ui.tB.tooWid;

	ui.qZ.disWid =Math.round((ui.winWid*(3/4))-ui.sB.disWid);
	ui.qZ.disHrz =Math.round((ui.winWid-ui.sB.disWid-ui.qZ.disWid)/2);
	ui.qZ.disVrt =Math.floor( ui.sB.rowHei/1.618); 	ui.qZ.rowHei=Math.floor( ui.winHei/5);
	ui.qZ.capVrt =Math.floor( ui.qZ.rowHei/1.618);
	ui.qZ.capFnt =Math.floor( ui.qZ.disWid/15); 	ui.qZ.capFntG=Math.floor( ui.qZ.capFnt*1.618);
	ui.qZ.fnt =Math.floor( ui.qZ.disWid/39); 		ui.qZ.fntG =Math.floor( ui.qZ.fnt/1.618);
	ui.qZ.disHei =ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFnt+(AL.quizLen * ui.qZ.rowHei);

	ui.tB.disHrz=(ui.tB.tooWid*AL.tBToolsL)+3;
	ui.tB.disWid=ui.winWid-ui.sB.disWid-ui.tB.disHrz;
	ui.tB.skrHei=Math.floor(ui.tB.disHei/3.236);//3.236
	ui.tB.skrVrt=ui.tB.disHei-ui.tB.skrHei;

	ui.bB.disWid=ui.winWid-ui.sB.disWid;
	ui.bB.disHrz=0;
	ui.bB.disVrt=ui.winHei-Math.floor(ui.winHei/12);
	ui.bB.skrHei=Math.round((ui.tB.disHei-ui.tB.skrVrt)/1.618);
	ui.bB.rimHei=Math.round(ui.bB.skrHei/1.618);
	ui.bB.divWid=ui.winWid-Math.round((ui.winWid/1.618)-(ui.bB.skrHei/2));

	/*ui.tY.liW= Math.round(ui.winWid-(1*ui.sB.disWid)-(4*(ui.tY.cE/ui.tY.cuD))-(2*ui.tY.cE)-(3*ui.tY.cMarg));
	ui.tY.lIW= ui.tY.liW-ui.sQ.disWid2;
	ui.tY.liX2=ui.sQ.disWid; ui.tY.liHe=ui.winHei-ui.tB.disHei; ui.tY.liY=ui.tB.disHei;
	ui.tY.keX=ui.sB.disWid+ui.tY.liW+ui.tY.cMarg;*/

	ui.tY.disWid =ui.winWid-ui.sB.disWid;
	//ui.tY.disHei =ui.winHei;
	ui.tY.cE =Math.round(Math.min(ui.winWid,ui.winHei)/3);
	ui.tY.cuHrz =Math.round(ui.winWid-ui.sB.disWid-(2*(ui.tY.cE/ui.tY.cuD))-ui.tY.cE-ui.tY.cMarg);
	ui.tY.c2x= Math.round(-(1.5 * ui.tY.cE)-ui.tY.cMarg);
	ui.tY.liW= Math.round(ui.winWid-(1*ui.sB.disWid)-(4*(ui.tY.cE/ui.tY.cuD))-(2*ui.tY.cE)-(3*ui.tY.cMarg));
	if( AL.wideSq){
		ui.sQ.disWid =2*ui.sB.disWid}
	else{
		ui.sQ.disWid =ui.sB.disWid}
	ui.tY.lIW= ui.tY.liW-ui.sQ.disWid;
	ui.tY.liY=ui.tB.disHei;
	ui.tY.keX=ui.sB.disWid+ui.tY.liW+ui.tY.cMarg;
	ui.tY.keW=Math.round((4*(ui.tY.cE/ui.tY.cuD))+(2*ui.tY.cE)+ui.tY.cMarg);
	ui.tY.keY=Math.round((2*(ui.tY.cE/ui.tY.cuD))+ui.tY.cE+(2*ui.tY.cMarg)+ui.tY.c1y);
	ui.tY.keyGap= Math.round(ui.tY.cMarg -(ui.tY.cMarg/1.618));
	ui.tY.keyWid= Math.round((ui.tY.keW-(15*ui.tY.keyGap))/16);
	ui.tY.stY=Math.round(ui.tY.keY+((3*ui.tY.cE)/5));

	ui.mD.plW=Math.min(ui.winWid,ui.winHei)/1.5; 	ui.mD.plX =ui.winWid-ui.sB.disWid-ui.tY.cMarg-ui.mD.plW;
	ui.mD.plH=Math.min(ui.winWid,ui.winHei)/2; 		ui.mD.plY =ui.tB.disHei+ui.tY.cMarg;
	ui.mD.kex=ui.tY.liW+ui.tY.cMarg; 	ui.mD.keX =ui.winWid-ui.sB.disWid-ui.tY.cMarg;
	ui.mD.KeW=ui.mD.keX-ui.mD.kex; 					ui.mD.keW =(ui.mD.KeW-(11*ui.tY.keyGap))/12;
	//ui.mD.kex2=ui.mD.kex+ui.mD.keW+ui.tY.keyGap; 	ui.mD.keX2=ui.mD.kex2+(2*ui.tY.keyGap)+(3*ui.mD.keW);
	//ui.mD.KeW2= -(ui.mD.kex2-ui.mD.keX2); 				ui.mD.keW2=(ui.mD.KeW2-(3*ui.tY.keyGap))/4;
	ui.mD.disWid=ui.mD.KeW-ui.mD.plW-ui.tY.cMarg;
	ui.mD.disHei = Math.floor(ui.mD.plY+((6*ui.tY.cMarg))+(2*ui.tY.cMarg*1.618) + 1.618*(2*ui.tY.cMarg)-ui.tB.disHei);
	ui.mD.keH = Math.floor(ui.mD.keW/1.618);
	ui.mD.taH = ui.mD.plH-ui.tY.keyWid-ui.tY.cMarg;
	ui.mD.tRH = Math.round(ui.mD.taH*(3/11));
	ui.mD.tRL = Math.round(ui.mD.taH*(2/11));
	ui.mD.fRH = Math.round(ui.mD.tRH/1.618);
	ui.mD.fRH2= Math.round(ui.mD.tRH/1.618/1.3);
	ui.mD.fRL = Math.round(ui.mD.tRL/1.618);
	ui.mD.fRL2= Math.round(ui.mD.tRL/1.618/1.3);
	//ui.mD.tRL = Math.round(ui.mD.taH*(1.618/11));

	ui.mP.disWid=ui.winWid-ui.sB.disWid-ui.mP.liW-ui.sQ.disWid;

	ui.midMinHei =Math.round(ui.tB.disHei+ui.tY.stY/*-(ui.tY.cE/12)*/+ui.tY.keyGap+(ui.mD.keH/3));
	ui.feMinHei =ui.midMinHei+ui.bB.disHei;
	ui.tY.disHei=ui.midMinHei;
	ui.tY.liHe = ui.midMinHei-ui.tB.disHei;
	ui.sQ.disHei=ui.midMinHei-ui.tB.disHei;
	
}

function initDraw(){
	svgFe =document.createElementNS( "http://www.w3.org/2000/svg","svg");
	nS =svgFe.namespaceURI; svgFe.appendChild( defs);
	divFe =document.createElement( 'div');divFe.setAttribute( 'id','fE');
	svgFe.setAttribute( 'width', ui.winWid);
	if(ui.winHei <ui.feMinHei){ svgFe.setAttribute( 'height',ui.feMinHei);
								divFe.style.height 			=ui.feMinHei+"px";
								document.body.style.height 	=ui.feMinHei+"px";}
	else { 						svgFe.setAttribute( 'height',ui.winHei);
								divFe.style.height 			=ui.winHei+"px";
								document.body.style.height 	=ui.winHei+"px";}
	divFe.appendChild( svgFe);

	switch( AL.fe){
		case "quiz" 	: 
			ui.sB.disHei=ui.winHei;	
			svgQz =document.createElementNS( "http://www.w3.org/2000/svg","svg");
			divQz =document.createElement( 'div');divQz.setAttribute( 'id','qZ');
			divQz.appendChild( svgQz);
			svgQz.setAttribute( 'width', ui.winWid-ui.sB.disWid);
			svgQz.setAttribute( 'height', ui.qZ.disHei+(2*ui.qZ.disVrt));
			break;
		case "type" : case "mood" : case "mosaic" :
			ui.sB.disHei=ui.midMinHei;
			svgTb =document.createElementNS( "http://www.w3.org/2000/svg","svg");
			svgLi =document.createElementNS( "http://www.w3.org/2000/svg","svg");
			svgSq =document.createElementNS( "http://www.w3.org/2000/svg","svg");
			divTb =document.createElement( 'div');divTb.setAttribute( 'id','tB');
			divLi =document.createElement( 'div');divLi.setAttribute( 'id','lI');
			divSq =document.createElement( 'div');divSq.setAttribute( 'id','sQ');

			svgTb.setAttribute( 'width', ui.tB.disWid); // modify later
			svgTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.width = ui.winWid-ui.sB.disWid-ui.tB.disHrz+'px';
			divTb.setAttribute( 'height', ui.tB.disHei);
			divTb.style.left =ui.tB.disHrz+"px";
			divTb.appendChild( svgTb);

			svgLi.setAttribute( 'width', ui.tY.lIW); // modify later
			svgLi.setAttribute( 'height', ui.lI.svgHei);
			divLi.appendChild( svgLi);
			if( AL.liNarrow){ 	divLi.style.width =ui.mP.liW+'px'}
			else{				divLi.style.width =ui.tY.lIW+'px'}
			divLi.setAttribute( 'height', ui.winHei-(2*ui.tB.disHei));
			divLi.style.top =ui.tB.disHei+"px";

			svgSq.setAttribute( 'width', ui.sQ.disWid); 
			svgSq.setAttribute( 'height',ui.sQ.disHei);
			divSq.style.width = ui.sQ.disWid+'px';
			divSq.setAttribute( 'height',ui.sQ.disHei);
			if( AL.liNarrow) { 	divSq.style.left =ui.mP.liW+"px"}
			else{ 				divSq.style.left =ui.tY.lIW+"px"}
			divSq.style.top =ui.tB.disHei+'px';
			divSq.appendChild( svgSq);	
}}

var defs 	=document.createElementNS( "http://www.w3.org/2000/svg", "defs");
var filter  =document.createElementNS( "http://www.w3.org/2000/svg", "filter");
filter.setAttribute( "id", "f1");		filter.setAttribute( "x", "-40%"); filter.setAttribute( "y", "0");
filter.setAttribute( "width", "180%");
var gaussianFilter =document.createElementNS( "http://www.w3.org/2000/svg", "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic");	gaussianFilter.setAttribute( "stdDeviation","6");
filter.appendChild(gaussianFilter);		defs.appendChild(filter);

filter 		=document.createElementNS("http://www.w3.org/2000/svg", "filter");
filter.setAttribute( 'id', 'f2'); 		filter.setAttribute( "x", "-64%"); filter.setAttribute( "y", "-31%"); 	
filter.setAttribute( "width", "291%"); 	filter.setAttribute( "height", "162%");
gaussianFilter =document.createElementNS( "http://www.w3.org/2000/svg", "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","16");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);

filter 		=document.createElementNS("http://www.w3.org/2000/svg", "filter");
filter.setAttribute( 'id', 'f3'); 		filter.setAttribute( "x", "-100%"); filter.setAttribute( "y", "-100%"); 	
filter.setAttribute( "width", "300%"); 	filter.setAttribute( "height", "300%");
gaussianFilter =document.createElementNS( "http://www.w3.org/2000/svg", "feGaussianBlur");
gaussianFilter.setAttribute( "in","SourceGraphic"); gaussianFilter.setAttribute( "stdDeviation","8");
filter.appendChild(gaussianFilter); 	defs.appendChild(filter);


function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op){ var r=document.createElementNS( nS,'rect');
					 				r.setAttribute( 'x',x);
					 				r.setAttribute( 'y',y);
									r.setAttribute( 'width',w);
									r.setAttribute( 'height',h);
					if( id){ 		r.setAttribute( 'id', 	id) }
					if( co){ 		r.setAttribute( 'fill', co) }
					if( cl){ 		r.setAttribute( 'class',cl) }
					if( sC){ 		r.setAttribute( 'stroke',sC); r.setAttribute( 'stroke-width',sW)}
					if( pE){ 		r.setAttribute( 'pointer-events', 'none')}
					if( rx){ 		r.setAttribute( 'rx',rx)}
					if( ry){ 		r.setAttribute( 'ry',ry)}
					if( op){ 		r.setAttribute( 'fill-opacity',op)}return r}
function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op){ var t =document.createElementNS( nS,'text'); y+=fonSiz;
					if( x> -1){ 	t.setAttribute( 'x',x)}	
					if( y> -1){ 	t.setAttribute( 'y',y)}
					if( fonSiz){ 	t.setAttribute( 'font-size',fonSiz)}
					if( id){ 		t.setAttribute( 'id', 	id) }
					if( co){ 		t.setAttribute( 'fill', co) }
					if( cl){ 		t.setAttribute( 'class',cl) }
					if( fonFam){ switch( fonFam){
						case "PF" : 	t.setAttribute( 'font-family','ProFontWindows');break;
						case "AI" : 	t.setAttribute( 'font-family','Aileron'); 		break;
						case "SF" : 	t.setAttribute( 'font-family','Steelfish Rg'); 	break;
						case "DI" : 	t.setAttribute( 'font-family','DISCO'); 		break;
						case "CH" : 	t.setAttribute( 'font-family','Chathura'); 		break;
						case "SR" : 	t.setAttribute( 'font-family','Strike Fighter');break;
//						case "AB" : 	t.setAttribute( 'font-family','Aileron Bold');	break;
						case "TR" : 	t.setAttribute( 'font-family','times new roman')}}
									t.setAttribute( 'pointer-events', 'none');
					if( anc){ 		t.setAttribute( 'text-anchor',anc)}
					if( op){	 	t.setAttribute( 'opacity',op)}
									t.textContent =txt; return t}
function mkS(pt,id,co,cl,op) { var p=document.createElementNS( nS,'polygon'); p.setAttribute("points", pt);
	p.setAttribute( 'fill',co); if(id!=false){p.setAttribute( 'id',id)} p.setAttribute( 'class',cl); if(op!=false){ p.setAttribute( 'opacity',op)} p.setAttribute( 'pointer-events', 'none');return p}
function mkE(x,y,w,h,c){ var e=document.createElementNS( nS,'ellipse');e.setAttribute('cx',x);e.setAttribute('cy',y);
	e.setAttribute( 'width',2*w);e.setAttribute( 'height',2*h);e.setAttribute( 'rx',w);e.setAttribute( 'ry',h);
	e.setAttribute( 'fill',c); return e}
function drS(v,l,id,cl,op){ var e=document.createElementNS( nS,'polygon'); e.setAttribute("points",v);
	e.setAttribute( 'fill',l); e.setAttribute('id',id); e.setAttribute('class',cl);
	if(op!=undefined){ e.setAttribute( 'opacity',op)} return e}
function drA(x,y,w,h,l,id,cl,b,L,op){ var e=document.createElementNS( nS,'rect'); e.setAttribute( 'fill',l);
	e.setAttribute('x',x);e.setAttribute('y',y); e.setAttribute( 'width',w); e.setAttribute( 'height',h); 
	if(b > 0){ e.setAttribute( 'stroke',L); e.setAttribute( 'stroke-width',b)}
	if(op!=undefined){ e.setAttribute( 'opacity',op)} e.setAttribute( 'id',id); e.setAttribute( 'class',cl); return e}
function drC(x,y,r,c,id,cl,sW,sC,d){var e=document.createElementNS( nS,'circle');e.setAttribute( 'fill',c);
	e.setAttribute('cx',x); e.setAttribute('cy',y); e.setAttribute('r',r); e.setAttribute('id',id);
	e.setAttribute('class',cl);	e.setAttribute('stroke',sC); e.setAttribute('stroke-width',sW);
	if(d){e.setAttribute('stroke-dasharray',d)} return e}


function mkFb( n,sB,ni){ var id="sB_btn-"+n; n = n * sB.rowHei;
	if( AL.fe != ni){ var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.btn,"sB_btn")}
	else 			{ var e =mkL( ui.sB.disHrz, n+ui.sB.disVrt, sB.disWid, sB.rowHei,	id, sB.sel,"sB_btn")}
	bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sidebarKey( e.id);break}}); return e }
function mkFt( n,sB,ni){ var id="sB_btT-"+n; n = n * sB.rowHei;
	if( AL.fe != ni){ var e =mkT( ui.sB.disHrz+sB.bTOX, n+sB.bTOY+ui.sB.disVrt,	id, sB.btnTxt, "sB_btT",sB.fnt,ni,'PF')}
	else 			{ var e =mkT( ui.sB.disHrz+sB.bTOX, n+sB.bTOY+ui.sB.disVrt,	id, sB.selTxt, "sB_btT",sB.fnt,ni,'PF')}return e }
function mkFr( n,sB,ni){ var et=[]; var yi=(n * sB.rowHei)+sB.disVrt; if( AL.fe != ni) //mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
		{var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnU, "sB_btnBrd"); et.push( e);
		e=mkL(ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.btnD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.btnR/*"#880000"*/,"sB_btnBrd",false); et.push( e)}
	else{ var e=mkL( ui.sB.disHrz, yi,sB.disWid, sB.btnBrd, "sB_btnBrd-"+n, sB.selU, "sB_btnBrd"); et.push( e);
		e=mkL( ui.sB.disHrz, yi+sB.rowHei-sB.btnBrd,sB.disWid,sB.btnBrd, "sB_btnBrd-"+n, sB.selD, "sB_btnBrd");
		et.push( e); var v = ui.sB.disHrz+","+yi+" "+ 				(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+ui.sB.disHrz+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selL/*"#880000"*/,"sB_btnBrd",false); et.push( e);
		var v = ui.sB.disHrz+sB.disWid+","+yi+" "+ 	(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.btnBrd)+" "+
			(ui.sB.disHrz+sB.disWid-sB.btnBrd)+","+(yi+sB.rowHei-sB.btnBrd)+" "+(ui.sB.disHrz+sB.disWid)+","+(yi+sB.rowHei);
		e=mkS( v,"sB_btnBrd-"+n,sB.selR/*"#880000"*/,"sB_btnBrd",false); et.push( e)} return et}
function mkI(x,y,X,Y,id,co,st,op,d){var r=document.createElementNS( nS,'line');
	r.setAttribute( 'x1',x);r.setAttribute( 'x2',X);r.setAttribute( 'y1',y);r.setAttribute( 'y2',Y);
	if( id){ 	r.setAttribute( 'id',id)}
	if( op){ 	r.setAttribute( 'opacity',op)}
	if( d){ 	r.setAttribute( 'stroke-dasharray',d)}
	r.setAttribute('stroke',co); r.setAttribute( 'stroke-width',st);return r}

//function processTurn(sim){}
function refreshSbTool( t){ 	var id ="sBTool-"+t; var e=document.getElementById( id); e.remove();
							   	var id ="sBToolT-"+t;var e=document.getElementById( id); e.remove();
								var T = mkSbTool( t,ui.sB); T.forEach( function(T){ svgFe.appendChild( T)})}
function sBToolMouseDown( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	AL.sBToolsP[t] =true; AL.moved =true; AL.playMouseDown =true;
							AL.fastForward =false; AL.prevFastForward =false;
							AL.skipForward =false; AL.prevSkipForward =false;
							AL.prevPlay =AL.play; AL.play =false;
							startTurn( AL.sim); console.log(t);refreshSbTool( t); 								break;
	case "fastForward" 	: 	AL.sBToolsP[t] =true; AL.moved =true; AL.fastForwardMouseDown =true;
							AL.play =false; AL.prevPlay =false;
							AL.skipForward =false; AL.prevSkipForward =false;
							AL.prevFastForward =AL.fastForward; AL.fastForward =false;
							startTurn( AL.sim); refreshSbTool( t); 								break;
	case "skip" 		: 	AL.sBToolsP[t] =true; AL.moved =true; AL.skipMouseDown =true;
							AL.play =false; AL.prevPlay =false; 
							AL.prevFastForward =false; AL.fastForward =false;
							AL.prevSkipForward =false; AL.skipForward =false;
							/*startSkip( AL.sim);*/ 												break;
	case "skipForward" 	: 	AL.sBToolsP[t] =true; AL.moved =true; AL.skipForwardMouseDown =true;
							AL.play =false; AL.prevPlay =false;
							AL.prevFastForward =false; AL.fastForward =false;
							AL.prevSkipForward =AL.skipForward; AL.skipForward =false;
							/*startSkip( AL.sim);*/ refreshSbTool( t)}}
function sBToolMouseUp  ( e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevPlay){ 	AL.prevPlay =true; AL.play =true }
							else{ 				AL.prevPlay =false;AL.play =false}
							refreshSbTool( t); 													break;
	case "fastForward" 	: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevFastForward){ 	AL.prevFastForward =true; AL.fastForward =true }
							else 					{ 	AL.prevFastForward =false;AL.fastForward =false}
							refreshSbTool( t); 													break;
	case "skip" 		: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true} 							break;
	case "skipForward" 	: 	AL.sBToolsP[t] =false;if( !AL.prevMoved){ AL.prevMoved =true}
							if( !AL.prevSkipForward){ 	AL.prevSkipForward =true; AL.skipForward =true }
							else 					{ 	AL.prevSkipForward =false;AL.skipForward =false}
							refreshSbTool( t)}}
function sBToolMouseLeave(e){ var t=parseInt(e.substr( e.indexOf('-')+1)); switch(AL.sBTools[t]){
	case "play" 		: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.playMouseDown){ 			AL.playMouseDown =false;
								AL.prevPlay =false;		 /*undoStartTurn(AL.sim);*/refreshSbTool(t)}break;
	case "fastForward" 	: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.fastForwardMouseDown){ 	AL.fastForwardMouseDown =false;
								AL.prevFastForward=false;/*undoStartTurn(AL.sim);*/refreshSbTool(t)}break;
	case "skip" 		: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.skipMouseDown){ 			AL.skipMouseDown =false;
	 							/*undoStartSkip( AL.sims, AL.sim)*/}								break;
	case "skipForward" 	: 	if( !AL.prevMoved && AL.moved && AL.sBToolsP[t]){ AL.moved =false}
							if( AL.skipForwardMouseDown){ 	AL.skipForwardMouseDown =false;
								AL.prevSkipForward =false; 	/*undoStartSkip( AL.sims, AL.sim);*/
								refreshSbTool(t)}}}
function sBTuneMoreMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									AL.sBTunes[t] +=AL.sBTunes[t]; 								}
function sBTuneLessMouseDown( e){ 	var t=parseInt(e.substr( e.indexOf('-')+1));
									AL.sBTunes[t] -=AL.sBTunes[t]; 								}
function sBTuneMouseDown( e){	var t=parseInt(e.substr( e.indexOf('-')+1)); switch( t){
	case 0 : AL.sBTunes[t] =prompt("Set play delay in 1/100 seconds:", 			AL.sBTunes[t]); 	break;
	case 1 : AL.sBTunes[t] =prompt("Set fast forward delay in 1/100 seconds:", 	AL.sBTunes[t]); 	break;
	case 2 : AL.sBTunes[t] =prompt("Set skip length:", 							AL.sBTunes[t]); 	break;
	case 3 : AL.sBTunes[t] =prompt("Set skip fast forward length:",				AL.sBTunes[t])}}
function clearTool(n){var e=Array.from(document.querySelectorAll('sB')); e.forEach( function(e){ e.remove()})}
function mkSbTool( n, sB){ var r=[]; var b; var l; var s; var y; var x=sB.disWid-(sB.rowHei/2);
	b=mkL( sB.disHrz+sB.disWid-sB.rowHei, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+1, sB.rowHei-2, sB.rowHei-2,
		"sBTool-"+n, "#555", "sBTool", undefined, 0, undefined, sB.rowHei/3.236);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBToolMouseDown( b.id);break;
											case "mouseup" 	 : sBToolMouseUp(b.id);   break;
											case "mouseleave": sBToolMouseLeave(b.id)}});r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+1, sB.disWid-sB.rowHei-4, sB.rowHei-2,
		"sBTune-"+n, "#555", undefined, undefined, 0, true, sB.rowHei/3.236); r.push(b);
	b=mkI( sB.disHrz,sB.fesHei+sB.HUDhei+(sB.rowHei*n)+(sB.rowHei/2),
		sB.disHrz+sB.disWid-sB.rowHei, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+(sB.rowHei/2),
		"sBTuneDeco"+n, sB.btnL, 3); r.push(b);
	b=mkT( sB.disHrz+Math.floor((sB.disWid-sB.rowHei)/2), sB.fesHei+sB.HUDhei+(sB.rowHei*n),
		"sBTuneMoreT-"+n, "#888", undefined, sB.rowHei/3.236, "▲", "arial", "middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+1,
		sB.disWid-sB.rowHei-4, Math.round(((sB.rowHei-2)/5)*2),
		"sBTuneMore-"+n, undefined,"sBTuneMore",undefined,undefined,undefined,undefined,undefined,"0");
	//sBTuneMoreMouseDown( e);
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMoreMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-sB.rowHei)/2, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+(sB.rowHei/1.618),
		"sBTuneLessT-"+n, "#888", undefined,sB.rowHei/3.236, "▼","arial","middle"); r.push(b);
	//mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+Math.round(((sB.rowHei-2)/5)*3),
		sB.disWid-sB.rowHei-4, Math.round(((sB.rowHei-2)/5)*3),
		"sBTuneLess-"+n, undefined,"sBTuneLess",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneLessMouseDown( b.id);break;}});
	r.push(b);
	b=mkT( sB.disHrz+(sB.disWid-sB.rowHei)/2+1, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+(sB.rowHei/3.7),
		"sBTuneT-"+n, "#fff", undefined,sB.rowHei/3, AL.sBTunes[n], "PF","middle"); r.push(b);
	b=mkL( sB.disHrz+2, sB.fesHei+sB.HUDhei+(sB.rowHei*n)+Math.round(((sB.rowHei-2)/5)*2),
		sB.disWid-sB.rowHei-4, Math.round(((sB.rowHei-2)/5)*2),
		"sBTune-"+n, 	undefined,"sBTune",undefined,undefined,undefined,undefined,undefined,"0");
	bindK( b, function(ev,b) { switch( ev){ case "mousedown" : sBTuneMouseDown( b.id);break;}});
	r.push(b);
	switch( AL.sBTools[n]){ 	
		case "play": 		if( AL.play){ l="❚❚"}else { l="►"}
							s =Math.floor(sB.rowHei/1.618); y =sB.fesHei+sB.HUDhei+(sB.rowHei*n)+3; break;
		case "fastForward": if( AL.fastForward)	{ 	l ="❚❚"; s =Math.floor(sB.rowHei/1.618);
												y = sB.fesHei+sB.HUDhei+(sB.rowHei*n)+3}
							else 				{ 	l ="►►"; s =Math.floor(sB.rowHei/3.236);
												y = sB.fesHei+sB.HUDhei+(sB.rowHei*n+3)+(sB.rowHei/5)} break;
		case "skip": 		l ="❚►"; s =Math.floor(sB.rowHei/1.618);
							y=sB.fesHei+sB.HUDhei+(sB.rowHei*n)+3; break;
		case "skipForward": if( AL.skipForward) { 	l ="❚❚"; s =Math.floor(sB.rowHei/1.618);
												y = sB.fesHei+sB.HUDhei+(sB.rowHei*n)+3}
							else 				{ 	l="❚►►"; s =Math.floor(sB.rowHei/3.236);
												y=sB.fesHei+sB.HUDhei+(sB.rowHei*n+3)+(sB.rowHei/5); break;}}
		/*case "reso" 		: l="⊞"; 							s=sB.rowHei;
			y=sB.fesHei+sB.HUDhei+(sB.rowHei*n)-(sB.rowHei/4)}*/
	t=mkT( sB.disHrz+x, y, "sBToolT-"+n, "#ffffff", undefined, s, l, "arial", "middle");r.push(t);
	return r}
function mkTurnCounter(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3, ui.sB.disWid, ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined, ui.sB.fnt,AL.sim.nI+":"+AL.sim.turn+AL.sim.keySubj.nI, "PF","end"); E.push(e); return E}
function mkResoTool(sim){ var E=[]; var e=null;
	e=mkL(ui.sB.disHrz,ui.sB.fesHei+3+ui.sB.HUDhei+ui.sB.tooHei, Math.round(ui.sB.disWid/1.618), ui.sB.HUDhei-6,undefined,ui.sB.HUDbg,undefined); E.push(e);
	e=mkT(ui.sB.disHrz+ui.sB.disWid-3,ui.sB.fesHei+2, undefined, "#ffffff", undefined, ui.sB.fnt,"reso", "PF"); E.push(e); return E}
function drSidebar(){ var obs=[];  var buf =null;
	buf =mkL(ui.sB.disHrz,ui.sB.disVrt,ui.sB.disWid,ui.sB.disHei,"sB",ui.sB.bG,"sB");
	obs.push(buf);
	for( var i=0; i < AL.fesL; i++){ 	buf =mkFb( i,ui.sB, AL.fes[i]); obs.push(buf);
										buf =mkFt( i,ui.sB, AL.fes[i]); obs.push(buf);
										buf =mkFr( i,ui.sB, AL.fes[i]); obs =obs.concat(buf)}
	if(AL.fe != "quiz"){ 	buf=mkTurnCounter( AL.sim); obs =obs.concat(buf);
							for( var n=0; n < AL.sBToolsL;n++){ buf =mkSbTool( n, ui.sB); obs=obs.concat(buf);
							/*buf=mkResoTool( AL.sim);*/ obs =obs.concat(buf)}}
	obs.forEach( function(obs){ svgFe.appendChild( obs)});
}
function sidebarKey( e){ var tab= parseInt(e.split("-").pop()); AL.fe=AL.fes[tab]; draw();}

function subjListKey( e){let s =e.split("-").pop(); s =AL.sim.subjs.find(o => o.nI ==s); 
 	if(AL.subj ==s){AL.tY 	=OM.ab.tYs.find(o =>o.ni ==AL.subj.tY.ni);
 					AL.mD 	=OM.ab.mDs.find(o =>o.ni ==AL.subj.mD.ni);
 					AL.pMd 	=OM.ab.mDs.find(o =>o.ni ==AL.subj.pMd.ni);
 					AL.sMd 	=OM.ab.tYs.find(o =>o.ni ==AL.subj.sMd.ni);
 					AL.pM 	=OM.ab.pMs.find(o =>o.ni ==AL.subj.pM.ni);
 					AL.pPm 	=OM.ab.pMs.find(o =>o.ni ==AL.subj.pPm.ni);
 					AL.sPm 	=OM.ab.pMs.find(o =>o.ni ==AL.subj.sPm.ni);
 					AL.gnd 	=OM.ab.gNs.find(o =>o.ni ==AL.subj.gnd.ni);
 					AL.pGn 	=OM.ab.gNs.find(o =>o.ni ==AL.subj.pGn.ni);
 					AL.sGn 	=OM.ab.gNs.find(o =>o.ni ==AL.subj.sGn.ni);
 					AL.sex 	=OM.ab.sXs.find(o =>o.ni ==AL.subj.sex.ni);
 					AL.subj =null}
 	else{			AL.tY  	=s.tY;
					AL.mD  	=s.mD;
					AL.gnd 	=s.mD.gnd;
					AL.pM 	=s.mD.pM;
					AL.subj =s} draw()}

function clearScreen(){
	var e=Array.from(document.querySelectorAll('div, svg, rect, text, polygon, line, circle, ellipse'));
 	e.forEach( function(e){ e.remove()})}
function draw(){
	if( AL.fe=='mosaic'){ AL.liNarrow =AL.liNarrowInMosaic}else{ AL.liNarrow =false}
	clearScreen(); initDraw(); drSidebar(); 
	switch( AL.fe){ 
		case "quiz": 	drawQuiz(); 	break;
		case "type": 	drawType(); 	break;
		case "mood": 	drawMood(); 	break;
		case "mosaic": 	drawMosaic(); 	break;}}
function bindK( e,c){
	e.addEventListener("mouseover", function(){ c("mouseover", e)});
	e.addEventListener("mousedown", function(){ c("mousedown", e)});
	e.addEventListener("mouseup", 	function(){ c("mouseup", e)});
	e.addEventListener("mouseleave",function(){ c("mouseleave", e)})}
function bindE( e,c){
	e.addEventListener("mouseover", function(){ c("mouseover", e)});
	e.addEventListener("mousedown", function(){ c("mousedown", e)})}

function bindMosaic( sel,c){ var e=Array.from(document.querySelectorAll( sel));
	e.forEach( function(e){ e.addEventListener("mouseover", function(){ 	c( "mouseover",	e)})});
	e.forEach( function(e){ e.addEventListener("mouseleave", function(){ 	c( "mouseleave",e)})});
	e.forEach( function(e){ e.addEventListener("mouseup", function(){ 		c( "mouseup",	e)})});
	e.forEach( function(e){ e.addEventListener("mousedown", function(){ 	c( "mousedown", e)})})}

AL.quiz = [
	{ l:"I want to be innocent.", r:"I like peace.", m:{}},
	{ l:"I cooperate.", r:"I understand.", m:{}},
	{ l:"I seek happiness.", r:"I seek freedom.", m:{}},
	{ l:"Cats", r:"Dogs", m:{}}]; AL.quizLen =AL.quiz.length;
function drawQuiz(){ var b =null; var B=[];
	//document.body.setAttribute( 'height', ui.qZ.disHei+(2*ui.qZ.disVrt))+"px";
	b =mkL(0,0,ui.winWid-ui.sB.disWid, ui.qZ.disHei+(2*ui.qZ.disVrt),
		undefined,ui.qZ.bG,undefined); B.push(b);
	b =mkL(ui.qZ.disHrz, ui.qZ.disVrt, ui.qZ.disWid, ui.qZ.disHei,undefined,"#fff",undefined,"#000"); B.push(b);
/*b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#0df",undefined,ui.qZ.capFnt,"Personality Test","StrikeFighter","middle",0.66); b.setAttribute( 'text-decoration', 'underline');*/ // #bbc
	b =mkE(ui.qZ.disHrz+(ui.qZ.disWid/2), ui.qZ.disVrt+ui.qZ.capFntG, (ui.qZ.disWid/2)-ui.qZ.capFnt,ui.qZ.capFnt,"#8df");
	b.setAttribute("filter","url(#f2)");B.push(b);
	b =mkT((ui.qZ.disWid/2)+ui.qZ.disHrz,ui.qZ.disVrt+ui.qZ.capVrt,undefined,"#fff",undefined,ui.qZ.capFnt,"Personality Test","SR","middle",0.75); b.setAttribute( 'text-decoration', 'underline'); B.push(b);
	for(var n=0; n<AL.quizLen; n++){ b=mkQuiz( AL.quiz[n], n); B=B.concat(b)}
	B.forEach( function(B){ svgQz.appendChild(B)});
	document.body.appendChild( divFe); 
	document.body.appendChild( divQz)}
function mkQuiz( q,n){ var b =null; var B=[];
	b =mkT( ui.qZ.disHrz+(ui.qZ.disWid*(2/6)), 	ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFntG+(n*ui.qZ.rowHei),
			undefined,"#000",undefined,ui.qZ.fnt, 	q.l,"TR","end"); 	B.push(b);
	b =mkT( ui.qZ.disHrz+(ui.qZ.disWid*(4/6)), 	ui.qZ.disVrt+(ui.qZ.capVrt*2)+ui.qZ.capFntG+(n*ui.qZ.rowHei),
			undefined,"#000",undefined,ui.qZ.fnt, 	q.r,"TR","start"); B.push(b);

 	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)-(ui.qZ.disWid/10),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_-2",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)-(ui.qZ.disWid/18),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_-1",undefined,2,"#000"); B.push(b);
	b =drC(ui.qZ.disHrz+(ui.qZ.disWid/2),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_0",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)+(ui.qZ.disWid/10),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_1",undefined,2,"#000"); B.push(b);
	b =drC( ui.qZ.disHrz+(ui.qZ.disWid/2)+(ui.qZ.disWid/18),
			ui.qZ.disVrt+(ui.qZ.capVrt*2)+(n*ui.qZ.rowHei)+ui.qZ.fntG+ui.qZ.capFntG,
		Math.floor(ui.qZ.fnt/1.618),"#fff","quiz_2",undefined,2,"#000"); B.push(b);
	return B}

function drawType(){ var b =null;
	AL.feInit =true;
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.tY.base,"tY");
	svgFe.appendChild( b);
	drTopBar();
	drTypeCube(ui.tY.c1x, ui.tY.c1y, "tYC1"); 	
	drTypeCage(ui.tY.c2x, ui.tY.c2y, "tYC2"); 	
	drSubjList();
	drSequencer( );						
	drTypeKeys();
	drTypeStage();					
	drBottomBar();
	AL.feInit =false;
	document.body.appendChild( divFe);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
}
//function mkI(x,y,X,Y,id,co,st,op,d)
//function mkL(x,y,w,h,id,co,cl,sC,sW,pE,rx,ry,op)
//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op){ 
function drBottomBar(){ var E=[]; var e=null;
	e=mkL(0,ui.midMinHei,ui.winWid,ui.bB.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkL(ui.bB.divWid,ui.midMinHei+ui.bB.skrHei,ui.bB.skrHei,ui.bB.disHei-ui.bB.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkL(0,ui.midMinHei+ui.bB.tipHei,ui.bB.divWid,ui.bB.skrHei,undefined,ui.sB.bG); E.push(e);
	e=mkT(ui.bB.rimHei,ui.midMinHei+ui.bB.skrHei+ui.bB.rimHei,undefined,"#fff",undefined,20,"ntn","SF"); E.push(e);
	e=mkT(ui.bB.rimHei,Math.round(ui.midMinHei+ui.bB.tipHei/2+ui.bB.skrHei),undefined,"#fff",undefined,20,"xtn","SF"); E.push(e);
	E.forEach( function(e){ svgFe.appendChild(e)})}

function copySimulation(sim,n){ console.log("copy")}
function tBToolMouseDown( n){ 	 						AL.tBToolsP[n] 	=true; 	refreshTbTool( n)}
function tBToolMouseLeave( n){ if( AL.tBToolsP[n]){ 	AL.tBToolsP[n] 	=false; refreshTbTool( n)}}
function tBToolMouseUp( n){ switch( AL.tBTools[n]){
	case "clearSubjs" : if( !AL.touched){ 	tBToolClearSubjs()}
						else{ var v =confirm("Delete all subjects in all simulations?");
							if(v){ 			tBToolClearSubjs()}}break;
	case "copySim" : 	var N =prompt("How many copies of simulation "+AL.sim.nI+"?", "20");
							copySimulation(AL.sim,n);break;
	case "delSim" : 	if( OM.re.simsL >1){ var v =confirm("Delete this simulation?");
							if(v){ 			tBToolDelSim( AL.sim)}}break;
	case "delSims" : 	if( OM.re.simsL >1){ var v =confirm("Delete all untagged simulations?");
 							if(v){ 			tBToolDelSim( AL.sim)}}}
	tBToolMouseLeave( n)}
function mkTbTool( n){ var E =[]; var e =null; var t,f,T,F,y,Y; var p =0; var P=4;
	if(!AL.tBToolsP[n]){
		e =mkL( ui.tB.tooWid*n+1, 2,  ui.tB.tooWid-2, ui.tB.disHei-4, 	undefined, "#3c3c3c", "tBTool-"+n,
			undefined,undefined,true, 		ui.tB.disHei/3.236,ui.tB.disHei/3.236);E.push( e);
		e =mkL( ui.tB.tooWid*n+1, 2,  ui.tB.tooWid-2, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		ui.tB.disHei/3.236,ui.tB.disHei/3.236);E.push( e);}
	else{ p =P;
		e =mkL( ui.tB.tooWid*n+1, 2+P,ui.tB.tooWid-2, ui.tB.disHei-4-P, undefined, "#555555", "tBTool-"+n,
			undefined,undefined,true, 		ui.tB.disHei/3.236,ui.tB.disHei/3.236);E.push( e)}
	if( AL.feInit){
		e =mkL( ui.tB.tooWid*n+1, 2, ui.tB.tooWid-2, ui.tB.disHei-4-P, undefined,undefined,undefined,
			undefined,undefined,undefined,ui.tB.disHei/3.236,ui.tB.disHei/3.236,"0")}	
	bindK( e, function(ev,e) { switch( ev){ case "mouseleave": tBToolMouseLeave(n);break;
											case "mouseup"   : tBToolMouseUp  ( n);break;
											case "mousedown" : tBToolMouseDown( n);break}});E.push(e);
	switch( AL.tBTools[n]){
		case "clearSubjs":t="clr"; 		T="subjs";	y=0; Y=12; 	f=15; F=15;		break;
		case "copySim" 	: t="copy"; 	T="Sim"; 	y=0; Y=12; 	f=15; F=15;		break;
		case "delSim" 	: t="del"; 		T="Sim";	y=0; Y=12; 	f=15; F=15; 	break;
		case "delSims" 	: t="del"; 		T="Sims";   y=0; Y=12;  f=15; F=15}
	e 		=mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), y+p, undefined,"#ccc","tBTool-"+n,f,t,"PF","middle");E.push(e);
	if(T){e =mkT( ui.tB.tooWid*n+(ui.tB.tooWid/2), Y+p, undefined,"#ccc","tBTool-"+n,F,T,"AI","middle");E.push(e)}
	return E}
function refreshTbTool( n){ var t ="tBTool-"+n; var e =document.getElementsByClassName( t);
							for (var i =e.length -1; i >=0; --i){ e[i].remove()}
							t =mkTbTool( n); t.forEach( function( e){ svgFe.appendChild( e)})} //xxx sVfE->sVtB

function mkTab(n){ var E=[]; var e=null; var t;
	n==-1 ? t="µ" : t=n+1;
	e = mkL( ui.tB.tabGap+(n*ui.tB.tabGap)+(n*ui.tB.tabWid), 3, ui.tB.tabWid, ui.tB.tabHei,
		undefined, ui.sB.bG, undefined, ui.tB.strCol, 1,undefined,8,8); E.push(e);
	e = mkT( ui.tB.tabGap+(n*ui.tB.tabGap)+(n*ui.tB.tabWid)+Math.floor(ui.tB.tabWid/2), 3,
		undefined, "#ccc", undefined, 20, t, "PF","middle"); E.push(e);
	return E}
function drTopBar(){ var E=[]; var e=null; var T=[]; var t=null;
	e=mkL(0,0,/*ui.winWid-ui.sB.disWid*/ui.tB.disHrz,ui.tB.disHei,undefined,ui.sB.bG); E.push(e);
	for(var n=0; n<AL.tBToolsL; n++){ e =mkTbTool(n); E=E.concat(e)}
	E.forEach( function(e){svgFe.appendChild(e)}); 

	t=mkL(0, 0, ui.tB.disWid, ui.tB.disHei-ui.tB.skrHei, "tB_bg", ui.tB.bG, "tB"); T.push(t);
	for(var n=0; n<OM.re.simsLen; n++){ t =mkTab(n); T=T.concat(t);}
	if(OM.re.simsL > 1){ t =mkTab(-1); T=T.concat(t); }
	t=mkL(0, ui.tB.skrVrt, ui.tB.disWid, ui.tB.skrHei,undefined,ui.sB.bG); T.push(t);
	t=mkI(0, ui.tB.disHei-ui.tB.skrHei, ui.tB.disWid, ui.tB.disHei-ui.tB.skrHei,undefined,ui.tB.strCol,1); T.push(t);
	T.forEach( function(t){svgTb.appendChild(t)})}

function drTypeCube(cX,cY,cl){ var e; var E=[]; var v; var w=ui.tY.cE; var h=ui.tY.cE; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane; var x=cX+h/d+ui.tY.cuHrz; var y=cY+h/d+ui.tY.cMarg;
	v =  x - (w/d)+","+(y+(h/2)+(h/d)) +" "+			(x + (w/d)+","+(y+(h/2)-(h/d)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)))+" "+			(x+w-(w/d)+","+(y+(h/2)+(h/d)));
	e =drS(v, ui.tY.cShade, id+"-cU-hrz", cl, op); 		E.push(e);
	v =  x - (w/d)+","+(y+(h/2)+(h/d)-(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)-(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)-(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-top", cl, op);		E.push(e);
	v =  x - (w/d)+","+(y+(h/2)+(h/d)+(h/2)) +" "+		(x + (w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+
		(x+w+(w/d)+","+(y+(h/2)-(h/d)+(h/2)))+" "+		(x+w-(w/d)+","+(y+(h/2)+(h/d)+(h/2)));
	e =drS(v, ui.tY.cShade, id+"-cU-btm", cl, op/1.618);E.push(e);
	v =  x + (w/2)-(w/d)+","+(y + (h/d)) +" "+			(x + (w/2)+(w/d)+","+(y - (h/d)))+" "+
		(x + (w/2)+(w/d)+","+(y+h-(h/d)))+" "+			(x + (w/2)-(w/d)+","+(y+h+(h/d)));		
	e =drS(v, ui.tY.cShade, id+"-cU-vrt", cl, op); 		E.push(e);
	e =drA(x+(w/d),	y-(h/d),w,h,co,id+"-btm",cl+"-btm pAIU",0,undefined,op); 		E.push(e);

	v = x+(w/4)+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4))+" "+
		(x+(w/2))+","+(y+(h/8))+" "+ 				(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4));
	e =drS(v, ui.tY.cIE, cl+"_IE-npp", cl); E.push(e);
	v = x+(w/4)+(w/2)+","+(y+(h/8)+(h/4)-(h/4))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4))+" "+
		(x+(w/2)+(w/2))+","+(y+(h/8))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4));
	e =drS(v, ui.tY.cIE, cl+"_IE-ppp", cl); E.push(e);
	v = x+(w/4)+(w/2)+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4)+(w/2))+","+(y+(w/4)-(h/4)+(h/2))+" "+
		(x+(w/2)+(w/2))+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4)+(w/2))+","+(y+(w/2)-(h/4)+(h/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-pnp", cl); E.push(e);
	v = x+(w/4)+","+(y+(h/8)+(h/4)-(h/4)+(h/2))+" "+ 		(x+(w/8)+(w/4))+","+(y+(w/4)-(h/4)+(h/2))+" "+
		(x+(w/2))+","+(y+(h/8)+(h/2))+" "+ 				(x+(w/8)+(w/4))+","+(y+(w/2)-(h/4)+(h/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-nnp", cl); E.push(e);

	e =drA(x, 		y, 		w,h,co,id+"-mid",cl+"-mid pAIU",0,undefined,op/1.618);	E.push(e);

	v = x+	","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8))+","+(y+(w/4))+" "+
		(x+(w/4))+","+(y+(h/4)+(h/8))+" "+ 		(x+(w/8))+","+(y+(w/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-npn", cl); E.push(e);
	v = x+(w/2)+","+(y+(h/8)+(h/4))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4))+" "+
		(x+(w/4)+(w/2))+","+(y+(h/4)+(h/8))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-ppn", cl); E.push(e);
	v = x+(w/2)+","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8)+(w/2))+","+(y+(w/4)+(h/2))+" "+
		(x+(w/4)+(w/2))+","+(y+(h/4)+(h/8)+(h/2))+" "+ 	(x+(w/8)+(w/2))+","+(y+(w/2)+(h/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-pnn", cl); E.push(e);
	v = x+	","+(y+(h/8)+(h/4)+(h/2))+" "+ 			(x+(w/8))+","+(y+(w/4)+(h/2))+" "+
		(x+(w/4))+","+(y+(h/4)+(h/8)+(h/2))+" "+ 		(x+(w/8))+","+(y+(w/2)+(h/2));
	e =drS(v, ui.tY.cIE, cl+"_IE-nnn", cl); E.push(e);

	e =drA(x-(w/d),	y+(h/d),w,h,co,id+"-top",cl+"-top pAIU",0,undefined,op/1.618);		E.push(e);

	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)+(h/2)),cl+"_IET-nnn","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[0][0][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-nnn","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[0][0][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)+(h/2)),cl+"_IET-pnn","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[2][0][0].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)+(h/2)),cl+"_IEN-pnn","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[2][0][0].val,"tahoma","middle");E.push(e);*/

	e=mkT(x+(w/8)+1+(w/2),(y+(h/32)+(h/4)),cl+"_IET-ppn","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[2][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8)+(w/2),(y+(h/8)+(h/4)),cl+"_IEN-ppn","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[2][2][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/8)+1,(y+(h/32)+(h/4)),cl+"_IET-npn","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[0][2][0].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/8),(y+(h/8)+(h/4)),cl+"_IEN-npn","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[0][2][0].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)+(h/2)),cl+"_IET-nnp","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[0][0][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/2)+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[0][0][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8),(y+(h/32)),cl+"_IET-npp","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[0][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8),(y+(h/8)),cl+"_IEN-nnp","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[0][2][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)),cl+"_IET-ppp","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[2][2][2].ni,"PF","middle"); E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/8)),cl+"_IEN-ppp","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[2][2][2].val,"tahoma","middle"); E.push(e);*/

	e=mkT(x+(w/4)+1+(w/8)+(w/2),(y+(h/32)+(h/2)),cl+"_IET-pnp","#ffffff",cl+"_IET",
		w/11,OM.ab.absSpace[2][0][2].ni,"PF","middle");E.push(e);
	/*e=mkT(x+(w/4)+(w/8)+(w/2),(y+(h/2)+(h/8)),cl+"_IEN-pnp","#ffffff",cl+"_IEN",
		w/22,OM.ab.absSpace[2][0][2].val,"tahoma","middle");E.push(e);*/

	E.forEach( function(E){svgFe.appendChild(E)})}

function drTypeCage(cX,cY,cl){

	function drAr(x,y,X,Y,lx,ly,lz){ var o =AL.tY.relSpace[lx][ly][lz];
		var cNi=o.ni; var col,stC,tCo; var cSD, cVD, cMD; var dash; var stW=w/65;
		if(!AL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}}
		else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}
			if(AL.fac.ni ==o.ni){ var fil ="url(#f3)"; var fr=w/13+5; var fCo="#ffffff"
				if(o.val){ 	col="#ffffff"; stC="#ff8888"; tCo ="#000000";}
				else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
			if(AL.subj.opts.includes(o)){ var fil ="url(#f3)"; var fr=w/15+5;
				if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
				else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}
		var cS =o.str; if(cS){ cSD="S"} else{ cSD="s"}
		var cV =o.val; if(cV){ cVD="V"} else{ cVD="v"}
		var cM =o.mnt; if(cM){ cMD="M"} else{ cMD="m"}
		if(!cM){ dash=w/105+","+w/105}
		//if(!cV){ co ="#6688ff"; stC=co; col="#334488"}
		//if(AL.subj.opts.includes(o)){ stC="#fff"}
		var E=[];var e=null;var id="_cUC-";var dx=false;var dy=false;var dz=false;var st;
		if(lx==2){ id+="p"} else if(lx==1){ id+="t"; dx=true;}else if(lx==0){ id+="n"}
		if(ly==2){ id+="p"} else if(ly==1){ id+="t"; dy=true;}else if(ly==0){ id+="n"}
		if(lz==2){ id+="p"} else if(lz==1){ id+="t"; dz=true;}else if(lz==0){ id+="n"}
		switch(o.str){ case true: st=Math.round(w/8); break; case false: st=Math.round(w/13)}
		if(dx){
			if( o.aDi== 1){ x += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/6))+","+y+" "+x+","+(y+(w/14))+" "+x+","+(y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC);  										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}
			else if( o.aDi== -1){ X -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/6))+","+Y+" "+X+","+(Y+(w/14))+" "+X+","+(Y-(w/14));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}}
		if(dy){
			if( o.aDi== 1){ y += w/4;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/14))+","+y+" "+(x+(w/14))+","+y+" "+x+","+(y-(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}
			else if( o.aDi== -1){ Y -= w/4;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X-(w/14))+","+Y+" "+(X+(w/14))+","+Y+" "+X+","+(Y+(w/6));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}}
		if(dz){
			if( o.aDi== -1){ x += w/6; y-= w/6;
				if(fil){ e=drC(x,y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (x-(w/18))+","+(y-(w/18))+" "+(x-(w/9))+","+(y+(w/9))+" "+(x+(w/18))+","+(y+(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(x,y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(x+1,y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(x+1,y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}
			else if( o.aDi== 1){ Y += w/6; X -= w/6;
				if(fil){ e=drC(X,Y,fr,fCo); e.setAttribute("filter",fil); 						E.push(e)}
				v = (X+(w/18))+","+(Y+(w/18))+" "+(X+(w/9))+","+(Y-(w/9))+" "+(X-(w/18))+","+(Y-(w/18));
				e =drS(v, stC, id+"_head"); 													E.push(e);
				e =drC(X,Y,w/13,col,"jou","jou",stW,stC); 										F.push(e);
				e =mkT(X+1,Y-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(X+1,Y-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}
			else if( o.aDi== 0){ cY = Y+ w/4.5; cX = X- w/4.5;
				if(fil){ e=drC(cX,cY,fr,fCo); e.setAttribute("filter",fil); 					E.push(e)}
				e =drC(cX,cY,w/13,col,"jou","jou",stW,stC); 									F.push(e);
				e =mkT(cX+1,cY-(w/11),undefined,tCo,undefined,w/13,cNi,"PF","middle"); 			F.push(e);
				e =mkT(cX+1,cY-(w/60),"jou",tCo,"jou",w/17,cVD+cSD+cMD,"PF", "middle");			F.push(e)}}
		e=mkI(x,y,X,Y,id,stC,st,undefined,dash); E.push(e); return E}

	function drFu(cx,cy,lx,ly,lz,o){ var E=[];var e=null;var cSD,cVD,cMD,col,co,stC,dash;
		if(!AL.subj){ 		col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}}
		else{ 				col="#334488"; stC="#6688ff"; tCo="#ffffff";
			if(o.val){ 		col="#880000"; stC="#ff0000"}
			if(AL.fac.ni ==o.ni){ var fil ="url(#f3)"; var fr=w/10+8; var fCo="#ffffff"
				if(o.val){ 	col="#ffffff"; stC="#ffacac"; tCo ="#000000";}
				else{ 		col="#ffffff"; stC="#bbddff"; tCo ="#000000";}}
			if(AL.subj.opts.includes(o)){ var fil ="url(#f3)"; var fr=w/12+8;
				if(o.val){ 	col="#ffd8d8"; stC="#ff8888"; tCo ="#ff0000"; var fCo="#ff0000";}
				else{ 		col="#d0e0ff"; stC="#88bbff"; tCo ="#0000ff"; var fCo="#8888ff";}}}
		var st=w/65;var cl1="_cUF";var id1=cl1+"-";var cl2="_fuT";var id2=cl2+"-";var cl3="_fuN";var id3=cl3+"-"; 
		if(o.str){ cSD="S"; st=w/25}else{ cSD="s"}
		if(o.val){ cVD="V"} 		else{ cVD="v"}
		if(o.mnt){ cMD="M"} 		else{ cMD="m"; dash=w/105+","+w/105}
		if(lx==2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(ly==2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(lz==2){ id1+="p"; id2+="p"; id3+="p"} else { id1+="n"; id2+="n"; id3+="n"}
		if(fil){ e=drC(cx,cy,fr,fCo); e.setAttribute("filter",fil); E.push(e)}
		e=drC(cx,cy,w/10,col,cl1,id1,st,stC,dash); 									E.push(e);
		e=mkT(cx+1,cy-(w/11),id2,tCo,cl2,w/11,o.ni2,"PF","middle"); 		E.push(e);
		e=mkT(cx+1,cy-(w/60),id3,tCo,cl3,w/17,cVD+cSD+cMD,"PF","middle");E.push(e); return E}

	var e; var E=[]; var F=[]; var v; var w=ui.tY.cE; var h=ui.tY.cE; var id=cl; var d=ui.tY.cuD; var op=ui.tY.op2; var co=ui.tY.plane; var x=cX+h/d+ui.tY.cuHrz; var y=cY+h/d+ui.tY.cMarg;

	e =drAr(x+(w/4)+w/16,	y-(w/8),			x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,1,2);E=E.concat(e);
	e =drAr(x+w+(w/8),		y-(w/8),			x+w+(w/8),		y-(w/4)-(w/16)+h,	2,1,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/16,	y-(w/8),			x+w+(w/8),		y-(w/8),			1,2,2);E=E.concat(e);
	e =drAr(x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	x+w+(w/8),		y-(w/4)-(w/16)+h,	1,0,2);E=E.concat(e);

	e =drAr(x-(w/8),		y+(w/4)+(w/16), 	x+(w/4)+w/16,	y-(w/8), 			0,2,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	x+w+(w/8),		y-(w/8), 			2,2,1);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,0,1);E=E.concat(e);
	e =drAr(x-(w/4)-(w/16)+w,y+(w/8)+h,			x+w+(w/8),		y-(w/4)-(w/16)+h,	2,0,1);E=E.concat(e);

	e =drAr(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	x-(w/4)-(w/16)+w,y+w/8+h,			2,1,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/16),		x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	1,2,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/8)+h,			x-(w/4)-(w/16)+w,y+(w/8)+h,			1,0,0);E=E.concat(e);
	e =drAr(x-(w/8),		y+(w/4)+(w/16),		x-(w/8),		y+w/8+h,			0,1,0);E=E.concat(e);

	e =drFu(x-(w/8),		y+(w/4)+(w/16), 	0,2,0,AL.tY.relSpace[0][2][0]); E=E.concat(e);
	e =drFu(x-(w/8),		y+(w/8)+h,			0,0,0,AL.tY.relSpace[0][0][0]); E=E.concat(e);
	e =drFu(x-(w/4)-(w/16)+w,y+(w/4)+(w/16),	2,2,0,AL.tY.relSpace[2][2][0]); E=E.concat(e);
	e =drFu(x-(w/4)-(w/16)+w,y+(w/8)+h,			2,0,0,AL.tY.relSpace[2][0][0]); E=E.concat(e);
	e =drFu(x+(w/4)+w/16,	y-(w/8),			0,2,2,AL.tY.relSpace[0][2][2]); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/8),			2,2,2,AL.tY.relSpace[2][2][2]); E=E.concat(e);
	e =drFu(x+w+(w/8),		y-(w/4)-(w/16)+h,	2,0,2,AL.tY.relSpace[2][0][2]); E=E.concat(e);
	e =drFu(x+(w/4)+w/16,	y-(w/4)-(w/16)+h,	0,0,2,AL.tY.relSpace[0][0][2]); E=E.concat(e); E=E.concat(F);
	E.forEach( function(E){svgFe.appendChild(E)})}

function drSubjList(){ var E=null; var e=null; var liI="";liT="";liB=""; var off; var absB; var F=[];var G=[];
	switch( AL.liSize){
		case 0: ui.lI.iHe=ui.lI.iHe0; ui.lI.tPF=ui.lI.tPF0; ui.lI.tTR=ui.lI.tTR0; ui.lI.tSF=ui.lI.tSF0;	ui.lI.mDx=ui.lI.mDx0;
				ui.lI.kix=ui.lI.kix0; ui.lI.mPx=ui.lI.mPx0; ui.lI.obx=ui.lI.obx0; ui.lI.vQx=ui.lI.vQx0; ui.lI.nMx=ui.lI.nMx0;
				ui.lI.miW=ui.lI.miW0; break;
		case 1: ui.lI.iHe=ui.lI.iHe1; ui.lI.tPF=ui.lI.tPF1; ui.lI.tTR=ui.lI.tTR1; ui.lI.tSF=ui.lI.tSF1;
				ui.lI.mDx=ui.lI.mDx1; ui.lI.nMx=ui.lI.nMx1; break;
		case 2: ui.lI.iHe=ui.lI.iHe2; ui.lI.tPF=ui.lI.tPF2; ui.lI.tTR=ui.lI.tTR2; ui.lI.tSF=ui.lI.tSF2;
				ui.lI.mDx=ui.lI.mDx2; ui.lI.nMx=ui.lI.nMx2; break;}
	ui.lI.svgHei =ui.tB.disHei+(AL.subjsL*ui.lI.iHe+2); svgLi.setAttribute( 'height', ui.lI.svgHei);
	svgLi.setAttribute( 'width', ui.lI.miW);
	var ctrHei=ui.tB.disHei;
	var lisLen=18;
	var lisHei =ui.winHei-ui.bB.disHei-ctrHei;
	var lisY =ctrHei;
	var width = ui.lI.miW;
	e =mkL( 0, ui.tB.disHei, ui.tY.lIW, ui.tY.liHe,"tY_L",ui.sB.bG,"tY_L_bg");											svgFe.appendChild( e);
	for(var n=0; n <AL.sim.subjsL; n++){
		if( 	AL.sim.subjs[n]==AL.subj)	{ liI="#ffffff"; liT="#000000"; liB="#000000"; 	E=G}
		else if(AL.sim.subjs[n]==AL.keySubj){ liI=ui.tY.sLiI;liT=ui.tY.sLiT;liB=ui.tY.sLiB; E=G}
		else 								{ liI=ui.tY.liI; liT=ui.tY.liT; liB=ui.tY.liB; 	E=F}					
		e =mkL(1, ui.lI.iHe*n+ctrHei+1,width-2,ui.lI.iHe,"tY_Li-"+AL.sim.subjs[n].nI,liI,"tY_Li",liB,1);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : subjListKey( e.id);break}});									E.push(e);
		e =mkT(4,(ui.lI.iHe*n)-1+ctrHei,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tPF,
			AL.sim.subjs[n].nI+" "+AL.sim.subjs[n].tY.ni+"("+AL.sim.subjs[n].tYl.ni2+","+AL.sim.subjs[n].tYl.ab.ni+")","PF"); 	E.push(e);
		if(AL.sim.subjs[n].pMd.symm){ var liT2="#ffff00"} else{ var liT2=liT}
		if(!AL.sim.subjs[n].sex.fem){ if(!AL.sim.subjs[n].sex.kid){ off=ui.lI.mDx+ui.lI.kix; absB="♂("} else{ off=ui.lI.mDx; absB="*♂("}}
		else 						{ if(!AL.sim.subjs[n].sex.kid){ off=ui.lI.mDx+ui.lI.kix; absB="♀("} else{ off=ui.lI.mDx; absB="*♀("}}
		e =mkT(off, (ui.lI.iHe*n)-1+ctrHei,"tY_LiB-"+n,liT2,"tY_LiB",ui.lI.tTR,
			absB+AL.sim.subjs[n].pPm.niH+AL.sim.subjs[n].pGn.nI+AL.sim.subjs[n].pPm.niT+")","TR");								E.push(e);
		if(!AL.sim.subjs[n].gnd.fem){ if(!AL.sim.subjs[n].obj){ off=ui.lI.mPx; absB="♂"} else{ off=ui.lI.mPx-ui.lI.obx; absB="'♂"}}
		else 						{ if(!AL.sim.subjs[n].obj){ off=ui.lI.mPx; absB="♀"} else{ off=ui.lI.mPx-ui.lI.obx; absB="'♀"}}
		if(AL.sim.subjs[n].i){ absB+="i"} if(AL.sim.subjs[n].e){ absB+="e"} absB+="(";
		e =mkT(off, (ui.lI.iHe*n)-1+ctrHei+1,"tY_LiP-"+n,liT2,"tY_LiP",ui.lI.tTR,
			absB+AL.sim.subjs[n].x+","+AL.sim.subjs[n].y+")","TR");															E.push(e);
		e =mkT(ui.lI.vQx, (ui.lI.iHe*n)-1+ctrHei+1,"tY_LiP-"+n,liT2,"tY_LiP",ui.lI.tTR,
			"= "+AL.sim.subjs[n].xtn.ni,"AI");///*"= ("+*//*AL.sim.subjs[n].ntn.nI+*/"("+/*AL.sim.subjs[n].xtn.nI+*/"))","AI");	
		E.push(e);
		e =mkT(ui.lI.nMx,(ui.lI.iHe*n)-1+ctrHei+1,"tY_LiT-"+n,liT,"tY_LiT",ui.lI.tSF,AL.sim.subjs[n].nM.full,"SF"); 			E.push(e)}
	E=F.concat(G);	E.forEach( function(E){svgLi.appendChild(E)})}

function typeKeyMouseDown( e){ var tY= parseInt(e.split("-").pop()); tY=AL.Sociotypes.seed[tY]; tY=mkType( tY,OM.ab);
	if( AL.subj){ 	AL.subj.tY=tY; AL.tY=tY; /*mkSignal( o,"f5",0,0); mkOptions( o);*/}
	else if( AL.tY!=tY){ AL.tY=tY;} else { AL.tY =null}draw()}
function typeKeyMouseOver( e){ var tY =parseInt(e.split("-").pop()); var src=null;
	if( AL.subj){ src=AL.subj.tYs}

}
function drTypeKeys(){ var E=[]; var e=null; var area, areaB, areaT;
	for(var n=0; n<16; n++){
		if((AL.tY==null)||(OM.ab.tYs[n].ni != AL.tY.ni)){ area=ui.tY.area; areaB=ui.tY.areaB; areaT=ui.tY.areaT; }
		else 							{ area=ui.tY.selArea; areaB=ui.tY.selAreaB; areaT=ui.tY.selAreaT; }
		e =mkL(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap))-ui.sB.disWid,ui.tY.keY,ui.tY.keyWid-1,ui.tY.keyWid-1,"tY_Keys-"+n,area,"tY_Keys",areaB,2);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : typeKeyMouseDown( e.id);break;
												case "mouseover" : typeKeyMouseOver( e.id);break;
												case "mouseleave" :typeKeyMouseLeave( e.id);break}}); E.push(e); //åöä
		e=mkT(ui.tY.keX+(n*(ui.tY.keyWid+ui.tY.keyGap))+(ui.tY.keyWid/2)-1-ui.sB.disWid,ui.tY.keY+(ui.tY.keyWid/7)-1,
		undefined,areaT,undefined,ui.tY.keyWid/1.6,AL.Sociotypes.seed[n],"SF","middle"); E.push(e)}
	E.forEach( function(E){svgFe.appendChild(E)}); }
function drTypeStage(){ 
 	var E=[]; var e=null; var x=ui.tY.cuHrz-(ui.tY.cMarg/2);
	var e=mkT(x, ui.tY.stY-(ui.tY.cE/2)+(ui.tY.keyWid/5), "-stg", "#ffffff", "stg", (2*ui.tY.cE)/5, AL.tY.zo, "SR","middle");
	e.setAttribute("filter","url(#f1)"); E.push(e);
	var e=mkT(x, ui.tY.stY-(ui.tY.cE/2)+(ui.tY.keyWid/5), "-stg", "#ffffff", "stg", (2*ui.tY.cE)/5, AL.tY.zo, "SR","middle");
	e.setAttribute('opacity',0.62);E.push(e);
	if(AL.subj!=null){ 
		var e=mkT(ui.tY.keX-ui.sB.disWid, ui.tY.stY-(ui.tY.cE/12)+ui.tY.keyGap+(ui.mD.keH/3),
		"-stg", "#ffffff", "stg", ui.tY.cE/6,AL.subj.nI+". "+AL.subj.nM.full, "PF","left");E.push(e)}
	var e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stY-(ui.tY.cE/12)+ui.tY.keyGap+(ui.mD.keH/3),
		undefined,"#fff",undefined,ui.tY.cE/6,AL.tY.ni,"PF","end");E.push(e)
	E.forEach( function(E){svgFe.appendChild(E)})}

function drSequencer(){ var E=[]; var e=null;
	e= mkL(0,0,ui.sQ.disWid,ui.sB.disHei-ui.tB.disHei,"tY_sQ",ui.sQ.bG,"tY_sQ");				E.push(e);
	E.forEach( function(E){svgSq.appendChild(E)})}

function mosaicTextColor(c){ if(c.v > 68){ return "#000000"} else{ return "#ffffff"}}
function drMoodPlane(){ var e; var E=[];
	if(AL.mD){ 
		var pL =null;
		AL.mosaicForm ? pL =AL.mD.xY : pL =AL.mD.bG; 
		var w =ui.mD.plW /AL.R -( ui.tY.cMarg /( AL.R /2));var h =ui.mD.plH /AL.R -( ui.tY.cMarg /( AL.R /2));
		var X=ui.mD.plX+(ui.tY.cMarg); var Y=ui.mD.plY+(ui.tY.cMarg);
		e =mkL(ui.mD.plX, ui.mD.plY, ui.mD.plW, ui.mD.plH,"mD_plane-","#000000","mD_plane"); E.push(e);
		var mD =mkNullMatrix( AL.R,AL.R);
		for(var y =0; y <AL.R; y++){
			for(var x =0; x <AL.R; x++){
				mD[y][x] = hsvToRgb(pL[y][x].h, pL[y][x].s, pL[y][x].v);
				mD[y][x] = rgbToHex(mD[y][x].r, mD[y][x].g, mD[y][x].b);
				e=mkL( w*x+X, h*y+Y, w, h, "test", mD[y][x]);	E.push(e);
				e=mkT(w*x+X+3, h*y+Y-h/8, false, mosaicTextColor( pL[y][x]),false,h/2,"V: "+pL[y][x].V,
					"PF", false, 1/1.618); E.push(e);
				//function mkT(x,y,id,co,cl,fonSiz,txt,fonFam,anc,op)
				e=mkT(w*x+X+3, h*y+Y-(h/8)+(h/2), "test", mosaicTextColor(pL[y][x]), "test",h/2,"K: "+pL[y][x].K,
					"PF", false, 1/1.618); E.push(e);
				/*e=mkT(w*x+X+1, h*y+Y-5+(h/3), "test", mosaicTextColor(q[y][x]), "test",h*(2/3),AL.pE.mo.qU[y][x].Q ,"StrikeFighter");*/ E.push(e);}}}
		E.forEach( function(E){svgFe.appendChild(E)})}
function moodKey( e,prim){
	if(AL.subj){
		var pM= parseInt(e.split("-").pop()); pM=AL.PrimalMoods.seed[pM];
		var b = AL.subj.pMs.find(function(e){ return e.ni =pM}); b ? pM =b : pM =mkPm( pM,OM.ab,AL.subj.pMs);
		if(prim){ 	//var gnd= mkBeing(AL.pE.pGn.ni);
				//AL.subj.pMd =combineMoodAndBeing(pM, bE);
				//function getMood( sex,gnd,pM,from)
				//åöä
				//if( o.mDs)
				AL.subj.pMd =copyMood( AL.subj.sex, AL.subj.pGn, AL.subj.pPm, AL.ab.mDs, OM.ab);
				AL.mD = AL.subj.pMd;  	AL.pMd =AL.subj.pMd; 		
				AL.pGn= AL.subj.pGn;		AL.gnd =AL.subj.pGn; 		
				AL.pPm= AL.subj.pMd.pM;	AL.pM  =AL.subj.pMd.pM}
		else { 	//var bE= mkBeing(AL.subj.sGn.ni);
				//AL.subj.sMd=combineMoodAndBeing( pM, bE);
				AL.subj.sMd =copyMood( AL.subj.sex, AL.subj.sGn, AL.subj.sPm, AL.ab.mDs, OM.ab);
				AL.mD = AL.subj.sMd; 		AL.sMd= AL.subj.sMd;	
				AL.sGn= AL.subj.sGn; 		AL.gnd= AL.subj.sGn;
				AL.sPm= AL.subj.sMd.pM; 	AL.pM = AL.subj.sMd.pM}
		draw();}}
function sexKey( e){
	var sex =parseInt(e.split("-").pop()); sex =AL.Sexes.seed[sex];
	if(AL.subj){
		sex =getObjByNi( sex,AL.subj.sXs);
		if( sex.fem != AL.subj.sex.fem){ var bu=null;
			bu 			=AL.subj.sMd;
			AL.subj.sMd =AL.subj.pMd;
			AL.subj.pMd =bu;
			AL.mD  		=AL.subj.pMd;
			AL.pMd 		=AL.subj.pMd;
			AL.sMd 		=AL.subj.sMd;

			bu 			=AL.subj.sGn;
			AL.sex 		=AL.subj.sex;
			AL.gnd 		=AL.subj.pGn;
			AL.pGn 		=AL.subj.pGn;
			AL.sGn 		=AL.subj.sGn;

			bu 		 	=AL.subj.sMd.pM;
			AL.sPm 		=AL.subj.sMd.pM;
			AL.pM 		=AL.subj.pMd.pM;
			AL.pPm 		=AL.subj.pMd.pM;
			}
		AL.subj.sex =sex;
		draw()}
	else{
		sex =getObjByNi( sex,OM.ab.sXs);
		if(AL.sex==sex){AL.sex =null}
		else{ 			AL.sex =sex }
		draw()}}
function genderKey( e){
	var gnd =parseInt(e.split("-").pop()); gnd =AL.Genders.seed[gnd];
	if(AL.subj){
		gnd =getObjByNi( gnd,AL.subj.gNs);
		if(gnd.fem == AL.subj.sex.fem){
			//var pM= mkPrimalMood(AL.pE.pMd.pM.ni);
			//AL.subj.pMd =combineMoodAndBeing(pM, bE);
			AL.mD =AL.subj.pMd; 		AL.pMd =AL.subj.pMd;
			AL.gnd=AL.subj.pGn; 		AL.pGn =AL.subj.pGn;
			AL.pM =AL.subj.pMd.pM;	AL.pPm =AL.subj.pMd.pM}
		else{
			//var pM= mkPrimalMood(AL.pE.sMd.pM.ni);
			//AL.subj.sMd=combineMoodAndBeing(pM, bE);
			AL.mD = AL.subj.sMd; 		AL.sMd = AL.subj.sMd;
			AL.gnd= AL.subj.sGn; 		AL.sGn = AL.subj.sGn;
			AL.pM = AL.subj.sPm;		AL.sPm = AL.subj.sPm}	
		draw(); }
	else if( AL.bE==null){ AL.bE=bE;} else if(AL.bE!=bE){AL.bE=bE} else { AL.bE=null}}
function drMoodKeys(){ var e; var E=[]; var keyC, keyS, symC; var p;
	for(let n=0; n<OM.ab.sXsL; n++){
		if(( AL.sex ==null)||( OM.ab.sXs[n].ni != AL.subj.sex.ni)){
			keyC =ui.mD.key2; keyS =ui.mD.stroke2; keyF =ui.mD.selTxt}
		//else if(OM.ab.sXs[n].ni == AL.sBe.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(OM.ab.sXs[n].ni ==AL.subj.sex.ni) 	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.kex+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY-(ui.mD.keH*2)-ui.tY.keyGap,ui.mD.keW-1,ui.mD.keH-4,
			"mD_sexKey-"+n,keyC,"mD_sexKeys",keyS,2);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : sexKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.kex+(ui.mD.keW/2)+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY-(ui.mD.keH*2)-ui.tY.keyGap,
			"mD_sexKeyTxt",keyF,"mD_sexKeyTxt-",0.55*ui.tY.keyWid,OM.ab.sXs[n].nI+"( )","TR","middle"); E.push(e); }

	for(let n=0; n<OM.ab.gNsL; n++){
		if((AL.gnd==null)||((OM.ab.gNs[n].ni != AL.subj.pGn.ni)&&(OM.ab.gNs[n].ni != AL.subj.sGn.ni)))
												{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; keyF=ui.mD.selTxt; }
		else if(OM.ab.gNs[n].ni ==AL.subj.sGn.ni)	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	keyF=ui.mD.selTxt; }
		else if(OM.ab.gNs[n].ni ==AL.subj.pGn.ni)	{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; keyF=ui.mD.key2; }
		e=mkL(ui.mD.kex+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY-ui.mD.keH-ui.tY.keyGap, ui.mD.keW-1, ui.mD.keH-4,
			"mD_gndKey-"+n,keyC,"mD_gndKeys",keyS,2);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : genderKey( e.id);break}});E.push(e);
		e=mkT(ui.mD.kex+(ui.mD.keW/2)+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY-ui.mD.keH-ui.tY.keyGap,
			"mD_gndKeyTxt",keyF,"mD_gndKeyTxt-",0.55*ui.tY.keyWid,OM.ab.gNs[n].nI,"TR","middle");E.push(e);}

	for(let n=0; n <OM.ab.pMsL; n++){
		//var m=combineMoodAndBeing(OM.ab.pMs[n], AL.pE.pGn );
		var m =getMood( AL.sex, AL.gnd, AL.obj, AL.pM, OM.ab.mDs);
		if((AL.pM==null)||(OM.ab.pMs[n].ni != AL.subj.pPm.ni)){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt }
		else if(AL.pM.ni ==OM.ab.pMs[n].ni && AL.gnd.ni == AL.subj.pGn.ni)
														{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(AL.pE.sMo.pM.ni == OM.ab.pMs[n].ni)*/		{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt; 	symC=ui.mD.selTxt}
		if(m.sSym){ symC = "#ffff00"; } else if(m.cSym){ symC = "#ff00ff"}
		//if(AL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.kex+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY, ui.mD.keW-1,ui.mD.keH-4,
			"mD_pMdKey-"+n,keyC,"mD_pMdKeys",keyS,2);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,true);break}});E.push(e);
		e=mkT(ui.mD.kex+(ui.mD.keW/2)+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY+ui.mD.keH/12,
			"mD_pMdKeyTxt",symC,"mD_pMdKeyTxt-",0.45*ui.tY.keyWid,
			OM.ab.pMs[n].niH+AL.subj.pGn.nI+OM.ab.pMs[n].niT,"TR","middle"); E.push(e);}

	for(let n=0; n<OM.ab.pMsL; n++){
		//var m=combineMoodAndBeing(OM.ab.pMs[n], AL.pE.sGn );
		if((AL.pM==null)||(OM.ab.pMs[n].ni != AL.subj.sPm.ni))
													{ keyC=ui.mD.key2; 		keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
		else if(AL.pM.ni ==OM.ab.pMs[n].ni && AL.gnd.ni == AL.subj.sGn.ni)	
													{ keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2; }
		else /*if(AL.pE.sMo.pM.ni == OM.ab.pMs[n].ni)*/	{ keyC=ui.mD.selKey2; 	keyS=ui.mD.selTxt;  symC=ui.mD.selTxt;}
		if(m.symm){ symC = "#ffff00"; }
		//if(AL.mD.symm){ keyS="#ffff00"}
		e=mkL(ui.mD.kex+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY+ui.mD.keH, ui.mD.keW-1,ui.mD.keH-4,
			"mD_sMdKey-"+n,keyC,"mD_sMdKeys",keyS,2);
		bindK( e, function(ev,e) { switch( ev){ case "mousedown" : moodKey( e.id,false);break}});E.push(e);
		e=mkT(ui.mD.kex+(ui.mD.keW/2)+(n*(ui.mD.keW+ui.tY.keyGap)), ui.tY.keY+ui.mD.keH+ui.mD.keH/12,
			"mD_mKeyTxt",symC,"mD_sMdKeyTxt-",0.45*ui.tY.keyWid,OM.ab.pMs[n].niH+AL.subj.sGn.nI+OM.ab.pMs[n].niT,"TR","middle"); E.push(e);}

	if( AL.mD.obj){ keyC=ui.mD.key2; keyS=ui.mD.stroke2; symC=ui.mD.selTxt;}
	else { keyC=ui.mD.selTxt; 	keyS=ui.mD.selKey2; symC=ui.mD.key2;}
	e=mkL(ui.mD.kex, ui.tY.keY+(ui.mD.keH*2)+ui.tY.keyGap, ui.mD.keW-1,ui.mD.keH-4,
		"mD_objKey",keyC,"mD_objKeys",keyS,2); E.push(e);
	e=mkT(ui.mD.kex+(ui.mD.keW/2), ui.tY.keY+(ui.mD.keH*2)+ui.tY.keyGap+ui.mD.keH/6,"mD_objKeyTxt",symC,"mD_objKeyTxt-",0.33*ui.tY.keyWid,"object","AI","middle"); E.push(e);

	E.forEach( function(E){svgFe.appendChild(E)})}

function drMoodDisp(){ var e; var E=[]; var mFDC; var lHead, rHead, lMF, rMF, lAriV, rAriV, lAriK, rAriK;
	if( AL.mD.sSym){ mFDC="#ffff00"} else if( AL.mD.cSym){ MFDC="#ff00ff"} else{ mFDC="#00ff00"}
	if(!AL.mosaicForm){ lHead="Bad"; rHead="Good"; lMF=AL.mD.bMF; rMF=AL.mD.gMF;
		lAriV=AL.mD.bAriV; rAriV=AL.mD.gAriV; lAriK=AL.mD.bAriK; rAriK=AL.mD.gAriK;}
	else{ if( !AL.gnd.fem){ lHead="Bad"; rHead="Good"; lMF=AL.mD.xMF; rMF=AL.mD.yMF;
		lAriV=AL.mD.xAriV; rAriV=AL.mD.yAriV; lAriK=AL.mD.xAriK, rAriK=AL.mD.yAriK;}
	else{ lHead="Good"; rHead="Bad"; lMF=AL.mD.xMF; rMF=AL.mD.yMF;
		lAriV=AL.mD.xAriV; rAriV=AL.mD.yAriV; lAriK=AL.mD.xAriK, rAriK=AL.mD.yAriK;}}

	e=mkL(ui.mD.kex, ui.mD.plY, ui.mD.disWid, ui.mD.taH, undefined, ui.mD.key); E.push(e);

	e=mkI(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY, ui.mD.kex+(ui.mD.disWid/2), ui.mD.taH+ui.mD.plY, undefined, ui.mD.base, 4); E.push(e);

	e=mkL(ui.mD.kex, ui.mD.plY+ui.mD.tRL, ui.mD.disWid, ui.mD.tRH,
		"mD_disp-binder", ui.mD.key, "mD_disp", ui.mD.base,4); E.push(e);
	e=mkL(ui.mD.kex, ui.mD.plY+ui.mD.tRL+ui.mD.tRH, ui.mD.disWid, ui.mD.tRH,
		"mD_disp-binder", ui.mD.key, "mD_disp", ui.mD.base,4); E.push(e);
	e=mkL(ui.mD.kex, ui.mD.plY+ui.mD.tRL+(2*ui.mD.tRH), ui.mD.disWid, ui.mD.tRH,
		"mD_disp-binder", ui.mD.key, "mD_disp", ui.mD.base,4); E.push(e);

	e=mkL(ui.mD.kex+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,
		"mD_disp",ui.mD.selKey,"mD_disp",ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.cMarg/1.618); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid/4, 	 ui.mD.plY+ui.mD.tRL+(ui.mD.fRH2/1.3), "mD_dispTxt-gMF",
		mFDC,	"mD_dispTxt",	0.7*ui.mD.fRH2, lMF, "TR", "middle"); E.push(e);
	e=mkL(ui.mD.kex+ui.mD.disWid/2+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,
		"mD_disp",ui.mD.selKey,"mD_disp",ui.mD.stroke3,1,ui.tY.cMarg,ui.tY.cMarg/1.618); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid-(ui.mD.disWid/4), 	ui.mD.plY+ui.mD.tRL+(ui.mD.fRH2/1.3), "mD_dispTxt-bMF",
		mFDC, "mD_dispTxt", 0.7*ui.mD.fRH2, rMF, "TR", "middle"); E.push(e);

	e=mkL(ui.mD.kex+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+ui.mD.tRH+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,
		"mD_disp",ui.mD.dis,"mD_disp",ui.mD.disStr,1); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid/4, 	 ui.mD.plY+ui.mD.tRL+ui.mD.tRH+(ui.mD.fRH2/1.3),
		"mD_dispTxt-gV",	"#ffff00",	"mD_dispTxt", 0.7*ui.mD.fRH2, lAriV, "PF", "middle"); E.push(e);
	e=mkL(ui.mD.kex+ui.mD.disWid/2+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+ui.mD.tRH+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,"mD_disp",ui.mD.dis,"mD_disp",ui.mD.disStr,1); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid-(ui.mD.disWid/4), ui.mD.plY+ui.mD.tRL+ui.mD.tRH+(ui.mD.fRH2/1.3),
		"mD_dispTxt-bV",	"#ffff00",	"mD_dispTxt",	0.7*ui.mD.fRH2, rAriV, "PF", "middle"); E.push(e);

	e=mkL(ui.mD.kex+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+(ui.mD.tRH*2)+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,
		"mD_disp",ui.mD.dis,"mD_disp",ui.mD.disStr,1); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid/4, ui.mD.plY+ui.mD.tRL+(ui.mD.tRH*2)+(ui.mD.fRH2/1.3),
		"mD_dispTxt-gK",	"#ffff00",	"mD_dispTxt",	0.7*ui.mD.fRH2, lAriK, "PF", "middle"); E.push(e);
	e=mkL(ui.mD.kex+ui.mD.disWid/2+(ui.tY.cMarg/1.618), ui.mD.plY+ui.mD.tRL+(ui.mD.tRH*2)+(ui.mD.fRH2/1.3),
		ui.mD.disWid/2-(2*(ui.tY.cMarg/1.618)), ui.mD.fRH2,
		"mD_disp",ui.mD.dis,"mD_disp",ui.mD.disStr,1); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid-(ui.mD.disWid/4), ui.mD.plY+ui.mD.tRL+(ui.mD.tRH*2)+(ui.mD.fRH2/1.3),
		"mD_dispTxt-bK",	"#ffff00",	"mD_dispTxt",	0.7*ui.mD.fRH2, rAriK, "PF", "middle"); E.push(e);

	e=mkT(ui.mD.kex+(ui.mD.disWid/4), ui.mD.plY, "mD_disp-good", ui.mD.stroke, "mD_disp",
		ui.mD.fRL2/2, "Horizontal", "PF", "middle"); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid-(ui.mD.disWid/4), ui.mD.plY, "mD_disp-good", ui.mD.stroke, "mD_disp",
		ui.mD.fRL2/2, "Vertical", "PF", "middle"); E.push(e);
	e=mkT(ui.mD.kex+(ui.mD.disWid/4), ui.mD.plY+(ui.mD.fRL2/2.5), "mD_disp-good", ui.mD.stroke, "mD_disp",
		ui.mD.fRL, lHead, "SR", "middle"); E.push(e);
	e=mkT(ui.mD.kex+ui.mD.disWid-(ui.mD.disWid/4), ui.mD.plY+(ui.mD.fRL2/2.5), "mD_disp-good", ui.mD.stroke, "mD_disp",
		ui.mD.fRL, rHead, "SR", "middle"); E.push(e);
	var formText ="";
	if( AL.mosaicForm){ formText ="Mosaic Form"} else{ formText ="Modal Form"}
	e=mkT(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL-2, "mD_disp-good", ui.mD.hilTxt, "mD_disp",
		ui.mD.fRH2/1.618, formText, "PF", "middle"); E.push(e);
	e=mkT(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL+ui.mD.tRH-2, "mD_disp-good", ui.mD.hilTxt, "mD_disp",
		ui.mD.fRH2/1.618, "Value", "PF", "middle"); E.push(e);
	e=mkT(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL+(2*ui.mD.tRH)-2, "mD_disp-good", ui.mD.hilTxt, "mD_disp",
		ui.mD.fRH2/1.618, "Karma", "PF", "middle"); E.push(e);

	e=mkI(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL+ui.mD.fRH2,
		ui.mD.kex+(ui.mD.disWid/2), ui.mD.tRL+ui.mD.tRH+ui.mD.plY, undefined, ui.mD.base, 4); E.push(e);
	e=mkI(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL+ui.mD.tRH+ui.mD.fRH2,
		ui.mD.kex+(ui.mD.disWid/2), ui.mD.tRL+ui.mD.tRH+ui.mD.tRH+ui.mD.plY,undefined, ui.mD.base, 4); E.push(e);
	e=mkI(ui.mD.kex+(ui.mD.disWid/2), ui.mD.plY+ui.mD.tRL+(2*ui.mD.tRH)+ui.mD.fRH2,
		ui.mD.kex+(ui.mD.disWid/2), ui.mD.tRL+(3*ui.mD.tRH)+ui.mD.plY,undefined,ui.mD.base, 4); E.push(e);

	E.forEach( function(E){svgFe.appendChild(E)}); /*document.body.appendChild( sVfE);*/ }

function drMoodStage(){ 
if(AL.subj!=null){ var E=[]; var e=null; var x=ui.tY.cuHrz-(ui.tY.cMarg/2); var mFS;
	if(AL.mD.symm){ mFS="#ffff00"} else{ mFS="#88ff88"}
	var mDisp = AL.mD.pM.niH + AL.mD.gnd.nI + AL.mD.pM.niT
	var e=mkT(ui.tY.keX-ui.sB.disWid, ui.tY.stY-ui.tY.cE/12+ui.tY.keyGap+(ui.mD.keH/3),
		"-stg", mFS, "stg", ui.tY.cE/6,AL.subj.nI+". "+AL.subj.nM.full, "PF","start");E.push(e);
	if(AL.subj.pMd.ni == AL.mD.ni){
		var e=mkT(x, ui.tY.stY-(ui.tY.cE/2.5)+ui.tY.keyGap+(ui.mD.keH/2),
			"-stg", mFS, "stg", (2*ui.tY.cE)/8, AL.mD.nI, "SF","middle");
		e.setAttribute("filter","url(#f1)"); E.push(e);}
	var e=mkT(x, ui.tY.stY-(ui.tY.cE/2.5)+ui.tY.keyGap+(ui.mD.keH/2),
		"-stg", mFS, "stg", (2*ui.tY.cE)/8, AL.mD.nI, "SF","middle");
	e.setAttribute('opacity',0.62);E.push(e);
	var e=mkT(ui.winWid-ui.tY.cMarg-ui.sB.disWid, ui.tY.stY-(ui.tY.cE/12)+ui.tY.keyGap+(ui.mD.keH/3),
		undefined,mFS,undefined,ui.tY.cE/6, mDisp, "TR","end"); E.push(e);
	E.forEach( function(E){svgFe.appendChild(E)}); }}
function drawMood(){var b =null;
	AL.feInit =true;
	b =mkL(ui.tY.disHrz,ui.tY.disVrt,ui.tY.disWid,ui.tY.disHei,"tY",ui.mD.base,"tY");
	svgFe.appendChild( b);
	drTopBar();
	drMoodPlane();
	drMoodKeys();
	drMoodDisp();
	drMoodStage();
	drSubjList();
	drSequencer();
	drBottomBar();
	AL.feInit =false;
	document.body.appendChild( divFe);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
}

function mosaicKeyMouseOver(mX,mY) 	{ previewMove( mX, mY)}
function mosaicKeyMouseDown(mX,mY) 	{ AL.moved =attemptMove( mX, mY)}
function mosaicKeyMouseUp(mX,mY) 	{ if(AL.moved){ processSubTurn( AL.sim, mX, mY); AL.moved=false}}

function drMosaicDisp(){
	var pC, tC;	var r =2*AL.R; var pRow=2; var pCol=1;
	if(AL.sim.subjs.length > 2){ pRow=4; pCol=2}
	if(AL.sim.subjs.length > 8){ pRow=6; pCol=3}
	var w= Math.floor(ui.mP.disWid/r); // tile width
	var h= Math.floor((ui.winHei-ui.bB.tipHei-ui.tB.disHei)/r); // tile height
	var X= Math.round((ui.mP.disWid-(r*w))/2)+ui.mP.liW+ui.sQ.disWid; // screen offset x
	var Y= Math.round(((ui.winHei-ui.bB.tipHei+ui.tB.disHei)-(r*h))/2); // screen offset y
	var pW=Math.floor((w-pRow)/pRow); // person width
	var pH=Math.floor((h-pCol)/pCol); // person height
	var fOff=2; if(pH < 12){ fOff=0}
	var c; var e; var E=[]; var E2=[];
	for(var y=0; y <r; y++){ for(var x=0; x <r; x++){
		c =AL.keySubj.mP[y][x];
		c = hsvToRgb(c.h, c.s, c.v);
		c = rgbToHex(c.r, c.g, c.b);
		e=mkL(w*x+X, h*y+Y, w, h, "mP_"+x+"-"+y, c, "mP", "#666", 1); E.push(e);
		if(AL.keySubj.sMp[y][x]){
			var subjs =chunkArray(AL.keySubj.sMp[y][x],pRow);
			for(var i=0; i<subjs.length;i++){
				for(var j=0; j<subjs[i].length;j++){
					pC=subjs[i][j].mP[y][x];
					tC=mosaicTextColor(pC);
					pC=hsvToRgb( pC.h, pC.s, pC.v);
					pC=rgbToHex( pC.r, pC.g, pC.b);
					e=mkL(w*x+X+(j*(pW))+j+1, h*y+Y+(i*(pH))+1, pW, pH,
						undefined,pC, "mP_P",tC,undefined,false,3,3);
					E2.push(e);
					e=mkT(w*x+X+(j*(pW))+(pW/2)+j+1, h*y+Y+(i*(pH))-fOff-1,
						undefined,tC,"mP_PT",pH,subjs[i][j].nI,"PF","middle");
					E2.push(e);	}}}}}
	E=E.concat(E2);
	E.forEach( function(E){svgFe.appendChild(E)});
	bindMosaic( '.mP', function(ev,e) {
		var mX=e.id.split("_").pop(); var mY=parseInt(mX.split("-").pop()); mX=parseInt(mX.split("-")[0]);
		switch(ev){ case "mouseover" 	: mosaicKeyMouseOver( mX,mY); 				break;
					case "mousedown" 	: mosaicKeyMouseDown( mX,mY); 				break;
					case "mouseup" 		: mosaicKeyMouseUp( mX,mY); 				break;
					case "mouseleave" 	: mosaicKeyMouseUp( mX,mY); 				break;}})}
function drawMosaic(){
	AL.feInit =true;
	drTopBar();
	drSubjList();
	drSequencer();
	drMosaicDisp();
	drBottomBar();
	AL.feInit =false;
	document.body.appendChild( divFe);
	document.body.appendChild( divTb);
	document.body.appendChild( divLi);
	document.body.appendChild( divSq);
}


function resizeWindow(){ predraw();draw()}
window.addEventListener("resize", resizeWindow, true);



function coinToss() { return ( Math.floor( Math.random() * 2) == 0)}
function isEven(n){ n =Number(n); return n === 0 || !!(n && !(n%2))}
function isOdd(n) { return isEven(Number(n) + 1)}
function union (x, y) { var obj = {}; var res = [];
	for (var i = x.length-1; i >= 0; -- i) obj[x[i]] = x[i];
	for (var i = y.length-1; i >= 0; -- i) obj[y[i]] = y[i];
	for (var k in obj) { if (obj.hasOwnProperty(k))/*<-optional*/res.push(obj[k])}return res}
function shuffle(a) { var j, x, i;
    for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1));
        x = a[i]; 	a[i] = a[j]; 	a[j] = x}return a}
function chunkArray(arr, chunkL){ var index=0; var arrL=arr.length; var ret=[];    
	for (index =0; index <arrL; index +=chunkL){
		chunk =arr.slice(index, index+chunkL); ret.push(chunk)}return ret}



function mkAbsSubj( 	ni,definable,pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj){}
function Subj( ni,	 pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj){
	mkSubj2( this,ni,pcReso,pcFem,pcKid,pcFin,pcTys,pcPms,pcPureBad,pcInvMor,pcPureGood,pcObj)}
function mkSubj2(s,ni, reso,  fem,  kid,  fin,  tY ,pM,   pureBad,  invMor,  pureGood,  obj){
		s.ni=ni; s.ab={}; s.re={};
		var b=null;s.sex=null;s.gnd=null;s.nM =null;s.weird=false;s.away=false;
		s.pMd=null;s.pGn=null;s.pPm=null;s.sMd=null;s.sGn=null;s.sPm=null;
		s.mMd=null;s.mPm=null;s.fMd=null;s.fPm=null;s.mGn=null;s.fGn=null;
		s.mSb=null;s.fSb=null;s.mOb=null;s.fOb=null;
		s.tYl=null;s.opts=null;
		s.ntR=null;s.ntC=null;s.ntn=null;s.xtR=null;s.xtC=null;s.xtn=null;
	s.tYs =[]; s.nMs=[]; s.mDs =[]; s.pMs =[]; s.gNs =[]; s.sXs =[];
	s.reso =reso;			s.fem =fem; 			s.kid =kid; 			s.fin =fin; 			s.obj =obj;
	s.pureBad=pureBad;		s.invMor=invMor;		s.pureGood=pureGood; 	if( pureBad||invMor){ s.weird=true}

	if 		( !s.fem &&!s.kid){ s.height=175; s.radius=25}
	else if ( !s.fem && s.kid){ s.height=130; s.radius=15}
	else if (  s.fem &&!s.kid){ s.height=165; s.radius=25}
	else if ( !s.fem && s.kid){ s.height=130; s.radius=15}

	console.log(tY);
	s.tY =mkType( 	tY, AL.sim, s); 	s.fAs =s.tY.fAs;

	s.pMd =OM.ab.mDs.filter( mD => mD.sex.fem ==s.fem)
						.filter( mD => mD.sex.kid ==s.kid)
							.filter( mD => mD.obj ==s.obj);
	s.pMd =rmMoods( s.pMd, pM, fin, pureBad, invMor, pureGood); 
	s.pMd =mkMood( 	s.pMd[Math.floor(Math.random()*s.pMd.length)].ni, AL.sim, s.mDs); 			s.mD =s.pMd;

	if( !s.pMd.sex.fem) { 	if(!s.pMd.obj){ s.mSb =s.mD;
											s.mOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mOb =mkMood( s.mOb, AL.sim, s.mDs)}
							else{  			s.mOb =s.mD;
											s.mSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.mSb =mkMood( s.mSb, AL.sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fOb =mkMood( s.fOb, AL.sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.pMd.sex, s.pMd.gnd, !s.pMd.obj, s.pMd.pM);
											s.fSb =mkMood( s.fSb, OM.ab, s.mDs)}}

	s.nM =mkName( 	s.pMd.gnd.fem, s.pMd.gnd.kid, s.fin, s.weird, undefined, s);

	s.sex =mkSex( 	s.pMd.sex.ni, AL.sim, s);

	s.pGn =mkGender(s.pMd.gnd.ni, AL.sim, s); s.gnd =s.pGn;
	s.pPm =mkPm( 	s.pMd.pM.ni,  AL.sim, s); s.pM =s.pPm;
	if( !s.pMd.sex.fem){ s.mMd=s.pMd; s.mPm=s.pPm} else { s.fMd=s.pMd; s.fPm=s.pPm}

	s.sMd =OM.ab.mDs.filter(mD=>mD.sex.fem!=s.fem);
	s.sMd =rmMoods( s.sMd, pM, fin, pureBad, invMor, pureGood);
	s.sMd =mkMood( 	s.sMd[Math.floor(Math.random()*s.sMd.length)].ni, AL.sim, s.mDs);

	if( !s.sMd.sex.fem) { 	if(!s.sMd.obj){ s.mSb =s.sMd;
											s.mOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mOb =mkMood( s.mOb, AL.sim, s.mDs)}
							else{  			s.mOb =s.sMd;
											s.mSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.mSb =mkMood( s.mSb, AL.sim, s.mDs)}}
	else 				{ 	if(!s.pMd.obj){ s.fSb =s.mD;
											s.fOb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fOb =mkMood( s.fOb, AL.sim, s.mDs)}
							else{  			s.fOb =s.mD;
											s.fSb =mkMoodNi( s.sMd.sex, s.sMd.gnd, !s.sMd.obj, s.sMd.pM);
											s.fSb =mkMood( s.fSb, AL.sim, s.mDs)}}

	s.sGn =mkGender(s.sMd.gnd.ni, AL.sim, s);
	s.sPm=mkPm( 	s.sMd.pM.ni,  AL.sim, s);
	if( !s.sMd.gnd.fem){ s.mMd=s.sMd; s.mPm=s.sPm} else{ s.fMd=s.sMd; s.fPm=s.sPm}

	if( !s.pGn.fem){ s.mGn=s.pGn; s.fGn=s.sGn} else{ s.mGn=s.sGn; s.fGn=s.pGn}

	s.mP =mkMp( s);

	s.ab.sQs =precalcScalarQualities( AL.ScalarQualities.seed, s.tY.iEs, 	AL.sim, s);
	s.ab.vQs =precalcVectorQualities( AL.VectorQualities.seed, s.ab.sQs,	AL.sim, s);
	
//mkSq( ni,iEs,parent)
	OM.re.subjs.push( s); OM.re.subjsL++;
}
function rmMoods( a, pM, fin, pureBad, invMor, pureGood){ var b =[]; var B =false;
	for( var i =0; i <a.length; i++){ B =pM.includes( a[i].pM.ni); if(B){ b.push( a[i])}}
	if( fin){ 	b =b.filter( o => !o.pureBad && !o.invMor)}return b}
function mkInputs( s){
	o.PHEN_4_1 = mkSq("PHEN_4_1", OM.ab, )//ååå
}
function mkSignal(s,fac){ s.tYl =s.fAs.find( f =>f.ni==fac);
	s.tAx=s.tYl.tAx;s.tAy=s.tYl.tAy;s.tAz=s.tYl.tAz;s.tRx=s.tYl.tRx;s.tRy=s.tYl.tRy;s.tRz=s.tYl.tRz;
	s.tAX=s.tYl.tAX;s.tAY=s.tYl.tAY;s.tAZ=s.tYl.tAZ;s.tRX=s.tYl.tRX;s.tRY=s.tYl.tRY;s.tRZ=s.tYl.tRZ;
	if(!s.xtR){ s.xtR=initXtR( s); s.xtC=initXtC( s); s.xtn=initXtn( s); }
	var x=0; var y=0; s.x=x; s.y=y;
	s.gnd.fem ? 		s.mPy = y +s.reso 		: s.mPy = y +(s.reso*3)+1; 
	s.gnd.fem ? s.obj ? s.mPx = x +(s.reso*3)+1 : s.mPx = x +s.reso :
				s.obj ? s.mPx = x +(s.reso*3)+1 : s.mPx = x +s.reso;
	if( 	s.gnd.fem&&  s.obj){if(x <1){isOdd(x) ? s.e=true : s.i=true}if(x>-1){isOdd(x) ? s.i=true : s.e=true}}
	else if(s.gnd.fem&& !s.obj){if(x>-1){isOdd(x) ? s.e=true : s.i=true}if(x <1){isOdd(x) ? s.i=true : s.e=true}}
	else{ 						if(y <1){isOdd(y) ? s.e=true : s.i=true}if(y>-1){isOdd(y) ? s.i=true : s.e=true}}
	while( s.mPx >((s.reso*4)+2)){ s.mPx -=((s.reso*4)+2)}while( s.mPx <0){ s.mPx +=((s.reso*4)+2)}
	while( s.mPy >((s.reso*4)+2)){ s.mPy -=((s.reso*4)+2)}while( s.mPy <0){ s.mPy +=((s.reso*4)+2)}
	//console.log(s.tYl);
	//if(!s.rom){ s.rom =m( s.tYl.ab)}
	/*if(!s.xtn){*/ /*s.xtn =initXtn( s.tYl.ab, s.ntn)*//*}*/}
function mkOptions(s){ s.opts=[];
	function getOpts( x,y,z,d){ switch(d){
		case "x" : 	if(s.tY.relSpace[z][y][0] != s.tYl){ s.opts.push(s.tY.relSpace[z][y][0])}
					if(s.tY.relSpace[z][y][1] != s.tYl){ s.opts.push(s.tY.relSpace[z][y][1])}
					if(s.tY.relSpace[z][y][2] != s.tYl){ s.opts.push(s.tY.relSpace[z][y][2])}break;
		case "y" : 	if(s.tY.relSpace[z][0][x] != s.tYl){ s.opts.push(s.tY.relSpace[z][0][x])}
					if(s.tY.relSpace[z][1][x] != s.tYl){ s.opts.push(s.tY.relSpace[z][1][x])}
					if(s.tY.relSpace[z][2][x] != s.tYl){ s.opts.push(s.tY.relSpace[z][2][x])}break;
		case "z" : 	if(s.tY.relSpace[0][y][x] != s.tYl){ s.opts.push(s.tY.relSpace[0][y][x])}
					if(s.tY.relSpace[1][y][x] != s.tYl){ s.opts.push(s.tY.relSpace[1][y][x])}
					if(s.tY.relSpace[2][y][x] != s.tYl){ s.opts.push(s.tY.relSpace[2][y][x])}}}
	if(!s.tYl.hasOwnProperty('lon')){
		getOpts( s.tAX,s.tAY,s.tAZ,"x");getOpts( s.tAX,s.tAY,s.tAZ,"y");getOpts( s.tAX,s.tAY,s.tAZ,"z")}
	else if(s.tYl.lon){ getOpts( s.tAX,s.tAY,s.tAZ,"x")}
	else if(s.tYl.ver){ getOpts( s.tAX,s.tAY,s.tAZ,"y")}
	else if(s.tYl.lat){ getOpts( s.tAX,s.tAY,s.tAZ,"z")}}
/*	if(!s.tYl.hasOwnProperty('lon')){
		x =tYl.tRx;

	}
}*/


/*	if(!s.tYl.hasOwnProperty('lon')){
		if(!s.ntn){	s.ntn=mkVectorByInformationElement(s.tYl.ab);

					s.opt=mkOptionsByInformationElement(s.ntn)}
		else{ 		s.xtn=mkVectorByInformationElement(s.tYl.ab);
					s.prd=mkPredicate( s.ntn,s.xtn);
					s.opt=mkOptionsByInformationElement(s.ntn,s.xTn)}
	}
*/


	/*loc=fNs.find(f=>f.ni==loc); console.log(loc);
	dir=cRs.find(c=>c.ni==dir); console.log(dir);
	return s}
*/				
/*function awaySubj( sims,nIs,subj){
	for( var i =0; i <sims.length; i++){ //ööö
		sims[i].
	}
	subj.away =true}*/


function mkMoodNi( sex,gnd,obj,pM){ var mD;
	obj ? mD ="obj" : mD ="sbj";
	mD =sex.ni+"_"+gnd.ni+"_"+mD+"_";
	pM.head ? mD+="p_" : mD+="m_";
	for(let n=0; n < pM.tail.length; n++){
		switch(pM.tail[n]){ case "+" : mD = mD + "p"; break;
							case "-" : mD = mD + "m"; break;
							case "x" : mD = mD + "b"; break}}
	return mD}
function getMood( sex,gnd,obj,pM,from){ 
	var mD =mkMoodNi( sex,gnd,obj,pM);
	mD =getObjByNi( mD,from); return mD}

/*function getMoodOld(pm,be){ var mood ="_";
	if(pm.head){ mood = "n"+mood }
	mood = mood + be.ni + "_";
	for(let n=0; n < pm.tail.length; n++){
		switch(pm.tail[n]){ case "+" : mood = mood + "p"; break;
							case "-" : mood = mood + "n"; break;
							case "x" : mood = mood + "b"; break;}}
	var mo = mkMood(mood, OM.ab); return mo}*/

function interleaveDomains(R,lM,rM) { var r = (2*R)+1; var X = 2*r; var Y = r; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<r) { m[y][x] = lM[y][x] }
													 else 	 { m[y][x] = rM[y][x-r] }}} return m }
function mkMp( subj){ 
	var uL =null, uR =null, dR =null, dL =null, u =null, d =null, mP =null;
	uL =subj.mOb.xY;
	uR =subj.mSb.xY;
	dR =subj.fSb.xY;
	dL =subj.fOb.xY;
	u =interleaveDomains( AL.r, uL, uR);
	d =interleaveDomains( AL.r, dL, dR);
	mP =u.concat( d); return mP
	/*if 		(!projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, false)}
	else if (!projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, false, true )}
	else if ( projX && !projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  false)}
	else if ( projX &&  projY){ mP.rel =mkMpProj( abs, subj.sex.reso, true,  true )}*/
	}
function mkMpTemplate( r){
	var uL=null, uR=null, dL=null, dR=null, u=null, d =null, mP =null;
	uL =mkMosaicXYPlaneTemplate( r,true, true );
	uR =mkMosaicXYPlaneTemplate( r,true, false);
	dR =mkMosaicXYPlaneTemplate( r,false,true );
	dL =mkMosaicXYPlaneTemplate( r,false,true );
	u =interleaveDomains( r, uL, uR);
	d =interleaveDomains( r, dL, dR);
	mP =u.concat( d); return mP
}
function evalQuantity(ari){ var ret=null;
	switch( ari ) { case "-X" 	: ret =function(r,X,Y){ return -X 	};break;
					case "X" 	: ret =function(r,X,Y){ return X 	};break;
					case "-Y" 	: ret =function(r,X,Y){ return -Y 	};break;
					case "Y" 	: ret =function(r,X,Y){ return Y 	};break;
					case "X - Y": ret =function(r,X,Y){ return X - Y};break;
					case "Y - X": ret =function(r,X,Y){ return Y - X};break;
					case "X - r": ret =function(r,X,Y){ return X - r};break;
					case "r - X": ret =function(r,X,Y){ return r - X};break;
					case "Y - r": ret =function(r,X,Y){ return Y - r};break;
					case "r - Y": ret =function(r,X,Y){ return r - Y};break;} return ret}
function evalModalXYPlane(m,r,R){ m.bV=null; m.bK=null; m.gK=null; m.gV=null;
	m.bK=evalQuantity(m.bAriK);m.gK=evalQuantity(m.gAriK);m.bV=evalQuantity(m.bAriV);m.gV=evalQuantity(m.gAriV);
	for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.bG[y][x].Y <= m.bG[y][x].X ) {  m.bG[y][x].V = m.gV( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].V == 0){
														if(m.invMor||m.pureBad) { m.bG[y][x].V == -0}
														else 					{ m.bG[y][x].V == +0}}
													m.bG[y][x].K = m.gK( r, m.bG[y][x].X, m.bG[y][x].Y);
													if( m.bG[y][x].K == 0){ m.bG[y][x].K == +0}}
	 	else if ( m.bG[y][x].Y  > m.bG[y][x].X ) {  m.bG[y][x].V = m.bV( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].V == 0){
	 													if(m.invMor||m.pureGood){ m.bG[y][x].V == +0}
	 													else 					{ m.bG[y][x].V == -0}}
	 												m.bG[y][x].K = m.bK( r, m.bG[y][x].X, m.bG[y][x].Y);
	 												if( m.bG[y][x].K == 0){ m.bG[y][x].K == -0}}}}}
function evalMosaicXYPlane(m,r,R,fem){ m.xV=null; m.xK=null; m.yK=null; m.yV=null;
	m.xK=evalQuantity(m.xAriK);m.yK=evalQuantity(m.yAriK);m.xV=evalQuantity(m.xAriV);m.yV=evalQuantity(m.yAriV);
	if(!fem){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].X <= m.xY[y][x].Y ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V == 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V == -0}
														else 					{ m.xY[y][x].V == +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K == 0){ m.xY[y][x].K == +0}}
	 	else if ( m.xY[y][x].X  > m.xY[y][x].Y ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V == 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V == +0}
	 													else 					{ m.xY[y][x].V == -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K == 0){ m.xY[y][x].K == -0}}}}}
	else 		 { for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
		if 		( m.xY[y][x].Y <= m.xY[y][x].X ) {  m.xY[y][x].V = m.xV( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].V == 0){
														if(m.invMor||m.pureBad) { m.xY[y][x].V == -0}
														else 					{ m.xY[y][x].V == +0}}
													m.xY[y][x].K = m.xK( r, m.xY[y][x].X, m.xY[y][x].Y);
													if( m.xY[y][x].K == 0){ m.xY[y][x].K == +0}}
	 	else if ( m.xY[y][x].Y  > m.xY[y][x].X ) {  m.xY[y][x].V = m.yV( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].V == 0){
	 													if(m.invMor||m.pureGood){ m.xY[y][x].V == +0}
	 													else 					{ m.xY[y][x].V == -0}}
	 												m.xY[y][x].K = m.yK( r, m.xY[y][x].X, m.xY[y][x].Y);
	 												if( m.xY[y][x].K == 0){ m.xY[y][x].K == -0}}}}}}
function mapXYPlane(q,r,R){ for(var y=0; y<R; y++){ for(var x=0; x<R; x++){
	q[y][x].x =x-r; q[y][x].y =y-r; q[y][x].X=Math.abs(q[y][x].x); q[y][x].Y=Math.abs(q[y][x].y);}}}
function hsvToRgb(h, s, v) {
	var r, g, b;	var i;	var f, p, q, t;
	h = Math.max(0, Math.min(360, h));	s = Math.max(0, Math.min(100, s));	v = Math.max(0, Math.min(100, v));
	s /= 100;	v /= 100;
	if(s == 0) { r = g = b = v;	return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];}
	h /= 60; // sector 0 to 5
	i = Math.floor(h);
	f = h - i; // factorial part of h
	p = v * (1 - s);
	q = v * (1 - s * f);
	t = v * (1 - s * (1 - f));
	switch(i) {		case 0:			r = v;			g = t;			b = p;			break;
					case 1:			r = q;			g = v;			b = p;			break;
					case 2:			r = p;			g = v;			b = t;			break;
					case 3:			r = p;			g = q;			b = v;			break;
					case 4:			r = t;			g = p;			b = v;			break;
					default:/*case 5*/r = v;		g = p;			b = q;	}
	return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255)}}
function RGBtoHSV(r, g, b) { if (arguments.length === 1) { g = r.g, b = r.b, r = r.r; }
    var max = Math.max(r, g, b), min = Math.min(r, g, b), d = max - min, h, s = (max === 0 ? 0 : d / max), v = max / 255;
    switch (max) { case min: h = 0; break; case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;
        case g: h = (b - r) + d * 2; h /= 6 * d; break; case b: h = (r - g) + d * 4; h /= 6 * d; break}
    return { h: h, s: s, v: v }}
function componentToHex(c) { var hex = c.toString(16); return hex.length == 1 ? "0" + hex : hex}
function rgbToHex(r, g, b) { return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);}
function hexToRgb(hex) { var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
	return result ? { r: parseInt(result[1], 16), g: parseInt(result[2], 16), b: parseInt(result[3], 16)} : null}

function blendColours2(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify2(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify2(src,dst,r){ 	var min =Math.max(src,dst);	var max =Math.min(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function blendColours(src,dst,r){ var buf=null; var ret=[];
	var s =chunkify(src.s, dst.s, r);	var v =chunkify(src.v, dst.v, r);	var h =chunkify(src.h, dst.h, r);
	for(var n=0; n<r; n++){ buf ={ h:h[n], s:s[n], v:v[n]}; ret.push(buf)}	return ret }
function chunkify(src,dst,r){ 	var min =Math.min(src,dst);	var max =Math.max(src,dst);
								var range = max-min;		var chunk = Math.round(range/(r-1));
	var ret=[];	for(var n=0; n<r; n++){ ret.push(n*chunk + min)} return ret}
function mkBoolMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(false)}}
		else { for(var m=0; m<y; m++){	q[n].push(false)}}} return q}
function mkNullMatrix(y,x){	var q=[];
	for(var n=0; n<y; n++){
		q.push([]);
		if(x){ for(var m=0; m<x; m++){	q[n].push(null)}}
		else { for(var m=0; m<y; m++){	q[n].push(null)}}} return q}

function interleaveQuadrants(R,l,v,r) { var X = (2*R)+1; var Y = R; var m = mkNullMatrix(Y,X);
	for(var y=0; y<Y; y++){	for(var x=0; x<X; x++) { if(x<R)  { m[y][x] = l[y][x] }
												else if(x==R) { m[y][x] = v[y][0] }
												else 		  { m[y][x] = m[y][x] = r[y][x-R-1] }}} return m }

function flipHor(m){ var M=mkNullMatrix(m.length);
	for(var n=0; n<M.length; n++){ M[n] = m[n].reverse()} return M}
function flipVer(m){
	var M=mkNullMatrix(m.length); var len=M.length;
	for(var n=0; n<len; n++){ M[len-1-n]=m[n]} return M}
//(ui.ora, true, false, m.bE.reso, m.goodForm);
function rotate(matrix,n) {	var r=Math.ceil(n/2); if(n%2==1) { r--; }
    for (var i = 0; i < n/2; i++) { for (var j = 0; j < r; j++) {
            var temp = matrix[i][j]; matrix[i][j] = matrix[n-1-j][i]; matrix[n-1-j][i] = matrix[n-1-i][n-1-j];
            matrix[n-1-i][n-1-j] = matrix[j][n-1-i]; matrix[j][n-1-i] = temp; }} return matrix }
function flipDiagonal(matrix,n) { for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) {
        	if(j < i) {	var temp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = temp; }}} return matrix }

function fillHalfQuadrant(q,r,reverse,blend2){
	var from; var to; var L; var len;
	for(var y=0; y<r; y++){ L =[]; from=null; to=null;
		for(var x=0; x<r; x++){ if(q[x][y]!=null){
			if(from==null){ from = {y:y, x:x, c:q[x][y] }} else{ to ={ y:y, x:x, c:q[x][y]}}}
		if(from&&to){
			if(blend2){ L=blendColours2(from.c, to.c, to.x-from.x+1);}
			else{ L=blendColours(from.c, to.c, to.x-from.x+1);}
			if(reverse){ L.reverse();}
			for(var n=1; n<to.x; n++){ q[n][y] = L[n]}
			break}}}}
function mkHalfQuadrantTemplate(c,g,r){
	if(!g){ r--}
	var q=mkNullMatrix(r);
	for(var y=0; y<r; y++){
		for(var x=0; x<r-y; x++){
			q[y][x] =c }}
	return q}
function mkHalfQuadrant(c,kc,r,mF){
	var q=mkNullMatrix(r);
	if(c==kc) { var fToL=blendColours2(c.f, c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (c.f, c.h, r)}
	else 	  { var fToL=blendColours2(kc.f,c.l, r);
				var lToH=blendColours (c.l, c.h, r);
				var fToH=blendColours (kc.f,c.h, r)}
	switch(mF[0]){ 
		case "a" : case "a'" :
			switch(mF[1]){ 
				case "b" : case "b'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[n];
					q[n][0] 	= fToH[n];
					q[n][r-n-1] = lToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[r-n-1];
					q[n][0] 	= fToH[r-n-1];
					q[n][r-n-1] = fToL[r-n-1]}
					fillHalfQuadrant(q,r,true);
					} break;
		case "b" : case "b'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToL[r-n-1];
					q[n][0] 	= lToH[n];
					q[n][r-n-1] = fToH[n]}
					fillHalfQuadrant(q,r);
					break;
				case "c" : case "c'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[r-n-1];
					q[n][0] 	= lToH[r-n-1];
					q[n][r-n-1] = fToL[n]}
					fillHalfQuadrant(q,r,false,true);
					} break;
		case "c" : case "c'" :
			switch(mF[1]){ 
				case "a" : case "a'" :  
				for(var n=0; n<r; n++){	
					q[0][n] 	= lToH[n];
					q[n][0] 	= fToL[r-n-1];
					q[n][r-n-1] = fToH[r-n-1]}
					fillHalfQuadrant(q,r,true,true);
					break;
				case "b" : case "b'" :
				for(var n=0; n<r; n++){	
					q[0][n] 	= fToH[n];
					q[n][0] 	= fToL[n];
					q[n][r-n-1] = lToH[r-n-1]}
					fillHalfQuadrant(q,r,false,true);
					} break} return q}
function mkXYCol(c,r){ 	var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push([b])} 	return a}
function mkXYRow(c,r){ 		var a=[]; var b;for(var n=0; n<r; n++){ b={h:c.h, s:c.s, v:c.v}; a.push(b)} 	return a}
function offsetDownwards(m,r){	var a=[]; 	for(var n=0; n<r; n++){ a.push(null)}	m.unshift(a);}
function offsetRightwards( m,r){			for(var n=0; n<r; n++){					m[n].unshift(null)}}
function offsetUpwards( m,r){	var a=[];	for(var n=0; n<r; n++){	a.push(null)}	m.push(a);}
function offsetLeftwards( m,r) { 			for(var n=0; n<r; n++){ 				m[n].push(null)}}
function connectHalfQuadrants(master,slave,r){
	for(var y=0; y<r; y++){	for(var x=0; x<r; x++){	if(master[x][y]==null){ master[x][y] =slave[x][y]}}} return master}
function mkModalXYPlane(m,r){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null, l:null,c:null,r:null,
		dLX:null,dLY:null,d:null,dRX:null,dRY:null,uL:null, uR:null, dL:null, dR:null};
	if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.gForm)}

	else 					  { xY.uLX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.gForm);
								xY.uRX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.gForm);
								xY.dRX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.gForm);
								xY.dLX = mkHalfQuadrant(ui.red, ui.red, r,   m.gForm)}

	if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.bForm)}

	else 					  { xY.uLY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.bForm);
								xY.uRY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.bForm);
								xY.dRY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.bForm);
								xY.dLY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.bForm)}

	/*console.log("DEBUT mkModalXYPlane I");
	console.log("DEBUT uLX");console.log(xY.uLX);
	console.log("DEBUT uLY");console.log(xY.uLY);
	console.log("DEBUT uRY");console.log(xY.uRY);
	console.log("DEBUT uRX");console.log(xY.uRX);
	console.log("DEBUT dRX");console.log(xY.dRX);
	console.log("DEBUT dRY");console.log(xY.dRY);
	console.log("DEBUT dLX");console.log(xY.dLX);
	console.log("DEBUT dLY");console.log(xY.dLY);*/

	xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

	xY.uLY =rotate( xY.uLY, r-1);
	offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

	xY.uRY =flipDiagonal( xY.uRY, r-1);
	offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

	xY.uRX =rotate(rotate( xY.uRX, r), r);

	xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

	xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
	offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

	xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
	offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

	xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
	xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
	xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
	xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

	xY.u = mkXYCol( ui.gra.h, r);
	xY.d = mkXYCol( ui.gra.h, r);
	xY.l = mkXYRow( ui.gra.l, r);
	xY.r = mkXYRow( ui.gra.l, r);
	xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

	xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
	xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
	xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

	xY = xY.U.concat( xY.C).concat( xY.D);

	mapXYPlane( 		xY, AL.r, AL.R);

	return xY}

function mkMosaicXYPlaneTemplate(r,fem,obj){
	var qU={ };
	if(!fem){
		qU.uLV = mkHalfQuadrantTemplate(ui.ora.l, true, r);
		 	qU.uLV=rotate(qU.uLV, r);
		qU.uLH = mkHalfQuadrantTemplate(ui.blu.l, false,r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r-1), r-1);
			offsetDownwards( qU.uLH, r-1);	offsetLeftwards( qU.uLH, r);
		qU.uRV = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.uRV=flipDiagonal(qU.uRV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.cya.l, false,r);
			qU.uRH =rotate(rotate(qU.uRH, r-1), r-1);
			offsetDownwards( qU.uRH, r-1); offsetRightwards( qU.uRH, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.dLV =flipDiagonal(rotate(rotate(qU.dLV, r), r), r);
		qU.dLH = mkHalfQuadrantTemplate(ui.vio.l, false,r);
			offsetUpwards( qU.dLH, r-1); offsetLeftwards( qU.dLH, r);
		qU.dRV = mkHalfQuadrantTemplate(ui.lil.l, true, r);
			qU.dRV =rotate(rotate(rotate(qU.dRV, r), r), r);
		qU.dRH = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r-1), r-1), r-1), r-1);
			offsetUpwards( qU.dRH, r-1); offsetRightwards( qU.dRH, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYColumn( ui.gra.l, r);
		qU.d = mkXYColumn( ui.gra.l, r);
		qU.l = mkXYRow( ui.gra.h, r);
		qU.r = mkXYRow( ui.gra.h, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}
	else {
		qU.uLH = mkHalfQuadrantTemplate(ui.yel.l, true, r);
			qU.uLH =flipDiagonal(rotate( qU.uLH, r), r);
		qU.uLV = mkHalfQuadrantTemplate(ui.vio.l, false, r);
			qU.uLV =rotate( qU.uLV,r-1);
			offsetRightwards( qU.uLV, r-1); offsetUpwards( qU.uLV, r);
		qU.uRH = mkHalfQuadrantTemplate(ui.ora.l, true, r);
			qU.uRH =rotate(rotate( qU.uRH, r), r);
		qU.uRV = mkHalfQuadrantTemplate(ui.blu.l, false, r);
			qU.uRV =flipDiagonal( qU.uRV, r-1);
			offsetLeftwards( qU.uRV, r-1); offsetUpwards( qU.uRV, r);
		qU.dLH = mkHalfQuadrantTemplate(ui.lil.l, true, r);
		qU.dLV = mkHalfQuadrantTemplate(ui.gre.l, false,r);
			qU.dLV =flipDiagonal(rotate(rotate( qU.dLV, r-1), r-1), r-1);
			offsetRightwards( qU.dLV, r-1); offsetDownwards( qU.dLV, r);
		qU.dRH = mkHalfQuadrantTemplate(ui.red.l, true, r);
			qU.dRH =flipDiagonal(rotate(rotate(rotate( qU.dRH, r), r), r), r);
		qU.dRV = mkHalfQuadrantTemplate(ui.cya.l, false, r);
			qU.dRV =rotate(rotate(rotate( qU.dRV, r-1), r-1), r-1);
			offsetLeftwards( qU.dRV, r-1); offsetDownwards( qU.dRV, r);

		qU.uL = connectHalfQuadrants( qU.uLV, qU.uLH, r);
		qU.uR = connectHalfQuadrants( qU.uRV, qU.uRH, r);
		qU.dL = connectHalfQuadrants( qU.dLV, qU.dLH, r);
		qU.dR = connectHalfQuadrants( qU.dRV, qU.dRH, r);

		qU.u = mkXYColumn( ui.gra.h, r);
		qU.d = mkXYColumn( ui.gra.h, r);
		qU.l = mkXYRow( ui.gra.l, r);
		qU.r = mkXYRow( ui.gra.l, r);
		qU.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		qU.U = interleaveQuadrants( r, qU.uL, 	qU.u, 	qU.uR);
		qU.C = [qU.l.concat( qU.c).concat(qU.r)]; 					
		qU.D = interleaveQuadrants( r, qU.dL, 	qU.d, 	qU.dR);

		qU = qU.U.concat( qU.C).concat( qU.D);
	}

	if( obj){ qU.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		qU, AL.r, AL.R);

	return qU}
function mkMosaicXYPlane(m,r,obj){
	var xY={ uLX:null,uLY:null,uRX:null,uRY:null,l:null,c:null,r:null,dLX:null,dLY:null,d:null,dRX:null,dRY:null,
		uL:null, uR:null, dL:null, dR:null};
	if(!m.gnd.fem){
		if( m.invMor||m.pureGood) { xY.uLX = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.red, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.xForm);
									xY.uRX = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.xForm);
									xY.dLX = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.xForm)}

		if( m.invMor||m.pureBad)  { xY.uLY = mkHalfQuadrant(ui.blu, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.cya, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.vio, ui.yel, r,   m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.ora, ui.ora, r,   m.yForm);
									xY.uRY = mkHalfQuadrant(ui.red, ui.red, r,   m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.lil, r,   m.yForm);
									xY.dLY = mkHalfQuadrant(ui.yel, ui.yel, r,   m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r-1), r-1);
		offsetDownwards( xY.uLX, r-1); offsetLeftwards( xY.uLX, r);

		xY.uLY=rotate( xY.uLY, r);
		
		xY.uRY=flipDiagonal( xY.uRY, r);

		xY.uRX =rotate(rotate(xY.uRX, r-1), r-1);
		offsetDownwards( xY.uRX, r-1); offsetRightwards( xY.uRX, r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r-1), r-1), r-1), r-1);
		offsetUpwards( xY.dRX, r-1); offsetRightwards( xY.dRX, r);

		xY.dRY =rotate(rotate(rotate(xY.dRY, r), r), r);

		xY.dLY =flipDiagonal(rotate(rotate(xY.dLY, r), r), r);
		offsetUpwards( xY.dLX, r-1); offsetLeftwards( xY.dLX, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.l, r);
		xY.d = mkXYCol( ui.gra.l, r);
		xY.l = mkXYRow( ui.gra.h, r);
		xY.r = mkXYRow( ui.gra.h, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}
	else{
		if( m.invMor||m.pureBad)  { xY.uLX = mkHalfQuadrant(ui.blu, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.vio, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.gre, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.cya, ui.red, r,   m.xForm)}

		else 					  { xY.uLX = mkHalfQuadrant(ui.ora, ui.ora, r,   m.xForm);
									xY.uRX = mkHalfQuadrant(ui.yel, ui.yel, r,   m.xForm);
									xY.dRX = mkHalfQuadrant(ui.lil, ui.lil, r,   m.xForm);
									xY.dLX = mkHalfQuadrant(ui.red, ui.red, r,   m.xForm)}

		if( m.invMor||m.pureGood) { xY.uLY = mkHalfQuadrant(ui.ora, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.yel, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.lil, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.red, ui.cya, r-1, m.yForm)}

		else 					  { xY.uLY = mkHalfQuadrant(ui.blu, ui.blu, r-1, m.yForm);
									xY.uRY = mkHalfQuadrant(ui.vio, ui.vio, r-1, m.yForm);
									xY.dRY = mkHalfQuadrant(ui.gre, ui.gre, r-1, m.yForm);
									xY.dLY = mkHalfQuadrant(ui.cya, ui.cya, r-1, m.yForm)}

		xY.uLX =flipDiagonal(rotate( xY.uLX, r), r);

		xY.uLY =rotate( xY.uLY, r-1);
		offsetRightwards( xY.uLY, r-1); offsetUpwards( xY.uLY, r);

		xY.uRY =flipDiagonal( xY.uRY, r-1);
		offsetLeftwards( xY.uRY, r-1); offsetUpwards( xY.uRY, r);

		xY.uRX =rotate(rotate( xY.uRX, r), r);

		xY.dRX =flipDiagonal(rotate(rotate(rotate( xY.dRX, r), r), r), r);

		xY.dRY =rotate(rotate(rotate( xY.dRY, r-1), r-1), r-1);
		offsetLeftwards( xY.dRY, r-1); offsetDownwards( xY.dRY, r);

		xY.dLY =flipDiagonal(rotate(rotate( xY.dLY, r-1), r-1), r-1);
		offsetRightwards( xY.dLY, r-1); offsetDownwards( xY.dLY, r);

		xY.uL = connectHalfQuadrants( xY.uLY, xY.uLX, r);
		xY.uR = connectHalfQuadrants( xY.uRY, xY.uRX, r);
		xY.dL = connectHalfQuadrants( xY.dLY, xY.dLX, r);
		xY.dR = connectHalfQuadrants( xY.dRY, xY.dRX, r);

		xY.u = mkXYCol( ui.gra.h, r);
		xY.d = mkXYCol( ui.gra.h, r);
		xY.l = mkXYRow( ui.gra.l, r);
		xY.r = mkXYRow( ui.gra.l, r);
		xY.c =[{ h: ui.gra.f.h, s: ui.gra.f.s, v: ui.gra.f.v}];

		xY.U = interleaveQuadrants( r, xY.uL, 	xY.u, 	xY.uR);
		xY.C = [xY.l.concat( xY.c).concat( xY.r)]; 					
		xY.D = interleaveQuadrants( r, xY.dL, 	xY.d, 	xY.dR);

		xY = xY.U.concat( xY.C).concat( xY.D)}

	if( obj){ xY.forEach( function( row){ row.reverse()})}
	mapXYPlane( 		xY, AL.r, AL.R);

	return xY}



function combineMoodAndBeing(pM,bE){
	var mD = pM.ni.substr(0, pM.ni.indexOf('B'));
	mD = mD + "_" + bE.ni + "_";
	mD = mD + pM.ni.split("B").pop();
	mD = mkMood(mD, OM.ab);
	return mD}
function mkMoodOld(mo){
	var primalMood= mo.ni.substr(0, mo.ni.indexOf('_'));
	var being= mo.ni.split('_')[1]; 					
	var tail= mo.ni.split("_").pop(); 					
	primalMood = primalMood+"B"+tail;
	mo.bE = mkBeing(being, OM.ab.gender);
	mo.pM = mkPrimalMood(primalMood, OM.ab);
	getModalFormByBeing(mo, mo.bE.ni);
	getModalFormByPrimalMood(mo);
	parseModalForm(mo);
	mo.qU =mkXYPlane(mo);
	mapXYPlane(mo.qU, mo.bE.reso);
	evalXYPlane(mo)}



function mkVqByScalars( rom,cla,parent,s){ var q=null; switch(rom.ni){
	case "SENSE_0" 	: switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.U_origin_i 	("U_origin_i", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.U_Feel_1e 		("U_Feel_1e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.U_Feel_2i 		("U_Feel_2i", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.U_Feel_3e 		("U_Feel_3e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.U_Feel_4i 		("U_Feel_4i", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.O_origin_e 	("O_origin_e",  rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.O_Think_1e 	("O_Think_1i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.O_Think_2i 	("O_Think_2e",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.O_Think_1e 	("O_Think_3i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.O_Think_1e 	("O_Think_4e",	rom,cla);inhVq( q,parent,s);return q}
	case "PHEN_4_1" : switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.U_Sense_4 		("U_Sense_4", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.U_dysphoria	("U_dysphoria",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.U_defeat 		("U_defeat", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.U_fake 		("U_fake", 		rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.U_epiphany		("U_epihpany", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.O_Sense_1 		("O_Sense_1", 	rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.O_body 		("O_body", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.O_need 		("O_need", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.O_tool 		("O_tool", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.O_method 		("O_method", 	rom,cla);inhVq( q,parent,s);return q}
 	case "LOWN_3_2" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.U_Sense_3 		("U_Sense_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_detach 		("U_detach", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_burden 		("U_burden", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_happiness 	("U_happiness", rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_fun 			("U_fun", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.O_Sense_2 		("O_Sense_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_pain 		("O_pain", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_life 		("O_life", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_order 		("O_order", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_should 		("O_should", 	rom,cla);inhVq( q,parent,s);return q}
 	case "HIGH_2_3" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.U_Sense_2 		("U_Sense_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_fear 		("U_fear", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_love 		("U_love", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_style 		("U_style", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_can 			("U_can", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.O_Sense_3 		("O_Sense_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_shame 		("O_shame", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_problem 		("O_problem", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_social 		("O_social", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_right 		("O_right", 	rom,cla);inhVq( q,parent,s);return q}
 	case "DLBR_1_4" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.U_Sense_1 		("U_Sense_1", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.U_belief 		("U_belief", 	rom,cla);inhVq( q,parent,ss);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.U_like 		("U_like", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.U_motive 		("U_motive", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.U_peace 		("U_peace", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.O_Sense_4 		("O_Sense_4", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.O_fail 		("O_fail", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.O_loss 		("O_loss", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.O_wrong 		("O_wrong", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.O_success 		("O_success", 	rom,cla);inhVq( q,parent,s);return q}

 	case "INTUIT_0" 	: switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.M_origin_i 	("M_origin_i", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.M_Feel_1e 		("M_Feel_1e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.M_Feel_2i 		("M_Feel_2i", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.M_Feel_3e 		("M_Feel_3e", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.M_Feel_4i 		("M_Feel_4i", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.L_origin_e 	("L_origin_e",  rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.L_Think_1e 	("L_Think_1i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.L_Think_2i 	("L_Think_2e",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.L_Think_1e 	("L_Think_3i",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.L_Think_1e 	("L_Think_4e",	rom,cla);inhVq( q,parent,s);return q}
	case "HRMNY_4_1" : switch(cla.ni){
		case "FEEL_0i"  : q = new AL.VectorQualities.M_iNtuit_4 	("M_iNtuit_4", 	rom,cla);inhVq( q,parent,s);return q; 
		case "FEEL_1e"  : q = new AL.VectorQualities.M_destroy		("M_destroy",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_2i"  : q = new AL.VectorQualities.M_confusion	("M_confusion",	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_3e"  : q = new AL.VectorQualities.M_apathy 		("M_apathy", 	rom,cla);inhVq( q,parent,s);return q;
		case "FEEL_4i"  : q = new AL.VectorQualities.M_beauty		("M_beauty", 	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_0e" : q = new AL.VectorQualities.L_iNtuit_1		("L_iNtuit_1", 	rom,cla);inhVq( q,parent,s);return q; 
		case "THINK_1i" : q = new AL.VectorQualities.L_form 		("L_form", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_2e" : q = new AL.VectorQualities.L_meaning 		("L_meaning",	rom,cla);inhVq( q,parent,s);return q;
		case "THINK_3i" : q = new AL.VectorQualities.L_kind 		("L_kind", 		rom,cla);inhVq( q,parent,s);return q;
		case "THINK_4e" : q = new AL.VectorQualities.L_reason 		("L_reason", 	rom,cla);inhVq( q,parent,s);return q}
 	case "SIGNI_3_2" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.M_iNtuit_3 	("M_iNtuit_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_hate 		("M_hate", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_awkward		("M_awkward", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_freedom 		("M_freedom", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_event 		("M_event", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.L_iNtuit_2		("L_iNtuit_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_exclude 		("L_exclude",	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_purpose 		("L_purpose", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_use 			("L_use", 		rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_would 		("L_would", 	rom,cla);inhVq( q,parent,s);return q}
 	case "AWARE_2_3" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.M_iNtuit_2 	("M_iNtuit_2", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_greed 		("M_greed", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_culture 		("M_culture", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_join 		("M_join", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_could		("M_could", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.L_iNtuit_3 	("L_iNtuit_3", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_impose 		("L_impose", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_reject 		("L_reject", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_metalevel	("L_metalevel",	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_relevance 	("L_relevance",	rom,cla);inhVq( q,parent,s);return q}
 	case "UNITY_1_4" : switch(cla.ni){
 		case "FEEL_0i" 	: q = new AL.VectorQualities.M_iNtuit_1 	("M_iNtuit_1", 	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_1e" 	: q = new AL.VectorQualities.M_norm 		("M_norm", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_2i" 	: q = new AL.VectorQualities.M_want 		("M_want", 		rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_3e" 	: q = new AL.VectorQualities.M_integrity 	("M_integrity",	rom,cla);inhVq( q,parent,s);return q;
 		case "FEEL_4i" 	: q = new AL.VectorQualities.M_innocence	("M_innocence", rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_0e" : q = new AL.VectorQualities.L_iNtuit_4 	("L_iNtuit_4", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_1i" : q = new AL.VectorQualities.L_condemn 		("L_condemn", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_2e" : q = new AL.VectorQualities.L_deceive 		("L_deceive", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_3i" : q = new AL.VectorQualities.L_withhold 	("L_withhold", 	rom,cla);inhVq( q,parent,s);return q;
 		case "THINK_4e" : q = new AL.VectorQualities.L_wisdom 		("L_wisdom", 	rom,cla);inhVq( q,parent,s);return q}}}
 
 /*
 function precalcScalarQualities( seed,iEs,parent,s){ var b =null;
	for(let n=0; n <OM.ab.sQsL; n++){
		if( s){ if(s.sQs.length >0){ return s.sQs}}
		else{ 	var sQs =[]; b =mkSq( seed[n],iEs,parent); sQs.push( b);
				if(s){ switch(seed[n]){ case "FEEL_0i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;
										case "FEEL_1e" 	: s.FEEL_1e =b; break; case "THINK_1i" : s.THINK_1i =b; break;
										case "FEEL_2i" 	: s.FEEL_2i =b; break; case "THINK_2e" : s.THINK_2e =b; break;
										case "FEEL_3e" 	: s.FEEL_3e =b; break; case "THINK_3i" : s.THINK_3i =b; break;
										case "FEEL_4i" 	: s.FEEL_4i =b; break; case "THINK_4e" : s.THINK_4e =b; break;
										case "SENSE_0" 	: s.SENSE_0 =b; break; case "INTUIT_0" : s.INTUIT_0 =b; break;
										case "PHEN_4_1"	: s.PHEN_4_1=b; break; case "HRMNY_4_1": s.HRMNY_4_1=b; break;
										case "LOWN_3_2"	: s.LOWN_3_2=b; break; case "SIGNI_3_2": s.SIGNI_3_2=b; break;
										case "HIGH_2_3" : s.HIGH_2_3=b; break; case "AWARE_2_3": s.AWARE_2_3=b; break;
										case "DLBR_1_4"	: s.DLBR_1_4=b; break; case "UNITY_1_4": s.UNITY_1_4=b; break}}}}return sQs}
										*/
function precalcVectorQualities( seed,sQs,parent,s){ //if( s){ if(s.vQs.length >0){ return s.vQs}}
 	var b =null; var vQs =[];
 	for(let n=0; n <OM.ab.vQsL; n++){ b =mkVq( seed[n],sQs,parent); vQs.push( b);} return vQs}
				/*if(s){ switch(seed[n]){ case "U_origin_i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;*/
	//for(let n=0; n <OM.ab.vQsL; n++){ b =mkVq( seed[n],sQs,parent,s); a.push( b)}return a}

 function mkVq( ni,sQs,parent,s){ var q=null; switch(ni){
	case "U_origin_i"  	: q = new AL.VectorQualities.U_origin_i 	("U_origin_i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_Feel_1e" 	: q = new AL.VectorQualities.U_Feel_1e 		("U_Feel_1e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_Feel_2i" 	: q = new AL.VectorQualities.U_Feel_2i 		("U_Feel_2i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_Feel_3e" 	: q = new AL.VectorQualities.U_Feel_3e 		("U_Feel_3e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_Feel_4i" 	: q = new AL.VectorQualities.U_Feel_4i 		("U_Feel_4i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_origin_e" 	: q = new AL.VectorQualities.O_origin_e 	("O_origin_e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Think_1i" 	: q = new AL.VectorQualities.O_Think_1i 	("O_Think_1i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Think_2e" 	: q = new AL.VectorQualities.O_Think_2e 	("O_Think_2e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Think_3i" 	: q = new AL.VectorQualities.O_Think_3i 	("O_Think_3i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Think_4e" 	: q = new AL.VectorQualities.O_Think_4e 	("O_Think_4e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_Sense_4" 	: q = new AL.VectorQualities.U_Sense_4 		("U_Sense_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_dysphoria" 	: q = new AL.VectorQualities.U_dysphoria 	("U_dysphoria", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_defeat" 	: q = new AL.VectorQualities.U_defeat 		("U_defeat", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_fake" 		: q = new AL.VectorQualities.U_fake 		("U_fake", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_epiphany" 	: q = new AL.VectorQualities.U_epiphany 	("U_epiphany", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Sense_1" 	: q = new AL.VectorQualities.U_Sense_1 		("U_Sense_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_body" 		: q = new AL.VectorQualities.O_body 		("O_body", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_need" 		: q = new AL.VectorQualities.O_need 		("O_need", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_tool" 		: q = new AL.VectorQualities.O_tool 		("O_tool", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_method" 	: q = new AL.VectorQualities.O_method 		("O_method", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_Sense_3" 	: q = new AL.VectorQualities.U_Sense_3 		("U_Sense_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_detach" 	: q = new AL.VectorQualities.U_detach 		("U_detach", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_burden" 	: q = new AL.VectorQualities.U_burden 		("U_burden", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_happiness" 	: q = new AL.VectorQualities.U_happiness 	("U_happiness", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_fun" 		: q = new AL.VectorQualities.U_fun 			("U_fun", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Sense_2" 	: q = new AL.VectorQualities.O_Sense_2 		("O_Sense_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_pain" 		: q = new AL.VectorQualities.O_pain 		("O_pain", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_life" 		: q = new AL.VectorQualities.O_life 		("O_life", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_order" 		: q = new AL.VectorQualities.O_order 		("O_order", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_should" 	: q = new AL.VectorQualities.O_should 		("O_should", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_Sense_2" 	: q = new AL.VectorQualities.U_Sense_2 		("U_Sense_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_fear" 		: q = new AL.VectorQualities.U_fear 		("U_fear", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_love" 		: q = new AL.VectorQualities.U_love 		("U_love", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_style" 		: q = new AL.VectorQualities.U_style 		("U_style", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_can" 		: q = new AL.VectorQualities.U_can 			("U_can", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Sense_3" 	: q = new AL.VectorQualities.O_Sense_3 		("O_Sense_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_shame" 		: q = new AL.VectorQualities.O_shame 		("O_shame", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_problem" 	: q = new AL.VectorQualities.O_problem 		("O_problem", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_social" 	: q = new AL.VectorQualities.O_social 		("O_social", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_right" 		: q = new AL.VectorQualities.O_right 		("O_right", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "U_Sense_1" 	: q = new AL.VectorQualities.U_Sense_1 		("U_Sense_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_belief" 	: q = new AL.VectorQualities.U_belief 		("U_belief", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_like" 		: q = new AL.VectorQualities.U_like 		("U_life", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_motive" 	: q = new AL.VectorQualities.U_motive 		("U_motive", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "U_peace" 		: q = new AL.VectorQualities.U_peace 		("U_peace", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_Sense_4" 	: q = new AL.VectorQualities.O_Sense_4 		("O_Sense_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_fail" 		: q = new AL.VectorQualities.O_fail 		("O_fail", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_loss" 		: q = new AL.VectorQualities.O_loss 		("O_loss", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_wrong" 		: q = new AL.VectorQualities.O_wrong 		("O_wrong", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "O_success" 	: q = new AL.VectorQualities.O_success 		("O_success", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_origin_i" 	: q = new AL.VectorQualities.M_origin_i 	("M_origin_i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_Feel_1e" 	: q = new AL.VectorQualities.M_Feel_1e 		("M_Feel_1e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_Feel_2i" 	: q = new AL.VectorQualities.M_Feel_2i 		("M_Feel_2i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_Feel_3e" 	: q = new AL.VectorQualities.M_Feel_3e 		("M_Feel_3e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_Feel_4i" 	: q = new AL.VectorQualities.M_Feel_4i 		("M_Feel_4i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_origin_e" 	: q = new AL.VectorQualities.L_origin_e 	("L_origin_e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_Think_1i" 	: q = new AL.VectorQualities.L_Think_1i 	("L_Think_1i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_Think_2e" 	: q = new AL.VectorQualities.L_Think_2e 	("L_Think_2e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_Think_3i" 	: q = new AL.VectorQualities.L_Think_3i 	("L_Think_3i", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_Think_4e" 	: q = new AL.VectorQualities.L_Think_4e 	("L_Think_4e", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_iNtuit_4" 	: q = new AL.VectorQualities.M_iNtuit_4 	("M_iNtuit_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_destroy" 	: q = new AL.VectorQualities.M_destroy 		("M_destroy", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_confusion" 	: q = new AL.VectorQualities.M_confusion 	("M_confusion", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_apathy" 	: q = new AL.VectorQualities.M_apathy 		("M_apathy", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_beauty" 	: q = new AL.VectorQualities.M_beauty 		("M_beauty", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_iNtuit_1" 	: q = new AL.VectorQualities.L_iNtuit_1 	("L_iNtuit_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_form" 		: q = new AL.VectorQualities.L_form 		("L_form", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_meaning" 	: q = new AL.VectorQualities.L_meaning 		("L_meaning", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_kind" 		: q = new AL.VectorQualities.L_kind 		("L_kind", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_reason" 	: q = new AL.VectorQualities.L_reason 		("L_reason", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_iNtuit_3" 	: q = new AL.VectorQualities.M_iNtuit_3 	("M_iNtuit_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_hate" 		: q = new AL.VectorQualities.M_hate 		("M_hate", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_awkward" 	: q = new AL.VectorQualities.M_awkward 		("M_awkward", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_freedom" 	: q = new AL.VectorQualities.M_freedom 		("M_freedom", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_event" 		: q = new AL.VectorQualities.M_event 		("M_event", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_iNtuit_2" 	: q = new AL.VectorQualities.L_iNtuit_2 	("L_iNtuit_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_exclude" 	: q = new AL.VectorQualities.L_exclude 		("L_exclude", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_purpose" 	: q = new AL.VectorQualities.L_purpose 		("L_purpose", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_use" 		: q = new AL.VectorQualities.L_use 			("L_use", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_would" 		: q = new AL.VectorQualities.L_would 		("L_would", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_iNtuit_2" 	: q = new AL.VectorQualities.M_iNtuit_2 	("M_iNtuit_2", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_greed" 		: q = new AL.VectorQualities.M_greed 		("M_greed", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_culture" 	: q = new AL.VectorQualities.M_culture 		("M_culture", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_join" 		: q = new AL.VectorQualities.M_join 		("M_join", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_could" 		: q = new AL.VectorQualities.M_could 		("M_could", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_iNtuit_3" 	: q = new AL.VectorQualities.L_iNtuit_3 	("L_iNtuit_3", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_impose" 	: q = new AL.VectorQualities.L_impose 		("L_impose", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_reject" 	: q = new AL.VectorQualities.L_reject 		("L_reject", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_metalevel" 	: q = new AL.VectorQualities.L_metalevel 	("L_metalevel", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_relevance" 	: q = new AL.VectorQualities.L_relevance 	("L_relevance", undefined,undefined,sQs); inhVq( q,parent,s);return q;

	case "M_iNtuit_1" 	: q = new AL.VectorQualities.M_iNtuit_1 	("M_iNtuit_1", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_norm" 		: q = new AL.VectorQualities.M_norm 		("M_norm", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_want" 		: q = new AL.VectorQualities.M_want 		("M_want", 		undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_integrity" 	: q = new AL.VectorQualities.M_integrity 	("M_integrity", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "M_innocence" 	: q = new AL.VectorQualities.M_innocence 	("M_innocence", undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_iNtuit_4" 	: q = new AL.VectorQualities.L_iNtuit_4 	("L_iNtuit_4", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_condemn" 	: q = new AL.VectorQualities.L_condemn 		("L_condemn", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_deceive" 	: q = new AL.VectorQualities.L_deceive 		("L_deceive", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_withhold" 	: q = new AL.VectorQualities.L_withhold 	("L_wihhold", 	undefined,undefined,sQs); inhVq( q,parent,s);return q;
	case "L_wisdom" 	: q = new AL.VectorQualities.L_wisdom 		("L_wisdom", 	undefined,undefined,sQs); inhVq( q,parent,s);return q}}
function inhVq( v,parent,s){ if(parent){ v.parent=parent.vQs.find(o => o.ni ==v.ni)}}
/*							 if()

	if(!parent){ var q=v.ni.charAt(0); switch(q){
		case "M" : OM.ab.vQsM.push( v);break; 	case "L" : OM.ab.vQsL.push( v);break;
		case "U" : OM.ab.vQsU.push( v);break; 	case "O" : OM.ab.vQsO.push( v)}}}*/

AL.VectorQualities = { seed:[ "U_origin_i","O_origin_e","M_origin_i","L_origin_e",
	"U_Feel_1e", "U_Feel_2i", "U_Feel_3e", "U_Feel_4i", "O_Think_1i","O_Think_2e","O_Think_3i","O_Think_4e",
	"M_Feel_1e", "M_Feel_2i", "M_Feel_3e", "M_Feel_4i", "L_Think_1i","L_Think_2e","L_Think_3i","L_Think_4e",
	"U_Sense_1", "U_Sense_2", "U_Sense_3", "U_Sense_4", "O_Sense_1", "O_Sense_2", "O_Sense_3", "O_Sense_4",
	"M_iNtuit_1","M_iNtuit_2","M_iNtuit_3","M_iNtuit_4","L_iNtuit_1","L_iNtuit_2","L_iNtuit_3","L_iNtuit_4",

	"U_dysphoria","U_defeat","U_fake","U_epiphany","U_detach","U_burden","U_happiness","U_fun",
	"U_fear","U_love","U_style","U_can","U_belief","U_like","U_motive","U_peace",
	"O_body","O_need","O_tool","O_method","O_pain","O_life","O_order","O_should",
	"O_shame","O_problem","O_social","O_right","O_fail","O_loss","O_wrong","O_success",
	"M_norm","M_want","M_integrity","M_innocence","M_greed","M_culture","M_join","M_could",
	"M_hate","M_awkward","M_freedom","M_event","M_destroy","M_confusion","M_apathy","M_beauty",
	"L_form","L_meaning","L_kind","L_reason","L_exclude","L_purpose","L_use","L_would",
	"L_impose","L_reject","L_metalevel","L_relevance","L_condemn","L_deceive","L_withhold","L_wisdom"],
	U_origin_i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 0,false,"sUbjective \n origin" 							)},
	O_origin_e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 0,true, "Objective \n origin" 							)},
	M_origin_i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 0,false,"Mystical \n origin" 							)},
	L_origin_e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 0,true, "Logical \n origin" 							)},
	U_Feel_1e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-1,true, "sUbjective \n weak \n extro-Feeling" 			)},
	U_Feel_2i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-2,false,"sUbjective \n weak \n intro-Feeling" 			)},
	U_Feel_3e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-3,true, "sUbjective \n strong \n extro-Feeling" 		)},
	U_Feel_4i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-4,false,"sUbjective \n strong \n intro-Feeling" 		)},
	O_Think_1i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 1,true, "Objective \n weak \n extro-Thinking" 			)},
	O_Think_2e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 2,false,"Objective \n weak \n intro-Thinking" 			)},
	O_Think_3i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 3,true, "Objective \n strong \n extro-Thinking" 		)},
	O_Think_4e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 4,false,"Objective \n strong \n intro-Thinking" 		)},
	M_Feel_1e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-1,true, "Mystical \n weak \n extro-Feeling" 			)},
	M_Feel_2i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-2,false,"Mystical \n weak \n intro-Feeling" 			)},
	M_Feel_3e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-3,true, "Mystical \n strong \n extro-Feeling" 			)},
	M_Feel_4i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0,-4,false,"Mystical \n strong \n intro-Feeling" 			)},
	L_Think_1i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 1,true, "Logical \n weak \n extro-Thinking" 			)},
	L_Think_2e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 2,false,"Logical \n weak \n intro-Thinking" 			)},
	L_Think_3i 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 3,true, "Logical \n strong \n extro-Thinking" 			)},
	L_Think_4e 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 0, 4,false,"Logical \n strong \n intro-Thinking" 			)},
	U_Sense_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 0,true, "sUbjective \n weak \n extro-Feeling" 			)},
	U_Sense_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 0,false,"sUbjective \n weak \n intro-Feeling" 			)},
	U_Sense_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 0,true, "sUbjective \n strong \n extro-Feeling" 		)},
	U_Sense_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 0,false,"sUbjective \n strong \n intro-Feeling" 		)},
	O_Sense_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 0,true, "Objective \n weak \n extro-Thinking" 			)},
	O_Sense_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 0,false,"Objective \n weak \n intro-Thinking" 			)},
	O_Sense_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 0,true, "Objective \n strong \n extro-Thinking" 		)},
	O_Sense_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 0,false,"Objective \n strong \n intro-Thinking" 		)},
	M_iNtuit_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 0,true, "Mystical \n weak \n extro-Feeling" 			)},
	M_iNtuit_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 0,false,"Mystical \n weak \n intro-Feeling" 			)},
	M_iNtuit_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 0,true, "Mystical \n strong \n extro-Feeling" 			)},
	M_iNtuit_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 0,false,"Mystical \n strong \n intro-Feeling" 			)},
	L_iNtuit_1 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 0,true, "Logical \n weak \n extro-Thinking" 			)},
	L_iNtuit_2 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 0,false,"Logical \n weak \n intro-Thinking" 			)},
	L_iNtuit_3 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 0,true, "Logical \n strong \n extro-Thinking" 			)},
	L_iNtuit_4 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 0,false,"Logical \n strong \n intro-Thinking" 			)},


	U_dysphoria 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-1,true, "Something \n bad happens \n to us." 			)},
	U_defeat 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-2,false,"That isn't \n possible \n for us." 			)},
	U_fake 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-3,true, "That \n makes us \n pretentious." 				)},
	U_epiphany 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4,-4,false,"Something \n good happens \n to us." 			)},
	U_detach 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-1,true, "That breaks \n us apart." 		 				)},
	U_burden 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-2,false,"That makes us \n feel bad about \n ourselves." )},
	U_happiness 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-3,true, "That keeps \n us together." 					)},
	U_fun 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3,-4,false,"That makes \n us attractive." 					)},
	U_fear 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-1,true, "That \n makes us \n feel bad." 				)},
	U_love 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-2,false,"That brings \n us together." 					)},
	U_style 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-3,true, "That \n distinguishes \n us." 					)},
	U_can 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2,-4,false,"That is \n possible \n for us." 				)},
	U_belief 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-1,true, "That matters \n to us." 		 				)},
	U_like 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-2,false,"That makes \n us feel good."					)},
	U_motive 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-3,true, "That \n unites us." 							)},
	U_peace 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1,-4,false,"What \n happens \n to us?" 					)},

	O_fail 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 1,false,"I do \n something \n bad." 					)},
	O_loss 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 2,true, "I need this \n but don't \n preserve it." 		)},
	O_wrong 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 3,false,"I harm \n someone for \n no reason." 			)},
	O_success 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-4, 4,true, "I do \n something \n good." 					)},
	O_shame 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 1,false,"Others need \n help because \n of me." 		)},
	O_problem 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 2,true, "I need help \n with this." 					)},
	O_social 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 3,false,"I cooperate." 									)},
	O_right 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-3, 4,true, "This makes \n me a priority." 					)},
	O_pain 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 1,false,"This makes \n me not whole." 					)},
	O_life 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 2,true, "I preserve \n this." 							)},
	O_order 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 3,false,"This puts me \n in control." 					)},
	O_should 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-2, 4,true, "This puts me \n in charge." 					)},
	O_body 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 1,false,"I perceive \n this." 		 					)},
	O_need 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 2,true, "This makes \n me whole."						)},
	O_tool 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 3,false,"This \n makes me \n independent." 				)},
	O_method 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs,-1, 4,true, "How do I \n do this?" 							)},
//ååå
	M_destroy 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-1,true, "We do \n something \n bad." 					)},
	M_confusion 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-2,false,"We don't \n know what \n we want." 			)},
	M_apathy 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-3,true, "We don't \n want \n anything." 				)},
	M_beauty 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4,-4,false,"We do \n something \n good." 					)},
	M_hate 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-1,true, "We don't \n want them." 			 			)},
	M_awkward 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-2,false,"We don't \n want to do \n this together." 		)},
	M_freedom 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-3,true, "We let this \n happen."						)},
	M_event 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3,-4,false,"We pay \n attention \n to this."				)},
	M_greed 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-1,true, "We don't \n want this." 						)},
	M_culture 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-2,false,"We want to \n do things \n this way."			)},
	M_join 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-3,true, "We do this \n together." 						)},
	M_could 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2,-4,false,"We prepare \n for this." 						)},
	M_norm 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-1,true, "We do this." 				 					)},
	M_want 			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-2,false,"We want this."									)},
	M_integrity 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-3,true, "We are \n these people."						)},
	M_innocence 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1,-4,false,"Who does \n this, when \n and where?" 			)},

	L_condemn 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 1,false,"You are bad."									)},
	L_deceive 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 2,true, "You shall \n falsely relate \n to that." 		)},
	L_withhold 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 3,false,"You would \n harm that."						)},
	L_wisdom 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 4, 4,true, "You are good." 								)},
	L_impose		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 1,false,"You aren't \n like that." 						)},
	L_reject 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 2,true, "You don't \n relate to that." 					)},
	L_metalevel 	:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 3,false,"You can \n relate \n like that."				)},
	L_relevance		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 3, 4,true, "You would \n contribute \n to that." 			)},
	L_exclude		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 1,false,"You can't \n be that." 						)},
	L_purpose		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 2,true, "You relate \n like that." 						)},
	L_use			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 3,false,"You relate \n to that." 						)},
	L_would 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 2, 4,true, "You would \n relate to that."					)},
	L_form			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 1,false,"You are that." 				 				)},
	L_meaning		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 2,true, "You can \n be that."							)},
	L_kind			:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 3,false,"You are \n like that." 						)},
	L_reason 		:function(ni,rom,cla,sQs){mkVq2(this,ni,rom,cla,sQs, 1, 4,true, "Why are you \n like that?"						)}};
//Fi.invoke : function(){}
function mkVq2(o,ni,rom,cla,sQs,r,c,ie,desc){ o.ni=ni; o.r=r; o.c=c; o.ie=ie; o.desc=desc;
	var v=ni.charAt(0); switch(v){
		case "M" : o.lPI=true; o.lPU=true; break; case "L" : o.lPI=true; o.lPU=false;break;
		case "U" : o.lPI=false;o.lPU=false;break; case "O" : o.lPI=false;o.lPU=true}
	o.rom=null; if(rom){ o.rom=rom} else{ o.rom=getRomanticQuality(ni,sQs)}
	o.cla=null; if(cla){ o.cla=cla} else{ o.cla=getClassicalQuality(ni,sQs)}}
function getSq(ni,a){ var q =a.find(o => o.ni ==ni);return q}
function getRomanticQuality(ni,sQs){ var q=null; switch( ni){
	case "U_origin_i" 	:q=getSq("SENSE_0",  sQs);return q;
	case "O_origin_e" 	:q=getSq("SENSE_0",  sQs);return q;
	case "M_origin_i" 	:q=getSq("INTUIT_0", sQs);return q;
	case "L_origin_e" 	:q=getSq("INTUIT_0", sQs);return q;
	case "U_Feel_1e" 	:q=getSq("SENSE_0",  sQs);return q;
	case "U_Feel_2i" 	:q=getSq("SENSE_0",	 sQs);return q;
	case "U_Feel_3e" 	:q=getSq("SENSE_0",	 sQs);return q;
	case "U_Feel_4i" 	:q=getSq("SENSE_0",  sQs);return q;
	case "O_Think_1i" 	:q=getSq("SENSE_0",  sQs);return q;
	case "O_Think_2e" 	:q=getSq("SENSE_0",  sQs);return q;
	case "O_Think_3i" 	:q=getSq("SENSE_0",  sQs);return q;
	case "O_Think_4e" 	:q=getSq("SENSE_0",  sQs);return q;
	case "M_Feel_1e" 	:q=getSq("INTUIT_0", sQs);return q;
	case "M_Feel_2i" 	:q=getSq("INTUIT_0", sQs);return q;
	case "M_Feel_3e" 	:q=getSq("INTUIT_0", sQs);return q;
	case "M_Feel_4i" 	:q=getSq("INTUIT_0", sQs);return q;
	case "L_Think_1i" 	:q=getSq("INTUIT_0", sQs);return q;
	case "L_Think_2e" 	:q=getSq("INTUIT_0", sQs);return q;
	case "L_Think_3i" 	:q=getSq("INTUIT_0", sQs);return q;
	case "L_Think_4e" 	:q=getSq("INTUIT_0", sQs);return q;

	case "U_dysphoria" 	:q=getSq("PHEN_4_1", sQs);return q; 
	case "U_defeat" 	:q=getSq("PHEN_4_1", sQs);return q;
	case "U_fake" 		:q=getSq("PHEN_4_1", sQs);return q;
	case "U_epiphany" 	:q=getSq("PHEN_4_1", sQs);return q;
	case "U_detach" 	:q=getSq("LOWN_3_2", sQs);return q;
	case "U_burden" 	:q=getSq("LOWN_3_2", sQs);return q;
	case "U_happiness" 	:q=getSq("LOWN_3_2", sQs);return q;
	case "U_fun" 		:q=getSq("LOWN_3_2", sQs);return q;
	case "U_fear" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "U_love" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "U_style" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "U_can" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "U_belief" 	:q=getSq("DLBR_1_4", sQs);return q;
	case "U_like" 		:q=getSq("DLBR_1_4", sQs);return q;
	case "U_motive" 	:q=getSq("DLBR_1_4", sQs);return q;
	case "U_peace" 		:q=getSq("DLBR_1_4", sQs);return q;
	case "O_fail" 		:q=getSq("DLBR_1_4", sQs);return q;
	case "O_loss" 		:q=getSq("DLBR_1_4", sQs);return q;
	case "O_wrong" 		:q=getSq("DLBR_1_4", sQs);return q;
	case "O_success" 	:q=getSq("DLBR_1_4", sQs);return q;
	case "O_shame" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "O_problem" 	:q=getSq("HIGH_2_3", sQs);return q;
	case "O_social" 	:q=getSq("HIGH_2_3", sQs);return q;
	case "O_right" 		:q=getSq("HIGH_2_3", sQs);return q;
	case "O_pain" 		:q=getSq("LOWN_3_2", sQs);return q;
	case "O_life" 		:q=getSq("LOWN_3_2", sQs);return q;
	case "O_order" 		:q=getSq("LOWN_3_2", sQs);return q;
	case "O_should" 	:q=getSq("LOWN_3_2", sQs);return q;
	case "O_body" 		:q=getSq("PHEN_4_1", sQs);return q;
	case "O_need" 		:q=getSq("PHEN_4_1", sQs);return q;
	case "O_tool" 		:q=getSq("PHEN_4_1", sQs);return q;
	case "O_method" 	:q=getSq("PHEN_4_1", sQs);return q;
	case "M_destroy" 	:q=getSq("HRMNY_4_1",sQs);return q;
	case "M_confusion" 	:q=getSq("HRMNY_4_1",sQs);return q;
	case "M_apathy" 	:q=getSq("HRMNY_4_1",sQs);return q;
	case "M_beauty" 	:q=getSq("HRMNY_4_1",sQs);return q;
	case "M_hate" 		:q=getSq("AWARE_2_3",sQs);return q;
	case "M_awkward" 	:q=getSq("AWARE_2_3",sQs);return q;
	case "M_freedom" 	:q=getSq("AWARE_2_3",sQs);return q;
	case "M_event" 		:q=getSq("AWARE_2_3",sQs);return q;
	case "M_greed" 		:q=getSq("SIGNI_3_2",sQs);return q;
	case "M_culture" 	:q=getSq("SIGNI_3_2",sQs);return q;
	case "M_join" 		:q=getSq("SIGNI_3_2",sQs);return q;
	case "M_could" 		:q=getSq("SIGNI_3_2",sQs);return q;
	case "M_norm" 		:q=getSq("UNITY_1_4",sQs);return q;
	case "M_want" 		:q=getSq("UNITY_1_4",sQs);return q;
	case "M_integrity" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "M_innocence" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "L_condemn" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "L_deceive" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "L_withhold" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "L_wisdom" 	:q=getSq("UNITY_1_4",sQs);return q;
	case "L_impose" 	:q=getSq("SIGNI_3_2",sQs);return q;
	case "L_reject" 	:q=getSq("SIGNI_3_2",sQs);return q;
	case "L_metalevel" 	:q=getSq("SIGNI_3_2",sQs);return q;
	case "L_relevance" 	:q=getSq("SIGNI_3_2",sQs);return q;
	case "L_exclude" 	:q=getSq("AWARE_2_3",sQs);return q;
	case "L_purpose" 	:q=getSq("AWARE_2_3",sQs);return q;
	case "L_use" 		:q=getSq("AWARE_2_3",sQs);return q;
	case "L_would" 		:q=getSq("AWARE_2_3",sQs);return q;
	case "L_form" 		:q=getSq("HRMNY_4_1",sQs);return q;
	case "L_meaning" 	:q=getSq("HRMNY_4_1",sQs);return q;
	case "L_kind" 		:q=getSq("HRMNY_4_1",sQs);return q;
	case "L_reason" 	:q=getSq("HRMNY_4_1",sQs);return q}}
function getClassicalQuality(ni,sQs){ var q=null; switch( ni){
	case "U_origin_i" 	:q=getSq("FEEL_0i",  sQs);return q;
	case "O_origin_e" 	:q=getSq("THINK_0e", sQs);return q;
	case "M_origin_i" 	:q=getSq("FEEL_0i",  sQs);return q;
	case "L_origin_e" 	:q=getSq("THINK_0e", sQs);return q;
	case "U_Feel_1e" 	:q=getSq("FEEL_1e",  sQs);return q;
	case "U_Feel_2i" 	:q=getSq("FEEL_2i",	 sQs);return q;
	case "U_Feel_3e" 	:q=getSq("FEEL_3e",	 sQs);return q;
	case "U_Feel_4i" 	:q=getSq("FEEL_4i",  sQs);return q;
	case "O_Think_1i" 	:q=getSq("THINK_1i", sQs);return q;
	case "O_Think_2e" 	:q=getSq("THINK_2e", sQs);return q;
	case "O_Think_3i" 	:q=getSq("THINK_3i", sQs);return q;
	case "O_Think_4e" 	:q=getSq("THINK_4e", sQs);return q;
	case "M_Feel_1e" 	:q=getSq("FEEL_1e",  sQs);return q;
	case "M_Feel_2i" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "M_Feel_3e" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "M_Feel_4i" 	:q=getSq("FEEL_4i",  sQs);return q;
	case "L_Think_1i" 	:q=getSq("THINK_1i", sQs);return q;
	case "L_Think_2e" 	:q=getSq("THINK_2e", sQs);return q;
	case "L_Think_3i" 	:q=getSq("THINK_3i", sQs);return q;
	case "L_Think_4e" 	:q=getSq("THINK_4e", sQs);return q;

	case "U_dysphoria" 	:q=getSq("FEEL_1e",  sQs);return q; 
	case "U_defeat" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "U_fake" 		:q=getSq("FEEL_3e",  sQs);return q;
	case "U_epiphany" 	:q=getSq("FEEL_4i",  sQs);return q;
	case "U_detach" 	:q=getSq("FEEL_1e",  sQs);return q;
	case "U_burden" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "U_happiness" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "U_fun" 		:q=getSq("FEEL_4i",  sQs);return q;
	case "U_fear" 		:q=getSq("FEEL_1e",  sQs);return q;
	case "U_love" 		:q=getSq("FEEL_2i",  sQs);return q;
	case "U_style" 		:q=getSq("FEEL_3e",  sQs);return q;
	case "U_can" 		:q=getSq("FEEL_4i",  sQs);return q;
	case "U_belief" 	:q=getSq("FEEL_1e",  sQs);return q;
	case "U_like" 		:q=getSq("FEEL_2i",  sQs);return q;
	case "U_motive" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "U_peace" 		:q=getSq("FEEL_4i",  sQs);return q;
	case "O_fail" 		:q=getSq("THINK_1i", sQs);return q;
	case "O_loss" 		:q=getSq("THINK_2e", sQs);return q;
	case "O_wrong" 		:q=getSq("THINK_3i", sQs);return q;
	case "O_success" 	:q=getSq("THINK_4e", sQs);return q;
	case "O_shame" 		:q=getSq("THINK_1i", sQs);return q;
	case "O_problem" 	:q=getSq("THINK_2e", sQs);return q;
	case "O_social" 	:q=getSq("THINK_3i", sQs);return q;
	case "O_right" 		:q=getSq("THINK_4e", sQs);return q;
	case "O_pain" 		:q=getSq("THINK_1i", sQs);return q;
	case "O_life" 		:q=getSq("THINK_2e", sQs);return q;
	case "O_order" 		:q=getSq("THINK_3i", sQs);return q;
	case "O_should" 	:q=getSq("THINK_4e", sQs);return q;
	case "O_body" 		:q=getSq("THINK_1i", sQs);return q;
	case "O_need" 		:q=getSq("THINK_2e", sQs);return q;
	case "O_tool" 		:q=getSq("THINK_3i", sQs);return q;
	case "O_method" 	:q=getSq("THINK_4e", sQs);return q;
	case "M_destroy" 	:q=getSq("FEEL_1e",  sQs);return q;
	case "M_confusion" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "M_apathy" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "M_beauty" 	:q=getSq("FEEL_4i",  sQs);return q;
	case "M_hate" 		:q=getSq("FEEL_1e",  sQs);return q;
	case "M_awkward" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "M_freedom" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "M_event" 		:q=getSq("FEEL_4i",  sQs);return q;
	case "M_greed" 		:q=getSq("FEEL_1e",  sQs);return q;
	case "M_culture" 	:q=getSq("FEEL_2i",  sQs);return q;
	case "M_join" 		:q=getSq("FEEL_3e",  sQs);return q;
	case "M_could" 		:q=getSq("FEEL_4i",  sQs);return q;
	case "M_norm" 		:q=getSq("FEEL_1e",  sQs);return q;
	case "M_want" 		:q=getSq("FEEL_2i",  sQs);return q;
	case "M_integrity" 	:q=getSq("FEEL_3e",  sQs);return q;
	case "M_innocence" 	:q=getSq("FEEL_4i",  sQs);return q;
	case "L_condemn" 	:q=getSq("THINK_1i", sQs);return q;
	case "L_deceive" 	:q=getSq("THINK_2e", sQs);return q;
	case "L_withhold" 	:q=getSq("THINK_3i", sQs);return q;
	case "L_wisdom" 	:q=getSq("THINK_4e", sQs);return q;
	case "L_impose" 	:q=getSq("THINK_1i", sQs);return q;
	case "L_reject" 	:q=getSq("THINK_2e", sQs);return q;
	case "L_metalevel" 	:q=getSq("THINK_3i", sQs);return q;
	case "L_relevance" 	:q=getSq("THINK_4e", sQs);return q;
	case "L_exclude" 	:q=getSq("THINK_1i", sQs);return q;
	case "L_purpose" 	:q=getSq("THINK_2e", sQs);return q;
	case "L_use" 		:q=getSq("THINK_3i", sQs);return q;
	case "L_would" 		:q=getSq("THINK_4e", sQs);return q;
	case "L_form" 		:q=getSq("THINK_1i", sQs);return q;
	case "L_meaning" 	:q=getSq("THINK_2e", sQs);return q;
	case "L_kind" 		:q=getSq("THINK_3i", sQs);return q;
	case "L_reason" 	:q=getSq("THINK_4e", sQs);return q}}


function precalcScalarQualities( seed,iEs,parent,s){ var b =null; var sQs =[];
	for(let n=0; n <OM.ab.sQsL; n++){
		/*if( s){ if(s.sQs.length >0){ return s.sQs}}
		else{ */ b =mkSq( seed[n],iEs,parent); sQs.push( b);}/*
				if(s){ switch(seed[n]){ case "FEEL_0i" 	: s.FEEL_0i =b; break; case "THINK_0e" : s.THINK_0e =b; break;
										case "FEEL_1e" 	: s.FEEL_1e =b; break; case "THINK_1i" : s.THINK_1i =b; break;
										case "FEEL_2i" 	: s.FEEL_2i =b; break; case "THINK_2e" : s.THINK_2e =b; break;
										case "FEEL_3e" 	: s.FEEL_3e =b; break; case "THINK_3i" : s.THINK_3i =b; break;
										case "FEEL_4i" 	: s.FEEL_4i =b; break; case "THINK_4e" : s.THINK_4e =b; break;
										case "SENSE_0" 	: s.SENSE_0 =b; break; case "INTUIT_0" : s.INTUIT_0 =b; break;
										case "PHEN_4_1"	: s.PHEN_4_1=b; break; case "HRMNY_4_1": s.HRMNY_4_1=b; break;
										case "LOWN_3_2"	: s.LOWN_3_2=b; break; case "SIGNI_3_2": s.SIGNI_3_2=b; break;
										case "HIGH_2_3" : s.HIGH_2_3=b; break; case "AWARE_2_3": s.AWARE_2_3=b; break;
										case "DLBR_1_4"	: s.DLBR_1_4=b; break; case "UNITY_1_4": s.UNITY_1_4=b; break}}}}*/return sQs}
function mkSq( ni,iEs,parent){ var q=null; switch(ni){
	case "FEEL_0i" 	:q=new AL.ScalarQualities.FEEL_0i 	(ni,iEs); inhSq( q,parent);return q;
	case "FEEL_1e" 	:q=new AL.ScalarQualities.FEEL_1e 	(ni,iEs); inhSq( q,parent);return q;
	case "FEEL_2i" 	:q=new AL.ScalarQualities.FEEL_2i 	(ni,iEs); inhSq( q,parent);return q;
	case "FEEL_3e" 	:q=new AL.ScalarQualities.FEEL_3e 	(ni,iEs); inhSq( q,parent);return q;
	case "FEEL_4i" 	:q=new AL.ScalarQualities.FEEL_4i 	(ni,iEs); inhSq( q,parent);return q;
	case "THINK_0e" :q=new AL.ScalarQualities.THINK_0e 	(ni,iEs); inhSq( q,parent);return q;
	case "THINK_1i" :q=new AL.ScalarQualities.THINK_1i 	(ni,iEs); inhSq( q,parent);return q;
	case "THINK_2e" :q=new AL.ScalarQualities.THINK_2e 	(ni,iEs); inhSq( q,parent);return q;
	case "THINK_3i" :q=new AL.ScalarQualities.THINK_3i 	(ni,iEs); inhSq( q,parent);return q;
	case "THINK_4e" :q=new AL.ScalarQualities.THINK_4e 	(ni,iEs); inhSq( q,parent);return q;
	case "SENSE_0" 	:q=new AL.ScalarQualities.SENSE_0 	(ni,iEs); inhSq( q,parent);return q;
	case "PHEN_4_1" :q=new AL.ScalarQualities.PHEN_4_1 	(ni,iEs); inhSq( q,parent);return q;
	case "LOWN_3_2" :q=new AL.ScalarQualities.LOWN_3_2 	(ni,iEs); inhSq( q,parent);return q;
	case "HIGH_2_3" :q=new AL.ScalarQualities.HIGH_2_3 	(ni,iEs); inhSq( q,parent);return q;
	case "DLBR_1_4" :q=new AL.ScalarQualities.DLBR_1_4 	(ni,iEs); inhSq( q,parent);return q;
	case "INTUIT_0" :q=new AL.ScalarQualities.INTUIT_0 	(ni,iEs); inhSq( q,parent);return q;
	case "HRMNY_4_1":q=new AL.ScalarQualities.HRMNY_4_1 (ni,iEs); inhSq( q,parent);return q;
	case "SIGNI_3_2":q=new AL.ScalarQualities.SIGNI_3_2 (ni,iEs); inhSq( q,parent);return q;
	case "AWARE_2_3":q=new AL.ScalarQualities.AWARE_2_3 (ni,iEs); inhSq( q,parent);return q;
	case "UNITY_1_4":q=new AL.ScalarQualities.UNITY_1_4 (ni,iEs); inhSq( q,parent);return q}}
function inhSq( q,parent){ if( parent){ q.parent=parent.sQs.find(o => o.ni == q.ni)}}
AL.ScalarQualities={ seed : [
	"FEEL_0i", 	"FEEL_1e", 	"FEEL_2i", 	"FEEL_3e", 	"FEEL_4i",	"THINK_0e", "THINK_1i", "THINK_2e", "THINK_3i", "THINK_4e",
	"SENSE_0", 	"PHEN_4_1", "LOWN_3_2", "HIGH_2_3", "DLBR_1_4",	"INTUIT_0", "HRMNY_4_1","SIGNI_3_2","AWARE_2_3","UNITY_1_4"],
	FEEL_0i 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,0,0,true, false,true, false,"FEEL 0i", 	"F0i","No Feeling, \n introverted")},
	FEEL_1e 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,1,1,false,true, true, false,"FEEL 1e", 	"F1e","Extroverted \n weak Feeling")},
	FEEL_2i 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,2,3,true, false,true, false,"FEEL 2i", 	"F2i","Introverted \n weak Feeling")},
	FEEL_3e 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,3,3,false,true, true, true, "FEEL 3e", 	"F3e","Extroverted \n strong Feeling")},
	FEEL_4i 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,4,4,true, false,true, true, "FEEL 4i", 	"F4i","Introverted \n strong Feeling")},
	THINK_0e 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,0,0,false,true, true, false,"THINK 0e", "T0e","No Thinking, \n extroverted")},
	THINK_1i 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,1,1,true, false,true, false,"THINK 1i", "T1i","Introverted \n weak Thinking")},
	THINK_2e 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,2,2,false,true, true, false,"THINK 2e", "T2e","Extroverted \n weak Thinking")},
	THINK_3i 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,3,3,true, false,true, true, "THINK 3i", "T3i","Introverted \n strong Thinking")},
	THINK_4e 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,4,4,false,true, true, true, "THINK 4e", "T4e","Extroverted \n strong Thinking")},
	SENSE_0 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,0,0,true, true, false,false,"SENSE 0", 	"0S0","No Sensing")},
	PHEN_4_1 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,4,1,true, true, false,false,"4 PHEN 1", "4S1","Phenomena")},
	LOWN_3_2 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,3,2,true, true, false,false,"3 LOWN 2", "3S2","Lower needs")},
	HIGH_2_3 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,2,3,true, true, false,true, "2 HIGH 3", "2S3","Higher needs")},
	DLBR_1_4 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,1,4,true, true, false,true, "1 DLBR 4", "1S4","Deliberation")},
	INTUIT_0 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,0,0,true, true, false,false,"INTUIT 0", "0N0","No iNtuition")},
	HRMNY_4_1	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,4,1,true, true, false,false,"4 HRMNY 1","4N1","Harmony")},
	SIGNI_3_2 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,3,2,true, true, false,false,"3 SIGNI 2","3N2","Significance")},
	AWARE_2_3 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,2,3,true, true, false,true, "2 AWARE 3","2N3","Awareness")},
	UNITY_1_4 	: function(ni,iEs){mkScalarQuality2(this,ni,iEs,1,4,true, true, false,true, "1 UNITY 4","1N4","Unity")}}
function mkScalarQuality2( o,ni,iEs,max,min,i,e,rc,str,nI,pN,desc){
	o.ni=ni; o.max=max; o.min=min; o.i=i; o.e=e; o.rc=rc; o.str=str; o.nI=nI; o.pN=pN; o.desc=desc;
	o.iEs =initSq( o,ni,iEs)}

function evalRom(s){ if(s.at.ni=="Sandbox"){}}

function initSq(sq,ni,iEs){ var a=[];var iE=null; switch(ni){
	case "PHEN_4_1" 	: case "HIGH_2_3" 	: 	iE=iEs.find( o => o.ni = "Fi");iE.sQs.push( sq);a.push( iE);
												iE=iEs.find( o => o.ni = "Si");iE.sQs.push( sq);a.push( iE);return a;
	case "LOWN_3_2" 	: case "DLBR_1_4" 	: 	iE=iEs.find( o => o.ni = "Fe");iE.sQs.push( sq);a.push( iE);
												iE=iEs.find( o => o.ni = "Se");iE.sQs.push( sq);a.push( iE);return a;
	case "HRMNY_4_1" 	: case "AWARE_2_3" 	: 	iE=iEs.find( o => o.ni = "Ti");iE.sQs.push( sq);a.push( iE);
												iE=iEs.find( o => o.ni = "Ni");iE.sQs.push( sq);a.push( iE);return a;
	case "SIGNI_3_2" 	: case "UNITY_1_4" 	: 	iE=iEs.find( o => o.ni = "Te");iE.sQs.push( sq);a.push( iE);
												iE=iEs.find( o => o.ni = "Ne");iE.sQs.push( sq);a.push( iE);return a}}
function initXtR( s){ var b=null; switch(s.tYl.ab.ni){
	case "Fi" : s.safe ? b =mkSq("HIGH_2_3", s.tY.iEs, s.ab) : b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) 	;return b;
	case "Fe" : s.safe ? b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) : b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) 	;return b;
	case "Si" : s.safe ? b =mkSq("PHEN_4_1", s.tY.iEs, s.ab) : b =mkSq("HIGH_2_3", s.tY.iEs, s.ab)  ;return b;
	case "Se" : s.safe ? b =mkSq("LOWN_3_2", s.tY.iEs, s.ab) : b =mkSq("DLBR_1_4", s.tY.iEs, s.ab) 	;return b;
	case "Ni" : s.safe ? b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) : b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) 	;return b;
	case "Ne" : s.safe ? b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) : b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) 	;return b;
	case "Ti" : s.safe ? b =mkSq("HRMNY_4_1",s.tY.iEs, s.ab) : b =mkSq("AWARE_2_3",s.tY.iEs, s.ab) 	;return b;
	case "Te" : s.safe ? b =mkSq("SIGNI_3_2",s.tY.iEs, s.ab) : b =mkSq("UNITY_1_4",s.tY.iEs, s.ab) 	;return b}}
function initXtC( s){ var b=null; switch(s.tYl.ab.ni){
	case "Fi":case "Ni": s.xtR.str ? b=mkSq("FEEL_4i", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_2i", s.tY.iEs, s.ab) ;return b;
	case "Fe":case "Ne": s.xtR.str ? b=mkSq("FEEL_3e", s.tY.iEs, s.ab) 	: b=mkSq("FEEL_1i", s.tY.iEs, s.ab) ;return b; 
	case "Si":case "Ti": s.xtR.str ? b=mkSq("THINK_3i", s.tY.iEs, s.ab) : b=mkSq("THINK_1i", s.tY.iEs, s.ab);return b; 
	case "Se":case "Te": s.xtR.str ? b=mkSq("THINK_4e", s.tY.iEs, s.ab) : b=mkSq("THINK_2e", s.tY.iEs, s.ab);return b}}
function initXtn( s){ var b=mkVqByScalars( s.xtR,s.xtC,s.ab,s); console.log(b);return b}

/*function initNtn(iE){ var b=null; switch(iE.ni){
		case "Fi" : case "Ni" : b = mkSq("FEEL_0i"); 	return b;
		case "Fe" : case "Ne" : b = mkSq("FEEL_1e"); 	return b;
		case "Si" : case "Ti" : b = mkSq("THINK_0e"); 	return b;
		case "Se" : case "Te" : b = mkSq("THINK_1i"); 	return b}}
function initXtn(iE,ntn){ var b=null; switch(ntn.ni){
		case "FEEL_0i"  	: if(iE.ni=="Fi"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "FEEL_1e"  	: if(iE.ni=="Fe"){ b =mkSq("DLBR_1_4")}	else{b =mkSq("UNITY_1_4")}return b;
		case "THINK_0e"  	: if(iE.ni=="Se"){ b =mkSq("SENSE_0")} 	else{b =mkSq("INTUIT_0")} return b;
		case "THINK_1i"  	: if(iE.ni=="Si"){ b =mkSq("PHEN_4_1")}	else{b =mkSq("HRMNY_4_1")}return b}}*/
//replace sense 0 and intuit 0 with inspection of environment


function precalcMoods(seed,parent){ var ms=[]; var m=null;
	for(let n=0; n<OM.ab.mDsL; n++){ m=mkMood(seed[n],parent); ms.push(m);} return ms}
function mkMood( ni,parent,arr){ var m=null; switch(ni){
	case "MAS_MAS_obj_p_"   : m= new AL.Moods.MAS_MAS_obj_p_  ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_m" 	: m= new AL.Moods.MAS_MAS_obj_p_m ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_p" 	: m= new AL.Moods.MAS_MAS_obj_p_p ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_mp"	: m= new AL.Moods.MAS_MAS_obj_p_mp( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_pm"	: m= new AL.Moods.MAS_MAS_obj_p_pm( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_p_b" 	: m= new AL.Moods.MAS_MAS_obj_p_b ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_"   : m= new AL.Moods.MAS_MAS_obj_m_  ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_m" 	: m= new AL.Moods.MAS_MAS_obj_m_m ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_p" 	: m= new AL.Moods.MAS_MAS_obj_m_p ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_mp" : m= new AL.Moods.MAS_MAS_obj_m_mp( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_pm" : m= new AL.Moods.MAS_MAS_obj_m_pm( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_obj_m_b" 	: m= new AL.Moods.MAS_MAS_obj_m_b ( ni); inhMd( m,parent,arr); return m;

	case "mas_MAS_obj_p_"   : m= new AL.Moods.mas_MAS_obj_p_  ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_m" 	: m= new AL.Moods.mas_MAS_obj_p_m ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_p" 	: m= new AL.Moods.mas_MAS_obj_p_p ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_mp"	: m= new AL.Moods.mas_MAS_obj_p_mp( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_pm"	: m= new AL.Moods.mas_MAS_obj_p_pm( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_p_b" 	: m= new AL.Moods.mas_MAS_obj_p_b ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_"   : m= new AL.Moods.mas_MAS_obj_m_  ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_m" 	: m= new AL.Moods.mas_MAS_obj_m_m ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_p" 	: m= new AL.Moods.mas_MAS_obj_m_p ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_mp" : m= new AL.Moods.mas_MAS_obj_m_mp( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_pm" : m= new AL.Moods.mas_MAS_obj_m_pm( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_obj_m_b" 	: m= new AL.Moods.mas_MAS_obj_m_b ( ni); inhMd( m,parent,arr); return m;

	case "fem_MAS_obj_p_"   : m= new AL.Moods.fem_MAS_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_m" 	: m= new AL.Moods.fem_MAS_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_p" 	: m= new AL.Moods.fem_MAS_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_mp"	: m= new AL.Moods.fem_MAS_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_pm"	: m= new AL.Moods.fem_MAS_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_p_b" 	: m= new AL.Moods.fem_MAS_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_"   : m= new AL.Moods.fem_MAS_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_m" 	: m= new AL.Moods.fem_MAS_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_p" 	: m= new AL.Moods.fem_MAS_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_mp" : m= new AL.Moods.fem_MAS_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_pm" : m= new AL.Moods.fem_MAS_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_obj_m_b" 	: m= new AL.Moods.fem_MAS_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_MAS_obj_p_"   : m= new AL.Moods.FEM_MAS_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_m" 	: m= new AL.Moods.FEM_MAS_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_p" 	: m= new AL.Moods.FEM_MAS_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_mp"	: m= new AL.Moods.FEM_MAS_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_pm"	: m= new AL.Moods.FEM_MAS_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_p_b" 	: m= new AL.Moods.FEM_MAS_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_"   : m= new AL.Moods.FEM_MAS_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_m" 	: m= new AL.Moods.FEM_MAS_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_p" 	: m= new AL.Moods.FEM_MAS_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_mp" : m= new AL.Moods.FEM_MAS_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_pm" : m= new AL.Moods.FEM_MAS_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_obj_m_b" 	: m= new AL.Moods.FEM_MAS_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_mas_obj_p_"   : m= new AL.Moods.MAS_mas_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_m" 	: m= new AL.Moods.MAS_mas_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_p" 	: m= new AL.Moods.MAS_mas_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_mp" : m= new AL.Moods.MAS_mas_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_pm" : m= new AL.Moods.MAS_mas_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_p_b" 	: m= new AL.Moods.MAS_mas_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_"   : m= new AL.Moods.MAS_mas_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_m" 	: m= new AL.Moods.MAS_mas_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_p" 	: m= new AL.Moods.MAS_mas_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_mp" : m= new AL.Moods.MAS_mas_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_pm" : m= new AL.Moods.MAS_mas_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_obj_m_b" 	: m= new AL.Moods.MAS_mas_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_mas_obj_p_"   : m= new AL.Moods.mas_mas_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_m" 	: m= new AL.Moods.mas_mas_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_p" 	: m= new AL.Moods.mas_mas_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_mp" : m= new AL.Moods.mas_mas_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_pm" : m= new AL.Moods.mas_mas_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_p_b" 	: m= new AL.Moods.mas_mas_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_"   : m= new AL.Moods.mas_mas_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_m" 	: m= new AL.Moods.mas_mas_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_p" 	: m= new AL.Moods.mas_mas_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_mp" : m= new AL.Moods.mas_mas_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_pm" : m= new AL.Moods.mas_mas_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_obj_m_b" 	: m= new AL.Moods.mas_mas_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_mas_obj_p_"   : m= new AL.Moods.fem_mas_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_m" 	: m= new AL.Moods.fem_mas_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_p" 	: m= new AL.Moods.fem_mas_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_mp" : m= new AL.Moods.fem_mas_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_pm" : m= new AL.Moods.fem_mas_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_p_b" 	: m= new AL.Moods.fem_mas_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_"   : m= new AL.Moods.fem_mas_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_m" 	: m= new AL.Moods.fem_mas_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_p" 	: m= new AL.Moods.fem_mas_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_mp" : m= new AL.Moods.fem_mas_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_pm" : m= new AL.Moods.fem_mas_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_obj_m_b" 	: m= new AL.Moods.fem_mas_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_mas_obj_p_"   : m= new AL.Moods.FEM_mas_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_m" 	: m= new AL.Moods.FEM_mas_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_p" 	: m= new AL.Moods.FEM_mas_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_mp" : m= new AL.Moods.FEM_mas_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_pm" : m= new AL.Moods.FEM_mas_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_p_b" 	: m= new AL.Moods.FEM_mas_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_"   : m= new AL.Moods.FEM_mas_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_m" 	: m= new AL.Moods.FEM_mas_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_p" 	: m= new AL.Moods.FEM_mas_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_mp" : m= new AL.Moods.FEM_mas_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_pm" : m= new AL.Moods.FEM_mas_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_obj_m_b" 	: m= new AL.Moods.FEM_mas_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_fem_obj_p_"   : m= new AL.Moods.MAS_fem_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_m" 	: m= new AL.Moods.MAS_fem_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_p" 	: m= new AL.Moods.MAS_fem_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_mp" : m= new AL.Moods.MAS_fem_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_pm" : m= new AL.Moods.MAS_fem_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_p_b" 	: m= new AL.Moods.MAS_fem_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_"   : m= new AL.Moods.MAS_fem_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_m" 	: m= new AL.Moods.MAS_fem_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_p" 	: m= new AL.Moods.MAS_fem_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_mp" : m= new AL.Moods.MAS_fem_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_pm" : m= new AL.Moods.MAS_fem_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_obj_m_b" 	: m= new AL.Moods.MAS_fem_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_fem_obj_p_"   : m= new AL.Moods.mas_fem_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_m" 	: m= new AL.Moods.mas_fem_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_p" 	: m= new AL.Moods.mas_fem_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_mp" : m= new AL.Moods.mas_fem_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_pm" : m= new AL.Moods.mas_fem_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_p_b" 	: m= new AL.Moods.mas_fem_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_"   : m= new AL.Moods.mas_fem_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_m" 	: m= new AL.Moods.mas_fem_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_p" 	: m= new AL.Moods.mas_fem_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_mp" : m= new AL.Moods.mas_fem_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_pm" : m= new AL.Moods.mas_fem_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_obj_m_b" 	: m= new AL.Moods.mas_fem_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_fem_obj_p_"   : m= new AL.Moods.fem_fem_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_m" 	: m= new AL.Moods.fem_fem_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_p" 	: m= new AL.Moods.fem_fem_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_mp" : m= new AL.Moods.fem_fem_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_pm" : m= new AL.Moods.fem_fem_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_p_b" 	: m= new AL.Moods.fem_fem_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_"   : m= new AL.Moods.fem_fem_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_m" 	: m= new AL.Moods.fem_fem_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_p" 	: m= new AL.Moods.fem_fem_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_mp" : m= new AL.Moods.fem_fem_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_pm" : m= new AL.Moods.fem_fem_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_obj_m_b" 	: m= new AL.Moods.fem_fem_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_fem_obj_p_"   : m= new AL.Moods.FEM_fem_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_m" 	: m= new AL.Moods.FEM_fem_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_p" 	: m= new AL.Moods.FEM_fem_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_mp" : m= new AL.Moods.FEM_fem_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_pm" : m= new AL.Moods.FEM_fem_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_p_b" 	: m= new AL.Moods.FEM_fem_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_"   : m= new AL.Moods.FEM_fem_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_m" 	: m= new AL.Moods.FEM_fem_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_p" 	: m= new AL.Moods.FEM_fem_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_mp" : m= new AL.Moods.FEM_fem_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_pm" : m= new AL.Moods.FEM_fem_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_obj_m_b" 	: m= new AL.Moods.FEM_fem_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_FEM_obj_p_"   : m= new AL.Moods.MAS_FEM_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_m" 	: m= new AL.Moods.MAS_FEM_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_p" 	: m= new AL.Moods.MAS_FEM_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_mp" : m= new AL.Moods.MAS_FEM_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_pm" : m= new AL.Moods.MAS_FEM_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_p_b" 	: m= new AL.Moods.MAS_FEM_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_"   : m= new AL.Moods.MAS_FEM_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_m" 	: m= new AL.Moods.MAS_FEM_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_p" 	: m= new AL.Moods.MAS_FEM_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_mp" : m= new AL.Moods.MAS_FEM_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_pm" : m= new AL.Moods.MAS_FEM_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_obj_m_b" 	: m= new AL.Moods.MAS_FEM_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_FEM_obj_p_"   : m= new AL.Moods.mas_FEM_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_m" 	: m= new AL.Moods.mas_FEM_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_p" 	: m= new AL.Moods.mas_FEM_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_mp" : m= new AL.Moods.mas_FEM_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_pm" : m= new AL.Moods.mas_FEM_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_p_b" 	: m= new AL.Moods.mas_FEM_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_"   : m= new AL.Moods.mas_FEM_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_m" 	: m= new AL.Moods.mas_FEM_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_p" 	: m= new AL.Moods.mas_FEM_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_mp" : m= new AL.Moods.mas_FEM_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_pm" : m= new AL.Moods.mas_FEM_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_obj_m_b" 	: m= new AL.Moods.mas_FEM_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_FEM_obj_p_"   : m= new AL.Moods.fem_FEM_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_m" 	: m= new AL.Moods.fem_FEM_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_p" 	: m= new AL.Moods.fem_FEM_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_mp" : m= new AL.Moods.fem_FEM_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_pm" : m= new AL.Moods.fem_FEM_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_p_b" 	: m= new AL.Moods.fem_FEM_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_"   : m= new AL.Moods.fem_FEM_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_m" 	: m= new AL.Moods.fem_FEM_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_p" 	: m= new AL.Moods.fem_FEM_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_mp" : m= new AL.Moods.fem_FEM_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_pm" : m= new AL.Moods.fem_FEM_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_obj_m_b" 	: m= new AL.Moods.fem_FEM_obj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_FEM_obj_p_"   : m= new AL.Moods.FEM_FEM_obj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_m" 	: m= new AL.Moods.FEM_FEM_obj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_p" 	: m= new AL.Moods.FEM_FEM_obj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_mp" : m= new AL.Moods.FEM_FEM_obj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_pm" : m= new AL.Moods.FEM_FEM_obj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_p_b" 	: m= new AL.Moods.FEM_FEM_obj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_"   : m= new AL.Moods.FEM_FEM_obj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_m" 	: m= new AL.Moods.FEM_FEM_obj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_p" 	: m= new AL.Moods.FEM_FEM_obj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_mp" : m= new AL.Moods.FEM_FEM_obj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_pm" : m= new AL.Moods.FEM_FEM_obj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_obj_m_b" 	: m= new AL.Moods.FEM_FEM_obj_m_b ( ni); inhMd( m,parent,arr);return m;


	case "MAS_MAS_sbj_p_"   : m= new AL.Moods.MAS_MAS_sbj_p_  ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_m"  : m= new AL.Moods.MAS_MAS_sbj_p_m ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_p"  : m= new AL.Moods.MAS_MAS_sbj_p_p ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_mp" : m= new AL.Moods.MAS_MAS_sbj_p_mp( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_pm" : m= new AL.Moods.MAS_MAS_sbj_p_pm( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_p_b"  : m= new AL.Moods.MAS_MAS_sbj_p_b ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_"   : m= new AL.Moods.MAS_MAS_sbj_m_  ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_m"  : m= new AL.Moods.MAS_MAS_sbj_m_m ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_p"  : m= new AL.Moods.MAS_MAS_sbj_m_p ( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_mp" : m= new AL.Moods.MAS_MAS_sbj_m_mp( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_pm" : m= new AL.Moods.MAS_MAS_sbj_m_pm( ni); inhMd( m,parent,arr); return m;
	case "MAS_MAS_sbj_m_b"  : m= new AL.Moods.MAS_MAS_sbj_m_b ( ni); inhMd( m,parent,arr); return m;

	case "mas_MAS_sbj_p_"   : m= new AL.Moods.mas_MAS_sbj_p_  ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_m"  : m= new AL.Moods.mas_MAS_sbj_p_m ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_p"  : m= new AL.Moods.mas_MAS_sbj_p_p ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_mp" : m= new AL.Moods.mas_MAS_sbj_p_mp( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_pm" : m= new AL.Moods.mas_MAS_sbj_p_pm( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_p_b"  : m= new AL.Moods.mas_MAS_sbj_p_b ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_"   : m= new AL.Moods.mas_MAS_sbj_m_  ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_m"  : m= new AL.Moods.mas_MAS_sbj_m_m ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_p"  : m= new AL.Moods.mas_MAS_sbj_m_p ( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_mp" : m= new AL.Moods.mas_MAS_sbj_m_mp( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_pm" : m= new AL.Moods.mas_MAS_sbj_m_pm( ni); inhMd( m,parent,arr); return m;
	case "mas_MAS_sbj_m_b"  : m= new AL.Moods.mas_MAS_sbj_m_b ( ni); inhMd( m,parent,arr); return m;

	case "fem_MAS_sbj_p_"   : m= new AL.Moods.fem_MAS_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_m"  : m= new AL.Moods.fem_MAS_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_p"  : m= new AL.Moods.fem_MAS_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_mp" : m= new AL.Moods.fem_MAS_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_pm" : m= new AL.Moods.fem_MAS_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_p_b"  : m= new AL.Moods.fem_MAS_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_"   : m= new AL.Moods.fem_MAS_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_m"  : m= new AL.Moods.fem_MAS_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_p"  : m= new AL.Moods.fem_MAS_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_mp" : m= new AL.Moods.fem_MAS_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_pm" : m= new AL.Moods.fem_MAS_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_MAS_sbj_m_b"  : m= new AL.Moods.fem_MAS_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_MAS_sbj_p_"   : m= new AL.Moods.FEM_MAS_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_m"  : m= new AL.Moods.FEM_MAS_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_p"  : m= new AL.Moods.FEM_MAS_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_mp" : m= new AL.Moods.FEM_MAS_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_pm" : m= new AL.Moods.FEM_MAS_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_p_b"  : m= new AL.Moods.FEM_MAS_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_"   : m= new AL.Moods.FEM_MAS_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_m"  : m= new AL.Moods.FEM_MAS_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_p"  : m= new AL.Moods.FEM_MAS_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_mp" : m= new AL.Moods.FEM_MAS_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_pm" : m= new AL.Moods.FEM_MAS_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_MAS_sbj_m_b"  : m= new AL.Moods.FEM_MAS_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_mas_sbj_p_"   : m= new AL.Moods.MAS_mas_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_m"  : m= new AL.Moods.MAS_mas_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_p"  : m= new AL.Moods.MAS_mas_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_mp" : m= new AL.Moods.MAS_mas_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_pm" : m= new AL.Moods.MAS_mas_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_p_b"  : m= new AL.Moods.MAS_mas_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_"   : m= new AL.Moods.MAS_mas_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_m"  : m= new AL.Moods.MAS_mas_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_p"  : m= new AL.Moods.MAS_mas_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_mp" : m= new AL.Moods.MAS_mas_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_pm" : m= new AL.Moods.MAS_mas_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_mas_sbj_m_b"  : m= new AL.Moods.MAS_mas_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_mas_sbj_p_"   : m= new AL.Moods.mas_mas_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_m"  : m= new AL.Moods.mas_mas_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_p"  : m= new AL.Moods.mas_mas_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_mp" : m= new AL.Moods.mas_mas_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_pm" : m= new AL.Moods.mas_mas_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_p_b"  : m= new AL.Moods.mas_mas_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_"   : m= new AL.Moods.mas_mas_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_m"  : m= new AL.Moods.mas_mas_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_p"  : m= new AL.Moods.mas_mas_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_mp" : m= new AL.Moods.mas_mas_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_pm" : m= new AL.Moods.mas_mas_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_mas_sbj_m_b"  : m= new AL.Moods.mas_mas_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_mas_sbj_p_"   : m= new AL.Moods.fem_mas_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_m"  : m= new AL.Moods.fem_mas_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_p"  : m= new AL.Moods.fem_mas_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_mp" : m= new AL.Moods.fem_mas_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_pm" : m= new AL.Moods.fem_mas_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_p_b"  : m= new AL.Moods.fem_mas_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_"   : m= new AL.Moods.fem_mas_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_m"  : m= new AL.Moods.fem_mas_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_p"  : m= new AL.Moods.fem_mas_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_mp" : m= new AL.Moods.fem_mas_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_pm" : m= new AL.Moods.fem_mas_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_mas_sbj_m_b"  : m= new AL.Moods.fem_mas_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_mas_sbj_p_"   : m= new AL.Moods.FEM_mas_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_m"  : m= new AL.Moods.FEM_mas_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_p"  : m= new AL.Moods.FEM_mas_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_mp" : m= new AL.Moods.FEM_mas_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_pm" : m= new AL.Moods.FEM_mas_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_p_b"  : m= new AL.Moods.FEM_mas_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_"   : m= new AL.Moods.FEM_mas_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_m"  : m= new AL.Moods.FEM_mas_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_p"  : m= new AL.Moods.FEM_mas_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_mp" : m= new AL.Moods.FEM_mas_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_pm" : m= new AL.Moods.FEM_mas_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_mas_sbj_m_b"  : m= new AL.Moods.FEM_mas_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_fem_sbj_p_"   : m= new AL.Moods.MAS_fem_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_m"  : m= new AL.Moods.MAS_fem_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_p"  : m= new AL.Moods.MAS_fem_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_mp" : m= new AL.Moods.MAS_fem_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_pm" : m= new AL.Moods.MAS_fem_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_p_b"  : m= new AL.Moods.MAS_fem_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_"   : m= new AL.Moods.MAS_fem_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_m"  : m= new AL.Moods.MAS_fem_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_p"  : m= new AL.Moods.MAS_fem_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_mp" : m= new AL.Moods.MAS_fem_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_pm" : m= new AL.Moods.MAS_fem_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_fem_sbj_m_b"  : m= new AL.Moods.MAS_fem_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_fem_sbj_p_"   : m= new AL.Moods.mas_fem_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_m"  : m= new AL.Moods.mas_fem_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_p"  : m= new AL.Moods.mas_fem_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_mp" : m= new AL.Moods.mas_fem_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_pm" : m= new AL.Moods.mas_fem_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_p_b"  : m= new AL.Moods.mas_fem_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_"   : m= new AL.Moods.mas_fem_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_m"  : m= new AL.Moods.mas_fem_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_p"  : m= new AL.Moods.mas_fem_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_mp" : m= new AL.Moods.mas_fem_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_pm" : m= new AL.Moods.mas_fem_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_fem_sbj_m_b"  : m= new AL.Moods.mas_fem_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_fem_sbj_p_"   : m= new AL.Moods.fem_fem_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_m"  : m= new AL.Moods.fem_fem_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_p"  : m= new AL.Moods.fem_fem_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_mp" : m= new AL.Moods.fem_fem_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_pm" : m= new AL.Moods.fem_fem_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_p_b"  : m= new AL.Moods.fem_fem_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_"   : m= new AL.Moods.fem_fem_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_m"  : m= new AL.Moods.fem_fem_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_p"  : m= new AL.Moods.fem_fem_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_mp" : m= new AL.Moods.fem_fem_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_pm" : m= new AL.Moods.fem_fem_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_fem_sbj_m_b"  : m= new AL.Moods.fem_fem_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_fem_sbj_p_"   : m= new AL.Moods.FEM_fem_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_m"  : m= new AL.Moods.FEM_fem_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_p"  : m= new AL.Moods.FEM_fem_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_mp" : m= new AL.Moods.FEM_fem_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_pm" : m= new AL.Moods.FEM_fem_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_p_b"  : m= new AL.Moods.FEM_fem_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_"   : m= new AL.Moods.FEM_fem_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_m"  : m= new AL.Moods.FEM_fem_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_p"  : m= new AL.Moods.FEM_fem_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_mp" : m= new AL.Moods.FEM_fem_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_pm" : m= new AL.Moods.FEM_fem_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_fem_sbj_m_b"  : m= new AL.Moods.FEM_fem_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "MAS_FEM_sbj_p_"   : m= new AL.Moods.MAS_FEM_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_m"  : m= new AL.Moods.MAS_FEM_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_p"  : m= new AL.Moods.MAS_FEM_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_mp" : m= new AL.Moods.MAS_FEM_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_pm" : m= new AL.Moods.MAS_FEM_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_p_b"  : m= new AL.Moods.MAS_FEM_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_"   : m= new AL.Moods.MAS_FEM_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_m"  : m= new AL.Moods.MAS_FEM_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_p"  : m= new AL.Moods.MAS_FEM_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_mp" : m= new AL.Moods.MAS_FEM_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_pm" : m= new AL.Moods.MAS_FEM_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "MAS_FEM_sbj_m_b"  : m= new AL.Moods.MAS_FEM_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "mas_FEM_sbj_p_"   : m= new AL.Moods.mas_FEM_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_m"  : m= new AL.Moods.mas_FEM_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_p"  : m= new AL.Moods.mas_FEM_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_mp" : m= new AL.Moods.mas_FEM_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_pm" : m= new AL.Moods.mas_FEM_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_p_b"  : m= new AL.Moods.mas_FEM_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_"   : m= new AL.Moods.mas_FEM_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_m"  : m= new AL.Moods.mas_FEM_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_p"  : m= new AL.Moods.mas_FEM_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_mp" : m= new AL.Moods.mas_FEM_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_pm" : m= new AL.Moods.mas_FEM_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "mas_FEM_sbj_m_b"  : m= new AL.Moods.mas_FEM_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "fem_FEM_sbj_p_"   : m= new AL.Moods.fem_FEM_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_m"  : m= new AL.Moods.fem_FEM_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_p"  : m= new AL.Moods.fem_FEM_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_mp" : m= new AL.Moods.fem_FEM_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_pm" : m= new AL.Moods.fem_FEM_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_p_b"  : m= new AL.Moods.fem_FEM_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_"   : m= new AL.Moods.fem_FEM_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_m"  : m= new AL.Moods.fem_FEM_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_p"  : m= new AL.Moods.fem_FEM_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_mp" : m= new AL.Moods.fem_FEM_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_pm" : m= new AL.Moods.fem_FEM_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "fem_FEM_sbj_m_b"  : m= new AL.Moods.fem_FEM_sbj_m_b ( ni); inhMd( m,parent,arr);return m;

	case "FEM_FEM_sbj_p_"   : m= new AL.Moods.FEM_FEM_sbj_p_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_m"  : m= new AL.Moods.FEM_FEM_sbj_p_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_p"  : m= new AL.Moods.FEM_FEM_sbj_p_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_mp" : m= new AL.Moods.FEM_FEM_sbj_p_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_pm" : m= new AL.Moods.FEM_FEM_sbj_p_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_p_b"  : m= new AL.Moods.FEM_FEM_sbj_p_b ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_"   : m= new AL.Moods.FEM_FEM_sbj_m_  ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_m"  : m= new AL.Moods.FEM_FEM_sbj_m_m ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_p"  : m= new AL.Moods.FEM_FEM_sbj_m_p ( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_mp" : m= new AL.Moods.FEM_FEM_sbj_m_mp( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_pm" : m= new AL.Moods.FEM_FEM_sbj_m_pm( ni); inhMd( m,parent,arr);return m;
	case "FEM_FEM_sbj_m_b"  : m= new AL.Moods.FEM_FEM_sbj_m_b ( ni); inhMd( m,parent,arr);return m}}
function inhMd( mD,parent,arr){ if( parent) { mD.parent=parent.mDs.find(o => o.ni == mD.ni)}
								if( arr) 	{ arr.push( mD)}}
AL.Moods={ seed : [
	"MAS_MAS_obj_m_","MAS_MAS_obj_m_m","MAS_MAS_obj_m_p","MAS_MAS_obj_m_mp","MAS_MAS_obj_m_pm","MAS_MAS_obj_m_b",
	"MAS_MAS_obj_p_","MAS_MAS_obj_p_m","MAS_MAS_obj_p_p","MAS_MAS_obj_p_mp","MAS_MAS_obj_p_pm","MAS_MAS_obj_p_b",
	"MAS_mas_obj_m_","MAS_mas_obj_m_m","MAS_mas_obj_m_p","MAS_mas_obj_m_mp","MAS_mas_obj_m_pm","MAS_mas_obj_m_b",
	"MAS_mas_obj_p_","MAS_mas_obj_p_m","MAS_mas_obj_p_p","MAS_mas_obj_p_mp","MAS_mas_obj_p_pm","MAS_mas_obj_p_b",
	"MAS_fem_obj_m_","MAS_fem_obj_m_m","MAS_fem_obj_m_p","MAS_fem_obj_m_mp","MAS_fem_obj_m_pm","MAS_fem_obj_m_b",
	"MAS_fem_obj_p_","MAS_fem_obj_p_m","MAS_fem_obj_p_p","MAS_fem_obj_p_mp","MAS_fem_obj_p_pm","MAS_fem_obj_p_b",
	"MAS_FEM_obj_m_","MAS_FEM_obj_m_m","MAS_FEM_obj_m_p","MAS_FEM_obj_m_mp","MAS_FEM_obj_m_pm","MAS_FEM_obj_m_b",
	"MAS_FEM_obj_p_","MAS_FEM_obj_p_m","MAS_FEM_obj_p_p","MAS_FEM_obj_p_mp","MAS_FEM_obj_p_pm","MAS_FEM_obj_p_b",

	"mas_MAS_obj_m_","mas_MAS_obj_m_m","mas_MAS_obj_m_p","mas_MAS_obj_m_mp","mas_MAS_obj_m_pm","mas_MAS_obj_m_b",
	"mas_MAS_obj_p_","mas_MAS_obj_p_m","mas_MAS_obj_p_p","mas_MAS_obj_p_mp","mas_MAS_obj_p_pm","mas_MAS_obj_p_b",
	"mas_mas_obj_m_","mas_mas_obj_m_m","mas_mas_obj_m_p","mas_mas_obj_m_mp","mas_mas_obj_m_pm","mas_mas_obj_m_b",
	"mas_mas_obj_p_","mas_mas_obj_p_m","mas_mas_obj_p_p","mas_mas_obj_p_mp","mas_mas_obj_p_pm","mas_mas_obj_p_b",
	"mas_fem_obj_m_","mas_fem_obj_m_m","mas_fem_obj_m_p","mas_fem_obj_m_mp","mas_fem_obj_m_pm","mas_fem_obj_m_b",
	"mas_fem_obj_p_","mas_fem_obj_p_m","mas_fem_obj_p_p","mas_fem_obj_p_mp","mas_fem_obj_p_pm","mas_fem_obj_p_b",
	"mas_FEM_obj_m_","mas_FEM_obj_m_m","mas_FEM_obj_m_p","mas_FEM_obj_m_mp","mas_FEM_obj_m_pm","mas_FEM_obj_m_b",
	"mas_FEM_obj_p_","mas_FEM_obj_p_m","mas_FEM_obj_p_p","mas_FEM_obj_p_mp","mas_FEM_obj_p_pm","mas_FEM_obj_p_b",

	"fem_MAS_obj_m_","fem_MAS_obj_m_m","fem_MAS_obj_m_p","fem_MAS_obj_m_mp","fem_MAS_obj_m_pm","fem_MAS_obj_m_b",
	"fem_MAS_obj_p_","fem_MAS_obj_p_m","fem_MAS_obj_p_p","fem_MAS_obj_p_mp","fem_MAS_obj_p_pm","fem_MAS_obj_p_b",
	"fem_mas_obj_m_","fem_mas_obj_m_m","fem_mas_obj_m_p","fem_mas_obj_m_mp","fem_mas_obj_m_pm","fem_mas_obj_m_b",
	"fem_mas_obj_p_","fem_mas_obj_p_m","fem_mas_obj_p_p","fem_mas_obj_p_mp","fem_mas_obj_p_pm","fem_mas_obj_p_b",
	"fem_fem_obj_m_","fem_fem_obj_m_m","fem_fem_obj_m_p","fem_fem_obj_m_mp","fem_fem_obj_m_pm","fem_fem_obj_m_b",
	"fem_fem_obj_p_","fem_fem_obj_p_m","fem_fem_obj_p_p","fem_fem_obj_p_mp","fem_fem_obj_p_pm","fem_fem_obj_p_b",
	"fem_FEM_obj_m_","fem_FEM_obj_m_m","fem_FEM_obj_m_p","fem_FEM_obj_m_mp","fem_FEM_obj_m_pm","fem_FEM_obj_m_b",
	"fem_FEM_obj_p_","fem_FEM_obj_p_m","fem_FEM_obj_p_p","fem_FEM_obj_p_mp","fem_FEM_obj_p_pm","fem_FEM_obj_p_b",

	"FEM_MAS_obj_m_","FEM_MAS_obj_m_m","FEM_MAS_obj_m_p","FEM_MAS_obj_m_mp","FEM_MAS_obj_m_pm","FEM_MAS_obj_m_b",
	"FEM_MAS_obj_p_","FEM_MAS_obj_p_m","FEM_MAS_obj_p_p","FEM_MAS_obj_p_mp","FEM_MAS_obj_p_pm","FEM_MAS_obj_p_b",
	"FEM_mas_obj_m_","FEM_mas_obj_m_m","FEM_mas_obj_m_p","FEM_mas_obj_m_mp","FEM_mas_obj_m_pm","FEM_mas_obj_m_b",
	"FEM_mas_obj_p_","FEM_mas_obj_p_m","FEM_mas_obj_p_p","FEM_mas_obj_p_mp","FEM_mas_obj_p_pm","FEM_mas_obj_p_b",
	"FEM_fem_obj_m_","FEM_fem_obj_m_m","FEM_fem_obj_m_p","FEM_fem_obj_m_mp","FEM_fem_obj_m_pm","FEM_fem_obj_m_b",
	"FEM_fem_obj_p_","FEM_fem_obj_p_m","FEM_fem_obj_p_p","FEM_fem_obj_p_mp","FEM_fem_obj_p_pm","FEM_fem_obj_p_b",
	"FEM_FEM_obj_m_","FEM_FEM_obj_m_m","FEM_FEM_obj_m_p","FEM_FEM_obj_m_mp","FEM_FEM_obj_m_pm","FEM_FEM_obj_m_b",
	"FEM_FEM_obj_p_","FEM_FEM_obj_p_m","FEM_FEM_obj_p_p","FEM_FEM_obj_p_mp","FEM_FEM_obj_p_pm","FEM_FEM_obj_p_b",


	"MAS_MAS_sbj_m_","MAS_MAS_sbj_m_m","MAS_MAS_sbj_m_p","MAS_MAS_sbj_m_mp","MAS_MAS_sbj_m_pm","MAS_MAS_sbj_m_b",
	"MAS_MAS_sbj_p_","MAS_MAS_sbj_p_m","MAS_MAS_sbj_p_p","MAS_MAS_sbj_p_mp","MAS_MAS_sbj_p_pm","MAS_MAS_sbj_p_b",
	"MAS_mas_sbj_m_","MAS_mas_sbj_m_m","MAS_mas_sbj_m_p","MAS_mas_sbj_m_mp","MAS_mas_sbj_m_pm","MAS_mas_sbj_m_b",
	"MAS_mas_sbj_p_","MAS_mas_sbj_p_m","MAS_mas_sbj_p_p","MAS_mas_sbj_p_mp","MAS_mas_sbj_p_pm","MAS_mas_sbj_p_b",
	"MAS_fem_sbj_m_","MAS_fem_sbj_m_m","MAS_fem_sbj_m_p","MAS_fem_sbj_m_mp","MAS_fem_sbj_m_pm","MAS_fem_sbj_m_b",
	"MAS_fem_sbj_p_","MAS_fem_sbj_p_m","MAS_fem_sbj_p_p","MAS_fem_sbj_p_mp","MAS_fem_sbj_p_pm","MAS_fem_sbj_p_b",
	"MAS_FEM_sbj_m_","MAS_FEM_sbj_m_m","MAS_FEM_sbj_m_p","MAS_FEM_sbj_m_mp","MAS_FEM_sbj_m_pm","MAS_FEM_sbj_m_b",
	"MAS_FEM_sbj_p_","MAS_FEM_sbj_p_m","MAS_FEM_sbj_p_p","MAS_FEM_sbj_p_mp","MAS_FEM_sbj_p_pm","MAS_FEM_sbj_p_b",

	"mas_MAS_sbj_m_","mas_MAS_sbj_m_m","mas_MAS_sbj_m_p","mas_MAS_sbj_m_mp","mas_MAS_sbj_m_pm","mas_MAS_sbj_m_b",
	"mas_MAS_sbj_p_","mas_MAS_sbj_p_m","mas_MAS_sbj_p_p","mas_MAS_sbj_p_mp","mas_MAS_sbj_p_pm","mas_MAS_sbj_p_b",
	"mas_mas_sbj_m_","mas_mas_sbj_m_m","mas_mas_sbj_m_p","mas_mas_sbj_m_mp","mas_mas_sbj_m_pm","mas_mas_sbj_m_b",
	"mas_mas_sbj_p_","mas_mas_sbj_p_m","mas_mas_sbj_p_p","mas_mas_sbj_p_mp","mas_mas_sbj_p_pm","mas_mas_sbj_p_b",
	"mas_fem_sbj_m_","mas_fem_sbj_m_m","mas_fem_sbj_m_p","mas_fem_sbj_m_mp","mas_fem_sbj_m_pm","mas_fem_sbj_m_b",
	"mas_fem_sbj_p_","mas_fem_sbj_p_m","mas_fem_sbj_p_p","mas_fem_sbj_p_mp","mas_fem_sbj_p_pm","mas_fem_sbj_p_b",
	"mas_FEM_sbj_m_","mas_FEM_sbj_m_m","mas_FEM_sbj_m_p","mas_FEM_sbj_m_mp","mas_FEM_sbj_m_pm","mas_FEM_sbj_m_b",
	"mas_FEM_sbj_p_","mas_FEM_sbj_p_m","mas_FEM_sbj_p_p","mas_FEM_sbj_p_mp","mas_FEM_sbj_p_pm","mas_FEM_sbj_p_b",

	"fem_MAS_sbj_m_","fem_MAS_sbj_m_m","fem_MAS_sbj_m_p","fem_MAS_sbj_m_mp","fem_MAS_sbj_m_pm","fem_MAS_sbj_m_b",
	"fem_MAS_sbj_p_","fem_MAS_sbj_p_m","fem_MAS_sbj_p_p","fem_MAS_sbj_p_mp","fem_MAS_sbj_p_pm","fem_MAS_sbj_p_b",
	"fem_mas_sbj_m_","fem_mas_sbj_m_m","fem_mas_sbj_m_p","fem_mas_sbj_m_mp","fem_mas_sbj_m_pm","fem_mas_sbj_m_b",
	"fem_mas_sbj_p_","fem_mas_sbj_p_m","fem_mas_sbj_p_p","fem_mas_sbj_p_mp","fem_mas_sbj_p_pm","fem_mas_sbj_p_b",
	"fem_fem_sbj_m_","fem_fem_sbj_m_m","fem_fem_sbj_m_p","fem_fem_sbj_m_mp","fem_fem_sbj_m_pm","fem_fem_sbj_m_b",
	"fem_fem_sbj_p_","fem_fem_sbj_p_m","fem_fem_sbj_p_p","fem_fem_sbj_p_mp","fem_fem_sbj_p_pm","fem_fem_sbj_p_b",
	"fem_FEM_sbj_m_","fem_FEM_sbj_m_m","fem_FEM_sbj_m_p","fem_FEM_sbj_m_mp","fem_FEM_sbj_m_pm","fem_FEM_sbj_m_b",
	"fem_FEM_sbj_p_","fem_FEM_sbj_p_m","fem_FEM_sbj_p_p","fem_FEM_sbj_p_mp","fem_FEM_sbj_p_pm","fem_FEM_sbj_p_b",

	"FEM_MAS_sbj_m_","FEM_MAS_sbj_m_m","FEM_MAS_sbj_m_p","FEM_MAS_sbj_m_mp","FEM_MAS_sbj_m_pm","FEM_MAS_sbj_m_b",
	"FEM_MAS_sbj_p_","FEM_MAS_sbj_p_m","FEM_MAS_sbj_p_p","FEM_MAS_sbj_p_mp","FEM_MAS_sbj_p_pm","FEM_MAS_sbj_p_b",
	"FEM_mas_sbj_m_","FEM_mas_sbj_m_m","FEM_mas_sbj_m_p","FEM_mas_sbj_m_mp","FEM_mas_sbj_m_pm","FEM_mas_sbj_m_b",
	"FEM_mas_sbj_p_","FEM_mas_sbj_p_m","FEM_mas_sbj_p_p","FEM_mas_sbj_p_mp","FEM_mas_sbj_p_pm","FEM_mas_sbj_p_b",
	"FEM_fem_sbj_m_","FEM_fem_sbj_m_m","FEM_fem_sbj_m_p","FEM_fem_sbj_m_mp","FEM_fem_sbj_m_pm","FEM_fem_sbj_m_b",
	"FEM_fem_sbj_p_","FEM_fem_sbj_p_m","FEM_fem_sbj_p_p","FEM_fem_sbj_p_mp","FEM_fem_sbj_p_pm","FEM_fem_sbj_p_b",
	"FEM_FEM_sbj_m_","FEM_FEM_sbj_m_m","FEM_FEM_sbj_m_p","FEM_FEM_sbj_m_mp","FEM_FEM_sbj_m_pm","FEM_FEM_sbj_m_b",
	"FEM_FEM_sbj_p_","FEM_FEM_sbj_p_m","FEM_FEM_sbj_p_p","FEM_FEM_sbj_p_mp","FEM_FEM_sbj_p_pm","FEM_FEM_sbj_p_b"],

	MAS_MAS_obj_p_ 	:function(ni){mkMood2(this,ni,true, true, true, true, true, "Peaceful Object Man")}, 	
	MAS_MAS_obj_p_m :function(ni){mkMood2(this,ni,true, true, true, true, true, "Caring Object Man")}, 
	MAS_MAS_obj_p_p :function(ni){mkMood2(this,ni,true, true, true, true, true, "Playful Object Man")},
	MAS_MAS_obj_p_mp:function(ni){mkMood2(this,ni,true, true, true, true, true, "Playfully Caring Object Man")}, 
	MAS_MAS_obj_p_pm:function(ni){mkMood2(this,ni,true, true, true, true, true, "Carefully Playful Object Man")},
	MAS_MAS_obj_p_b :function(ni){mkMood2(this,ni,true, true, true, true, true, "Caring & Playful Object Man")},
	MAS_MAS_obj_m_ 	:function(ni){mkMood2(this,ni,true, true, true, true, true, "Hostile Object Man")},
	MAS_MAS_obj_m_m :function(ni){mkMood2(this,ni,true, true, true, true, true, "Escaping Object Man")}, 
	MAS_MAS_obj_m_p :function(ni){mkMood2(this,ni,true, true, true, true, true, "Fighting Object Man")},
	MAS_MAS_obj_m_mp:function(ni){mkMood2(this,ni,true, true, true, true, true, "Fightingly Escaping Object Man")},
	MAS_MAS_obj_m_pm:function(ni){mkMood2(this,ni,true, true, true, true, true, "Escapingly Fighting Object Man")},
	MAS_MAS_obj_m_b :function(ni){mkMood2(this,ni,true, true, true, true, true, "Escaping & Fighting Object Man")},

	MAS_mas_obj_p_ 	:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Peaceful Boy")}, 	
	MAS_mas_obj_p_m :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Caring Boy")}, 
	MAS_mas_obj_p_p :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Playful Boy")},
	MAS_mas_obj_p_mp:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Playfully Caring Boy")}, 
	MAS_mas_obj_p_pm:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Carefully Playful Boy")},
	MAS_mas_obj_p_b :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Caring & Playful Boy")},
	MAS_mas_obj_m_ 	:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Hostile Boy")},
	MAS_mas_obj_m_m :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Escaping Boy")}, 
	MAS_mas_obj_m_p :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Fighting Boy")},
	MAS_mas_obj_m_mp:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Fightingly Escaping Boy")},
	MAS_mas_obj_m_pm:function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Escapingly Fighting Boy")},
	MAS_mas_obj_m_b :function(ni){mkMood2(this,ni,true, true, true, false,true, "Object Man as Escaping & Fighting Boy")},

	MAS_fem_obj_p_ 	:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Peaceful Girl")}, 	
	MAS_fem_obj_p_m :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Caring Girl")}, 
	MAS_fem_obj_p_p :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Playful Girl")},
	MAS_fem_obj_p_mp:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Playfully Caring Girl")}, 
	MAS_fem_obj_p_pm:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Carefully Playful Girl")},
	MAS_fem_obj_p_b :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Caring & Playful Girl")},
	MAS_fem_obj_m_ 	:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Hostile Girl")},
	MAS_fem_obj_m_m :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Escaping Girl")}, 
	MAS_fem_obj_m_p :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Fighting Girl")},
	MAS_fem_obj_m_mp:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Fightingly Escaping Girl")},
	MAS_fem_obj_m_pm:function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Escapingly Fighting Girl")},
	MAS_fem_obj_m_b :function(ni){mkMood2(this,ni,true, true, false,false,true, "Object Man as Escaping & Fighting Girl")},

	MAS_FEM_obj_p_ 	:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Peaceful Woman")}, 	
	MAS_FEM_obj_p_m :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Caring Woman")}, 
	MAS_FEM_obj_p_p :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Playful Woman")},
	MAS_FEM_obj_p_mp:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Playfully Caring Woman")}, 
	MAS_FEM_obj_p_pm:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Carefully Playful Woman")},
	MAS_FEM_obj_p_b :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Caring & Playful Woman")},
	MAS_FEM_obj_m_ 	:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Hostile Woman")},
	MAS_FEM_obj_m_m :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Escaping Woman")}, 
	MAS_FEM_obj_m_p :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Fighting Woman")},
	MAS_FEM_obj_m_mp:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Fightingly Escaping Woman")},
	MAS_FEM_obj_m_pm:function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Escapingly Fighting Woman")},
	MAS_FEM_obj_m_b :function(ni){mkMood2(this,ni,true, true, false,true, true, "Object Man as Escaping & Fighting Woman")},

	mas_MAS_obj_p_ 	:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Peaceful Man")},
	mas_MAS_obj_p_m :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Caring Man")},
	mas_MAS_obj_p_p :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Playful Man")},
	mas_MAS_obj_p_mp:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Playfully Caring Man")},
	mas_MAS_obj_p_pm:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Carefully Playful Man")},
	mas_MAS_obj_p_b :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Caring & Playful Man")},
	mas_MAS_obj_m_ 	:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Hostile Man")},
	mas_MAS_obj_m_m :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Escaping Man")},
	mas_MAS_obj_m_p :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Fighting Man")},
	mas_MAS_obj_m_mp:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Fightingly Escaping Man")},
	mas_MAS_obj_m_pm:function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Escapingly Fighting Man")},
	mas_MAS_obj_m_b :function(ni){mkMood2(this,ni,true, false,true, true, true, "Object Boy as Escaping & Fighting Man")},

	mas_mas_obj_p_ 	:function(ni){mkMood2(this,ni,true, false,true, false,true, "Peaceful Object Boy")},
	mas_mas_obj_p_m :function(ni){mkMood2(this,ni,true, false,true, false,true, "Caring Object Boy")},
	mas_mas_obj_p_p :function(ni){mkMood2(this,ni,true, false,true, false,true, "Playful Object Boy")},
	mas_mas_obj_p_mp:function(ni){mkMood2(this,ni,true, false,true, false,true, "Playfully Caring Object Boy")},
	mas_mas_obj_p_pm:function(ni){mkMood2(this,ni,true, false,true, false,true, "Carefully Playful Object Boy")},
	mas_mas_obj_p_b :function(ni){mkMood2(this,ni,true, false,true, false,true, "Caring & Playful Object Boy")},
	mas_mas_obj_m_ 	:function(ni){mkMood2(this,ni,true, false,true, false,true, "Hostile Object Boy")},
	mas_mas_obj_m_m :function(ni){mkMood2(this,ni,true, false,true, false,true, "Escaping Object Boy")},
	mas_mas_obj_m_p :function(ni){mkMood2(this,ni,true, false,true, false,true, "Fighting Object Boy")},
	mas_mas_obj_m_mp:function(ni){mkMood2(this,ni,true, false,true, false,true, "Fightingly Escaping Object Boy")},
	mas_mas_obj_m_pm:function(ni){mkMood2(this,ni,true, false,true, false,true, "Escapingly Fighting Object Boy")},
	mas_mas_obj_m_b :function(ni){mkMood2(this,ni,true, false,true, false,true, "Escaping & Fighting Object Boy")},

	mas_fem_obj_p_ 	:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Peaceful Girl")},
	mas_fem_obj_p_m :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Caring Girl")},
	mas_fem_obj_p_p :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Playful Girl")},
	mas_fem_obj_p_mp:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Playfully Caring Girl")},
	mas_fem_obj_p_pm:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Carefully Playful Girl")},
	mas_fem_obj_p_b :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Caring & Playful Girl")},
	mas_fem_obj_m_ 	:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Hostile Girl")},
	mas_fem_obj_m_m :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Escaping Girl")},
	mas_fem_obj_m_p :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Fighting Girl")},
	mas_fem_obj_m_mp:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Fightingly Escaping Girl")},
	mas_fem_obj_m_pm:function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Escapingly Fighting Girl")},
	mas_fem_obj_m_b :function(ni){mkMood2(this,ni,true, false,false,false,true, "Object Boy as Escaping & Fighting Girl")},

	mas_FEM_obj_p_ 	:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Peaceful Woman")},
	mas_FEM_obj_p_m :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Caring Woman")},
	mas_FEM_obj_p_p :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Playful Woman")},
	mas_FEM_obj_p_mp:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Playfully Caring Woman")},
	mas_FEM_obj_p_pm:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Carefully Playful Woman")},
	mas_FEM_obj_p_b :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Caring & Playful Woman")},
	mas_FEM_obj_m_ 	:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Hostile Woman")},
	mas_FEM_obj_m_m :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Escaping Woman")},
	mas_FEM_obj_m_p :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Fighting Woman")},
	mas_FEM_obj_m_mp:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Fightingly Escaping Woman")},
	mas_FEM_obj_m_pm:function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Escapingly Fighting Woman")},
	mas_FEM_obj_m_b :function(ni){mkMood2(this,ni,true, false,false,true, true, "Object Boy as Escaping & Fighting Woman")},

	fem_MAS_obj_p_ 	:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Peaceful Man")},
	fem_MAS_obj_p_m :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Caring Man")},
	fem_MAS_obj_p_p :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Playful Man")},
	fem_MAS_obj_p_mp:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Playfully Caring Man")},
	fem_MAS_obj_p_pm:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Carefully Playful Man")},
	fem_MAS_obj_p_b :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Caring & Playful Man")},
	fem_MAS_obj_m_ 	:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Hostile Man")},
	fem_MAS_obj_m_m :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Escaping Man")},
	fem_MAS_obj_m_p :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Fighting Man")},
	fem_MAS_obj_m_mp:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Fightingly Escaping Man")},
	fem_MAS_obj_m_pm:function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Escapingly Fighting Man")},
	fem_MAS_obj_m_b :function(ni){mkMood2(this,ni,false,false,true, true, true, "Object Girl as Escaping & Fighting Man")},

	fem_mas_obj_p_ 	:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Peaceful Boy")},
	fem_mas_obj_p_m :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Caring Boy")},
	fem_mas_obj_p_p :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Playful Boy")},
	fem_mas_obj_p_mp:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Playfully Caring Boy")},
	fem_mas_obj_p_pm:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Carefully Playful Boy")},
	fem_mas_obj_p_b :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Caring & Playful Boy")},
	fem_mas_obj_m_ 	:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Hostile Boy")},
	fem_mas_obj_m_m :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Escaping Boy")},
	fem_mas_obj_m_p :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Fighting Boy")},
	fem_mas_obj_m_mp:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Fightingly Escaping Boy")},
	fem_mas_obj_m_pm:function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Escapingly Fighting Boy")},
	fem_mas_obj_m_b :function(ni){mkMood2(this,ni,false,false,true, false,true, "Object Girl as Escaping & Fighting Boy")},

	fem_fem_obj_p_ 	:function(ni){mkMood2(this,ni,false,false,false,false,true, "Peaceful Object Girl")},
	fem_fem_obj_p_m :function(ni){mkMood2(this,ni,false,false,false,false,true, "Caring Object Girl")},
	fem_fem_obj_p_p :function(ni){mkMood2(this,ni,false,false,false,false,true, "Playful Object Girl")},
	fem_fem_obj_p_mp:function(ni){mkMood2(this,ni,false,false,false,false,true, "Playfully Caring Object Girl")},
	fem_fem_obj_p_pm:function(ni){mkMood2(this,ni,false,false,false,false,true, "Carefully Playful Object Girl")},
	fem_fem_obj_p_b :function(ni){mkMood2(this,ni,false,false,false,false,true, "Caring & Playful Object Girl")},
	fem_fem_obj_m_ 	:function(ni){mkMood2(this,ni,false,false,false,false,true, "Hostile Object Girl")},
	fem_fem_obj_m_m :function(ni){mkMood2(this,ni,false,false,false,false,true, "Escaping Object Girl")},
	fem_fem_obj_m_p :function(ni){mkMood2(this,ni,false,false,false,false,true, "Fighting Object Girl")},
	fem_fem_obj_m_mp:function(ni){mkMood2(this,ni,false,false,false,false,true, "Fightingly Escaping Object Girl")},
	fem_fem_obj_m_pm:function(ni){mkMood2(this,ni,false,false,false,false,true, "Escapingly Fighting Object Girl")},
	fem_fem_obj_m_b :function(ni){mkMood2(this,ni,false,false,false,false,true, "Escaping & Fighting Object Girl")},

	fem_FEM_obj_p_ 	:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Peaceful Woman")},
	fem_FEM_obj_p_m :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Caring Woman")},
	fem_FEM_obj_p_p :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Playful Woman")},
	fem_FEM_obj_p_mp:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Playfully Caring Woman")},
	fem_FEM_obj_p_pm:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Carefully Playful Woman")},
	fem_FEM_obj_p_b :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Caring & Playful Woman")},
	fem_FEM_obj_m_ 	:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Hostile Woman")},
	fem_FEM_obj_m_m :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Escaping Woman")},
	fem_FEM_obj_m_p :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Fighting Woman")},
	fem_FEM_obj_m_mp:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Fightingly Escaping Woman")},
	fem_FEM_obj_m_pm:function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Escapingly Fighting Woman")},
	fem_FEM_obj_m_b :function(ni){mkMood2(this,ni,false,false,false,true, true, "Object Girl as Escaping & Fighting Woman")},

	FEM_MAS_obj_p_ 	:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Peaceful Man")},
	FEM_MAS_obj_p_m :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Caring Man")},
	FEM_MAS_obj_p_p :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Playful Man")},
	FEM_MAS_obj_p_mp:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Playfully Caring Man")},
	FEM_MAS_obj_p_pm:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Carefully Playful Man")},
	FEM_MAS_obj_p_b :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Caring & Playful Man")},
	FEM_MAS_obj_m_ 	:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Hostile Man")},
	FEM_MAS_obj_m_m :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Escaping Man")},
	FEM_MAS_obj_m_p :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Fighting Man")},
	FEM_MAS_obj_m_mp:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Fightingly Escaping Man")},
	FEM_MAS_obj_m_pm:function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Escapingly Fighting Man")},
	FEM_MAS_obj_m_b :function(ni){mkMood2(this,ni,false,true, true, true, true, "Object Woman as Escaping & Fighting Man")},

	FEM_mas_obj_p_ 	:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Peaceful Boy")},
	FEM_mas_obj_p_m :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Caring Boy")},
	FEM_mas_obj_p_p :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Playful Boy")},
	FEM_mas_obj_p_mp:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Playfully Caring Boy")},
	FEM_mas_obj_p_pm:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Carefully Playful Boy")},
	FEM_mas_obj_p_b :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Caring & Playful Boy")},
	FEM_mas_obj_m_ 	:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Hostile Boy")},
	FEM_mas_obj_m_m :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Escaping Boy")},
	FEM_mas_obj_m_p :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Fighting Boy")},
	FEM_mas_obj_m_mp:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Fightingly Escaping Boy")},
	FEM_mas_obj_m_pm:function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Escapingly Fighting Boy")},
	FEM_mas_obj_m_b :function(ni){mkMood2(this,ni,false,true, true, false,true, "Object Woman as Escaping & Fighting Boy")},

	FEM_fem_obj_p_ 	:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Peaceful Girl")},
	FEM_fem_obj_p_m :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Caring Girl")},
	FEM_fem_obj_p_p :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Playful Girl")},
	FEM_fem_obj_p_mp:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Playfully Caring Girl")},
	FEM_fem_obj_p_pm:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Carefully Playful Girl")},
	FEM_fem_obj_p_b :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Caring & Playful Girl")},
	FEM_fem_obj_m_ 	:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Hostile Girl")},
	FEM_fem_obj_m_m :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Escaping Girl")},
	FEM_fem_obj_m_p :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Fighting Girl")},
	FEM_fem_obj_m_mp:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Fightingly Escaping Girl")},
	FEM_fem_obj_m_pm:function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Escapingly Fighting Girl")},
	FEM_fem_obj_m_b :function(ni){mkMood2(this,ni,false,true, false,false,true, "Object Woman as Escaping & Fighting Girl")},

	FEM_FEM_obj_p_ 	:function(ni){mkMood2(this,ni,false,true, false,true, true, "Peaceful Object Woman")},
	FEM_FEM_obj_p_m :function(ni){mkMood2(this,ni,false,true, false,true, true, "Caring Object Woman")},
	FEM_FEM_obj_p_p :function(ni){mkMood2(this,ni,false,true, false,true, true, "Playful Object Woman")},
	FEM_FEM_obj_p_mp:function(ni){mkMood2(this,ni,false,true, false,true, true, "Playfully Caring Object Woman")},
	FEM_FEM_obj_p_pm:function(ni){mkMood2(this,ni,false,true, false,true, true, "Carefully Playful Object Woman")},
	FEM_FEM_obj_p_b :function(ni){mkMood2(this,ni,false,true, false,true, true, "Caring & Playful Object Woman")},
	FEM_FEM_obj_m_ 	:function(ni){mkMood2(this,ni,false,true, false,true, true, "Hostile Object Woman")},
	FEM_FEM_obj_m_m :function(ni){mkMood2(this,ni,false,true, false,true, true, "Escaping Object Woman")},
	FEM_FEM_obj_m_p :function(ni){mkMood2(this,ni,false,true, false,true, true, "Fighting Object Woman")},
	FEM_FEM_obj_m_mp:function(ni){mkMood2(this,ni,false,true, false,true, true, "Fightingly Escaping Object Woman")},
	FEM_FEM_obj_m_pm:function(ni){mkMood2(this,ni,false,true, false,true, true, "Escapingly Fighting Object Woman")},
	FEM_FEM_obj_m_b :function(ni){mkMood2(this,ni,false,true, false,true, true, "Escaping & Fighting Object Woman")},


	MAS_MAS_sbj_p_  :function(ni){mkMood2(this,ni,true, true, true, true, false,"Peaceful Subject Man")}, 	
	MAS_MAS_sbj_p_m :function(ni){mkMood2(this,ni,true, true, true, true, false,"Caring Subject Man")}, 
	MAS_MAS_sbj_p_p :function(ni){mkMood2(this,ni,true, true, true, true, false,"Playful Subject Man")},
	MAS_MAS_sbj_p_mp:function(ni){mkMood2(this,ni,true, true, true, true, false,"Playfully Caring Subject Man")}, 
	MAS_MAS_sbj_p_pm:function(ni){mkMood2(this,ni,true, true, true, true, false,"Carefully Playful Subject Man")},
	MAS_MAS_sbj_p_b :function(ni){mkMood2(this,ni,true, true, true, true, false,"Caring & Playful Subject Man")},
	MAS_MAS_sbj_m_  :function(ni){mkMood2(this,ni,true, true, true, true, false,"Hostile Subject Man")},
	MAS_MAS_sbj_m_m :function(ni){mkMood2(this,ni,true, true, true, true, false,"Escaping Subject Man")}, 
	MAS_MAS_sbj_m_p :function(ni){mkMood2(this,ni,true, true, true, true, false,"Fighting Subject Man")},
	MAS_MAS_sbj_m_mp:function(ni){mkMood2(this,ni,true, true, true, true, false,"Fightingly Escaping Subject Man")},
	MAS_MAS_sbj_m_pm:function(ni){mkMood2(this,ni,true, true, true, true, false,"Escapingly Fighting Subject Man")},
	MAS_MAS_sbj_m_b :function(ni){mkMood2(this,ni,true, true, true, true, false,"Escaping & Fighting Subject Man")},

	MAS_mas_sbj_p_  :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Peaceful Boy")}, 	
	MAS_mas_sbj_p_m :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Caring Boy")}, 
	MAS_mas_sbj_p_p :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Playful Boy")},
	MAS_mas_sbj_p_mp:function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Playfully Caring Boy")}, 
	MAS_mas_sbj_p_pm:function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Carefully Playful Boy")},
	MAS_mas_sbj_p_b :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Caring & Playful Boy")},
	MAS_mas_sbj_m_  :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Hostile Boy")},
	MAS_mas_sbj_m_m :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Escaping Boy")}, 
	MAS_mas_sbj_m_p :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Fighting Boy")},
	MAS_mas_sbj_m_mp:function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Fightingly Escaping Boy")},
	MAS_mas_sbj_m_pm:function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Escapingly Fighting Boy")},
	MAS_mas_sbj_m_b :function(ni){mkMood2(this,ni,true, true, true, false,false,"Subject Man as Escaping & Fighting Boy")},

	MAS_fem_sbj_p_  :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Peaceful Girl")}, 	
	MAS_fem_sbj_p_m :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Caring Girl")}, 
	MAS_fem_sbj_p_p :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Playful Girl")},
	MAS_fem_sbj_p_mp:function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Playfully Caring Girl")}, 
	MAS_fem_sbj_p_pm:function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Carefully Playful Girl")},
	MAS_fem_sbj_p_b :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Caring & Playful Girl")},
	MAS_fem_sbj_m_  :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Hostile Girl")},
	MAS_fem_sbj_m_m :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Escaping Girl")}, 
	MAS_fem_sbj_m_p :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Fighting Girl")},
	MAS_fem_sbj_m_mp:function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Fightingly Escaping Girl")},
	MAS_fem_sbj_m_pm:function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Escapingly Fighting Girl")},
	MAS_fem_sbj_m_b :function(ni){mkMood2(this,ni,true, true, false,false,false,"Subject Man as Escaping & Fighting Girl")},

	MAS_FEM_sbj_p_  :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Peaceful Woman")}, 	
	MAS_FEM_sbj_p_m :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Caring Woman")}, 
	MAS_FEM_sbj_p_p :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Playful Woman")},
	MAS_FEM_sbj_p_mp:function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Playfully Caring Woman")}, 
	MAS_FEM_sbj_p_pm:function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Carefully Playful Woman")},
	MAS_FEM_sbj_p_b :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Caring & Playful Woman")},
	MAS_FEM_sbj_m_  :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Hostile Woman")},
	MAS_FEM_sbj_m_m :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Escaping Woman")}, 
	MAS_FEM_sbj_m_p :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Fighting Woman")},
	MAS_FEM_sbj_m_mp:function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Fightingly Escaping Woman")},
	MAS_FEM_sbj_m_pm:function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Escapingly Fighting Woman")},
	MAS_FEM_sbj_m_b :function(ni){mkMood2(this,ni,true, true, false,true, false,"Subject Man as Escaping & Fighting Woman")},

	mas_MAS_sbj_p_  :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Peaceful Man")},
	mas_MAS_sbj_p_m :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Caring Man")},
	mas_MAS_sbj_p_p :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Playful Man")},
	mas_MAS_sbj_p_mp:function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Playfully Caring Man")},
	mas_MAS_sbj_p_pm:function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Carefully Playful Man")},
	mas_MAS_sbj_p_b :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Caring & Playful Man")},
	mas_MAS_sbj_m_  :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Hostile Man")},
	mas_MAS_sbj_m_m :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Escaping Man")},
	mas_MAS_sbj_m_p :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Fighting Man")},
	mas_MAS_sbj_m_mp:function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Fightingly Escaping Man")},
	mas_MAS_sbj_m_pm:function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Escapingly Fighting Man")},
	mas_MAS_sbj_m_b :function(ni){mkMood2(this,ni,true, false,true, true, false,"Subject Boy as Escaping & Fighting Man")},

	mas_mas_sbj_p_  :function(ni){mkMood2(this,ni,true, false,true, false,false,"Peaceful Subject Boy")},
	mas_mas_sbj_p_m :function(ni){mkMood2(this,ni,true, false,true, false,false,"Caring Subject Boy")},
	mas_mas_sbj_p_p :function(ni){mkMood2(this,ni,true, false,true, false,false,"Playful Subject Boy")},
	mas_mas_sbj_p_mp:function(ni){mkMood2(this,ni,true, false,true, false,false,"Playfully Caring Subject Boy")},
	mas_mas_sbj_p_pm:function(ni){mkMood2(this,ni,true, false,true, false,false,"Carefully Playful Subject Boy")},
	mas_mas_sbj_p_b :function(ni){mkMood2(this,ni,true, false,true, false,false,"Caring & Playful Subject Boy")},
	mas_mas_sbj_m_  :function(ni){mkMood2(this,ni,true, false,true, false,false,"Hostile Subject Boy")},
	mas_mas_sbj_m_m :function(ni){mkMood2(this,ni,true, false,true, false,false,"Escaping Subject Boy")},
	mas_mas_sbj_m_p :function(ni){mkMood2(this,ni,true, false,true, false,false,"Fighting Subject Boy")},
	mas_mas_sbj_m_mp:function(ni){mkMood2(this,ni,true, false,true, false,false,"Fightingly Escaping Subject Boy")},
	mas_mas_sbj_m_pm:function(ni){mkMood2(this,ni,true, false,true, false,false,"Escapingly Fighting Subject Boy")},
	mas_mas_sbj_m_b :function(ni){mkMood2(this,ni,true, false,true, false,false,"Escaping & Fighting Subject Boy")},

	mas_fem_sbj_p_  :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Peaceful Girl")},
	mas_fem_sbj_p_m :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Caring Girl")},
	mas_fem_sbj_p_p :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Playful Girl")},
	mas_fem_sbj_p_mp:function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Playfully Caring Girl")},
	mas_fem_sbj_p_pm:function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Carefully Playful Girl")},
	mas_fem_sbj_p_b :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Caring & Playful Girl")},
	mas_fem_sbj_m_  :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Hostile Girl")},
	mas_fem_sbj_m_m :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Escaping Girl")},
	mas_fem_sbj_m_p :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Fighting Girl")},
	mas_fem_sbj_m_mp:function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Fightingly Escaping Girl")},
	mas_fem_sbj_m_pm:function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Escapingly Fighting Girl")},
	mas_fem_sbj_m_b :function(ni){mkMood2(this,ni,true, false,false,false,false,"Subject Boy as Escaping & Fighting Girl")},

	mas_FEM_sbj_p_  :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Peaceful Woman")},
	mas_FEM_sbj_p_m :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Caring Woman")},
	mas_FEM_sbj_p_p :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Playful Woman")},
	mas_FEM_sbj_p_mp:function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Playfully Caring Woman")},
	mas_FEM_sbj_p_pm:function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Carefully Playful Woman")},
	mas_FEM_sbj_p_b :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Caring & Playful Woman")},
	mas_FEM_sbj_m_  :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Hostile Woman")},
	mas_FEM_sbj_m_m :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Escaping Woman")},
	mas_FEM_sbj_m_p :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Fighting Woman")},
	mas_FEM_sbj_m_mp:function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Fightingly Escaping Woman")},
	mas_FEM_sbj_m_pm:function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Escapingly Fighting Woman")},
	mas_FEM_sbj_m_b :function(ni){mkMood2(this,ni,true, false,false,true, false,"Subject Boy as Escaping & Fighting Woman")},

	fem_MAS_sbj_p_  :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Peaceful Man")},
	fem_MAS_sbj_p_m :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Caring Man")},
	fem_MAS_sbj_p_p :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Playful Man")},
	fem_MAS_sbj_p_mp:function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Playfully Caring Man")},
	fem_MAS_sbj_p_pm:function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Carefully Playful Man")},
	fem_MAS_sbj_p_b :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Caring & Playful Man")},
	fem_MAS_sbj_m_  :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Hostile Man")},
	fem_MAS_sbj_m_m :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Escaping Man")},
	fem_MAS_sbj_m_p :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Fighting Man")},
	fem_MAS_sbj_m_mp:function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Fightingly Escaping Man")},
	fem_MAS_sbj_m_pm:function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Escapingly Fighting Man")},
	fem_MAS_sbj_m_b :function(ni){mkMood2(this,ni,false,false,true, true, false,"Subject Girl as Escaping & Fighting Man")},

	fem_mas_sbj_p_  :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Peaceful Boy")},
	fem_mas_sbj_p_m :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Caring Boy")},
	fem_mas_sbj_p_p :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Playful Boy")},
	fem_mas_sbj_p_mp:function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Playfully Caring Boy")},
	fem_mas_sbj_p_pm:function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Carefully Playful Boy")},
	fem_mas_sbj_p_b :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Caring & Playful Boy")},
	fem_mas_sbj_m_  :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Hostile Boy")},
	fem_mas_sbj_m_m :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Escaping Boy")},
	fem_mas_sbj_m_p :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Fighting Boy")},
	fem_mas_sbj_m_mp:function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Fightingly Escaping Boy")},
	fem_mas_sbj_m_pm:function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Escapingly Fighting Boy")},
	fem_mas_sbj_m_b :function(ni){mkMood2(this,ni,false,false,true, false,false,"Subject Girl as Escaping & Fighting Boy")},

	fem_fem_sbj_p_  :function(ni){mkMood2(this,ni,false,false,false,false,false,"Peaceful Subject Girl")},
	fem_fem_sbj_p_m :function(ni){mkMood2(this,ni,false,false,false,false,false,"Caring Subject Girl")},
	fem_fem_sbj_p_p :function(ni){mkMood2(this,ni,false,false,false,false,false,"Playful Subject Girl")},
	fem_fem_sbj_p_mp:function(ni){mkMood2(this,ni,false,false,false,false,false,"Playfully Caring Subject Girl")},
	fem_fem_sbj_p_pm:function(ni){mkMood2(this,ni,false,false,false,false,false,"Carefully Playful Subject Girl")},
	fem_fem_sbj_p_b :function(ni){mkMood2(this,ni,false,false,false,false,false,"Caring & Playful Subject Girl")},
	fem_fem_sbj_m_  :function(ni){mkMood2(this,ni,false,false,false,false,false,"Hostile Subject Girl")},
	fem_fem_sbj_m_m :function(ni){mkMood2(this,ni,false,false,false,false,false,"Escaping Subject Girl")},
	fem_fem_sbj_m_p :function(ni){mkMood2(this,ni,false,false,false,false,false,"Fighting Subject Girl")},
	fem_fem_sbj_m_mp:function(ni){mkMood2(this,ni,false,false,false,false,false,"Fightingly Escaping Subject Girl")},
	fem_fem_sbj_m_pm:function(ni){mkMood2(this,ni,false,false,false,false,false,"Escapingly Fighting Subject Girl")},
	fem_fem_sbj_m_b :function(ni){mkMood2(this,ni,false,false,false,false,false,"Escaping & Fighting Subject Girl")},

	fem_FEM_sbj_p_  :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Peaceful Woman")},
	fem_FEM_sbj_p_m :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Caring Woman")},
	fem_FEM_sbj_p_p :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Playful Woman")},
	fem_FEM_sbj_p_mp:function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Playfully Caring Woman")},
	fem_FEM_sbj_p_pm:function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Carefully Playful Woman")},
	fem_FEM_sbj_p_b :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Caring & Playful Woman")},
	fem_FEM_sbj_m_  :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Hostile Woman")},
	fem_FEM_sbj_m_m :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Escaping Woman")},
	fem_FEM_sbj_m_p :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Fighting Woman")},
	fem_FEM_sbj_m_mp:function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Fightingly Escaping Woman")},
	fem_FEM_sbj_m_pm:function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Escapingly Fighting Woman")},
	fem_FEM_sbj_m_b :function(ni){mkMood2(this,ni,false,false,false,true, false,"Subject Girl as Escaping & Fighting Woman")},

	FEM_MAS_sbj_p_  :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Peaceful Man")},
	FEM_MAS_sbj_p_m :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Caring Man")},
	FEM_MAS_sbj_p_p :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Playful Man")},
	FEM_MAS_sbj_p_mp:function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Playfully Caring Man")},
	FEM_MAS_sbj_p_pm:function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Carefully Playful Man")},
	FEM_MAS_sbj_p_b :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Caring & Playful Man")},
	FEM_MAS_sbj_m_  :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Hostile Man")},
	FEM_MAS_sbj_m_m :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Escaping Man")},
	FEM_MAS_sbj_m_p :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Fighting Man")},
	FEM_MAS_sbj_m_mp:function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Fightingly Escaping Man")},
	FEM_MAS_sbj_m_pm:function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Escapingly Fighting Man")},
	FEM_MAS_sbj_m_b :function(ni){mkMood2(this,ni,false,true, true, true, false,"Subject Woman as Escaping & Fighting Man")},

	FEM_mas_sbj_p_  :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Peaceful Boy")},
	FEM_mas_sbj_p_m :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Caring Boy")},
	FEM_mas_sbj_p_p :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Playful Boy")},
	FEM_mas_sbj_p_mp:function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Playfully Caring Boy")},
	FEM_mas_sbj_p_pm:function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Carefully Playful Boy")},
	FEM_mas_sbj_p_b :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Caring & Playful Boy")},
	FEM_mas_sbj_m_  :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Hostile Boy")},
	FEM_mas_sbj_m_m :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Escaping Boy")},
	FEM_mas_sbj_m_p :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Fighting Boy")},
	FEM_mas_sbj_m_mp:function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Fightingly Escaping Boy")},
	FEM_mas_sbj_m_pm:function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Escapingly Fighting Boy")},
	FEM_mas_sbj_m_b :function(ni){mkMood2(this,ni,false,true, true, false,false,"Subject Woman as Escaping & Fighting Boy")},

	FEM_fem_sbj_p_  :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Peaceful Girl")},
	FEM_fem_sbj_p_m :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Caring Girl")},
	FEM_fem_sbj_p_p :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Playful Girl")},
	FEM_fem_sbj_p_mp:function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Playfully Caring Girl")},
	FEM_fem_sbj_p_pm:function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Carefully Playful Girl")},
	FEM_fem_sbj_p_b :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Caring & Playful Girl")},
	FEM_fem_sbj_m_  :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Hostile Girl")},
	FEM_fem_sbj_m_m :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Escaping Girl")},
	FEM_fem_sbj_m_p :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Fighting Girl")},
	FEM_fem_sbj_m_mp:function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Fightingly Escaping Girl")},
	FEM_fem_sbj_m_pm:function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Escapingly Fighting Girl")},
	FEM_fem_sbj_m_b :function(ni){mkMood2(this,ni,false,true, false,false,false,"Subject Woman as Escaping & Fighting Girl")},

	FEM_FEM_sbj_p_  :function(ni){mkMood2(this,ni,false,true, false,true, false,"Peaceful Subject Woman")},
	FEM_FEM_sbj_p_m :function(ni){mkMood2(this,ni,false,true, false,true, false,"Caring Subject Woman")},
	FEM_FEM_sbj_p_p :function(ni){mkMood2(this,ni,false,true, false,true, false,"Playful Subject Woman")},
	FEM_FEM_sbj_p_mp:function(ni){mkMood2(this,ni,false,true, false,true, false,"Playfully Caring Subject Woman")},
	FEM_FEM_sbj_p_pm:function(ni){mkMood2(this,ni,false,true, false,true, false,"Carefully Playful Subject Woman")},
	FEM_FEM_sbj_p_b :function(ni){mkMood2(this,ni,false,true, false,true, false,"Caring & Playful Subject Woman")},
	FEM_FEM_sbj_m_  :function(ni){mkMood2(this,ni,false,true, false,true, false,"Hostile Subject Woman")},
	FEM_FEM_sbj_m_m :function(ni){mkMood2(this,ni,false,true, false,true, false,"Escaping Subject Woman")},
	FEM_FEM_sbj_m_p :function(ni){mkMood2(this,ni,false,true, false,true, false,"Fighting Subject Woman")},
	FEM_FEM_sbj_m_mp:function(ni){mkMood2(this,ni,false,true, false,true, false,"Fightingly Escaping Subject Woman")},
	FEM_FEM_sbj_m_pm:function(ni){mkMood2(this,ni,false,true, false,true, false,"Escapingly Fighting Subject Woman")},
	FEM_FEM_sbj_m_b :function(ni){mkMood2(this,ni,false,true, false,true, false,"Escaping & Fighting Subject Woman")}}
function getObjByNi( ni,from){ var r =from.find( function(o){if( ni==o.ni){ return o}}); return r}
function mkMood2(o,ni,FEM,KID,fem,kid,obj,nI){
	o.ni=ni; o.nI=nI; o.gForm =null; o.bForm =null; o.obj =obj;
	if( FEM==fem && !( KID && !kid)){ o.stereo  =true} 	else{ o.stereo  =false}
	if( FEM!=fem &&  KID==kid) 		{ o.pureBad =true} 	else{ o.pureBad =false}
	if( FEM!=fem &&  KID!=kid) 		{ o.invMor  =true} 	else{ o.invMor  =false}
	if( FEM==fem &&  KID && !kid) 	{ o.pureGood=true} 	else{ o.pureGood=false}
	o.sex= ni.substr( 0,ni.indexOf( '_')); 					o.sex= getObjByNi( o.sex,OM.ab.sXs);
	o.gnd= ni.split( '_')[1].substr( 0,ni.indexOf( '_'));	o.gnd= getObjByNi( o.gnd,OM.ab.gNs);
	o.pM = ni.substr( ni.indexOf( '_') +1)
		.substr( ni.indexOf( '_') +1)
			.substr( ni.indexOf( '_')); o.pM ="G"+o.pM;		o.pM = getObjByNi( o.pM, OM.ab.pMs);
	o =initModalForm( 		o, o.gnd.ni);
	o =manipulateModalForm( o);
	o =interpretModalForm( 	o);
	o =interpretMosaicForm( o);
	o.bG = mkModalXYPlane( 	o, AL.r);
	evalModalXYPlane( 		o, AL.r, AL.R);
	o.xY = mkMosaicXYPlane( o, AL.r, obj);
	evalMosaicXYPlane(  	o, AL.r, AL.R, o.gnd.fem)}
function initModalForm(m,ni){ switch(ni){ 
	case "MAS": m.gForm = ['a','b','c']; m.bForm =["a'","c'","b'"]; break;
	case "mas": m.gForm = ['a','b','c']; m.bForm =["c'","a'","b'"]; break;
	case "fem": m.gForm = ['b','a','c']; m.bForm =["a'","c'","b'"]; break;
	case "FEM": m.gForm = ['c','b','a']; m.bForm =["a'","c'","b'"]}return m}
function modalFlip(mf,f){ var ret=[];
	mf.forEach( function(mf){ ret.push(mf)});
	switch(f) { case 1: ret[0]=mf[1]; ret[1]=mf[0]; break;
				case 2: ret[1]=mf[2]; ret[2]=mf[1]; break;
				case 3: ret[0]=mf[2]; ret[2]=mf[0]} return ret}
function turnModalFormBad(m){ for(let n=0; n < 3; n++){
	if(m.gForm[n]=="a" ){ m.gForm[n]="c'"}if(m.gForm[n]=="c" ){m.gForm[n]="a'"}}}
function turnModalFormGood(m){ for(let n=0; n < 3; n++){
	if(m.bForm[n]=="a'"){ m.bForm[n] ="c"}if(m.bForm[n]=="c'"){m.bForm[n] ="a" }}}
function manipulateModalForm(m){
	if(!m.pM.head){ m.gForm =modalFlip(m.gForm,2)}
	for(let n=0; n < m.pM.tail.length; n++){
		switch(m.pM.tail[n]){  	case "-": 	m.bForm =modalFlip(m.bForm,1); break;
								case "+": 	m.bForm =modalFlip(m.bForm,2); break;
								case "x": 	m.bForm =modalFlip(m.bForm,1);
								 			m.bForm =modalFlip(m.bForm,2);
								 			m.bForm =modalFlip(m.bForm,1)}}
	if(m.pureBad) { turnModalFormBad(m)}
	if(m.invMor)  { turnModalFormBad(m); turnModalFormGood(m)}
	if(m.pureGood){ turnModalFormGood(m)}
	return m}
function interpretModalForm(m){ var b=""; var g="";
	m.bForm.forEach( function(s){ b=b+s});
	m.gForm.forEach( function(s){ g=g+s});
	switch(b){case "a'b'c'":m.bMF = "α',β',γ'";		m.bAriV = "-X"; 		m.bAriK = "X - Y";		break;
			  case "a'c'b'":m.bMF = "α',γ',β'";		m.bAriV = "X - Y"; 		m.bAriK = "-X";			break;
			  case "b'a'c'":m.bMF = "β',α',γ'";		m.bAriV = "-X"; 		m.bAriK = "Y - r";		break;
			  case "b'c'a'":m.bMF = "β',γ',α'";		m.bAriV = "X - Y"; 		m.bAriK = "Y - r";		break;
			  case "c'a'b'":m.bMF = "γ',α',β'";		m.bAriV = "Y - r"; 		m.bAriK = "-X";			break;
			  case "c'b'a'":m.bMF = "γ',β',α'";		m.bAriV = "Y - r"; 		m.bAriK = "X - Y";		break;
			  case "ab'c": 	m.bMF = "α,β',γ";		m.bAriV = "X"; 			m.bAriK = "X - Y";		break;
			  case "acb'": 	m.bMF = "α,γ,β'";		m.bAriV = "Y - X"; 		m.bAriK = "-X";			break;
			  case "b'ac": 	m.bMF = "β',α,γ";		m.bAriV = "X"; 			m.bAriK = "Y - r";		break;
			  case "b'ca": 	m.bMF = "β',γ,α";		m.bAriV = "Y - X"; 		m.bAriK = "Y - r";		break;
			  case "cab'": 	m.bMF = "γ,α,β'";		m.bAriV = "r - Y"; 		m.bAriK = "-X";			break;
			  case "cb'a": 	m.bMF = "γ,β',α";		m.bAriV = "r - Y"; 		m.bAriK = "X - Y"}
	switch(g){case 'abc': 	m.gMF = "α,β,γ"; 		m.gAriV = "Y"; 			m.gAriK = "X - Y"; 		break;
			  case 'acb': 	m.gMF = "α,γ,β"; 		m.gAriV = "X - Y"; 		m.gAriK = "Y"; 			break;
			  case 'bac': 	m.gMF = "β,α,γ";		m.gAriV = "Y"; 			m.gAriK = "r - X";		break;
			  case 'bca': 	m.gMF = "β,γ,α";		m.gAriV = "X - Y"; 		m.gAriK = "r - X";		break;
			  case 'cab': 	m.gMF = "γ,α,β";		m.gAriV = "r - X"; 		m.gAriK = "Y";			break;
			  case 'cba': 	m.gMF = "γ,β,α";		m.gAriV = "r - X"; 		m.gAriK = "X - Y";		break;
			  case "a'bc'": m.gMF = "α',β,γ'"; 		m.gAriV = "-Y"; 		m.gAriK = "X - Y"; 		break;
			  case "a'c'b": m.gMF = "α',γ',β"; 		m.gAriV = "Y - X"; 		m.gAriK = "Y"; 			break;
			  case "ba'c'": m.gMF = "β,α',γ'";		m.gAriV = "-Y"; 		m.gAriK = "r - X";		break;
			  case "bc'a'": m.gMF = "β,γ',α'";		m.gAriV = "Y - X"; 		m.gAriK = "r - X";		break;
			  case "c'a'b": m.gMF = "γ',α',β";		m.gAriV = "X - r"; 		m.gAriK = "Y";			break;
			  case "c'ba'": m.gMF = "γ',β,α'";		m.gAriV = "X - r"; 		m.gAriK = "X - Y"}
	m.bFormL =m.bForm.length; m.bFormLs=[]; m.bForm.forEach( function(o){ m.bFormLs.push( o.length)});
	m.gFormL =m.gForm.length; m.gFormLs=[]; m.gForm.forEach( function(o){ m.gFormLs.push( o.length)});
	if( stereoSyms( m.bForm, m.bFormL, m.gForm, m.gFormL)) { m.sSym=true} else{ m.sSym=false}
	if( complexSyms(m.bForm, m.bFormL, m.bFormLs, m.gForm, m.gFormL, m.gFormLs)) { m.cSym=true} else{ m.cSym=false}
	return m}
function stereoSym(b,g){ g+="'"; if(g==b){ return true} else{ return false}}
function stereoSyms(bForm,bLen,gForm,gLen){
	if( bLen !=gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!stereoSym( bForm[n], gForm[m])){ return false}}}
		return true}}
function complexSym( bF1, bL1, gF1, gL1){
	if((bF1 =="b" && gF1 =="b'")||(bF1 =="b'" && gF1 =="b")){ return true}
	if((bL1 !=gL1)&&
		(((bF1 =="a")&&(gF2 =="a'"))||((bF1 =="a'")&&(gF2 =="a"))||
			((bF1 =="c")&&(gF2 =="c'"))||((bF1 =="c'")&&(gF2 =="c")))){ return true}
	else{ return false}}
function complexSyms(bForm,bLen,gForm,gLen){
	if( bLen !=gLen){ return false}
	else{ var vars=[];
		for(let n=0; n<bLen; n++){ for(let m=0; m<gLen; m++){
			if(!complexSym( bForm[n], bFormLs[n], gForm[m], gFormLs[m])){ return false}}}
		return true}}

/*
similarity determination algorithm for vQs:
completely different f.ex. wisdom vs dysphoria
least similar f.ex. wisdom vs belief, epiphany vs form, body vs beauty, norm vs success
less similar f.ex wisdom vs epiphany
rom and cla similarity separately
*/

function interpretMosaicForm(m){ 
	if( m.gnd.fem){ 
		m.xForm=m.gForm; m.yForm=m.bForm;
		m.xMF=m.gMF; m.yMF=m.bMF; m.xAriV=m.gAriV; m.xAriK=m.gAriK; m.yAriV=m.bAriV; m.yAriK=m.bAriK}
	else{
		var x=""; var y="";
		m.xForm=m.bForm; m.yForm=m.gForm;
		m.yForm.forEach( function(s){ y=y+s});
		m.xForm.forEach( function(s){ x=x+s});
		switch(y){case "abc": 	m.yMF = "α,β,γ"; 		m.yAriV = "X"; 			m.yAriK = "Y - X"; 		break;
				  case "acb": 	m.yMF = "α,γ,β"; 		m.yAriV = "Y - X"; 		m.yAriK = "X"; 			break;
				  case "bac": 	m.yMF = "β,α,γ";		m.yAriV = "X"; 			m.yAriK = "r - Y";		break;
				  case "bca": 	m.yMF = "β,γ,α";		m.yAriV = "Y - X"; 		m.yAriK = "r - Y";		break;
				  case "cab": 	m.yMF = "γ,α,β";		m.yAriV = "r - Y"; 		m.yAriK = "X";			break;
				  case "cba": 	m.yMF = "γ,β,α";		m.yAriV = "r - Y"; 		m.yAriK = "Y - X";		break;
				  case "a'bc'": m.yMF = "α',β,γ'"; 		m.yAriV = "-X"; 		m.yAriK = "Y - X"; 		break;
				  case "a'c'b": m.yMF = "α',γ',β"; 		m.yAriV = "X - Y"; 		m.yAriK = "X"; 			break;
				  case "ba'c'": m.yMF = "β,α',γ'";		m.yAriV = "-X"; 		m.yAriK = "r - Y";		break;
				  case "bc'a'": m.yMF = "β,γ',α'";		m.yAriV = "X - Y"; 		m.yAriK = "r - Y";		break;
				  case "c'a'b": m.yMF = "γ',α',β";		m.yAriV = "Y - r"; 		m.yAriK = "X";			break;
				  case "c'ba'": m.yMF = "γ',β,α'";		m.yAriV = "Y - r"; 		m.yAriK = "Y - X";}
		switch(x){case "a'b'c'":m.xMF = "α',β',γ'";		m.xAriV = "-Y"; 		m.xAriK = "Y - X";		break;
				  case "a'c'b'":m.xMF = "α',γ',β'";		m.xAriV = "Y - X"; 		m.xAriK = "-Y";			break;
				  case "b'a'c'":m.xMF = "β',α',γ'";		m.xAriV = "-Y"; 		m.xAriK = "X - r";		break;
				  case "b'c'a'":m.xMF = "β',γ',α'";		m.xAriV = "Y - X"; 		m.xAriK = "X - r";		break;
				  case "c'a'b'":m.xMF = "γ',α',β'";		m.xAriV = "X - r"; 		m.xAriK = "-Y";			break;
				  case "c'b'a'":m.xMF = "γ',β',α'";		m.xAriV = "X - r"; 		m.xAriK = "Y - X";		break;
				  case "ab'c":	m.xMF = "α,β',γ";		m.xAriV = "Y"; 			m.xAriK = "Y - X";		break;
				  case "acb'": 	m.xMF = "α,γ,β'";		m.xAriV = "X - Y"; 		m.xAriK = "-Y";			break;
				  case "b'ac": 	m.xMF = "β',α,γ";		m.xAriV = "Y"; 			m.xAriK = "X - r";		break;
				  case "b'ca": 	m.xMF = "β',γ,α";		m.xAriV = "X - Y"; 		m.xAriK = "X - r";		break;
				  case "cab'": 	m.xMF = "γ,α,β'";		m.xAriV = "r - X"; 		m.xAriK = "-Y";			break;
				  case "cb'a": 	m.xMF = "γ,β',α";		m.xAriV = "r - X"; 		m.xAriK = "Y - X";}}return m}


function precalcPrimalMoods(seed,parent){ var pMs =[]; var pM =null;
	for(let n=0; n <OM.ab.pMsL; n++){ pM=mkPm( seed[n],parent); pMs.push(pM)}return pMs}
function mkPm( ni,parent,subj){ var pM=null; switch(ni){
	case "G_p_"  : pM= new AL.PrimalMoods.G_p_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_p_m" : pM= new AL.PrimalMoods.G_p_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_p" : pM= new AL.PrimalMoods.G_p_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_p_mp": pM= new AL.PrimalMoods.G_p_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_pm": pM= new AL.PrimalMoods.G_p_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_p_b" : pM= new AL.PrimalMoods.G_p_b( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_"  : pM= new AL.PrimalMoods.G_m_( ni);   inhPm( pM,parent,subj); return pM;
	case "G_m_m" : pM= new AL.PrimalMoods.G_m_m( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_p" : pM= new AL.PrimalMoods.G_m_p( ni);  inhPm( pM,parent,subj); return pM;
	case "G_m_mp": pM= new AL.PrimalMoods.G_m_mp( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_pm": pM= new AL.PrimalMoods.G_m_pm( ni); inhPm( pM,parent,subj); return pM;
	case "G_m_b" : pM= new AL.PrimalMoods.G_m_b( ni);  inhPm( pM,parent,subj); return pM}}
function inhPm( pM,parent,subj){if( parent) { pM.parent =parent.pMs.find(o => o.ni === pM.ni)}
								if( subj) 	{ subj.pMs.push( pM)}}
AL.PrimalMoods={ seed : ["G_m_","G_m_m","G_m_p","G_m_mp","G_m_pm","G_m_b",
							"G_p_","G_p_m","G_p_p","G_p_mp","G_p_pm","G_p_b"],
	G_p_ 	:function(ni){ mkPm2(this,true, [],			ni,"", "G", "" 	)},
	G_p_m 	:function(ni){ mkPm2(this,true, ["-"],		ni,"", "G", "−" )},
	G_p_p 	:function(ni){ mkPm2(this,true, ["+"],		ni,"", "G", "+" )},
	G_p_mp 	:function(ni){ mkPm2(this,true, ["-","+"],	ni,"", "G", "−+")},
	G_p_pm 	:function(ni){ mkPm2(this,true, ["+","-"],	ni,"", "G", "+−")},
	G_p_b 	:function(ni){ mkPm2(this,true, ["x"],		ni,"", "G", "±" )},
	G_m_ 	:function(ni){ mkPm2(this,false,[],			ni,"−","G", "" 	)},
	G_m_m 	:function(ni){ mkPm2(this,false,["-"],		ni,"−","G", "−" )},
	G_m_p 	:function(ni){ mkPm2(this,false,["+"],		ni,"−","G", "+" )},
	G_m_mp 	:function(ni){ mkPm2(this,false,["-","+"],	ni,"−","G", "−+")},
	G_m_pm 	:function(ni){ mkPm2(this,false,["+","-"],	ni,"−","G", "+−")},
	G_m_b 	:function(ni){ mkPm2(this,false,["x"],		ni,"−","G", "±" )}}
function mkPm2(  				 o,   head, tail, 		ni,niH,niG, niT){
	o.head=head; o.tail=tail; o.ni=ni; o.niH=niH; o.niG=niG; o.niT=niT;}


function precalcGenders(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<OM.ab.gNsL; n++){ b=mkGender( seed[n],parent);r.push(b)}return r}
function mkGender( ni,parent,subj){ var g=null; switch(ni){
	case "MAS": g= new AL.Genders.MAS( ni,subj); inhGender( g,parent);return g;
	case "mas": g= new AL.Genders.mas( ni,subj); inhGender( g,parent);return g;
	case "fem": g= new AL.Genders.fem( ni,subj); inhGender( g,parent);return g;
	case "FEM": g= new AL.Genders.FEM( ni,subj); inhGender( g,parent);return g}}
function inhGender( g,parent){if(parent){ g.parent=parent.gNs.find(o => o.ni ==g.ni)}}
AL.Genders={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni,subj){ mkGender2(this,ni,false,false, "♂" ,subj)},
	mas:function( ni,subj){ mkGender2(this,ni,false,true, "*♂",subj)},
	fem:function( ni,subj){ mkGender2(this,ni,true ,false,"*♀",subj)},
	FEM:function( ni,subj){ mkGender2(this,ni,true ,true, "♀" ,subj)}}
function mkGender2( o,ni,fem,kid,nI,subj){ var b=[];
	o.ni=ni;o.fem=fem;o.kid=kid;o.nI=nI; o.V =0; o.K =0;
	if( subj){ b=subj.nMs.filter(n =>
		n.kid==subj.kid && n.fin ==subj.fin && n.weird==subj.weird &&	n.last ==subj.last)}
	if(b !=[]){ o.name =b[0]} else{ b =mkName(fem,kid,subj.fin,subj.weird,subj.nM.last); o.name =b}}

function precalcSexes(seed,parent){ var r =[]; var b =null;
	for(let n=0; n<OM.ab.sXsL; n++){ b=mkSex( seed[n],parent);r.push(b)}return r}
function mkSex( ni,parent,subj){ var s =null; switch( ni){
	case "MAS": s= new AL.Sexes.MAS( ni); inhSex( s,parent,subj);return s;
	case "mas": s= new AL.Sexes.mas( ni); inhSex( s,parent,subj);return s;
	case "fem": s= new AL.Sexes.fem( ni); inhSex( s,parent,subj);return s;
	case "FEM": s= new AL.Sexes.FEM( ni); inhSex( s,parent,subj);return s}}
function inhSex( s,parent,subj){
	if(parent){ s.parent=parent.sXs.find(o => o.ni === s.ni)}
	if( subj) { subj.sXs.push ( s)}}
AL.Sexes={ seed:["FEM","fem","MAS","mas"],
	MAS:function( ni){ mkSex2(this,ni,false,false, "♂" )},
	mas:function( ni){ mkSex2(this,ni,false,true, "*♂")},
	fem:function( ni){ mkSex2(this,ni,true, false,"*♀")},
	FEM:function( ni){ mkSex2(this,ni,true, true, "♀" )}}
function mkSex2( o,ni,fem,kid,nI){ o.ni=ni;o.kid=kid;o.fem=fem;o.nI=nI; o.V =0; o.K =0;}


function precalcSociotypes( seed,parent,subj){ var tYs =[]; var b =null;
	for(let n=0; n <OM.ab.tYsL; n++){ b =mkType( seed[n],parent,subj); tYs.push( b)}return tYs}
function mkType(ni,parent,subj){ var t =null; switch( ni){
	case "iSFC": t =new AL.Sociotypes.iSFC( ni,subj); inhTy( t,parent);return t;
	case "iSFR": t =new AL.Sociotypes.iSFR( ni,subj); inhTy( t,parent);return t;
	case "iSTC": t =new AL.Sociotypes.iSTC( ni,subj); inhTy( t,parent);return t; 
	case "iSTR": t =new AL.Sociotypes.iSTR( ni,subj); inhTy( t,parent);return t;
	case "iNFC": t =new AL.Sociotypes.iNFC( ni,subj); inhTy( t,parent);return t;
	case "iNFR": t =new AL.Sociotypes.iNFR( ni,subj); inhTy( t,parent);return t;
	case "iNTC": t =new AL.Sociotypes.iNTC( ni,subj); inhTy( t,parent);return t;
	case "iNTR": t =new AL.Sociotypes.iNTR( ni,subj); inhTy( t,parent);return t;
	case "eSFC": t =new AL.Sociotypes.eSFC( ni,subj); inhTy( t,parent);return t;
	case "eSFR": t =new AL.Sociotypes.eSFR( ni,subj); inhTy( t,parent);return t;
	case "eSTC": t =new AL.Sociotypes.eSTC( ni,subj); inhTy( t,parent);return t;
	case "eSTR": t =new AL.Sociotypes.eSTR( ni,subj); inhTy( t,parent);return t;
	case "eNFC": t =new AL.Sociotypes.eNFC( ni,subj); inhTy( t,parent);return t;
	case "eNFR": t =new AL.Sociotypes.eNFR( ni,subj); inhTy( t,parent);return t;
	case "eNTC": t =new AL.Sociotypes.eNTC( ni,subj); inhTy( t,parent);return t;
	case "eNTR": t =new AL.Sociotypes.eNTR( ni,subj); inhTy( t,parent);return t;
	case "NaT" : t =new AL.Sociotypes.NaT(  ni,subj);					 return t}}
function inhTy( tY,parent){ if( parent){ OM.re.tYs.push( tY); tY.parent =parent.tYs.find( o => o.ni ==tY.ni)}}
AL.Sociotypes={
	seed: [ "iSFR","iSFC","iSTR","iSTC","iNFR","iNFC","iNTR","iNTC",
			"eSFR","eSFC","eSTR","eSTC","eNFR","eNFC","eNTR","eNTC"],
	iSFR:function( ni,s){ mkSociotype(this,ni,s,false,false,false,false,
		"Dolphin", 		"Ascending Idealist", 		"Romantic Believer", 	"ESFp","SEE","ESFP")},
	iSFC:function( ni,s){ mkSociotype(this,ni,s,false,false,false,true, 
		"Wolverine", 	"Descending Idealist",		"Classical Believer", 	"ISFj","ESI","ISFP")},
	iSTR:function( ni,s){ mkSociotype(this,ni,s,false,false,true, false,
		"Anaconda",		"Ascending Utopist", 		"Romantic Trendsetter", "ESTp","SLE","ESTP")},
	iSTC:function( ni,s){ mkSociotype(this,ni,s,false,false,true, true, 
		"Alligator",	"Descending Utopist", 		"Classical Trendsetter","ISTj","LSI","ISTP")},
	iNFR:function( ni,s){ mkSociotype(this,ni,s,false,true, false,false,
		"Octopus",		"Descending Time Traveler", "Romantic Healer", 		"ENFp","EIE","ENFP")},	
	iNFC:function( ni,s){ mkSociotype(this,ni,s,false,true, false,true, 
		"Platypus", 	"Ascending Time Traveler", 	"Classical Healer", 	"INFj","EII","INFP")},
	iNTR:function( ni,s){ mkSociotype(this,ni,s,false,true, true, false,
		"Raven", 		"Descending Wonderer", 		"Romantic Gardener", 	"ENTp","ILE","ENTP")},
	iNTC:function( ni,s){ mkSociotype(this,ni,s,false,true, true, true, 
		"Panda", 		"Ascending Wonderer", 		"Classical Gardener", 	"INTj","LII","INTP")},
	eSFR:function( ni,s){ mkSociotype(this,ni,s,true, false,false,false,
		"Turtle", 		"Ascending Host", 			"Romantic Defender", 	"ISFp","ESI","ISFJ")},
	eSFC:function( ni,s){ mkSociotype(this,ni,s,true, false,false,true, 
		"Zebra", 		"Descending Host", 			"Classical Defender", 	"ESFj","ESE","ESFJ")},
	eSTR:function( ni,s){ mkSociotype(this,ni,s,true, false,true, false,
		"Monkey", 		"Ascending Realist", 		"Romantic Artisan", 	"ISTp","SLI","ISTJ")},
	eSTC:function( ni,s){ mkSociotype(this,ni,s,true, false,true, true, 
		"Hippo", 		"Descending Realist", 		"Classical Artisan", 	"ESTj","LSE","ESTJ")},
	eNFR:function( ni,s){ mkSociotype(this,ni,s,true, true, false,false,
		"Swan",	 		"Descending Someone", 		"Romantic Performer", 	"INFp","IEI","INFJ")},
	eNFC:function( ni,s){ mkSociotype(this,ni,s,true, true, false,true, 
		"Nightingale", 	"Ascending Someone", 		"Classical Performer", 	"ENFj","EIE","ENFJ")},
	eNTR:function( ni,s){ mkSociotype(this,ni,s,true, true, true, false,
		"Falcon", 		"Descending Anyone", 		"Romantic Cleric", 		"INTp","ILI","INTJ")},
	eNTC:function( ni,s){ mkSociotype(this,ni,s,true, true, true, true, 
		"Piranha", 		"Ascending Anyone", 		"Classical Cleric", 	"ENTj","LIE","ENTJ")},
	NaT: function( ni,s){ mkSociotype(this,ni)}}
function mkSociotype( o,ni,s,ie,sn,ft,rc,zo,desc,call,modA4,modA3,mbti){
						if( s){ var v =s.tYs.find( o => o.ni ==tY.ni)} if( v){ return v} else {
							o.ni=ni; o.ie=ie; o.sn=sn; o.ft=ft; o.rc=rc;
							o.zo=zo; o.desc=desc; o.call=call; o.modA4=modA4; o.modA3=modA3; o.mbti=mbti;
 							o.iEs  		= precalcInformationElements( AL.InformationElements.seed, OM.ab, s);
							o.fNs 		= precalcFunctions( AL.Functions.seed, OM.ab);
							o.cRs 		= precalcCircuits( AL.Circuits.seed, OM.ab);
							o.fAs 		= o.fNs.concat( o.cRs);
							o.absSpace 	= precalcSocionicsMetaphysics( o.iEs); 
							o.relSpace 	= orientRelSpace( o, precalcSocionicsEssence( o.fNs, o.cRs));
							o.cRs 		= orientCircuitsAbsolutely( o);
							return o}}
function connectSpaces( abs,rel){
	function f(tAZ,tAY,tAX){ rel[tAZ][tAY][tAX].ab =abs[tAZ][tAY][tAX];
		rel[tAZ][tAY][tAX].tAX=tAX; 	rel[tAZ][tAY][tAX].tAY=tAY; 	rel[tAZ][tAY][tAX].tAZ=tAZ;
		rel[tAZ][tAY][tAX].tAx=tAX-1; 	rel[tAZ][tAY][tAX].tAy=tAY-1; 	rel[tAZ][tAY][tAX].tAz=tAZ-1}
	f(0,0,0); f(0,0,2); f(0,2,0); f(0,2,2); f(2,2,0); f(2,2,2); f(2,0,0); f(2,0,2);	return rel}
function tor(src){ var ret = mk3Space();
ret[0][2][0]=src[0][0][0];ret[2][2][0]=src[0][2][0];ret[2][0][0]=src[2][2][0];ret[0][0][0]=src[2][0][0];
ret[0][2][2]=src[0][0][2];ret[2][2][2]=src[0][2][2];ret[2][0][2]=src[2][2][2];ret[0][0][2]=src[2][0][2];
ret[1][2][2]=src[0][1][2];ret[2][1][2]=src[1][2][2];ret[1][0][2]=src[2][1][2];ret[0][1][2]=src[1][0][2];
ret[2][0][1]=src[2][2][1];ret[2][2][1]=src[0][2][1];ret[0][2][1]=src[0][0][1];ret[0][0][1]=src[2][0][1];
ret[1][2][0]=src[0][1][0];ret[2][1][0]=src[1][2][0];ret[1][0][0]=src[2][1][0];ret[0][1][0]=src[1][0][0];return ret}
function rot(src){ var ret = mk3Space();
ret[0][0][0]=src[0][2][0];ret[0][2][0]=src[2][2][0];ret[2][2][0]=src[2][0][0];ret[2][0][0]=src[0][0][0];
ret[0][0][2]=src[0][2][2];ret[0][2][2]=src[2][2][2];ret[2][2][2]=src[2][0][2];ret[2][0][2]=src[0][0][2];
ret[0][1][2]=src[1][2][2];ret[1][2][2]=src[2][1][2];ret[2][1][2]=src[1][0][2];ret[1][0][2]=src[0][1][2];
ret[0][0][1]=src[0][2][1];ret[2][0][1]=src[0][0][1];ret[2][2][1]=src[2][0][1];ret[0][2][1]=src[2][2][1];
ret[0][1][0]=src[1][2][0];ret[1][2][0]=src[2][1][0];ret[2][1][0]=src[1][0][0];ret[1][0][0]=src[0][1][0];return ret}
function ver(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][2-y][x] = src[z][y][x];}}}  return ret}
function lon(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[2-z][y][x] = src[z][y][x];}}}  return ret}
function lat(src){ var ret = mk3Space(); for(var z=0; z<3; z++){ for(var y=0; y<3; y++){ for(var x=0; x<3; x++){
	ret[z][y][2-x] = src[z][y][x];}}}  return ret}
function orientRelSpace(t, relSpace){ switch(t.ni){
	case "iSTR": relSpace =connectSpaces( t.absSpace, tor(lon(lat(relSpace)))); break;
	case "iSTC": relSpace =connectSpaces( t.absSpace, tor(lat(relSpace))); 		break;
	case "eSTR": relSpace =connectSpaces( t.absSpace, tor(lon(relSpace))); 		break;
	case "eSTC": relSpace =connectSpaces( t.absSpace, tor(relSpace)); 			break;
	case "iNFR": relSpace =connectSpaces( t.absSpace, rot(lon(lat(relSpace)))); break;
	case "iNFC": relSpace =connectSpaces( t.absSpace, rot(lat(relSpace))); 		break;
	case "eNFR": relSpace =connectSpaces( t.absSpace, rot(lon(relSpace))); 		break;
	case "eNFC": relSpace =connectSpaces( t.absSpace, rot(relSpace)); 			break;
	case "iSFR": relSpace =connectSpaces( t.absSpace, lon(lat(ver(relSpace)))); break;
	case "iSFC": relSpace =connectSpaces( t.absSpace, lat(ver(relSpace))); 		break;
	case "eSFR": relSpace =connectSpaces( t.absSpace, lon(ver(relSpace))); 		break;
	case "eSFC": relSpace =connectSpaces( t.absSpace, ver(relSpace)); 			break;
	case "iNTC": relSpace =connectSpaces( t.absSpace, lon(lat(relSpace))); 		break;
	case "iNTR": relSpace =connectSpaces( t.absSpace, lat(relSpace)); 			break;
	case "eNTC": relSpace =connectSpaces( t.absSpace, lon(relSpace)); 			break;
	case "eNTR": relSpace =connectSpaces( t.absSpace, relSpace)}return relSpace}
function orientCircuitsAbsolutely(t){ var c=null;
	if( t.ie){ 	c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi =  c.rDi})}
	else{ 		c =t.cRs.filter(o => o.lat); 		c.forEach( function(c){ c.aDi = -c.rDi})}
	if( t.sn){ 	c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi =  c.rDi});
		if(!t.rc){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}
		else{		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}}
	else{		c =t.cRs.filter(o => o.ver); 		c.forEach( function(c){ c.aDi = -c.rDi});
		if(!t.rc){ 	c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi =  c.rDi})}
		else{ 		c =t.cRs.filter(o => o.lon); 		c.forEach( function(c){ c.aDi = -c.rDi})}}return t.cRs}
// SAISINKO LAUTASELLISEN RETURNAMUUSSIA
function precalcSocionicsEssence( fNs,cRs){ var space =mk3Space();
	space[2][0][2] =fNs.find( o => o.ni =="f1");	
	space[2][0][0] =fNs.find( o => o.ni =="f2");	
	space[0][0][0] =fNs.find( o => o.ni =="f3");	
	space[0][0][2] =fNs.find( o => o.ni =="f4");	
	space[0][2][2] =fNs.find( o => o.ni =="f5");	
	space[0][2][0] =fNs.find( o => o.ni =="f6");	
	space[2][2][0] =fNs.find( o => o.ni =="f7");	
	space[2][2][2] =fNs.find( o => o.ni =="f8");
	space[2][0][1] =orientCircuitRelatively( space,2,0,1,cRs.find( o => o.ni =="a"));
	space[1][0][0] =orientCircuitRelatively( space,1,0,0,cRs.find( o => o.ni =="g"));
	space[0][0][1] =orientCircuitRelatively( space,0,0,1,cRs.find( o => o.ni =="b"));
	space[0][1][2] =orientCircuitRelatively( space,0,1,2,cRs.find( o => o.ni =="i"));
	space[0][2][1] =orientCircuitRelatively( space,0,2,1,cRs.find( o => o.ni =="c"));
	space[1][2][0] =orientCircuitRelatively( space,1,2,0,cRs.find( o => o.ni =="h"));
	space[2][2][1] =orientCircuitRelatively( space,2,2,1,cRs.find( o => o.ni =="d"));
	space[1][2][2] =orientCircuitRelatively( space,1,2,2,cRs.find( o => o.ni =="e"));
	space[1][0][2] =orientCircuitRelatively( space,1,0,2,cRs.find( o => o.ni =="f"));
	space[2][1][0] =orientCircuitRelatively( space,2,1,0,cRs.find( o => o.ni =="k"));
	space[2][1][2] =orientCircuitRelatively( space,2,1,2,cRs.find( o => o.ni =="l"));
	space[0][1][0] =orientCircuitRelatively( space,0,1,0,cRs.find( o => o.ni =="j"));return space}
function orientCircuitRelatively(space,x,y,z,c){c.tRX=x;c.tRY=y;c.tRZ=z; c.tRx=x-1;c.tRy=y-1;c.tRz=z-1;
	if 		(c.lat)	{ c.acc =space[x][y][z -c.rDi]; c.pro =space[x][y][z +c.rDi]}
	else if (c.lon)	{ c.acc =space[x -c.rDi][y][z]; c.pro =space[x +c.rDi][y][z]}
	else 			{ c.acc =space[x][y -c.rDi][z]; c.pro =space[x][y +c.rDi][z]}return c}


function getDifferenceOfEssence(src,dst){ var r = {x: src.x -dst.x, y: src.y -dst.y, z: src.z -dst.z}; return r}
function getCoordinatesOfEssence(ni,src){
	for(var z=0; z<3; z++){
		for(var y=0; y<3; y++){
			for(var x=0; x<3; x++){
				if(src[x][y][z]){ if(src[x][y][z].ni == ni){ return { z:z, y:y, x:x}}}}}}}
function getNeighboursOfEssence(eX,eY,eZ,tY){ var r=[];
	var nX1 = eX+1; nX1 ==  3 ? nX1 = 0:true;
	var nX2 = eX-1; nX2 == -1 ? nX2 = 2:true;
	var nY1 = eY+1; nY1 ==  3 ? nY1 = 0:true;
	var nY2 = eY-1; nY2 == -1 ? nY2 = 2:true;
	//var nZ1 = eZ+1; nZ1 ==  3 ? nZ1 = 0:true;
	//var nZ2 = eZ-1; nZ2 == -1 ? nZ2 = 2:true;
	tY[nX1][eY][eZ] ? r.push(tY[nX1][eY][eZ]):true;
	tY[nX2][eY][eZ] ? r.push(tY[nX2][eY][eZ]):true;
	tY[eX][nY1][eZ] ? r.push(tY[eX][nY1][eZ]):true;
	tY[eX][nY2][eZ] ? r.push(tY[eX][nY2][eZ]):true;
	//tY[eX][eY][nZ1] ? r.push(tY[eX][eY][nZ1]):true;
	//tY[eX][eY][nZ2] ? r.push(tY[eX][eY][nZ2]):true;
	return r}


/*function Signal( subj){ mkSignal(this, subj, subj.presentSubjs, subj.awaySubjs, subj.presentPatts, subj.awayPatts)}
function mkSignal(o,subj,presentSubjs,awaySubjs,presentObjs,awayObjs){
	var subjs=sortByQuality( presentSubjs,awaySubjs);
	var patts=sortByQuality( presentPatts,awayPatts);
	var topic=maxByQuality() //äää
}*/


function precalcCircuits( seed,parent){ cRs =[]; var b =null;
	for(let n=0; n <OM.ab.cRsL; n++){ b =mkCircuit( seed[n],parent);cRs.push( b)}return cRs}
function mkCircuit( ni,parent){ var c =null; switch( ni){
	case "a" : c =new AL.Circuits.a( ni); inhCircuit( c,parent);return c;
	case "b" : c =new AL.Circuits.b( ni); inhCircuit( c,parent);return c;
	case "c" : c =new AL.Circuits.c( ni); inhCircuit( c,parent);return c;
	case "d" : c =new AL.Circuits.d( ni); inhCircuit( c,parent);return c;
	case "e" : c =new AL.Circuits.e( ni); inhCircuit( c,parent);return c;
	case "f" : c =new AL.Circuits.f( ni); inhCircuit( c,parent);return c;
	case "g" : c =new AL.Circuits.g( ni); inhCircuit( c,parent);return c;
	case "h" : c =new AL.Circuits.h( ni); inhCircuit( c,parent);return c;
	case "i" : c =new AL.Circuits.i( ni); inhCircuit( c,parent);return c;
	case "j" : c =new AL.Circuits.j( ni); inhCircuit( c,parent);return c;
	case "k" : c =new AL.Circuits.k( ni); inhCircuit( c,parent);return c;
	case "l" : c =new AL.Circuits.l( ni); inhCircuit( c,parent);return c}}
function inhCircuit( c,parent){ if(parent){ c.parent = parent.relSpace.find(o => o.ni === c.ni)}}
AL.Circuits={ seed:["a","b","c","d","e","f","g","h","i","j","k","l"],
	a:function( ni){ mkCircuit2( this,ni,false,true, false,-1,true, true, true ,"Love Detector" 			)},
	b:function( ni){ mkCircuit2( this,ni,false,true, false, 1,false,true, false,"Weakest Link" 				)},
	c:function( ni){ mkCircuit2( this,ni,false,true, false,-1,false,true, true ,"Challenge Detector" 		)},
	d:function( ni){ mkCircuit2( this,ni,false,true, false, 1,true, true, false,"Harvester" 				)},
	e:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,true ,"Ego" 						)},
	f:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,true ,"Super-Ego" 				)},
	g:function( ni){ mkCircuit2( this,ni,true, false,false,-1,false,false,false,"Super-Id" 					)},
	h:function( ni){ mkCircuit2( this,ni,true, false,false, 1,true, false,false,"Id" 						)},
	i:function( ni){ mkCircuit2( this,ni,false,false,true,  1,true, false,false,"Neurosomatic Circuit" 		)},
	j:function( ni){ mkCircuit2( this,ni,false,false,true, -1,false,false,true ,"Metaprogramming Circuit" 	)},
	k:function( ni){ mkCircuit2( this,ni,false,false,true, -1,true, false,true ,"Morphogenetic Circuit" 	)},
	l:function( ni){ mkCircuit2( this,ni,false,false,true,  1,false,false,false,"Meta-Ego" 					)}}
function mkCircuit2( 			 c,   ni,lon,  lat,  ver, rDi,str,  val,  mnt,  nI){
	c.lon=lon; c.lat=lat; c.ver=ver; c.rDi=rDi; c.ni=ni; c.nI=ni; c.str=str; c.val=val; c.mnt=mnt; c.nI=nI;
	c.count=0; c.K=0; c.V=0; c.spd={lon:0,lat:0,ver:0}}

function precalcFunctions(seed,parent){ fNs =[]; var b =null;
	for(let n=0; n <OM.ab.fNsL; n++){ b =mkFunc( seed[n],parent);fNs.push( b)}return fNs}
function mkFunc(ni,parent){ var f=null; switch( ni){
	case "f1" : f =new AL.Functions.f1( ni); inhFunc( f,parent);return f;
	case "f2" : f =new AL.Functions.f2( ni); inhFunc( f,parent);return f;
	case "f3" : f =new AL.Functions.f3( ni); inhFunc( f,parent);return f;
	case "f4" : f =new AL.Functions.f4( ni); inhFunc( f,parent);return f;
	case "f5" : f =new AL.Functions.f5( ni); inhFunc( f,parent);return f;
	case "f6" : f =new AL.Functions.f6( ni); inhFunc( f,parent);return f;
	case "f7" : f =new AL.Functions.f7( ni); inhFunc( f,parent);return f;
	case "f8" : f =new AL.Functions.f8( ni); inhFunc( f,parent);return f}}
function inhFunc(f,parent){ if(parent){ f.parent = parent.fNs.find(o => o.ni ==f.ni)}}
AL.Functions={ seed: ["f1","f2","f3","f4","f5","f6","f7","f8"],
	f1:function( ni){ mkFunc2(this,ni,"1",2,  2,  0,  false,false,true ,true, true, true, "Role Function" 			)},
	f2:function( ni){ mkFunc2(this,ni,"2",2,  0,  0,  false,true, false,true, false,false,"Suggestive Function" 	)},
	f3:function( ni){ mkFunc2(this,ni,"3",0,  0,  0,  false,true, false,false,false,true, "Mobilizing Function" 	)},
	f4:function( ni){ mkFunc2(this,ni,"4",0,  2,  0,  false,false,true ,false,true, false,"Vulnerable Function" 	)},
	f5:function( ni){ mkFunc2(this,ni,"5",0,  2,  2,  true, true, true ,true, false,true, "Leading Function" 		)},
	f6:function( ni){ mkFunc2(this,ni,"6",0,  0,  2,  true, false,false,true, true, false,"Ignoring Function" 		)},
	f7:function( ni){ mkFunc2(this,ni,"7",2,  0,  2,  true, false,false,false,true, true, "Demonstrative Function" 	)},
	f8:function( ni){ mkFunc2(this,ni,"8",2,  2,  2,  true, true, true ,false,false,false,"Creative Function" 		)}}
function mkFunc2( 			  f,   ni,ni2,tRX,tRZ,tRY,str,  val,  mnt  ,rXa,  rYa,  rZa,  nI){
	f.tRX=tRX;f.tRZ=tRZ;f.tRY=tRY; f.tRx=tRX-1;f.tRz=tRZ-1;f.tRy=tRY-1;
	f.ni=ni;f.ni2=ni2;f.nI=nI; f.str=str;f.val=val;f.mnt=mnt;f.rXa=rXa;f.rYa=rYa;f.rZa=rZa;
	f.count=0; f.V=0; f.K=0; f.spd={lon:0,lat:0,ver:0}}

function precalcSocionicsMetaphysics(iEs){ var s=mk3Space();
	s[0][0][0]=iEs.find(o=>o.ni=="Fi");	s[0][0][2]=iEs.find(o=>o.ni=="Fe");	
	s[2][0][0]=iEs.find(o=>o.ni=="Si");	s[2][0][2]=iEs.find(o=>o.ni=="Se");
	s[2][2][0]=iEs.find(o=>o.ni=="Ti");	s[2][2][2]=iEs.find(o=>o.ni=="Te");
	s[0][2][0]=iEs.find(o=>o.ni=="Ni");	s[0][2][2]=iEs.find(o=>o.ni=="Ne");return s}
function mk3Space(){ var space=[]; for(var z=0; z<=2;z++){space[z]=[];
										for(var y=0; y<=2; y++){space[z][y]=[];
											for(var x=0; x<=2; x++){space[z][y][x]=null}}} return space}



function precalcInformationElements( seed,parent,s){ var b =null; var iEs =[];
	for(let n=0; n <OM.ab.iEsL; n++){
		/*if( s){ if(s.tY.iEs.length >0){ return s.tY.iEs}}
		else{*/ 	 b =mkIe( seed[n],parent); iEs.push( b);
				if(s){ switch(seed[n]){ case "Fi" : s.Fi =b; break; case "Fe" : s.Fe =b; break;
										case "Si" : s.Si =b; break; case "Se" : s.Se =b; break;
										case "Ti" : s.Ti =b; break; case "Te" : s.Te =b; break;
										case "Ni" : s.Ni =b; break; case "Ne" : s.Ne =b; break}}}return iEs}
function mkIe(ni,parent){ var iE =null; switch( ni){
	case "Fi" : iE =new AL.InformationElements.Fi( ni); inhIe( iE,parent); return iE;
	case "Fe" : iE =new AL.InformationElements.Fe( ni); inhIe( iE,parent); return iE;
	case "Si" : iE =new AL.InformationElements.Si( ni); inhIe( iE,parent); return iE;
	case "Se" : iE =new AL.InformationElements.Se( ni); inhIe( iE,parent); return iE;
	case "Ti" : iE =new AL.InformationElements.Ti( ni); inhIe( iE,parent); return iE;
	case "Te" : iE =new AL.InformationElements.Te( ni); inhIe( iE,parent); return iE;
	case "Ni" : iE =new AL.InformationElements.Ni( ni); inhIe( iE,parent); return iE;
	case "Ne" : iE =new AL.InformationElements.Ne( ni); inhIe( iE,parent); return iE}}
function inhIe(iE,parent){ if(parent){ iE.parent = parent.iEs.find(o => o.ni ==iE.ni)}}
AL.InformationElements={ seed: ["Fi","Fe","Si","Se","Ti","Te","Ni","Ne"],
	Fi:function( ni){ mkIe2(this,false,false,false,ni)},
	Fe:function( ni){ mkIe2(this,false,false,true, ni)},
	Si:function( ni){ mkIe2(this,true, false,false,ni)},
	Se:function( ni){ mkIe2(this,true, false,true, ni)},
	Ti:function( ni){ mkIe2(this,true, true, false,ni)},
	Te:function( ni){ mkIe2(this,true, true, true, ni)},
	Ni:function( ni){ mkIe2(this,false,true, false,ni)},
	Ne:function( ni){ mkIe2(this,false,true, true, ni)}}
function mkIe2( o,mo,ul,ie,ni){ o.mo=mo;o.ul=ul;o.ie=ie;o.ni=ni;o.sQs=[];
	o.count=0;o.val=0}


/*
If femininity acquires a negative karma the result is neurosis?

Demiurge is a definable subject.

The attributes of demiurge approximate the attributes of the best subject known to the subject.

If the subject is always only the object of a better subject and has zero distance to the better subject, the attributes of demiurge for the subject turn identical to the attributes of the better subject unless an even better subject is known.

The demiurge is a container of perceptions with many forms, which may be called faces. The demiurge has a good face and a bad face.

The subject's selfishness is proportional to the subject's resemblance of the good face of the demiurge.
The subject's self-hate is proportional the the subject's resemblance of the bad face of the demiurge.
A perception associates to singular events.

The absolute minimum romantic complexity of good is 0 and absolute minimum classical complexity of good is 0 for females and 1 for males.
The absolute minimum romantic complexity of bad is 1 and absolute minimum classical complexity of bad is 0.

The subject's conception of God has a minimum and maximum romantic complexity and a minimum and maximum classical complexity. The minimums are negative and the maximums are positive. These are determined according to the subject's best experiences.

The subject's conception of the Devil also has minimum complexities which are determined according to worst experiences. 

If the subject believes God is definable, all singular events associate to the current faces of the demiurge.
If the subject believes God is undefinable, a singular event associates to the current faces of the demiurge only when the absolute amount of its value or karma equals resolution.
In the model, God contains the demiurge but also all sequences of events.
"God" and "demiurge" are absolute subjects. Their instances are constituents of the cognition of a relatively existing subject.
"Mother" and "father" are absolute subjects. For a relatively existing subject, "mother" is a personification of value and "father" a personification of karma.

Functions can iterate themselves without going via any circuit.

Several subsequent iterations of functions are the same mosaic event.

Using a func or circ costs 1 energy and using a reversed circ costs 2 energy.

Using a weak func or circ costs 1 energy.

Object display feature: show only one red-blue quadrant.

Dynamic Metaphysics

It's good if bad people start fearing the sound "Allah" because then they fwill dislike handling dinner table cutlery, so wealth won't make as happy as it otherwise woulnd.

Jos ei ymmärrä jotain mitä toinen sanoo, sen sanominen oli epäfem femi ilmentymä

If you have to wait in line with other people you will feel you are equal with them. If you've only waited in line with white people this will make the company of non-white people feel better.

If signal is in circuit the circuit is always reversed?

subjects make intension first, objects make extension first? accepting subject function makes extensions and producing subject fuction makes intensions? accepting object function makes intensions and producing object function makes extensions? circuit swaps intension and extension?

***
*/

AL.Origins ={ seed:["Allah",
					"Monad",
					"Yahweh",
					"Nothing",
					"Kali"],
	Allah 	:function(ni){ mkOrigin2( this,ni,true, false)},
	Monad 	:function(ni){ mkOrigin2( this,ni,true, false,"MAS","MAS")},
	Yahweh 	:function(ni){ mkOrigin2( this,ni,true, true)},
	Nothing :function(ni){ mkOrigin2( this,ni,false,false)},
	Kali 	:function(ni){ mkOrigin2( this,ni,true, true, "FEM","FEM")}};
function mkOrigin(ni,parent){ var O =null; switch(ni){
	case "Allah"  :O=new AL.Origins.Allah( ni); 	inhOrigin( O,parent);return O;
	case "Monad"  :O=new AL.Origins.Monad( ni); 	inhOrigin( O,parent);return O;
	case "Yahweh" :O=new AL.Origins.Yahweh( ni);	inhOrigin( O,parent);return O;
	case "Kali"   :O=new AL.Origins.Kali( ni); 		inhOrigin( O,parent);return O;
	case "Nothing":O=new AL.Origins.Nothing( ni); 	inhOrigin( O,parent);return O}}
function mkOrigin2(o,ni,subj,definable,sex,gnd){
	o.ni =ni; o.definable =definable; o.subj=subj;
	if( subj){ 		o.gnd =gnd; o.sex =sex}
	if( definable){ o.tYs =[]; o.mDs =[]; o.pMs =[]; o.gNs =[]; o.sXs =[]}
	else{ 			o.tYs=null;o.mDs=null;o.pMs=null;o.gNs=null;o.sXs=null}}
function precalcOrigins( seed,parent){ a =[]; var b =null;
	for(let n=0; n <OM.ab.originsL; n++){ b =mkOrigin( seed[n],parent); a.push( b)}return a}
function inhOrigin(O,parent){ if(parent){ O.parent = parent.origins.find(o => o.ni ==O.ni)}}

AL.BinaryGenders ={ seed:["Feminine","Neutral","Masculine"],
	Feminine: 	function(ni){ mkBinaryGender2( this,ni,false)},
	Neutral: 	function(ni){ mkBinaryGender2( this,ni,undefined)},
	Masculine: 	function(ni){ mkBinaryGender2( this,ni,true)}}
function mkBinaryGender(ni){ var o =null; switch(ni){
	case "Feminine" :o =new AL.BinaryGenders.Feminine(ni); 	inhBinaryGender( o,parent);return o;
	case "Neutral" 	:o =new AL.BinaryGenders.Neutral(ni); 	inhBinaryGender( o,parent);return o;
	case "Masculine":o =new AL.BinaryGenders.Masculine(ni); inhBinaryGender( o,parent);return o}}
function mkBinaryGender2(o,ni,masculine){ this.ni=ni;switch(masculine){ case undefined 	:o.masculine =undefined;
																		case false 		:o.masculine =false;
																		case true 		:o.masculine =true}}


/*AL.Subjects ={ seed:["Allah","God","Yahweh","Satan", //the gender of allah is undefined, gender of yahweh is fluid
	"Femininity","Masculinity","Adults","Children","Pure","Hejssans","Islam","Kafirs","Culture","Logic","Subjectivity","Objectivity",
	"Best","Average","Median",
	"Best Human","Mr. Best","Mrs. Best","Best Adult","Best Child","Best Pure","Best Hejssan","Best Muslim","Best Kafir","Best Man","Best Woman","Best Boy","Best Girl", //cultural
	"Manhood","Womanhood","Boyhood","Girlhood", //logical
	"The Man","The Woman","The Boy","The Girl", //subjective
	"King of World","Queen of World","Prince of World","Princess of World", //objective
	"King of Muslims","Queen of Muslims","Prince of Muslims","Princess of Muslims", //objective
	"King of Kafir","Queen of Kafir","Prince of Kafir","Princess of Kafir", //objective
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",
	"Median Human","Median Muslim","Median Kafir","Median Man","Median Woman","Median Boy","Median Girl",
	"Average Human","Average Muslim","Average Kafir","Average Man","Average Woman","Average Boy","Average Girl",],
	}*/






function getAvailableMoves(subj){
	var moves=mkBoolMatrix( 4*subj.sex.reso+2);
}
function initTurn(sim){
	sim.keySubj.sMp = mkNullMatrix( 2*AL.R);
	sim.availableMoves = getAvailableMoves(sim.keySubj);
	for(var n=0; n<sim.keySubj.subjs.length; n++){ populateMosaic(sim.keySubj, sim.keySubj.subjs[n])}}
function attemptMove( mX, mY, preview){
	if(!AL.keySubj.pGn.fem&&mX<2*AL.keySubj.pGn.reso+1&&mY<2*AL.keySubj.pGn.reso+1) {
		var mvX= mX -AL.keySubj.pGn.reso;
		var mvY= mY -AL.keySubj.pGn.reso;
		if( preview){ previewMove( AL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( AL.sim, mX, mY, mvX, mvY);return true }}
	else if(AL.keySubj.pGn.fem&& mX<2*AL.keySubj.pGn.reso+1&&mY>2*AL.keySubj.pGn.reso){
		var mvX=mX -AL.keySubj.pGn.reso;
		var mvY=mY -((AL.keySubj.pGn.reso*3)+1);
		if( preview){ previewMove( AL.sim, mX, mY, mvX, mvY);return false}
		else 		{ moveAgents ( AL.sim, mX, mY, mvX, mvY);return true }}
	return false}
function previewMove( sim, mX, mY, mvX, mvY){
	/*sim.personInTurn.mCpreview = sim.personInTurn.mCppl;*/
}
function moveAgents( sim, mX, mY, mvX, mvY){
	console.log("BREAK");
	sim.keySubj.agents.forEach(function(p){
		if(p.nI == sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*AL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*AL.keySubj.ni.bE.reso+2}}});
	sim.subjs.forEach(function(p){
		console.log(p.agents);
		if(p.nI == sim.keySubj.nI){ p.ni.mX =mX; p.ni.mY =mY}
		else{
			p.ni.mX+=mvX; while( p.ni.mX < 0){ p.ni.mX += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mX>= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mX -= 4*AL.keySubj.ni.bE.reso+2}
			p.ni.mY+=mvY; while( p.ni.mY < 0){ p.ni.mY += 4*AL.keySubj.ni.bE.reso+2}
			while( p.ni.mY >= 4*AL.keySubj.ni.bE.reso+2){ p.ni.mY -= 4*AL.keySubj.ni.bE.reso+2}}
		//precalcOthers(sim.people);
		/*p.ppl.forEach(function(P){
			if(P.ni.in == sim.personInTurn.ni.in){ P.ni.mX =mX; P.ni.mY =mY}
			else{
				P.ni.mX+=mvX; while( P.ni.mX < 0){ P.ni.mX += 4*AL.personInTurn.ni.bE.reso+2}
				while( P.ni.mX>= 4*AL.personInTurn.ni.bE.reso+2){ P.ni.mX -= 4*AL.personInTurn.ni.bE.reso+2}
				P.ni.mY+=mvY; while( P.ni.mY < 0){ P.ni.mY += 4*AL.personInTurn.ni.bE.reso+2}
				while( P.ni.mY >= 4*AL.personInTurn.ni.bE.reso+2){ P.ni.mY -= 4*AL.personInTurn.ni.bE.reso+2}}});*/
		});
	//var vX= mvX; 	var vY= -mvY;
	initTurn( AL.sim);
	draw();}

function populateMosaic(subj,obj){
	if(!Array.isArray(subj.sMp[ obj.mPy][obj.mPx])) { subj.sMp[ obj.mPy][obj.mPx]=[]}
	subj.sMp[ obj.mPy][obj.mPx].push(obj)}
function processSubTurn(sim,mX,mY){
	if(sim.subTurn<sim.subjs.length-1){
		sim.subTurn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	else{
		sim.subTurn=0;
		sim.turn++;
		sim.keySubj =sim.subjs[sim.subTurn]}
	AL.keySubj = sim.keySubj;
	precalcObjs( AL.sim);
	initTurn( AL.sim);
	draw();}
function startTurn( sim){ 
	//var opt =getNeighboursOfEssence
	//var b =new Event( sim,)
	}

function mkQueue( sim,subTurn){ var q =[];
	for( var n =0; n <sim.subjs.length; n++){ q.push( subjs[ n])} q =shuffle( q);
	sim.subTurn =subTurn;return q}
function queueNext( sim){ var b=null;
	for( var n =sim.subTurn; n <sim.subjsL; n++){
		if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}
	if( b ==null){ sim.turn++; sim.subTurn =0; sim.queue =mkQueue( sim);
		for( var n =sim.subTurn; n <sim.subjsL; n++){
			if( !sim.queue[n].obj && !sim.queue[n].away){ b =sim.queue[n]; sim.keySubj =b; sim.subTurn =n}}}
	if( b ==null){ b =[];
		for( var n =0; n <sim.subjsL; n++){ if(!sim.subjs[n].away){ b.push( sim.subjs[n])}}
		if( b.length >0){
			b =b[Math.floor(Math.random()*b.length)]; b.obj=false; sim.keySubj =b; //don't need to do this to turn objs into sbjs
			for( var n =0; n <sim.subjsL; n++){ if( sim.queue[n] ==b){ sim.subTurn =n}}}}}
function mkSim2(init, o,   subjs, 	 	subjsL, 	 evs, 	   evsL, 	  turn, 	 subTurn){
	if( init === true) {
						OM.re.simsL++;
						o.nI 		=OM.re.simsL;
						o.subjsL 	=0;
						o.subjs 	=[];
						o.queue 	=mkQueue( o.subjs);
						o.keySubj 	=o.queue[0];
						o.evs 		=[];
						o.turn 		=0;
						o.subTurn 	=0;
	}
	else{ 				
						OM.re.simsL++;
						o.nI 		=OM.re.simsL;
						o.subjsL 	=0;
						o.subjs 	=subjs.slice(0);
						o.queue 	=mkQueue( o.subjs, subTurn);
						o.evs 		=evs.slice(0);
						o.turn  	=turn;
						o.subTurn 	=subTurn;
	}
	OM.re.sims.push( o)}


function initVariables(){
				console.log( AL.sim);
				console.log( AL.subj);
				console.log( AL.sims);
				console.log( AL.subjs);
	//			AL.subjs 		=
				AL.pGn 			=AL.subj.pGn;
				AL.sGn 			=AL.subj.sGn;						
				AL.pPm 			=AL.subj.pPm;
				AL.sPm 			=AL.subj.sPm;
				AL.pMd 			=AL.subj.pMd;
				AL.sMd 			=AL.subj.sMd;
				AL.mP 			=AL.subj.mP;
				AL.pL 			=AL.subj.pL;

				AL.ni  			=AL.subj.ni;
				AL.tY 			=AL.subj.tY;
				AL.mD 			=AL.subj.mD;
				AL.sex  		=AL.subj.sex;
				AL.gnd  		=AL.subj.gnd;
				AL.pM 			=AL.subj.pM;
				AL.fac 			=AL.subj.tYl;
}
function initUserInterface(){
				AL.touched 		=false;

				AL.fesL 		=AL.fes.length;
				AL.sBToolsL 	=AL.sBTools.length;
				AL.tBToolsL 	=AL.tBTools.length;
				AL.lIToolsL 	=AL.lITools.length;

				AL.sBToolsP 	=[]; for( var n =0; n <AL.sBToolsL; n++){ AL.sBToolsP.push(false)}
				AL.tBToolsP 	=[]; for( var n =0; n <AL.tBToolsL; n++){ AL.tBToolsP.push(false)}
				AL.lIToolsP 	=[]; for( var n =0; n <AL.lIToolsL; n++){ AL.lIToolsP.push(false)}

				AL.sim 			=OM.re.sims[0];
				AL.turn 		=AL.sim.turn;
				AL.subTurn 		=AL.sim.subTurn;
				AL.subjs 		=AL.sim.subjs;
				AL.subjsL 		=AL.sim.subjsL;
				AL.keySubj 		=AL.sim.keySubj;
				AL.subj 		=AL.sim.keySubj;
				AL.queue 		=AL.sim.queue;

				AL.sBTunes[2] 	=AL.sim.subjsL;
				AL.sBTunes[3] 	=AL.sim.subjsL+1;
				}

function initSims(){ var sim =null; var subjs =null; var places =null; var patts =[];
				OM.re.PlacesL 	=OM.re.Places.seed.length;
				AL.sims =[]; 			AL.simsL =0;
				OM.re.sims =[]; 		OM.re.simsL =0;
				sim =new Sim( AL.r); 	AL.sim =sim;
				AL.sims.push( sim);		AL.simsL++;
				OM.re.sims.push( sim); 	OM.re.simsL++;
				sim.subjs 	=precalcDefaultSubjs();  				sim.subjsL =sim.subjs.length;
				sim.places 	=precalcDefaultPlaces( OM.re.Places.seed); 	sim.placesL=sim.places.length;
				putDefaultSubjsToDefaultPlaces( sim.subjs, sim.places);
				//patts 	=patts.concat.precalcDefaultPossessions( subjs);
				//patts 	=patts.concat.precalcDefault
				sim =configSim( sim,AL.simsL);
}
function configSim( o,simsL){
	o.finSubjs 	=[]; 	o.finSubjsL 	=0;
	o.sweSubjs 	=[]; 	o.sweSubjsL =0;
	for( var i =0; i <o.subjsL; i++){
		if( o.subjs[i].fin){
			o.finSubjs.push( o.subjs[i]);
			o.finSubjsL++;
			o.subjs[i].nI =(o.finSubjsL +9).toString( 36).toUpperCase()}
		else{
			o.sweSubjs.push( o.subjs[i]);
			o.sweSubjsL++;
			o.subjs[i].nI =(o.sweSubjsL +9).toString( 36)}
		o.subjs[i].subjs =o.subjs;
		mkSignal( o.subjs[i],"f5");
		mkOptions( o.subjs[i]);
		//subjs[i].present=getPresentPatts() //äää
	 }
	o.nI 	=AL.simsL +1;
	o.queue =o.subjs.slice(); o.queue =shuffle( o.queue); o.keySubj =o.queue[0]; //o.keySubj get first non-object from index
	//o.patts =patts; o.pattsL=patts.length;
	/*if( evs){ 		o.evs 		=evs}
	if( evsL){ 		o.evsL 		=evsL}
	if( turn){ 		o.turn 		=turn}
	if(subTurn){ 	o.subTurn 	=subTurn}*/
	return o}
function Sim( r){ mkSim( this,r)}
function mkSim( o,r){
	o.r =r; 		o.R = (2*r)+1; 	o.mR = 2*o.R;
	o.mP =mkNullMatrix
	o.subjs =[]; 	o.subjsL =0;
	o.evs =[]; 		o.evsL =0;
	o.turn =0; 		o.subTurn =0;
	o.queue =[]; 	o.keySubj =null;
	o.iEs 		= precalcInformationElements( AL.InformationElements.seed, OM.ab);
	o.absSpace 	= precalcSocionicsMetaphysics( o.iEs);
	o.fNs 		= precalcFunctions( AL.Functions.seed, OM.ab);
	o.cRs 		= precalcCircuits( AL.Circuits.seed, OM.ab);
	o.fAs 		= o.fNs.concat( o.cRs); 
	o.relSpace 	= precalcSocionicsEssence( o.fNs, o.cRs);
	o.tYs 		= precalcSociotypes( AL.Sociotypes.seed, OM.ab);

	o.sXs 		= precalcSexes( AL.Sexes.seed, OM.ab);
	o.gNs 		= precalcGenders( AL.Genders.seed, AL.pcReso, OM.ab);
	o.pMs 		= precalcPrimalMoods( AL.PrimalMoods.seed, OM.ab);
	o.mDs 		= precalcMoods( AL.Moods.seed, OM.ab);

	o.sQs 		= precalcScalarQualities( AL.ScalarQualities.seed, o.iEs, OM.ab);
	o.vQs 		= precalcVectorQualities( AL.VectorQualities.seed, o.sQs, OM.ab);
}

function initOntology(){
				OM.ab.iEsL 	=AL.InformationElements.seed.length;
				//OM.ab.iCsL 	=AL.InformationCompounds.seed.length;
				OM.ab.fNsL 	=AL.Functions.seed.length;
				OM.ab.cRsL 	=AL.Circuits.seed.length;
				OM.ab.tYsL 	=AL.Sociotypes.seed.length;

				OM.ab.sXsL 	=AL.Genders.seed.length;
				OM.ab.gNsL 	=AL.Sexes.seed.length;
				OM.ab.pMsL 	=AL.PrimalMoods.seed.length;
				OM.ab.mDsL 	=AL.Moods.seed.length;

				OM.ab.sQsL 	=AL.ScalarQualities.seed.length;
				OM.ab.vQsL 	=AL.VectorQualities.seed.length;

				OM.ab.originsL =AL.Origins.seed.length;


}
function precalc() { // 
						AL.R =2 *AL.r +1;
						initOntology();	
							
						OM.ab.iEs 		= precalcInformationElements( AL.InformationElements.seed);
						OM.ab.absSpace 	= precalcSocionicsMetaphysics( OM.ab.iEs);
						OM.ab.fNs 		= precalcFunctions( AL.Functions.seed);
						OM.ab.cRs 		= precalcCircuits( AL.Circuits.seed);
						OM.ab.fAs 		= OM.ab.fNs.concat( OM.ab.cRs);
						OM.ab.relSpace 	= precalcSocionicsEssence( OM.ab.fNs, OM.ab.cRs);
						OM.ab.tYs 		= precalcSociotypes( AL.Sociotypes.seed);
							 
						OM.ab.sXs 		= precalcSexes( AL.Sexes.seed);
						OM.ab.gNs 		= precalcGenders( AL.Genders.seed, AL.pcReso);
						OM.ab.pMs 		= precalcPrimalMoods( AL.PrimalMoods.seed);
						OM.ab.mDs 		= precalcMoods( AL.Moods.seed);
 
						OM.ab.sQs 		= precalcScalarQualities( AL.ScalarQualities.seed, OM.ab.iEs);
						OM.ab.vQs 		= precalcVectorQualities( AL.VectorQualities.seed, OM.ab.sQs);	
 
						OM.ab.origins 	= precalcOrigins( AL.Origins.seed);

						initSims();
						initUserInterface();
						initVariables();
						initTurn( AL.sim);

						console.log( OM);
						console.log( AL);
}
precalc();
</script></head>
<body>
	<script>(function() { predraw(); draw();})();</script>
	<script type="text/javascript">var sc_project=863932;var sc_invisible=1;var sc_security="0ed0c038";</script>
	<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
	<noscript><div class="statcounter"><a title="Web Analytics Made Easy - StatCounter" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="//c.statcounter.com/863932/0/0ed0c038/1/" alt="Web Analytics Made Easy - StatCounter"></a></div></noscript>
</body></html>
